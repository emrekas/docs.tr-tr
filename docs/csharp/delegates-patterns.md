---
title: Temsilciler için ortak desenler
description: Güçlü bir bağ bileşenleriniz arasındaki önlemek için kodunuzda temsilcileri kullanma için ortak desenler hakkında bilgi edinin.
ms.date: 06/20/2016
ms.assetid: 0ff8fdfd-6a11-4327-b061-0f2526f35b43
ms.openlocfilehash: ea0e0b7af361b76c4b46b0a180e07b44c1fa07e1
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/08/2019
ms.locfileid: "59095704"
---
# <a name="common-patterns-for-delegates"></a><span data-ttu-id="196bd-103">Temsilciler için ortak desenler</span><span class="sxs-lookup"><span data-stu-id="196bd-103">Common Patterns for Delegates</span></span>

[<span data-ttu-id="196bd-104">Önceki</span><span class="sxs-lookup"><span data-stu-id="196bd-104">Previous</span></span>](delegates-strongly-typed.md)

<span data-ttu-id="196bd-105">Temsilciler, bileşenler arasındaki en az bir bağlantı içeren yazılım tasarımı sağlayan bir mekanizma sağlar.</span><span class="sxs-lookup"><span data-stu-id="196bd-105">Delegates provide a mechanism that enables software designs involving minimal coupling between components.</span></span>

<span data-ttu-id="196bd-106">Bu tür bir tasarım için mükemmel örnek LINQ verilebilir.</span><span class="sxs-lookup"><span data-stu-id="196bd-106">One excellent example for this kind of design is LINQ.</span></span> <span data-ttu-id="196bd-107">LINQ Sorgu ifade deseninin tüm özellikleri için temsilcileri kullanır.</span><span class="sxs-lookup"><span data-stu-id="196bd-107">The LINQ Query Expression Pattern relies on delegates for all of its features.</span></span> <span data-ttu-id="196bd-108">Bu basit örnek göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="196bd-108">Consider this simple example:</span></span>

```csharp
var smallNumbers = numbers.Where(n => n < 10);
```

<span data-ttu-id="196bd-109">Bu, yalnızca'den az değerin 10 sayılara dizisini filtreler.</span><span class="sxs-lookup"><span data-stu-id="196bd-109">This filters the sequence of numbers to only those less than the value 10.</span></span>
<span data-ttu-id="196bd-110">`Where` Filtre hangi öğelerin bir dizisi geçirin belirleyen bir temsilci yöntemi kullanır.</span><span class="sxs-lookup"><span data-stu-id="196bd-110">The `Where` method uses a delegate that determines which elements of a sequence pass the filter.</span></span> <span data-ttu-id="196bd-111">Bir LINQ sorgu oluşturduğunuzda, bu belirli bir amaca yönelik temsilci uygulamasını sağlayın.</span><span class="sxs-lookup"><span data-stu-id="196bd-111">When you create a LINQ query, you supply the implementation of the delegate for this specific purpose.</span></span>

<span data-ttu-id="196bd-112">Prototip için Where yöntemdir:</span><span class="sxs-lookup"><span data-stu-id="196bd-112">The prototype for the Where method is:</span></span>

```csharp
public static IEnumerable<TSource> Where<TSource> (this IEnumerable<TSource> source, Func<TSource, bool> predicate);
```

<span data-ttu-id="196bd-113">Bu örnekte, LINQ parçası olan tüm yöntemleri ile tekrarlanır.</span><span class="sxs-lookup"><span data-stu-id="196bd-113">This example is repeated with all the methods that are part of LINQ.</span></span> <span data-ttu-id="196bd-114">Bunların tümü, özel bir sorgu tarafından yönetilen kod için temsilciler dayanır.</span><span class="sxs-lookup"><span data-stu-id="196bd-114">They all rely on delegates for the code that manages the specific query.</span></span> <span data-ttu-id="196bd-115">Bu API tasarım öğrenin ve anlaşılmasını çok güçlü bir desendir.</span><span class="sxs-lookup"><span data-stu-id="196bd-115">This API design pattern is a very powerful one to learn and understand.</span></span>

<span data-ttu-id="196bd-116">Bu basit örnekte, nasıl temsilciler bileşenleri arasında çok az bağlantı gerektiren gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="196bd-116">This simple example illustrates how delegates require very little coupling between components.</span></span> <span data-ttu-id="196bd-117">Belirli bir taban sınıftan türetilen bir sınıf oluşturmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="196bd-117">You don't need to create a class that derives from a particular base class.</span></span> <span data-ttu-id="196bd-118">Belirli bir arabirim uygulamak gerekmez.</span><span class="sxs-lookup"><span data-stu-id="196bd-118">You don't need to implement a specific interface.</span></span>
<span data-ttu-id="196bd-119">Eldeki göreve temel bir yöntemin uygulanmasını sağlamak için tek gereksinim olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="196bd-119">The only requirement is to provide the implementation of one method that is fundamental to the task at hand.</span></span>

## <a name="building-your-own-components-with-delegates"></a><span data-ttu-id="196bd-120">Temsilciler ile kendi bileşenleri oluşturma</span><span class="sxs-lookup"><span data-stu-id="196bd-120">Building Your Own Components with Delegates</span></span>

<span data-ttu-id="196bd-121">Temsilciler üzerinde dayanan bir tasarım kullanarak bir bileşen oluşturarak bu örneği temel oluşturalım.</span><span class="sxs-lookup"><span data-stu-id="196bd-121">Let's build on that example by creating a component using a design that relies on delegates.</span></span>

<span data-ttu-id="196bd-122">Günlük iletileri için büyük bir sistemde kullanılabilir bir bileşen tanımlayalım.</span><span class="sxs-lookup"><span data-stu-id="196bd-122">Let's define a component that could be used for log messages in a large system.</span></span> <span data-ttu-id="196bd-123">Kitaplığı bileşenlerini birden çok farklı platformlarda birçok farklı ortamlarda kullanılabiliyordu.</span><span class="sxs-lookup"><span data-stu-id="196bd-123">The library components could be used in many different environments, on multiple different platforms.</span></span> <span data-ttu-id="196bd-124">Birçok ortak özellik günlükleri yöneten bileşende vardır.</span><span class="sxs-lookup"><span data-stu-id="196bd-124">There are a lot of common features in the component that manages the logs.</span></span> <span data-ttu-id="196bd-125">Sistemde bir bileşenden alınan iletileri kabul etmek gerekir.</span><span class="sxs-lookup"><span data-stu-id="196bd-125">It will need to accept messages from any component in the system.</span></span> <span data-ttu-id="196bd-126">Bu iletileri çekirdek bileşeni yönetebilirsiniz farklı önceliklere sahip olur.</span><span class="sxs-lookup"><span data-stu-id="196bd-126">Those messages will have different priorities, which the core component can manage.</span></span> <span data-ttu-id="196bd-127">İletileri zaman damgası, son arşivlenmiş biçiminde olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="196bd-127">The messages should have timestamps in their final archived form.</span></span> <span data-ttu-id="196bd-128">Daha Gelişmiş senaryolar için kaynak bileşen tarafından iletileri filtre uygulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="196bd-128">For more advanced scenarios, you could filter messages by the source component.</span></span>

<span data-ttu-id="196bd-129">Sık sık değişen özelliği tek bir yönüne yoktur: iletileri yazıldığı.</span><span class="sxs-lookup"><span data-stu-id="196bd-129">There is one aspect of the feature that will change often: where messages are written.</span></span> <span data-ttu-id="196bd-130">Bazı ortamlarda oldukları hata konsola yazılabilir.</span><span class="sxs-lookup"><span data-stu-id="196bd-130">In some environments, they may be written to the error console.</span></span> <span data-ttu-id="196bd-131">Bazı durumlarda, bir dosya.</span><span class="sxs-lookup"><span data-stu-id="196bd-131">In others, a file.</span></span> <span data-ttu-id="196bd-132">Veritabanı depolama, işletim sistemi olay günlüklerini veya başka bir belge depolama diğer olanaklar içerir.</span><span class="sxs-lookup"><span data-stu-id="196bd-132">Other possibilities include database storage, OS event logs, or other document storage.</span></span>

<span data-ttu-id="196bd-133">Farklı senaryolarda kullanılabilecek çıkış birleşimleri de vardır.</span><span class="sxs-lookup"><span data-stu-id="196bd-133">There are also combinations of output that might be used in different scenarios.</span></span> <span data-ttu-id="196bd-134">İletileri konsola ve bir dosyaya yazmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="196bd-134">You may want to write messages to the console and to a file.</span></span>

<span data-ttu-id="196bd-135">Temsilciler hakkında temel bir tasarım büyük ölçüde esneklik sağlar ve gelecekte eklenebilir destek depolama mekanizmasını kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="196bd-135">A design based on delegates will provide a great deal of flexibility, and make it easy to support storage mechanisms that may be added in the future.</span></span>

<span data-ttu-id="196bd-136">Bu tasarım, bir sanal olmayan, hatta sınıfı korumalı birincil günlük bileşeni olabilir.</span><span class="sxs-lookup"><span data-stu-id="196bd-136">Under this design, the primary log component can be a non-virtual, even sealed class.</span></span> <span data-ttu-id="196bd-137">Herhangi bir kümesi için farklı depolama medyası ileti yazmak için temsilciler takabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="196bd-137">You can plug in any set of delegates to write the messages to different storage media.</span></span> <span data-ttu-id="196bd-138">Çok noktaya yayın temsilcileri için yerleşik destek, iletileri birden fazla konuma (dosya ve bir konsoldan) burada yazılmalıdır destek senaryoları kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="196bd-138">The built in support for multicast delegates makes it easy to support scenarios where messages must be written to multiple locations (a file, and a console).</span></span>

## <a name="a-first-implementation"></a><span data-ttu-id="196bd-139">İlk uygulama</span><span class="sxs-lookup"><span data-stu-id="196bd-139">A First Implementation</span></span>

<span data-ttu-id="196bd-140">Küçük başlayalım: ilk uygulama yeni iletileri kabul edin ve herhangi bir ekli temsilci kullanarak bunları yazın.</span><span class="sxs-lookup"><span data-stu-id="196bd-140">Let's start small: the initial implementation will accept new messages, and write them using any attached delegate.</span></span> <span data-ttu-id="196bd-141">İletileri konsola bir temsilci ile başlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="196bd-141">You can start with one delegate that writes messages to the console.</span></span>

[!code-csharp[LoggerImplementation](../../samples/csharp/delegates-and-events/Logger.cs#FirstImplementation "A first Logger implementation.")]

<span data-ttu-id="196bd-142">Yukarıdaki statik sınıf çalışabileceği en basit bir şeydir.</span><span class="sxs-lookup"><span data-stu-id="196bd-142">The static class above is the simplest thing that can work.</span></span> <span data-ttu-id="196bd-143">İletileri konsola yazar yöntemi için tek uygulama yazmak gerekir:</span><span class="sxs-lookup"><span data-stu-id="196bd-143">We need to write the single implementation for the method that writes messages to the console:</span></span> 

[!code-csharp[LogToConsole](../../samples/csharp/delegates-and-events/Program.cs#LogToConsole "A Console logger.")]

<span data-ttu-id="196bd-144">Son olarak, temsilci temsilcinin Günlükçü içinde bildirilen WriteMessage ekleyerek bağlama yapmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="196bd-144">Finally, you need to hook up the delegate by attaching it to the WriteMessage delegate declared in the logger:</span></span>

[!code-csharp[ConnectDelegate](../../samples/csharp/delegates-and-events/Program.cs#ConnectDelegate "Connect to the delegate")]

## <a name="practices"></a><span data-ttu-id="196bd-145">Uygulamalar</span><span class="sxs-lookup"><span data-stu-id="196bd-145">Practices</span></span>

<span data-ttu-id="196bd-146">Örneğimizi şimdiye de oldukça basittir, ancak bu yine de temsilciler içeren tasarımları için önemli yönergeleri bazılarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="196bd-146">Our sample so far is fairly simple, but it still demonstrates some of the important guidelines for designs involving delegates.</span></span>

<span data-ttu-id="196bd-147">Çekirdek Framework'te tanımlanan temsilci türleri, temsilciler ile çalışmak kullanıcıların kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="196bd-147">Using the delegate types defined in the Core Framework makes it easier for users to work with the delegates.</span></span> <span data-ttu-id="196bd-148">Yeni türleri tanımlamanız gerekmez ve kitaplığınızı kullanan geliştiriciler yeni, özelleştirilmiş temsilci türleri öğrenmek gerekmez.</span><span class="sxs-lookup"><span data-stu-id="196bd-148">You don't need to define new types, and developers using your library do not need to learn new, specialized delegate types.</span></span>

<span data-ttu-id="196bd-149">En düşük düzeyde ve kadar esnek kullanılan arabirimlere şunlardır: Yeni bir çıktı Günlükçü oluşturmak için bir yöntem oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="196bd-149">The interfaces used are as minimal and as flexible as possible: To create a new output logger, you must create one method.</span></span> <span data-ttu-id="196bd-150">Bu yöntem, statik bir yöntem veya bir örnek yöntemi olabilir.</span><span class="sxs-lookup"><span data-stu-id="196bd-150">That method may be a static method, or an instance method.</span></span> <span data-ttu-id="196bd-151">Bu erişime sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="196bd-151">It may have any access.</span></span>

## <a name="formatting-output"></a><span data-ttu-id="196bd-152">Çıktı biçimlendirme</span><span class="sxs-lookup"><span data-stu-id="196bd-152">Formatting Output</span></span>

<span data-ttu-id="196bd-153">Bu ilk sürümü bit daha sağlam ve diğer günlük mekanizmaları oluşturmayı başlatın olalım.</span><span class="sxs-lookup"><span data-stu-id="196bd-153">Let's make this first version a bit more robust, and then start creating other logging mechanisms.</span></span>

<span data-ttu-id="196bd-154">Ardından, bazı bağımsız değişkenler ekleyelim `LogMessage()` yöntemi, böylece günlük sınıfınıza daha fazla yapılandırılmış iletileri oluşturur:</span><span class="sxs-lookup"><span data-stu-id="196bd-154">Next, let's add a few arguments to the `LogMessage()` method so that your log class creates more structured messages:</span></span>

[!code-csharp[Severity](../../samples/csharp/delegates-and-events/Logger.cs#Severity "Define severities")]
[!code-csharp[NextLogger](../../samples/csharp/delegates-and-events/Logger.cs#LoggerTwo "Refine the Logger")]

<span data-ttu-id="196bd-155">Ardından, olalım kullanan `Severity` ' ına gönderilen iletileri filtrelemek için bağımsız değişken çıkış.</span><span class="sxs-lookup"><span data-stu-id="196bd-155">Next, let's make use of that `Severity` argument to filter the messages that are sent to the log's output.</span></span> 

[!code-csharp[FinalLogger](../../samples/csharp/delegates-and-events/Logger.cs#LoggerFinal "Finish the Logger")]

## <a name="practices"></a><span data-ttu-id="196bd-156">Uygulamalar</span><span class="sxs-lookup"><span data-stu-id="196bd-156">Practices</span></span>

<span data-ttu-id="196bd-157">Günlük kaydı altyapısı için yeni özellikler ekledik.</span><span class="sxs-lookup"><span data-stu-id="196bd-157">You've added new features to the logging infrastructure.</span></span> <span data-ttu-id="196bd-158">Günlükçü bileşen herhangi bir çıktı mekanizma gevşek çok sıkı bağlı olduğundan, bu yeni özellikleri, herhangi bir Günlükçü temsilci uygulayan kod herhangi bir etkisi eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="196bd-158">Because the logger component is very loosely coupled to any output mechanism, these new features can be added with no impact on any of the code implementing the logger delegate.</span></span>

<span data-ttu-id="196bd-159">Bu oluşturmaya devam etmek gibi daha fazla örnek nasıl bu sıkı bağ sitenin herhangi bir değişiklik yapmadan bölümlerini diğer konumlara güncelleştirme esneklik sağladığını görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="196bd-159">As you keep building this, you'll see more examples of how this loose coupling enables greater flexibility in updating parts of the site without any changes to other locations.</span></span> <span data-ttu-id="196bd-160">Aslında, daha büyük bir uygulamada Günlükçü çıktı sınıfları farklı bir derlemede olması ve bile yeniden derlenmesi gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="196bd-160">In fact, in a larger application, the logger output classes might be in a different assembly, and not even need to be rebuilt.</span></span>

## <a name="building-a-second-output-engine"></a><span data-ttu-id="196bd-161">İkinci bir çıkış altyapısı oluşturma</span><span class="sxs-lookup"><span data-stu-id="196bd-161">Building a Second Output Engine</span></span>

<span data-ttu-id="196bd-162">Günlük bileşeni de kullanıma sunulacaktır.</span><span class="sxs-lookup"><span data-stu-id="196bd-162">The Log component is coming along well.</span></span> <span data-ttu-id="196bd-163">İletiler bir dosyaya kaydeden bir daha fazla çıkış altyapısı ekleyelim.</span><span class="sxs-lookup"><span data-stu-id="196bd-163">Let's add one more output engine that logs messages to a file.</span></span> <span data-ttu-id="196bd-164">Bu işlem biraz daha karmaşık bir çıkış altyapısı olacaktır.</span><span class="sxs-lookup"><span data-stu-id="196bd-164">This will be a slightly more involved output engine.</span></span> <span data-ttu-id="196bd-165">Bu dosya işlemlerini kapsüller ve sağlar dosyanın her zaman her Yazımdan sonra kapalı sınıf olacaktır.</span><span class="sxs-lookup"><span data-stu-id="196bd-165">It will be a class that encapsulates the file operations, and ensures that the file is always closed after each write.</span></span> <span data-ttu-id="196bd-166">Sağlar, tüm veri Temizlenen her ileti oluşturulduktan sonra diske.</span><span class="sxs-lookup"><span data-stu-id="196bd-166">That ensures that all the data is flushed to disk after each message is generated.</span></span>

<span data-ttu-id="196bd-167">Bu dosya tabanlı Günlükçü şu şekildedir:</span><span class="sxs-lookup"><span data-stu-id="196bd-167">Here is that file based logger:</span></span>

[!code-csharp[FileLogger](../../samples/csharp/delegates-and-events/FileLogger.cs#FileLogger "Log to files")]

<span data-ttu-id="196bd-168">Bu sınıf oluşturduktan sonra örneği oluşturabilir ve bunu kendi LogMessage yöntemi Günlükçü bileşenine ekler:</span><span class="sxs-lookup"><span data-stu-id="196bd-168">Once you've created this class, you can instantiate it and it attaches its LogMessage method to the Logger component:</span></span>

[!code-csharp[FileLogger](../../samples/csharp/delegates-and-events/Program.cs#FileLogger "Log to files")]

<span data-ttu-id="196bd-169">Bu iki birbirini dışlamaz.</span><span class="sxs-lookup"><span data-stu-id="196bd-169">These two are not mutually exclusive.</span></span> <span data-ttu-id="196bd-170">Her iki günlük yöntemlerini ve iletileri konsolu ve bir dosya oluşturur:</span><span class="sxs-lookup"><span data-stu-id="196bd-170">You could attach both log methods and generate messages to the console and a file:</span></span>

```csharp
var fileOutput = new FileLogger("log.txt");
Logger.WriteMessage += LogToConsole;
```

<span data-ttu-id="196bd-171">Daha sonra aynı uygulamada bile sisteme herhangi bir sorun olmadan temsilcileri birini kaldırabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="196bd-171">Later, even in the same application, you can remove one of the delegates without any other issues to the system:</span></span>

```csharp
Logger.WriteMessage -= LogToConsole;
```

## <a name="practices"></a><span data-ttu-id="196bd-172">Uygulamalar</span><span class="sxs-lookup"><span data-stu-id="196bd-172">Practices</span></span>

<span data-ttu-id="196bd-173">Şimdi, günlük alt sistemi için ikinci bir çıkış işleyicisi ekledik.</span><span class="sxs-lookup"><span data-stu-id="196bd-173">Now, you've added a second output handler for the logging sub-system.</span></span>
<span data-ttu-id="196bd-174">Bu bir dosya sistemi doğru desteklemek için biraz daha fazla altyapı gerekir.</span><span class="sxs-lookup"><span data-stu-id="196bd-174">This one needs a bit more infrastructure to correctly support the file system.</span></span> <span data-ttu-id="196bd-175">Bir örnek yöntemi temsilcisidir.</span><span class="sxs-lookup"><span data-stu-id="196bd-175">The delegate is an instance method.</span></span> <span data-ttu-id="196bd-176">Bu aynı zamanda özel bir yöntemdir.</span><span class="sxs-lookup"><span data-stu-id="196bd-176">It's also a private method.</span></span>
<span data-ttu-id="196bd-177">Temsilci altyapıyı temsilcileri bağlanabilir olduğundan daha büyük düzeyde erişilebilirlik için gerek yoktur.</span><span class="sxs-lookup"><span data-stu-id="196bd-177">There's no need for greater accessibility because the delegate infrastructure can connect the delegates.</span></span>

<span data-ttu-id="196bd-178">İkinci olarak, temsilci tabanlı tasarım, ek bir kod olmadan birden çok çıktı yöntemlerini sağlar.</span><span class="sxs-lookup"><span data-stu-id="196bd-178">Second, the delegate-based design enables multiple output methods without any extra code.</span></span> <span data-ttu-id="196bd-179">Birden çok çıktı yöntemlerini desteklemek için ek altyapı oluşturmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="196bd-179">You don't need to build any additional infrastructure to support multiple output methods.</span></span> <span data-ttu-id="196bd-180">Bunlar yalnızca başka bir yöntemi çağırma listesi haline gelir.</span><span class="sxs-lookup"><span data-stu-id="196bd-180">They simply become another method on the invocation list.</span></span>

<span data-ttu-id="196bd-181">Özel kodu çıktı yöntemi günlük dosyasında dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="196bd-181">Pay special attention to the code in the file logging output method.</span></span> <span data-ttu-id="196bd-182">Özel durumlar oluşturmadığını emin olmak için kodlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="196bd-182">It is coded to ensure that it does not throw any exceptions.</span></span> <span data-ttu-id="196bd-183">Bu her zaman kesinlikle gerekli olmasa da, bunu genellikle iyi bir uygulamadır.</span><span class="sxs-lookup"><span data-stu-id="196bd-183">While this isn't always strictly necessary, it's often a good practice.</span></span> <span data-ttu-id="196bd-184">Temsilci yöntemlerine ya da bir özel durum oluşturursa, çağrıda bulunan kalan temsilcileri çağrılan olmaz.</span><span class="sxs-lookup"><span data-stu-id="196bd-184">If either of the delegate methods throws an exception, the remaining delegates that are on the invocation won't be invoked.</span></span>

<span data-ttu-id="196bd-185">Son Not olarak, dosya günlükçüsünün, açma ve kapatma dosyada her günlük iletisi tarafından kaynaklarını yönetmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="196bd-185">As a last note, the file logger must manage its resources by opening and closing the file on each log message.</span></span> <span data-ttu-id="196bd-186">Dosya açık tutmak ve dosyanın, tamamlandığında kapatmak için IDisposable seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="196bd-186">You could choose to keep the file open and implement IDisposable to close the file when you are completed.</span></span>
<span data-ttu-id="196bd-187">Her iki yöntem kendi avantajları ve dezavantajları vardır.</span><span class="sxs-lookup"><span data-stu-id="196bd-187">Either method has its advantages and disadvantages.</span></span> <span data-ttu-id="196bd-188">Her ikisi de, sınıflar arasında biraz daha fazla bağlantı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="196bd-188">Both do create a bit more coupling between the classes.</span></span>

<span data-ttu-id="196bd-189">Günlükçü sınıfı kodda hiçbiri, her iki senaryoyu desteklemek için güncelleştirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="196bd-189">None of the code in the Logger class would need to be updated in order to support either scenario.</span></span>

## <a name="handling-null-delegates"></a><span data-ttu-id="196bd-190">İşleme Null temsilciler</span><span class="sxs-lookup"><span data-stu-id="196bd-190">Handling Null Delegates</span></span>

<span data-ttu-id="196bd-191">Son olarak, böylece bir mekanizma bulunmadığından çıktı seçildiğinde bu gibi durumlarda sağlam LogMessage yöntemi güncelleştirelim.</span><span class="sxs-lookup"><span data-stu-id="196bd-191">Finally, let's update the LogMessage method so that it is robust for those cases when no output mechanism is selected.</span></span> <span data-ttu-id="196bd-192">Geçerli uygulama oluşturmaz bir `NullReferenceException` olduğunda `WriteMessage` temsilci bağlı çağrı listesine sahip değil.</span><span class="sxs-lookup"><span data-stu-id="196bd-192">The current implementation will throw a `NullReferenceException` when the `WriteMessage` delegate does not have an invocation list attached.</span></span>
<span data-ttu-id="196bd-193">Yöntemlerin hiçbiri eklendiğinde sessizce devam eder tasarım tercih edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="196bd-193">You may prefer a design that silently continues when no methods have been attached.</span></span> <span data-ttu-id="196bd-194">Bu birlikte null koşullu işleci kullanılarak kolaydır `Delegate.Invoke()` yöntemi:</span><span class="sxs-lookup"><span data-stu-id="196bd-194">This is easy using the null conditional operator, combined with the `Delegate.Invoke()` method:</span></span>

```csharp
public static void LogMessage(string msg)
{
    WriteMessage?.Invoke(msg);
}
```

<span data-ttu-id="196bd-195">Null koşullu işleci (`?.`) ne zaman short-circuits sol işleneni (`WriteMessage` bu durumda) çalışılmayacak bir iletiyi günlüğe kaydetmek için yapıldığı anlamına gelir, null.</span><span class="sxs-lookup"><span data-stu-id="196bd-195">The null conditional operator (`?.`) short-circuits when the left operand (`WriteMessage` in this case) is null, which means no attempt is made to log a message.</span></span>

<span data-ttu-id="196bd-196">Arama yapmaz `Invoke()` yöntemi listelenen belgelerindeki `System.Delegate` veya `System.MulticastDelegate`.</span><span class="sxs-lookup"><span data-stu-id="196bd-196">You won't find the `Invoke()` method listed in the documentation for `System.Delegate` or `System.MulticastDelegate`.</span></span> <span data-ttu-id="196bd-197">Derleyici, tür güvenli oluşturur `Invoke` herhangi metodunuza aşağıdakini bildirilen türü.</span><span class="sxs-lookup"><span data-stu-id="196bd-197">The compiler generates a type safe `Invoke` method for any delegate type declared.</span></span> <span data-ttu-id="196bd-198">Bu örnekte, yani `Invoke` tek bir alan `string` bağımsız değişken ve void dönüş türüne sahip.</span><span class="sxs-lookup"><span data-stu-id="196bd-198">In this example, that means `Invoke` takes a single `string` argument, and has a void return type.</span></span>

## <a name="summary-of-practices"></a><span data-ttu-id="196bd-199">Uygulamaların özeti</span><span class="sxs-lookup"><span data-stu-id="196bd-199">Summary of Practices</span></span>

<span data-ttu-id="196bd-200">Bir günlük bileşeninin genişletilemiyor beginnings diğer Yazıcılar ve diğer özellikleri ile gördünüz.</span><span class="sxs-lookup"><span data-stu-id="196bd-200">You've seen the beginnings of a log component that could be expanded with other writers, and other features.</span></span> <span data-ttu-id="196bd-201">Tasarımı, temsilciler kullanılarak bu farklı bileşenlerden çok birbirine sıkı şekilde bağlı.</span><span class="sxs-lookup"><span data-stu-id="196bd-201">By using delegates in the design these different components are very loosely coupled.</span></span> <span data-ttu-id="196bd-202">Bu, çeşitli avantajlar sağlar.</span><span class="sxs-lookup"><span data-stu-id="196bd-202">This provides several advantages.</span></span> <span data-ttu-id="196bd-203">Yeni çıkış mekanizmaları oluşturup bunları sisteme eklemek çok kolaydır.</span><span class="sxs-lookup"><span data-stu-id="196bd-203">It's very easy to create new output mechanisms and attach them to the system.</span></span> <span data-ttu-id="196bd-204">Bu diğer mekanizmalar yalnızca bir yöntem gerekir: yöntemin günlük iletisi yazar.</span><span class="sxs-lookup"><span data-stu-id="196bd-204">These other mechanisms only need one method: the method that writes the log message.</span></span> <span data-ttu-id="196bd-205">Bu yeni özellikler eklendiğinde, çok esnek bir tasarım olur.</span><span class="sxs-lookup"><span data-stu-id="196bd-205">It's a design that is very resilient when new features are added.</span></span> <span data-ttu-id="196bd-206">Herhangi bir yazıcı için gereken yöntemini uygulamak için sözleşmedir.</span><span class="sxs-lookup"><span data-stu-id="196bd-206">The contract required for any writer is to implement one method.</span></span> <span data-ttu-id="196bd-207">Bu yöntem, statik olması veya yöntemi örneği.</span><span class="sxs-lookup"><span data-stu-id="196bd-207">That method could be a static or instance method.</span></span> <span data-ttu-id="196bd-208">Genel, özel veya herhangi bir yasal erişimi olabilir.</span><span class="sxs-lookup"><span data-stu-id="196bd-208">It could be public, private, or any other legal access.</span></span>

<span data-ttu-id="196bd-209">Günlükçü sınıfı, bozucu değişiklikleri oluşturmaksızın herhangi bir sayıda yenilikleri veya değişiklikleri yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="196bd-209">The Logger class can make any number of enhancements or changes without introducing breaking changes.</span></span> <span data-ttu-id="196bd-210">Herhangi bir sınıf gibi genel API riskini önemli değişiklikler olmadan değiştirilemiyor.</span><span class="sxs-lookup"><span data-stu-id="196bd-210">Like any class, you cannot modify the public API without the risk of breaking changes.</span></span> <span data-ttu-id="196bd-211">Ancak, yalnızca temsilci Günlükçü herhangi bir çıktı altyapıları arasındaki bağ olduğundan, hiçbir diğer türleri (gibi arabirimler veya temel sınıflar) ilgilidir.</span><span class="sxs-lookup"><span data-stu-id="196bd-211">But, because the coupling between the logger and any output engines is only through the delegate, no other types (like interfaces or base classes) are involved.</span></span> <span data-ttu-id="196bd-212">Eşleştirmeye kadar küçük.</span><span class="sxs-lookup"><span data-stu-id="196bd-212">The coupling is as small as possible.</span></span>

[<span data-ttu-id="196bd-213">Next</span><span class="sxs-lookup"><span data-stu-id="196bd-213">Next</span></span>](events-overview.md)
