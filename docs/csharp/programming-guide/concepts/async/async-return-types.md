---
title: Zaman uyumsuz dönüş türleriC#()
ms.date: 05/29/2017
ms.assetid: ddb2539c-c898-48c1-ad92-245e4a996df8
ms.openlocfilehash: 2c0dae6b4357ce89325ecb9b7d70ffd79f4e9417
ms.sourcegitcommit: 1b020356e421a9314dd525539da12463d980ce7a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/30/2019
ms.locfileid: "70168394"
---
# <a name="async-return-types-c"></a><span data-ttu-id="d32ed-102">Zaman uyumsuz dönüş türleriC#()</span><span class="sxs-lookup"><span data-stu-id="d32ed-102">Async Return Types (C#)</span></span>
<span data-ttu-id="d32ed-103">Zaman uyumsuz metotlar aşağıdaki dönüş türlerine sahip olabilir:</span><span class="sxs-lookup"><span data-stu-id="d32ed-103">Async methods can have the following return types:</span></span>

- <span data-ttu-id="d32ed-104"><xref:System.Threading.Tasks.Task%601>, bir değer döndüren zaman uyumsuz bir yöntem için.</span><span class="sxs-lookup"><span data-stu-id="d32ed-104"><xref:System.Threading.Tasks.Task%601>, for an async method that returns a value.</span></span> 
 
- <span data-ttu-id="d32ed-105"><xref:System.Threading.Tasks.Task>, bir işlem gerçekleştiren ancak değer döndüren zaman uyumsuz bir yöntem için.</span><span class="sxs-lookup"><span data-stu-id="d32ed-105"><xref:System.Threading.Tasks.Task>, for an async method that performs an operation but returns no value.</span></span>

- <span data-ttu-id="d32ed-106">`void`, bir olay işleyicisi için.</span><span class="sxs-lookup"><span data-stu-id="d32ed-106">`void`, for an event handler.</span></span> 

- <span data-ttu-id="d32ed-107">7,0 ile C# başlayarak, erişilebilir `GetAwaiter` bir yöntemi olan herhangi bir tür.</span><span class="sxs-lookup"><span data-stu-id="d32ed-107">Starting with C# 7.0, any type that has an accessible `GetAwaiter` method.</span></span> <span data-ttu-id="d32ed-108">`GetAwaiter` Yöntemi tarafından döndürülen nesne <xref:System.Runtime.CompilerServices.ICriticalNotifyCompletion?displayProperty=nameWithType> arabirimini uygulamalıdır.</span><span class="sxs-lookup"><span data-stu-id="d32ed-108">The object returned by the `GetAwaiter` method must implement the <xref:System.Runtime.CompilerServices.ICriticalNotifyCompletion?displayProperty=nameWithType> interface.</span></span>
  
<span data-ttu-id="d32ed-109">Zaman uyumsuz yöntemler hakkında daha fazla bilgi için bkz. [Async ve await (C#) Ile zaman uyumsuz programlama](./index.md).</span><span class="sxs-lookup"><span data-stu-id="d32ed-109">For more information about async methods, see [Asynchronous Programming with async and await (C#)](./index.md).</span></span>  
  
<span data-ttu-id="d32ed-110">Her dönüş türü aşağıdaki bölümlerden birinde incelenir ve konunun sonunda her üç türü kullanan tam bir örnek bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d32ed-110">Each return type is examined in one of the following sections, and you can find a full example that uses all three types at the end of the topic.</span></span>  
  
## <a name="BKMK_TaskTReturnType"></a><span data-ttu-id="d32ed-111">Görev\<tSonuç\> dönüş türü</span><span class="sxs-lookup"><span data-stu-id="d32ed-111">Task\<TResult\> Return Type</span></span>  
<span data-ttu-id="d32ed-112">Dönüş türü, `TResult`işlenenin türü olan bir [Return](../../../language-reference/keywords/return.md) (C#) ifadesini içeren zaman uyumsuz bir yöntem için kullanılır. <xref:System.Threading.Tasks.Task%601></span><span class="sxs-lookup"><span data-stu-id="d32ed-112">The <xref:System.Threading.Tasks.Task%601> return type is used for an async method that contains a [return](../../../language-reference/keywords/return.md) (C#) statement in which the operand has type `TResult`.</span></span>  
  
<span data-ttu-id="d32ed-113">Aşağıdaki örnekte, `GetLeisureHours` async yöntemi bir tamsayı döndüren bir `return` ifade içerir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-113">In the following example, the `GetLeisureHours` async method contains a `return` statement that returns an integer.</span></span> <span data-ttu-id="d32ed-114">Bu nedenle, metot bildiriminin bir dönüş türü `Task<int>`belirtmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-114">Therefore, the method declaration must specify a return type of `Task<int>`.</span></span>  <span data-ttu-id="d32ed-115"><xref:System.Threading.Tasks.Task.FromResult%2A> Async yöntemi, bir dize döndüren bir işlem için yer tutucudur.</span><span class="sxs-lookup"><span data-stu-id="d32ed-115">The <xref:System.Threading.Tasks.Task.FromResult%2A> async method is a placeholder for an operation that returns a string.</span></span>
  
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns1.cs)]

<span data-ttu-id="d32ed-116">Yöntemi içindeki bir `leisureHours`await ifadesi `GetLeisureHours` içinden çağrıldığında, await ifadesi yöntemi tarafından döndürülen görevde depolanan tamsayı değerini (değeri) alır. `GetLeisureHours` `ShowTodaysInfo`</span><span class="sxs-lookup"><span data-stu-id="d32ed-116">When `GetLeisureHours` is called from within an await expression in the `ShowTodaysInfo` method, the await expression retrieves the integer value (the value of `leisureHours`) that's stored in the task returned by the `GetLeisureHours` method.</span></span> <span data-ttu-id="d32ed-117">Await ifadeleri hakkında daha fazla bilgi için bkz. [await](../../../language-reference/operators/await.md).</span><span class="sxs-lookup"><span data-stu-id="d32ed-117">For more information about await expressions, see [await](../../../language-reference/operators/await.md).</span></span>  
  
<span data-ttu-id="d32ed-118">Aşağıdaki kodda gösterildiği gibi `GetLeisureHours` `await`, çağrısını uygulamasından ayırarak bunun nasıl gerçekleştiğini daha iyi anlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d32ed-118">You can better understand how this happens by separating the call to `GetLeisureHours` from the application of `await`, as the following code shows.</span></span> <span data-ttu-id="d32ed-119">Yönteminin bildiriminden bekleyebileceğiniz `GetLeisureHours` için hemen beklenen bir yönteme çağrı bir `Task<int>`döndürür.</span><span class="sxs-lookup"><span data-stu-id="d32ed-119">A call to method `GetLeisureHours` that isn't immediately awaited returns a `Task<int>`, as you would expect from the declaration of the method.</span></span> <span data-ttu-id="d32ed-120">Görev örnekteki `integerTask` değişkenine atanır.</span><span class="sxs-lookup"><span data-stu-id="d32ed-120">The task is assigned to the `integerTask` variable in the example.</span></span> <span data-ttu-id="d32ed-121">Bir olduğundan, <xref:System.Threading.Tasks.Task%601.Result> türünde bir`TResult`özelliğiiçerir. <xref:System.Threading.Tasks.Task%601> `integerTask`</span><span class="sxs-lookup"><span data-stu-id="d32ed-121">Because `integerTask` is a <xref:System.Threading.Tasks.Task%601>, it contains a <xref:System.Threading.Tasks.Task%601.Result> property of type `TResult`.</span></span> <span data-ttu-id="d32ed-122">Bu durumda, `TResult` bir tamsayı türünü temsil eder.</span><span class="sxs-lookup"><span data-stu-id="d32ed-122">In this case, `TResult` represents an integer type.</span></span> <span data-ttu-id="d32ed-123">Öğesine uygulandığında, <xref:System.Threading.Tasks.Task%601.Result%2A> await ifadesi öğesinin `integerTask`özelliğinin içeriğini değerlendirir. `integerTask` `await`</span><span class="sxs-lookup"><span data-stu-id="d32ed-123">When `await` is applied to `integerTask`, the await expression evaluates to the contents of the <xref:System.Threading.Tasks.Task%601.Result%2A> property of `integerTask`.</span></span> <span data-ttu-id="d32ed-124">Değer `ret` değişkenine atanır.</span><span class="sxs-lookup"><span data-stu-id="d32ed-124">The value is assigned to the `ret` variable.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="d32ed-125"><xref:System.Threading.Tasks.Task%601.Result%2A> Özelliği engelleyici bir özelliktir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-125">The <xref:System.Threading.Tasks.Task%601.Result%2A> property is a blocking property.</span></span> <span data-ttu-id="d32ed-126">Görevi tamamlanmadan önce ona erişmeye çalışırsanız, etkin olan iş parçacığı, görev tamamlanana ve değer kullanılabilir olana kadar engellenir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-126">If you try to access it before its task is finished, the thread that's currently active is blocked until the task completes and the value is available.</span></span> <span data-ttu-id="d32ed-127">Çoğu durumda, özelliğine doğrudan erişmek yerine kullanarak `await` değere erişmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-127">In most cases, you should access the value by using `await` instead of accessing the property directly.</span></span> <br/> <span data-ttu-id="d32ed-128">Önceki örnek, uygulamanın sonlandırılmadan önce yürütmeyi tamamlayabilmesi <xref:System.Threading.Tasks.Task%601.Result%2A> `ShowTodaysInfo` için ana iş parçacığını engellemek üzere özelliğinin değerini almıştır.</span><span class="sxs-lookup"><span data-stu-id="d32ed-128">The previous example retrieved the value of the <xref:System.Threading.Tasks.Task%601.Result%2A> property to block the main thread so that the `ShowTodaysInfo` method could finish execution before the application ended.</span></span>  

[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns1a.cs#1)]
  
## <a name="BKMK_TaskReturnType"></a><span data-ttu-id="d32ed-129">Görev dönüş türü</span><span class="sxs-lookup"><span data-stu-id="d32ed-129">Task Return Type</span></span>  
<span data-ttu-id="d32ed-130">Bir `return` ifade içermeyen veya bir işleneni döndürmeyen bir `return` ifade içeren zaman uyumsuz yöntemler genellikle dönüş türüne <xref:System.Threading.Tasks.Task>sahiptir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-130">Async methods that don't contain a `return` statement or that contain a `return` statement that doesn't return an operand usually have a return type of <xref:System.Threading.Tasks.Task>.</span></span> <span data-ttu-id="d32ed-131">Bu tür yöntemler `void` zaman uyumlu olarak çalıştırıldıklarında döndürülür.</span><span class="sxs-lookup"><span data-stu-id="d32ed-131">Such methods return `void` if they run synchronously.</span></span> <span data-ttu-id="d32ed-132">Zaman uyumsuz bir yöntem <xref:System.Threading.Tasks.Task> için dönüş türü kullanırsanız, çağıran zaman uyumsuz yöntem bitene kadar çağıranın tamamlanmasını `await` askıya almak için bir operatör kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d32ed-132">If you use a <xref:System.Threading.Tasks.Task> return type for an async method, a calling method can use an `await` operator to suspend the caller's completion until the called async method has finished.</span></span>  
  
<span data-ttu-id="d32ed-133">Aşağıdaki örnekte, `WaitAndApologize` async yöntemi bir `return` ifade içermez, bu nedenle Yöntem bir <xref:System.Threading.Tasks.Task> nesne döndürür.</span><span class="sxs-lookup"><span data-stu-id="d32ed-133">In the following example, the `WaitAndApologize` async method doesn't contain a `return` statement, so the method returns a <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="d32ed-134">Bu, `WaitAndApologize` beklemenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="d32ed-134">This enables `WaitAndApologize` to be awaited.</span></span> <span data-ttu-id="d32ed-135">Dönüş değeri olmadığından <xref:System.Threading.Tasks.Task> türün bir `Result` özellik içermediğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="d32ed-135">Note that the <xref:System.Threading.Tasks.Task> type doesn't include a `Result` property because it has no return value.</span></span>  

[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns2.cs)]  
  
<span data-ttu-id="d32ed-136">`WaitAndApologize`, zaman uyumlu void döndüren bir yöntem için çağırma deyimine benzer bir await ifadesi yerine await deyimi kullanılarak bekletildi.</span><span class="sxs-lookup"><span data-stu-id="d32ed-136">`WaitAndApologize` is awaited by using an await statement instead of an await expression, similar to the calling statement for a synchronous void-returning method.</span></span> <span data-ttu-id="d32ed-137">Bu durumda await işlecinin uygulaması bir değer üretmez.</span><span class="sxs-lookup"><span data-stu-id="d32ed-137">The application of an await operator in this case doesn't produce a value.</span></span>  
  
<span data-ttu-id="d32ed-138">Önceki <xref:System.Threading.Tasks.Task%601> örnekte olduğu gibi, aşağıdaki kodda gösterildiği gibi, `WaitAndApologize` çağrısını await işlecinin uygulamasından ayırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d32ed-138">As in the previous <xref:System.Threading.Tasks.Task%601> example, you can separate the call to `WaitAndApologize` from the application of an await operator, as the following code shows.</span></span> <span data-ttu-id="d32ed-139">Ancak, bir `Task` `Result` özelliğine sahip olmadığını ve bir `Task`Await işleci uygulandığında hiçbir değer üretilmediğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="d32ed-139">However, remember that a `Task` doesn't have a `Result` property, and that no value is produced when an await operator is applied to a `Task`.</span></span>  
  
<span data-ttu-id="d32ed-140">Aşağıdaki kod, yöntemi çağıran `WaitAndApologize` görevin döndürdüğü görevi bekleten ayırır.</span><span class="sxs-lookup"><span data-stu-id="d32ed-140">The following code separates calling the `WaitAndApologize` method from awaiting the task that the method returns.</span></span>  
 
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns2a.cs#1)]  
 
## <a name="BKMK_VoidReturnType"></a><span data-ttu-id="d32ed-141">Void dönüş türü</span><span class="sxs-lookup"><span data-stu-id="d32ed-141">Void return type</span></span>

<span data-ttu-id="d32ed-142">Dönüş türünü, `void` `void` dönüş türü gerektiren zaman uyumsuz olay işleyicilerde kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="d32ed-142">You use the `void` return type in asynchronous event handlers, which require a `void` return type.</span></span> <span data-ttu-id="d32ed-143">Değer döndürmeyen olay işleyicileri dışındaki yöntemler için, döndüren <xref:System.Threading.Tasks.Task> `void` zaman uyumsuz bir yöntem beklenmediği için bir yerine döndürmelidir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-143">For methods other than event handlers that don't return a value, you should return a <xref:System.Threading.Tasks.Task> instead, because an async method that returns `void` can't be awaited.</span></span> <span data-ttu-id="d32ed-144">Bu tür bir yöntemi çağıran, çağrılan zaman uyumsuz yöntemin tamamlanmasını beklemeden tamamlamaya devam edebilmelidir ve çağıranın, zaman uyumsuz yöntemin ürettiği herhangi bir değerden veya özel durumlardan bağımsız olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-144">Any caller of such a method must be able to continue to completion without waiting for the called async method to finish, and the caller must be independent of any values or exceptions that the async method generates.</span></span>  
  
<span data-ttu-id="d32ed-145">Void döndüren zaman uyumsuz bir yöntemi çağıran, yöntemden oluşturulan özel durumları yakalayabilir ve bu tür işlenmemiş özel durumlar uygulamanızın başarısız olmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-145">The caller of a void-returning async method can't catch exceptions that are thrown from the method, and such unhandled exceptions are likely to cause your application to fail.</span></span> <span data-ttu-id="d32ed-146">Bir <xref:System.Threading.Tasks.Task> veya<xref:System.Threading.Tasks.Task%601>döndüren zaman uyumsuz bir yöntemde özel durum oluşursa, özel durum döndürülen görevde depolanır ve görev beklendiğinde yeniden oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="d32ed-146">If an exception occurs in an async method that returns a <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601>, the exception is stored in the returned task and is rethrown when the task is awaited.</span></span> <span data-ttu-id="d32ed-147">Bu nedenle, bir özel durum üretemeyen herhangi bir zaman uyumsuz metodun, <xref:System.Threading.Tasks.Task> veya <xref:System.Threading.Tasks.Task%601> dönüş türüne sahip olduğundan ve metoda yapılan çağrıların beklenmediğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="d32ed-147">Therefore, make sure that any async method that can produce an exception has a return type of <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> and that calls to the method are awaited.</span></span>  
  
<span data-ttu-id="d32ed-148">Zaman uyumsuz yöntemlerde özel durumları yakalama hakkında daha fazla bilgi için, [try-catch](../../../language-reference/keywords/try-catch.md) konusunun [zaman uyumsuz metotlar bölümünde özel durumlar](../../../language-reference/keywords/try-catch.md#exceptions-in-async-methods) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="d32ed-148">For more information about how to catch exceptions in async methods, see the [Exceptions in Async Methods](../../../language-reference/keywords/try-catch.md#exceptions-in-async-methods) section of the [try-catch](../../../language-reference/keywords/try-catch.md) topic.</span></span>  
  
<span data-ttu-id="d32ed-149">Aşağıdaki örnek, zaman uyumsuz bir olay işleyicisinin davranışını gösterir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-149">The following example shows the behavior of an async event handler.</span></span> <span data-ttu-id="d32ed-150">Örnek kodda, zaman uyumsuz bir olay işleyicisinin ana iş parçacığının tamamlandığında bunu bilmesini sağlamalıdır.</span><span class="sxs-lookup"><span data-stu-id="d32ed-150">Note that in the example code, an async event handler must let the main thread know when it finishes.</span></span> <span data-ttu-id="d32ed-151">Ardından, ana iş parçacığı programdan çıkmadan zaman uyumsuz bir olay işleyicisinin tamamlanmasını bekleyebilir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-151">Then the main thread can wait for an async event handler to complete before exiting the program.</span></span>
 
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns3.cs)]  
 
## <a name="generalized-async-return-types-and-valuetasktresult"></a><span data-ttu-id="d32ed-152">Genelleştirilmiş zaman uyumsuz dönüş türleri ve valuetask\<TResult\></span><span class="sxs-lookup"><span data-stu-id="d32ed-152">Generalized async return types and ValueTask\<TResult\></span></span>

<span data-ttu-id="d32ed-153">7,0 ile C# başlayarak, zaman uyumsuz bir yöntem erişilebilir `GetAwaiter` bir yöntemi olan herhangi bir tür döndürebilir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-153">Starting with C# 7.0, an async method can return any type that has an accessible `GetAwaiter` method.</span></span>
 
<span data-ttu-id="d32ed-154"><xref:System.Threading.Tasks.Task> Ve<xref:System.Threading.Tasks.Task%601> başvuru türleri olduğundan, performans açısından kritik yollarda bellek ayırma, özellikle de ayırmalar sıkı Döngülerde gerçekleşiyorsa performansı olumsuz etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-154">Because <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> are reference types, memory allocation in performance-critical paths, particularly when allocations occur in tight loops, can adversely affect performance.</span></span> <span data-ttu-id="d32ed-155">Genelleştirilmiş dönüş türleri için destek, ek bellek ayırmalarını önlemek için bir başvuru türü yerine hafif değer türü döndürebilmeniz anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-155">Support for generalized return types means that you can return a lightweight value type instead of a reference type to avoid additional memory allocations.</span></span> 

<span data-ttu-id="d32ed-156">.Net, <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> genelleştirilmiş bir görev döndüren değerin hafif bir uygulama olarak yapısını sağlar.</span><span class="sxs-lookup"><span data-stu-id="d32ed-156">.NET provides the <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> structure as a lightweight implementation of a generalized task-returning value.</span></span> <span data-ttu-id="d32ed-157"><xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> Türünü kullanmak için, `System.Threading.Tasks.Extensions` NuGet paketini projenize eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d32ed-157">To use the <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> type, you must add the `System.Threading.Tasks.Extensions` NuGet package to your project.</span></span> <span data-ttu-id="d32ed-158">Aşağıdaki örnek, iki zarın değerini almak için <xref:System.Threading.Tasks.ValueTask%601> yapısını kullanır.</span><span class="sxs-lookup"><span data-stu-id="d32ed-158">The following example uses the <xref:System.Threading.Tasks.ValueTask%601> structure to retrieve the value of two dice rolls.</span></span> 
  
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-valuetask.cs)]

## <a name="see-also"></a><span data-ttu-id="d32ed-159">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="d32ed-159">See also</span></span>

- <xref:System.Threading.Tasks.Task.FromResult%2A>
- [<span data-ttu-id="d32ed-160">İzlenecek yol: Async ve await (C#) kullanarak Web 'e erişme</span><span class="sxs-lookup"><span data-stu-id="d32ed-160">Walkthrough: Accessing the Web by Using async and await (C#)</span></span>](./walkthrough-accessing-the-web-by-using-async-and-await.md)
- [<span data-ttu-id="d32ed-161">Zaman uyumsuz programlarda denetim akışı (C#)</span><span class="sxs-lookup"><span data-stu-id="d32ed-161">Control Flow in Async Programs (C#)</span></span>](./control-flow-in-async-programs.md)
- [<span data-ttu-id="d32ed-162">async</span><span class="sxs-lookup"><span data-stu-id="d32ed-162">async</span></span>](../../../language-reference/keywords/async.md)
- [<span data-ttu-id="d32ed-163">await</span><span class="sxs-lookup"><span data-stu-id="d32ed-163">await</span></span>](../../../language-reference/operators/await.md)
