---
title: Zaman uyumsuz dönüş türleri (C#)
ms.date: 05/29/2017
ms.assetid: ddb2539c-c898-48c1-ad92-245e4a996df8
ms.openlocfilehash: 327168e3ac77ab1ed7c9841d592781c704839660
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64599782"
---
# <a name="async-return-types-c"></a><span data-ttu-id="e332a-102">Zaman uyumsuz dönüş türleri (C#)</span><span class="sxs-lookup"><span data-stu-id="e332a-102">Async Return Types (C#)</span></span>
<span data-ttu-id="e332a-103">Zaman uyumsuz yöntemler, aşağıdaki dönüş türlerine sahip olabilir:</span><span class="sxs-lookup"><span data-stu-id="e332a-103">Async methods can have the following return types:</span></span>

- <span data-ttu-id="e332a-104"><xref:System.Threading.Tasks.Task%601>, bir değer döndüren zaman uyumsuz bir yöntem için.</span><span class="sxs-lookup"><span data-stu-id="e332a-104"><xref:System.Threading.Tasks.Task%601>, for an async method that returns a value.</span></span> 
 
- <span data-ttu-id="e332a-105"><xref:System.Threading.Tasks.Task>, bir işlemi gerçekleştirir, ancak hiçbir değer döndürmeyen bir zaman uyumsuz yöntem için.</span><span class="sxs-lookup"><span data-stu-id="e332a-105"><xref:System.Threading.Tasks.Task>, for an async method that performs an operation but returns no value.</span></span>

- <span data-ttu-id="e332a-106">`void`, bir olay işleyicisi için.</span><span class="sxs-lookup"><span data-stu-id="e332a-106">`void`, for an event handler.</span></span> 

- <span data-ttu-id="e332a-107">C# 7.0, bir erişilebilir olan herhangi bir türü'ile başlayan `GetAwaiter` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="e332a-107">Starting with C# 7.0, any type that has an accessible `GetAwaiter` method.</span></span> <span data-ttu-id="e332a-108">Tarafından döndürülen nesne `GetAwaiter` yöntemi uygulanmalı <xref:System.Runtime.CompilerServices.ICriticalNotifyCompletion?displayProperty=nameWithType> arabirimi.</span><span class="sxs-lookup"><span data-stu-id="e332a-108">The object returned by the `GetAwaiter` method must implement the <xref:System.Runtime.CompilerServices.ICriticalNotifyCompletion?displayProperty=nameWithType> interface.</span></span>
  
<span data-ttu-id="e332a-109">Zaman uyumsuz yöntemler hakkında daha fazla bilgi için bkz. [Asynchronous Programming with async ve await (C#)](../../../../csharp/programming-guide/concepts/async/index.md).</span><span class="sxs-lookup"><span data-stu-id="e332a-109">For more information about async methods, see [Asynchronous Programming with async and await (C#)](../../../../csharp/programming-guide/concepts/async/index.md).</span></span>  
  
<span data-ttu-id="e332a-110">Her dönüş türü aşağıdaki bölümlerden birinde incelenir ve konunun sonunda üç türü kullanan bir tam örnek bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e332a-110">Each return type is examined in one of the following sections, and you can find a full example that uses all three types at the end of the topic.</span></span>  
  
## <a name="BKMK_TaskTReturnType"></a> <span data-ttu-id="e332a-111">Görev\<TResult\> dönüş türü</span><span class="sxs-lookup"><span data-stu-id="e332a-111">Task\<TResult\> Return Type</span></span>  
<span data-ttu-id="e332a-112"><xref:System.Threading.Tasks.Task%601> Dönüş türü içeren zaman uyumsuz yöntemi için kullanılan bir [dönüş](../../../../csharp/language-reference/keywords/return.md) işlenen türü içeren (C#) ifadesi `TResult`.</span><span class="sxs-lookup"><span data-stu-id="e332a-112">The <xref:System.Threading.Tasks.Task%601> return type is used for an async method that contains a [return](../../../../csharp/language-reference/keywords/return.md) (C#) statement in which the operand has type `TResult`.</span></span>  
  
<span data-ttu-id="e332a-113">Aşağıdaki örnekte, `GetLeisureHours` zaman uyumsuz yönteminde bir `return` deyimi bir tamsayı döndürür.</span><span class="sxs-lookup"><span data-stu-id="e332a-113">In the following example, the `GetLeisureHours` async method contains a `return` statement that returns an integer.</span></span> <span data-ttu-id="e332a-114">Bu nedenle, yöntem bildiriminde bir dönüş türü belirtmelisiniz `Task<int>`.</span><span class="sxs-lookup"><span data-stu-id="e332a-114">Therefore, the method declaration must specify a return type of `Task<int>`.</span></span>  <span data-ttu-id="e332a-115"><xref:System.Threading.Tasks.Task.FromResult%2A> Zaman uyumsuz yöntem bir dize döndüren bir işlem için bir yer tutucudur.</span><span class="sxs-lookup"><span data-stu-id="e332a-115">The <xref:System.Threading.Tasks.Task.FromResult%2A> async method is a placeholder for an operation that returns a string.</span></span>
  
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns1.cs)]

<span data-ttu-id="e332a-116">Zaman `GetLeisureHours` bir await ifadesine içinde çağrılır `ShowTodaysInfo` yöntemi, await ifadesi tamsayı değerini alır (değerini `leisureHours`) tarafından döndürülen görev depolanan `GetLeisureHours` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="e332a-116">When `GetLeisureHours` is called from within an await expression in the `ShowTodaysInfo` method, the await expression retrieves the integer value (the value of `leisureHours`) that's stored in the task returned by the `GetLeisureHours` method.</span></span> <span data-ttu-id="e332a-117">Hakkında daha fazla bilgi için await ifadeleri, bkz: [await](../../../../csharp/language-reference/keywords/await.md).</span><span class="sxs-lookup"><span data-stu-id="e332a-117">For more information about await expressions, see [await](../../../../csharp/language-reference/keywords/await.md).</span></span>  
  
<span data-ttu-id="e332a-118">Çağrı ayırarak nasıl böyle daha iyi anlamak `GetLeisureHours` uygulamasından `await`aşağıdaki kodda gösterildiği gibi.</span><span class="sxs-lookup"><span data-stu-id="e332a-118">You can better understand how this happens by separating the call to `GetLeisureHours` from the application of `await`, as the following code shows.</span></span> <span data-ttu-id="e332a-119">Yöntemine yapılan bir çağrı `GetLeisureHours` hemen beklenmeyen döndürür, değilse bir `Task<int>`, yöntem bildiriminden beklediğiniz gibi.</span><span class="sxs-lookup"><span data-stu-id="e332a-119">A call to method `GetLeisureHours` that isn't immediately awaited returns a `Task<int>`, as you would expect from the declaration of the method.</span></span> <span data-ttu-id="e332a-120">Görevin atandığı `integerTask` örnekte değişken.</span><span class="sxs-lookup"><span data-stu-id="e332a-120">The task is assigned to the `integerTask` variable in the example.</span></span> <span data-ttu-id="e332a-121">Çünkü `integerTask` olduğu bir <xref:System.Threading.Tasks.Task%601>, içerdiği bir <xref:System.Threading.Tasks.Task%601.Result> türünün özelliği `TResult`.</span><span class="sxs-lookup"><span data-stu-id="e332a-121">Because `integerTask` is a <xref:System.Threading.Tasks.Task%601>, it contains a <xref:System.Threading.Tasks.Task%601.Result> property of type `TResult`.</span></span> <span data-ttu-id="e332a-122">Bu durumda, `TResult` bir tamsayı türünü temsil eder.</span><span class="sxs-lookup"><span data-stu-id="e332a-122">In this case, `TResult` represents an integer type.</span></span> <span data-ttu-id="e332a-123">Zaman `await` uygulanan `integerTask`, bekleme ifadesi içeriğine göre değerlendirilir <xref:System.Threading.Tasks.Task%601.Result%2A> özelliği `integerTask`.</span><span class="sxs-lookup"><span data-stu-id="e332a-123">When `await` is applied to `integerTask`, the await expression evaluates to the contents of the <xref:System.Threading.Tasks.Task%601.Result%2A> property of `integerTask`.</span></span> <span data-ttu-id="e332a-124">Değeri atanır `ret` değişkeni.</span><span class="sxs-lookup"><span data-stu-id="e332a-124">The value is assigned to the `ret` variable.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="e332a-125"><xref:System.Threading.Tasks.Task%601.Result%2A> Özelliği engelleyici bir özelliktir.</span><span class="sxs-lookup"><span data-stu-id="e332a-125">The <xref:System.Threading.Tasks.Task%601.Result%2A> property is a blocking property.</span></span> <span data-ttu-id="e332a-126">Kendi görevi bitmeden önce buna erişmeyi denerseniz, şu anda etkin olan iş parçacığı değeri kullanılabilir ve görev tamamlanıncaya kadar engellenir.</span><span class="sxs-lookup"><span data-stu-id="e332a-126">If you try to access it before its task is finished, the thread that's currently active is blocked until the task completes and the value is available.</span></span> <span data-ttu-id="e332a-127">Çoğu durumda, değeri kullanarak erişmeli `await` özelliği doğrudan erişmek yerine.</span><span class="sxs-lookup"><span data-stu-id="e332a-127">In most cases, you should access the value by using `await` instead of accessing the property directly.</span></span> <br/> <span data-ttu-id="e332a-128">Değerini önceki örnekte alınan <xref:System.Threading.Tasks.Task%601.Result%2A> ana iş parçacığı engellemek için özellik böylece `ShowTodaysInfo` yöntemi uygulama sona ermeden önce yürütme son.</span><span class="sxs-lookup"><span data-stu-id="e332a-128">The previous example retrieved the value of the <xref:System.Threading.Tasks.Task%601.Result%2A> property to block the main thread so that the `ShowTodaysInfo` method could finish execution before the application ended.</span></span>  

[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns1a.cs#1)]
  
## <a name="BKMK_TaskReturnType"></a> <span data-ttu-id="e332a-129">Görev dönüş türü</span><span class="sxs-lookup"><span data-stu-id="e332a-129">Task Return Type</span></span>  
<span data-ttu-id="e332a-130">İçermeyen zaman uyumsuz yöntemler bir `return` , ya da bir deyim içeren bir `return` genellikle dönüş işleneni deyim dönüş türüne sahip <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="e332a-130">Async methods that don't contain a `return` statement or that contain a `return` statement that doesn't return an operand usually have a return type of <xref:System.Threading.Tasks.Task>.</span></span> <span data-ttu-id="e332a-131">Bu tür yöntemler döndürür `void` zaman uyumlu olarak çalıştırırsanız.</span><span class="sxs-lookup"><span data-stu-id="e332a-131">Such methods return `void` if they run synchronously.</span></span> <span data-ttu-id="e332a-132">Kullanıyorsanız bir <xref:System.Threading.Tasks.Task> dönüş türü için zaman uyumsuz yöntemi çağıran bir yöntemi kullanabilirsiniz bir `await` çağrılan zaman uyumsuz yöntemi bitene kadar çağıranın tamamlanmasını bekletmek için işleci.</span><span class="sxs-lookup"><span data-stu-id="e332a-132">If you use a <xref:System.Threading.Tasks.Task> return type for an async method, a calling method can use an `await` operator to suspend the caller's completion until the called async method has finished.</span></span>  
  
<span data-ttu-id="e332a-133">Aşağıdaki örnekte, `WaitAndApologize` zaman uyumsuz yöntem içermiyor bir `return` yöntemi döndürecek şekilde deyimi bir <xref:System.Threading.Tasks.Task> nesne.</span><span class="sxs-lookup"><span data-stu-id="e332a-133">In the following example, the `WaitAndApologize` async method doesn't contain a `return` statement, so the method returns a <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="e332a-134">Böylece `WaitAndApologize` beklenmesini.</span><span class="sxs-lookup"><span data-stu-id="e332a-134">This enables `WaitAndApologize` to be awaited.</span></span> <span data-ttu-id="e332a-135">Unutmayın <xref:System.Threading.Tasks.Task> türü içermez bir `Result` özelliği olduğundan, dönüş değeri yok.</span><span class="sxs-lookup"><span data-stu-id="e332a-135">Note that the <xref:System.Threading.Tasks.Task> type doesn't include a `Result` property because it has no return value.</span></span>  

[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns2.cs)]  
  
<span data-ttu-id="e332a-136">`WaitAndApologize` void döndüren bir zaman uyumlu yöntem için çağırma deyimine benzer bir await ifadesi yerine await deyimi kullanılarak beklenir.</span><span class="sxs-lookup"><span data-stu-id="e332a-136">`WaitAndApologize` is awaited by using an await statement instead of an await expression, similar to the calling statement for a synchronous void-returning method.</span></span> <span data-ttu-id="e332a-137">Bir await işleci uygulaması, bu durumda değer üretemez.</span><span class="sxs-lookup"><span data-stu-id="e332a-137">The application of an await operator in this case doesn't produce a value.</span></span>  
  
<span data-ttu-id="e332a-138">Önceki olduğu gibi <xref:System.Threading.Tasks.Task%601> örnek, çağrı ayırabilirsiniz `WaitAndApologize` aşağıdaki kod, bir await işlecinin uygulamasından gösterir.</span><span class="sxs-lookup"><span data-stu-id="e332a-138">As in the previous <xref:System.Threading.Tasks.Task%601> example, you can separate the call to `WaitAndApologize` from the application of an await operator, as the following code shows.</span></span> <span data-ttu-id="e332a-139">Ancak, unutmayın bir `Task` sahip olmayan bir `Result` özelliği ve bir await işleci uygulandığında, değer üretilmediğini bir `Task`.</span><span class="sxs-lookup"><span data-stu-id="e332a-139">However, remember that a `Task` doesn't have a `Result` property, and that no value is produced when an await operator is applied to a `Task`.</span></span>  
  
<span data-ttu-id="e332a-140">Aşağıdaki kod ayırır `WaitAndApologize` yöntemin döndürdüğü görevi bekleme işleminden yöntemi.</span><span class="sxs-lookup"><span data-stu-id="e332a-140">The following code separates calling the `WaitAndApologize` method from awaiting the task that the method returns.</span></span>  
 
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns2a.cs#1)]  
 
## <a name="BKMK_VoidReturnType"></a> <span data-ttu-id="e332a-141">Void dönüş türü</span><span class="sxs-lookup"><span data-stu-id="e332a-141">Void return type</span></span>

<span data-ttu-id="e332a-142">Kullandığınız `void` dönüş türünü gerektiren zaman uyumsuz olay işleyicilerini içinde bir `void` dönüş türü.</span><span class="sxs-lookup"><span data-stu-id="e332a-142">You use the `void` return type in asynchronous event handlers, which require a `void` return type.</span></span> <span data-ttu-id="e332a-143">Döndürme zorunluluğu dışında bir değer döndürmez olay işleyicisi yöntemleri için bir <xref:System.Threading.Tasks.Task> bunun yerine, döndüren zaman uyumsuz bir yöntem olduğundan `void` beklenemez.</span><span class="sxs-lookup"><span data-stu-id="e332a-143">For methods other than event handlers that don't return a value, you should return a <xref:System.Threading.Tasks.Task> instead, because an async method that returns `void` can't be awaited.</span></span> <span data-ttu-id="e332a-144">Tüm bu yöntemi çağıran kişi çağrılan zaman uyumsuz yöntemin tamamlanmasını beklemeden tamamlanana kadar devam edebilir ve çağıran zaman uyumsuz yöntemin oluşturduğu özel durumları veya değerlerden bağımsız olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="e332a-144">Any caller of such a method must be able to continue to completion without waiting for the called async method to finish, and the caller must be independent of any values or exceptions that the async method generates.</span></span>  
  
<span data-ttu-id="e332a-145">Void döndüren zaman uyumsuz yöntemi çağıran kişi yöntemden atılan özel durumları yakalayamaz ve böyle işlenmeyen özel durumların, uygulamanızın başarısız olmasına neden olabilecek.</span><span class="sxs-lookup"><span data-stu-id="e332a-145">The caller of a void-returning async method can't catch exceptions that are thrown from the method, and such unhandled exceptions are likely to cause your application to fail.</span></span> <span data-ttu-id="e332a-146">Döndüren zaman uyumsuz yöntemde özel durum oluşursa bir <xref:System.Threading.Tasks.Task> veya <xref:System.Threading.Tasks.Task%601>, özel durum getirilen görevde depolanır ve görev beklenirken yeniden atılır.</span><span class="sxs-lookup"><span data-stu-id="e332a-146">If an exception occurs in an async method that returns a <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601>, the exception is stored in the returned task and is rethrown when the task is awaited.</span></span> <span data-ttu-id="e332a-147">Bu nedenle, bir özel durum oluşturabilecek herhangi bir zaman uyumsuz yöntem dönüş türüne sahip olduğundan emin olun <xref:System.Threading.Tasks.Task> veya <xref:System.Threading.Tasks.Task%601> ve yöntemine yönelik çağrılar beklediğinden.</span><span class="sxs-lookup"><span data-stu-id="e332a-147">Therefore, make sure that any async method that can produce an exception has a return type of <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> and that calls to the method are awaited.</span></span>  
  
<span data-ttu-id="e332a-148">Zaman uyumsuz yöntemlerde özel durumları yakalama hakkında daha fazla bilgi için bkz. [zaman uyumsuz yöntemlerde özel durumları](../../../language-reference/keywords/try-catch.md#exceptions-in-async-methods) bölümünü [try-catch](../../../language-reference/keywords/try-catch.md) konu.</span><span class="sxs-lookup"><span data-stu-id="e332a-148">For more information about how to catch exceptions in async methods, see the [Exceptions in Async Methods](../../../language-reference/keywords/try-catch.md#exceptions-in-async-methods) section of the [try-catch](../../../language-reference/keywords/try-catch.md) topic.</span></span>  
  
<span data-ttu-id="e332a-149">Aşağıdaki örnek, zaman uyumsuz olay işleyicisi davranışını gösterir.</span><span class="sxs-lookup"><span data-stu-id="e332a-149">The following example shows the behavior of an async event handler.</span></span> <span data-ttu-id="e332a-150">Örnek kodda unutmayın, zaman uyumsuz olay işleyicisi ana iş parçacığı bittiğinde bilmeniz bildirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e332a-150">Note that in the example code, an async event handler must let the main thread know when it finishes.</span></span> <span data-ttu-id="e332a-151">Ardından ana iş parçacığı zaman uyumsuz olay işleyicisi program çıkmadan önce tamamlanmasını bekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e332a-151">Then the main thread can wait for an async event handler to complete before exiting the program.</span></span>
 
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns3.cs)]  
 
## <a name="generalized-async-return-types-and-valuetasktresult"></a><span data-ttu-id="e332a-152">Genelleştirilmiş bir zaman uyumsuz dönüş türleri ve ValueTask\<TResult\></span><span class="sxs-lookup"><span data-stu-id="e332a-152">Generalized async return types and ValueTask\<TResult\></span></span>

<span data-ttu-id="e332a-153">C# 7.0 ile başlayarak, bir zaman uyumsuz yöntem bir erişilebilir olan herhangi bir türü döndürebilir `GetAwaiter` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="e332a-153">Starting with C# 7.0, an async method can return any type that has an accessible `GetAwaiter` method.</span></span>
 
<span data-ttu-id="e332a-154">Çünkü <xref:System.Threading.Tasks.Task> ve <xref:System.Threading.Tasks.Task%601> olan başvuru türleri, performans açısından kritik yollarda bellek ayırma özellikle ayırmaları sıkı Döngülerde oluştuğunda olumsuz performansı etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="e332a-154">Because <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> are reference types, memory allocation in performance-critical paths, particularly when allocations occur in tight loops, can adversely affect performance.</span></span> <span data-ttu-id="e332a-155">Destek için ek bellek ayırmaları önlemek için bir başvuru türü yerine bir basit değer türü döndürebilir genelleştirilmiş dönüş türleri anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="e332a-155">Support for generalized return types means that you can return a lightweight value type instead of a reference type to avoid additional memory allocations.</span></span> 

<span data-ttu-id="e332a-156">.NET sağlar <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> yapısı olarak genelleştirilmiş bir görev döndüren değer hafif uygulamasıdır.</span><span class="sxs-lookup"><span data-stu-id="e332a-156">.NET provides the <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> structure as a light-weight implementation of a generalized task-returning value.</span></span> <span data-ttu-id="e332a-157">Kullanılacak <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> türü eklemelisiniz `System.Threading.Tasks.Extensions` NuGet paketini projenize.</span><span class="sxs-lookup"><span data-stu-id="e332a-157">To use the <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> type, you must add the `System.Threading.Tasks.Extensions` NuGet package to your project.</span></span> <span data-ttu-id="e332a-158">Aşağıdaki örnekte <xref:System.Threading.Tasks.ValueTask%601> yapısı iki dice değerini almak için yapar.</span><span class="sxs-lookup"><span data-stu-id="e332a-158">The following example uses the <xref:System.Threading.Tasks.ValueTask%601> structure to retrieve the value of two dice rolls.</span></span> 
  
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-valuetask.cs)]

## <a name="see-also"></a><span data-ttu-id="e332a-159">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="e332a-159">See also</span></span>

- <xref:System.Threading.Tasks.Task.FromResult%2A>
- [<span data-ttu-id="e332a-160">İzlenecek yol: Zaman uyumsuz kullanarak Web'e erişme ve await (C#)</span><span class="sxs-lookup"><span data-stu-id="e332a-160">Walkthrough: Accessing the Web by Using async and await (C#)</span></span>](../../../../csharp/programming-guide/concepts/async/walkthrough-accessing-the-web-by-using-async-and-await.md)
- [<span data-ttu-id="e332a-161">Denetim akışı zaman uyumsuz programlarda (C#)</span><span class="sxs-lookup"><span data-stu-id="e332a-161">Control Flow in Async Programs (C#)</span></span>](../../../../csharp/programming-guide/concepts/async/control-flow-in-async-programs.md)
- [<span data-ttu-id="e332a-162">async</span><span class="sxs-lookup"><span data-stu-id="e332a-162">async</span></span>](../../../../csharp/language-reference/keywords/async.md)
- [<span data-ttu-id="e332a-163">await</span><span class="sxs-lookup"><span data-stu-id="e332a-163">await</span></span>](../../../../csharp/language-reference/keywords/await.md)
