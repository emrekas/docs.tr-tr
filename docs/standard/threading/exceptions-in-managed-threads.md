---
title: Yönetilen İş Parçacıklarında Özel Durumlar
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- unhandled exceptions,in managed threads
- threading [.NET Framework],unhandled exceptions
- threading [.NET Framework],exceptions in managed threads
- managed threading
ms.assetid: 11294769-2e89-43cb-890e-ad4ad79cfbee
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 63931f4498f4c1f313e7980b91ef712d4a46a837
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61926314"
---
# <a name="exceptions-in-managed-threads"></a><span data-ttu-id="5808e-102">Yönetilen İş Parçacıklarında Özel Durumlar</span><span class="sxs-lookup"><span data-stu-id="5808e-102">Exceptions in Managed Threads</span></span>
<span data-ttu-id="5808e-103">.NET Framework sürüm 2.0 ile başlayarak, ortak dil çalışma zamanı doğal olarak devam etmek için iş parçacıklarının en işlenmeyen özel durumları tanır.</span><span class="sxs-lookup"><span data-stu-id="5808e-103">Starting with the .NET Framework version 2.0, the common language runtime allows most unhandled exceptions in threads to proceed naturally.</span></span> <span data-ttu-id="5808e-104">Çoğu durumda bu işlenmeyen özel durumu uygulamanın sonlandırılmasına neden anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="5808e-104">In most cases this means that the unhandled exception causes the application to terminate.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5808e-105">Bu önemli bir backstop sağlamak için birçok işlenmeyen özel durumları 1.0 ve 1.1 .NET Framework sürümlerini farklıdır — Örneğin, iş parçacığı havuzu iş parçacıklarında özel durumlar işlenmemiş.</span><span class="sxs-lookup"><span data-stu-id="5808e-105">This is a significant change from the .NET Framework versions 1.0 and 1.1, which provide a backstop for many unhandled exceptions — for example, unhandled exceptions in thread pool threads.</span></span> <span data-ttu-id="5808e-106">Bkz: [değiştirme önceki sürümlerden](#ChangeFromPreviousVersions) bu konunun devamındaki.</span><span class="sxs-lookup"><span data-stu-id="5808e-106">See [Change from Previous Versions](#ChangeFromPreviousVersions) later in this topic.</span></span>  
  
 <span data-ttu-id="5808e-107">Ortak dil çalışma zamanı program akışı denetimi için kullanılan bir backstop belirli işlenmeyen özel durumları sağlar:</span><span class="sxs-lookup"><span data-stu-id="5808e-107">The common language runtime provides a backstop for certain unhandled exceptions that are used for controlling program flow:</span></span>  
  
- <span data-ttu-id="5808e-108">A <xref:System.Threading.ThreadAbortException> çünkü bir iş parçacığında oluşturulan <xref:System.Threading.Thread.Abort%2A> çağrıldı.</span><span class="sxs-lookup"><span data-stu-id="5808e-108">A <xref:System.Threading.ThreadAbortException> is thrown in a thread because <xref:System.Threading.Thread.Abort%2A> was called.</span></span>  
  
- <span data-ttu-id="5808e-109">Bir <xref:System.AppDomainUnloadedException> iş parçacığı yürütüyordur uygulama etki alanı kaldırıldı çünkü bir dizi oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="5808e-109">An <xref:System.AppDomainUnloadedException> is thrown in a thread because the application domain in which the thread is executing is being unloaded.</span></span>  
  
- <span data-ttu-id="5808e-110">Ortak dil çalışma zamanı ya da bir ana bilgisayar işlemi bir iç özel durum tarafından iş parçacığı sonlanır.</span><span class="sxs-lookup"><span data-stu-id="5808e-110">The common language runtime or a host process terminates the thread by throwing an internal exception.</span></span>  
  
 <span data-ttu-id="5808e-111">Herhangi birini bu özel durumları iş parçacıklarında ortak dil çalışma zamanı tarafından oluşturulan işlenmemiş özel durum iş parçacığı sonlanır, ancak ortak dil çalışma zamanı özel durumu, devam etmek izin vermez.</span><span class="sxs-lookup"><span data-stu-id="5808e-111">If any of these exceptions are unhandled in threads created by the common language runtime, the exception terminates the thread, but the common language runtime does not allow the exception to proceed further.</span></span>  
  
 <span data-ttu-id="5808e-112">Bu özel durumlar ana iş parçacığı veya bir çalışma zamanı yönetilmeyen koddan girilen iş parçacığı işlenmeyen varsa, bunlar normal olarak, uygulamanın sonlandırılmasıyla kaynaklanan devam edin.</span><span class="sxs-lookup"><span data-stu-id="5808e-112">If these exceptions are unhandled in the main thread, or in threads that entered the runtime from unmanaged code, they proceed normally, resulting in termination of the application.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5808e-113">Önce herhangi bir yönetilen kod bir özel durum işleyicisi yüklemek için bir fırsat işlenmeyen bir özel durum oluşturmak için çalışma zamanı için mümkündür.</span><span class="sxs-lookup"><span data-stu-id="5808e-113">It is possible for the runtime to throw an unhandled exception before any managed code has had a chance to install an exception handler.</span></span> <span data-ttu-id="5808e-114">Yönetilen kod gibi bir özel durumu işlemek için hiçbir şansınız olsa da, özel durum doğal olarak devam etmesine izin verilir.</span><span class="sxs-lookup"><span data-stu-id="5808e-114">Even though managed code had no chance to handle such an exception, the exception is allowed to proceed naturally.</span></span>  
  
## <a name="exposing-threading-problems-during-development"></a><span data-ttu-id="5808e-115">Sorunları, geliştirme sırasında iş parçacığı gösterme</span><span class="sxs-lookup"><span data-stu-id="5808e-115">Exposing Threading Problems During Development</span></span>  
 <span data-ttu-id="5808e-116">İş parçacıkları sessiz bir şekilde, uygulamayı sonlandırmadan başarısız olmasına izin verildiğinde programlama ciddi sorunlar algılanmayabilir.</span><span class="sxs-lookup"><span data-stu-id="5808e-116">When threads are allowed to fail silently, without terminating the application, serious programming problems can go undetected.</span></span> <span data-ttu-id="5808e-117">Bu, hizmetlerin ve uzun süre çalışan diğer uygulamaların belirli bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="5808e-117">This is a particular problem for services and other applications which run for extended periods.</span></span> <span data-ttu-id="5808e-118">Başarısız iş parçacıkları gibi program durumunu kademeli olarak bozulur.</span><span class="sxs-lookup"><span data-stu-id="5808e-118">As threads fail, program state gradually becomes corrupted.</span></span> <span data-ttu-id="5808e-119">Uygulama performansı düşebilir veya uygulama askıda.</span><span class="sxs-lookup"><span data-stu-id="5808e-119">Application performance may degrade, or the application might hang.</span></span>  
  
 <span data-ttu-id="5808e-120">Doğal olarak, işletim sistemi program sonlanana kadar devam etmek için iş parçacığı işlenmeyen özel durumlara izin sorunları, geliştirme ve test sırasında sunar.</span><span class="sxs-lookup"><span data-stu-id="5808e-120">Allowing unhandled exceptions in threads to proceed naturally, until the operating system terminates the program, exposes such problems during development and testing.</span></span> <span data-ttu-id="5808e-121">Program sonlandırmalar hata ayıklama desteği üzerinde hata bildirir.</span><span class="sxs-lookup"><span data-stu-id="5808e-121">Error reports on program terminations support debugging.</span></span>  
  
<a name="ChangeFromPreviousVersions"></a>   
## <a name="change-from-previous-versions"></a><span data-ttu-id="5808e-122">Önceki sürümlerden değiştirme</span><span class="sxs-lookup"><span data-stu-id="5808e-122">Change from Previous Versions</span></span>  
 <span data-ttu-id="5808e-123">Yönetilen iş parçacıkları için en önemli değişiklik ilgilidir.</span><span class="sxs-lookup"><span data-stu-id="5808e-123">The most significant change pertains to managed threads.</span></span> <span data-ttu-id="5808e-124">.NET Framework sürüm 1.0 ve 1.1, ortak dil çalışma zamanı aşağıdaki durumlarda işlenmeyen özel durumlara ilişkin bir backstop sağlar:</span><span class="sxs-lookup"><span data-stu-id="5808e-124">In the .NET Framework versions 1.0 and 1.1, the common language runtime provides a backstop for unhandled exceptions in the following situations:</span></span>  
  
- <span data-ttu-id="5808e-125">Bir iş parçacığı havuzu iş parçacığı üzerinde işlenmeyen bir özel durum de yoktur.</span><span class="sxs-lookup"><span data-stu-id="5808e-125">There is no such thing as an unhandled exception on a thread pool thread.</span></span> <span data-ttu-id="5808e-126">Bir görev değil işleyen bir özel durum oluşturduğunda, çalışma zamanı özel durum yığın izlemesi konsola yazdırır ve iş parçacığının iş parçacığı havuzuna döndürür.</span><span class="sxs-lookup"><span data-stu-id="5808e-126">When a task throws an exception that it does not handle, the runtime prints the exception stack trace to the console and then returns the thread to the thread pool.</span></span>  
  
- <span data-ttu-id="5808e-127">Bir iş parçacığında işlenmeyen bir özel durum ile oluşturulmuş gibi bir şey olduğunu <xref:System.Threading.Thread.Start%2A> yöntemi <xref:System.Threading.Thread> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="5808e-127">There is no such thing as an unhandled exception on a thread created with the <xref:System.Threading.Thread.Start%2A> method of the <xref:System.Threading.Thread> class.</span></span> <span data-ttu-id="5808e-128">Böyle bir iş parçacığı üzerinde çalışan kodu değil işleyen bir özel durum oluşturduğunda, çalışma zamanı özel durum yığın izlemesi konsola yazdırır ve düzgün bir şekilde iş parçacığı sonlanır.</span><span class="sxs-lookup"><span data-stu-id="5808e-128">When code running on such a thread throws an exception that it does not handle, the runtime prints the exception stack trace to the console and then gracefully terminates the thread.</span></span>  
  
- <span data-ttu-id="5808e-129">Sonlandırıcı iş parçacığı işlenmeyen bir özel olarak böyle bir şey yoktur.</span><span class="sxs-lookup"><span data-stu-id="5808e-129">There is no such thing as an unhandled exception on the finalizer thread.</span></span> <span data-ttu-id="5808e-130">Bir sonlandırıcı olmayan işleyen bir özel durum oluşturduğunda, çalışma zamanı özel durum yığın izlemesi konsola yazdırır ve ardından sonlandırıcılar çalıştırmayı sürdürmek herhangi bir sonlandırıcı sağlar.</span><span class="sxs-lookup"><span data-stu-id="5808e-130">When a finalizer throws an exception that it does not handle, the runtime prints the exception stack trace to the console and then allows the finalizer thread to resume running finalizers.</span></span>  
  
 <span data-ttu-id="5808e-131">Yönetilen iş parçacığı ön plan veya arka plan durum, bu davranışı etkilemez.</span><span class="sxs-lookup"><span data-stu-id="5808e-131">The foreground or background status of a managed thread does not affect this behavior.</span></span>  
  
 <span data-ttu-id="5808e-132">Yönetilmeyen kodda kaynaklanan iş parçacığı işlenmeyen özel durumlar için fark daha inceliklidir.</span><span class="sxs-lookup"><span data-stu-id="5808e-132">For unhandled exceptions on threads originating in unmanaged code, the difference is more subtle.</span></span> <span data-ttu-id="5808e-133">Çalışma zamanı JIT-ekleme iletişim kutusu, yönetilen özel durumlar veya yerel kod arasında geçen iş parçacığı yerel özel durumları için işletim sistemi iletişim preempts.</span><span class="sxs-lookup"><span data-stu-id="5808e-133">The runtime JIT-attach dialog preempts the operating system dialog for managed exceptions or native exceptions on threads that have passed through native code.</span></span> <span data-ttu-id="5808e-134">Her durumda işlemi sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="5808e-134">The process terminates in all cases.</span></span>  
  
### <a name="migrating-code"></a><span data-ttu-id="5808e-135">Kod geçirme</span><span class="sxs-lookup"><span data-stu-id="5808e-135">Migrating Code</span></span>  
 <span data-ttu-id="5808e-136">Genel olarak, değişiklik düzeltilebilir böylece daha önce tanınmayan programlama sorunları açığa çıkarır.</span><span class="sxs-lookup"><span data-stu-id="5808e-136">In general, the change will expose previously unrecognized programming problems so that they can be fixed.</span></span> <span data-ttu-id="5808e-137">Bazı durumlarda, ancak programcılar örneğin iş parçacıklarını sonlandırma çalışma zamanı backstop avantajlarından almış.</span><span class="sxs-lookup"><span data-stu-id="5808e-137">In some cases, however, programmers might have taken advantage of the runtime backstop, for example to terminate threads.</span></span> <span data-ttu-id="5808e-138">Duruma bağlı olarak, aşağıdaki geçiş stratejileri birini düşünmelisiniz:</span><span class="sxs-lookup"><span data-stu-id="5808e-138">Depending on the situation, they should consider one of the following migration strategies:</span></span>  
  
- <span data-ttu-id="5808e-139">Kod, sinyal alındığında düzgün bir şekilde iş parçacığından çıkar şekilde yeniden yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5808e-139">Restructure the code so the thread exits gracefully when a signal is received.</span></span>  
  
- <span data-ttu-id="5808e-140">Kullanım <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> iş parçacığını durdurmak için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="5808e-140">Use the <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method to abort the thread.</span></span>  
  
- <span data-ttu-id="5808e-141">İşlem sonlandırma devam edebilmeniz adına bir iş parçacığı durdurulması gerekir, böylece otomatik olarak işlem çıkış sonlandırılır iş parçacığı bir arka plan iş parçacığı sağlayın.</span><span class="sxs-lookup"><span data-stu-id="5808e-141">If a thread must be stopped so that process termination can proceed, make the thread a background thread so that it is automatically terminated on process exit.</span></span>  
  
 <span data-ttu-id="5808e-142">Her durumda, strateji özel durumlar için tasarım yönergeleri izlemelidir.</span><span class="sxs-lookup"><span data-stu-id="5808e-142">In all cases, the strategy should follow the design guidelines for exceptions.</span></span> <span data-ttu-id="5808e-143">Bkz: [özel durumlar için tasarım yönergeleri](../../../docs/standard/design-guidelines/exceptions.md).</span><span class="sxs-lookup"><span data-stu-id="5808e-143">See [Design Guidelines for Exceptions](../../../docs/standard/design-guidelines/exceptions.md).</span></span>  
  
### <a name="application-compatibility-flag"></a><span data-ttu-id="5808e-144">Uygulama uyumluluk bayrağı</span><span class="sxs-lookup"><span data-stu-id="5808e-144">Application Compatibility Flag</span></span>  
 <span data-ttu-id="5808e-145">Geçici uyumluluk önlemi olarak, Yöneticiler bir uyumluluk bayrağı yerleştirebilirsiniz `<runtime>` uygulama yapılandırma dosyası bölümünü.</span><span class="sxs-lookup"><span data-stu-id="5808e-145">As a temporary compatibility measure, administrators can place a compatibility flag in the `<runtime>` section of the application configuration file.</span></span> <span data-ttu-id="5808e-146">Bu, 1.0 ve 1.1 sürümlerinde, davranıştır dönmek ortak dil çalışma zamanı neden olur.</span><span class="sxs-lookup"><span data-stu-id="5808e-146">This causes the common language runtime to revert to the behavior of versions 1.0 and 1.1.</span></span>  
  
```xml  
<legacyUnhandledExceptionPolicy enabled="1"/>  
```  
  
## <a name="host-override"></a><span data-ttu-id="5808e-147">Ana bilgisayar geçersiz kılma</span><span class="sxs-lookup"><span data-stu-id="5808e-147">Host Override</span></span>  
 <span data-ttu-id="5808e-148">.NET Framework sürüm 2. 0'da, yönetilmeyen bir konak kullanabilirsiniz [Iclrpolicymanager](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md) varsayılan geçersiz kılmak için barındırma API Arabirimi işlenmeyen özel durum ilkesi ortak dil çalışma zamanı.</span><span class="sxs-lookup"><span data-stu-id="5808e-148">In the .NET Framework version 2.0, an unmanaged host can use the [ICLRPolicyManager](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md) interface in the Hosting API to override the default unhandled exception policy of the common language runtime.</span></span> <span data-ttu-id="5808e-149">[Iclrpolicymanager::setunhandledexceptionpolicy](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setunhandledexceptionpolicy-method.md) işlevi, işlenmemiş özel durumlar için ilke ayarlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="5808e-149">The [ICLRPolicyManager::SetUnhandledExceptionPolicy](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setunhandledexceptionpolicy-method.md) function is used to set the policy for unhandled exceptions.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5808e-150">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="5808e-150">See also</span></span>

- [<span data-ttu-id="5808e-151">Yönetilen İş Parçacığı Oluşturma Temelleri</span><span class="sxs-lookup"><span data-stu-id="5808e-151">Managed Threading Basics</span></span>](../../../docs/standard/threading/managed-threading-basics.md)
