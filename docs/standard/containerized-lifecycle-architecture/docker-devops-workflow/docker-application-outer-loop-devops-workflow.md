---
title: Docker uygulaması için dış döngü DevOps iş akışındaki adımlar
description: "\"Dış döngü\" DevOps iş akışının adımları öğrenin"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 11/23/2018
ms.openlocfilehash: b75e9df1c31e8bcebcaa6d56336a6aa499d13e1d
ms.sourcegitcommit: 30e2fe5cc4165aa6dde7218ec80a13def3255e98
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/13/2019
ms.locfileid: "56220945"
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="baae6-103">Docker uygulaması için dış döngü DevOps iş akışındaki adımlar</span><span class="sxs-lookup"><span data-stu-id="baae6-103">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="baae6-104">Şekil 5-1 bir uçtan uca gösterimi DevOps dış döngü iş akışı oluşturan adımları sunar.</span><span class="sxs-lookup"><span data-stu-id="baae6-104">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="baae6-105">Şekil 5-1: Docker uygulamaları Microsoft araçları ile DevOps dış döngü iş akışı</span><span class="sxs-lookup"><span data-stu-id="baae6-105">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="baae6-106">Şimdi daha ayrıntılı bu adımların her birini inceleyelim.</span><span class="sxs-lookup"><span data-stu-id="baae6-106">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="baae6-107">1. Adım: İç döngü geliştirme iş akışı</span><span class="sxs-lookup"><span data-stu-id="baae6-107">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="baae6-108">Bu adım ayrıntılı bölüm 4'te açıklanan ancak özeti için işte dış döngü, CI işlem hattı eylemleri başlatma kodunu (Git gibi) kaynak denetimi yönetim sistemine hangi geliştirici gönderim şu başladığı.</span><span class="sxs-lookup"><span data-stu-id="baae6-108">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-azure-devops-services-and-git"></a><span data-ttu-id="baae6-109">2. Adım: Kaynak kodu denetimi tümleştirme ve Azure DevOps Services ve Git ile yönetim</span><span class="sxs-lookup"><span data-stu-id="baae6-109">Step 2: Source-Code Control integration and management with Azure DevOps Services and Git</span></span>

<span data-ttu-id="baae6-110">Bu adımda, birleştirilmiş bir takım farklı geliştiricilerden gelen kod sürümünü toplamak için bir sürüm denetimi sistemi olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="baae6-110">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="baae6-111">Kaynak kodu denetimi (SCC) ve kaynak kodu Yönetimi yapısı ikinci geçiş için çoğu geliştirici, bir DevOps yaşam Docker uygulamaları oluştururken görünebilir olsa da, uygulama ile Docker görüntüleri göndermeniz gerekir değil, vurgulamak için kritik doğrudan genel Docker kayıt defterine (Azure Container Registry veya Docker hub'ı gibi) geliştiricinin makinesinden.</span><span class="sxs-lookup"><span data-stu-id="baae6-111">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="baae6-112">Tam, genel derleme ya da CI işlem hattı, kaynak kodu deposu (Git gibi) temel tümleştiriliyor yalnızca kaynak kod üzerinde Docker görüntüleri yayımladı ve üretim ortamlarına dağıtılan oluşturulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="baae6-112">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="baae6-113">Kendi makinelerde test ederken, geliştiriciler tarafından oluşturulan bir yerel görüntülere geliştiriciler tarafından kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="baae6-113">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="baae6-114">SCC koddan etkinleştirilmiş DevOps işlem hattı için kritik nedeni budur.</span><span class="sxs-lookup"><span data-stu-id="baae6-114">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="baae6-115">Azure DevOps Hizmetleri ve Team Foundation Server Git ve Team Foundation sürüm denetimi destekler.</span><span class="sxs-lookup"><span data-stu-id="baae6-115">Azure DevOps Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="baae6-116">Bunlar arasında seçin ve bir uçtan uca Microsoft deneyimi için kullanın.</span><span class="sxs-lookup"><span data-stu-id="baae6-116">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="baae6-117">Kodunuzu dış depolardaki (örneğin, GitHub, Git depoları şirket içi veya Subversion gibi) ancak de yönetebilirsiniz ve yine de bağlanabilir ve DevOps CI işlem hattınızı için başlangıç noktası olarak kodu alma mümkün olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="baae6-117">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-azure-devops-services-and-docker"></a><span data-ttu-id="baae6-118">3. Adım: Derleme, CI, tümleştirme ve Test ile Azure DevOps Hizmetleri ve Docker</span><span class="sxs-lookup"><span data-stu-id="baae6-118">Step 3: Build, CI, Integrate, and Test with Azure DevOps Services and Docker</span></span>

<span data-ttu-id="baae6-119">CI, modern yazılım test etme ve teslim için standart olarak belirlendi.</span><span class="sxs-lookup"><span data-stu-id="baae6-119">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="baae6-120">Docker çözümü, bir görev ayrımı nettir geliştirme ve operasyon ekipleri arasında tutar.</span><span class="sxs-lookup"><span data-stu-id="baae6-120">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="baae6-121">Docker görüntülerinin değiştirilemezlik ne olan geliştirilen, CI aracılığıyla test ve üretim ortamında çalışması arasında tekrarlanabilir bir dağıtım sağlar.</span><span class="sxs-lookup"><span data-stu-id="baae6-121">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="baae6-122">Docker altyapısı Geliştirici dizüstü bilgisayarlar arasında dağıtılmış ve test altyapısı kapsayıcıları ortamlar genelinde taşınabilir hale getirir.</span><span class="sxs-lookup"><span data-stu-id="baae6-122">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="baae6-123">Bu noktada, gönderilen doğru kodu ile bir sürüm denetimi sistemi sonra gereksinim duyduğunuz bir *derleme hizmeti* kod çekme ve genel derleme ve testleri çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="baae6-123">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="baae6-124">Yapı sunucunuz (Azure DevOps Hizmetleri), Docker altyapısı ve bir Docker kayıt defteri, kod deposu (Git, vb.) oluşan bir CI işlem hattı hakkında (CI, derleme, test) Bu adım için iç iş akışı yapısıdır.</span><span class="sxs-lookup"><span data-stu-id="baae6-124">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Azure DevOps Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="baae6-125">Azure DevOps Hizmetleri temel olarak uygulamalarınızı oluşturmaya ve CI işlem hattınızı ayarlama ve derlenen "yapıtları" yayımlama ", bir sonraki adımda açıklanan yapıt deposu," için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="baae6-125">You can use Azure DevOps Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="baae6-126">Docker dağıtımı için "son yapıtların" kullanıldığında dağıtılacak Docker görüntüleri uygulama veya hizmetlerle içine katıştırılır.</span><span class="sxs-lookup"><span data-stu-id="baae6-126">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="baae6-127">Bu görüntüleri atıldığında veya yayımlanan bir *Docker kayıt defteri* (Azure Container Registry'de sahip olanları ya da ortak bir resmi temel görüntüleri için yaygın olarak kullanılan Docker Hub kayıt gibi gibi özel bir depo).</span><span class="sxs-lookup"><span data-stu-id="baae6-127">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="baae6-128">Temel kavramlar aşağıda verilmiştir: CI işlem hattı devreye girdi dışı bir SCC depoya Git gibi bir işleme tarafından olacaktır.</span><span class="sxs-lookup"><span data-stu-id="baae6-128">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="baae6-129">İşleme, Şekil 5-2'de gösterildiği gibi bir Docker kapsayıcısı içinde bir derleme işi çalıştırın ve bu işi işlemin başarıyla tamamlanmasından sonra bir Docker görüntüsü Docker kayıt defterine itme, Azure DevOps Hizmetleri neden olur.</span><span class="sxs-lookup"><span data-stu-id="baae6-129">The commit will cause Azure DevOps Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="baae6-130">Şekil 5-2: CI'da adımlar</span><span class="sxs-lookup"><span data-stu-id="baae6-130">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="baae6-131">Docker ve Azure DevOps hizmetleriyle temel CI iş akışı adımlar şunlardır:</span><span class="sxs-lookup"><span data-stu-id="baae6-131">Here are the basic CI workflow steps with Docker and Azure DevOps Services:</span></span>

1.  <span data-ttu-id="baae6-132">Geliştirici (Git/Azure DevOps Services, GitHub, vb.) bir SCC depoya bir yürütme iter.</span><span class="sxs-lookup"><span data-stu-id="baae6-132">The developer pushes a commit to an SCC repository (Git/Azure DevOps Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="baae6-133">Azure DevOps Services veya Git kullanıyorsanız, CI, Azure DevOps Hizmetleri onay kutusunu seçmek kadar kolay olduğunu gösterir, oluşturulmuştur.</span><span class="sxs-lookup"><span data-stu-id="baae6-133">If you're using Azure DevOps Services or Git, CI is built in, which means that it is as simple as selecting a check box in Azure DevOps Services.</span></span> <span data-ttu-id="baae6-134">Bir dış SCC (örneğin GitHub) kullanıyorsanız, bir *Web kancası* Azure DevOps Hizmetleri güncelleştirmesi bildirmek veya Git/GitHub gönderin.</span><span class="sxs-lookup"><span data-stu-id="baae6-134">If you're using an external SCC (like GitHub), a *webhook* will notify Azure DevOps Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="baae6-135">Azure DevOps hizmetleriyle görüntünün yanı sıra uygulama ve test kodu açıklayan DockerFile dahil olmak üzere SCC depoyu çeker.</span><span class="sxs-lookup"><span data-stu-id="baae6-135">Azure DevOps Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="baae6-136">Azure DevOps hizmetleriyle bir Docker görüntüsü derler ve derleme numarasıyla etiketler.</span><span class="sxs-lookup"><span data-stu-id="baae6-136">Azure DevOps Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="baae6-137">Azure DevOps hizmetleriyle sağlanan bir Docker konağı içinde Docker kapsayıcısı başlatır ve uygun testleri çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="baae6-137">Azure DevOps Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="baae6-138">Testler başarılı olursa, "en derleme" olduğunu öğrenmek için görüntüyü önce anlamlı bir ad relabeled (gibi "/ 1.0.0" veya herhangi bir etiketi) ve ardından Docker kayıt defterinize (Docker Hub, Azure Container Registry, DTR, vb.) gönderdiniz</span><span class="sxs-lookup"><span data-stu-id="baae6-138">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-azure-devops-services-and-the-docker-extension-for-azure-devops-services"></a><span data-ttu-id="baae6-139">Azure DevOps hizmetler için CI işlem hattı Azure DevOps Hizmetleri ve Docker uzantısını uygulamak</span><span class="sxs-lookup"><span data-stu-id="baae6-139">Implementing the CI pipeline with Azure DevOps Services and the Docker extension for Azure DevOps Services</span></span>

<span data-ttu-id="baae6-140">[Azure DevOps Hizmetleri Docker uzantısını](https://aka.ms/vstsdockerextension) CI işlem hattınızda ile Docker görüntülerinizi oluşturmak, kimliği doğrulanmış bir Docker kayıt defterine Docker görüntüleri gönderin, Docker görüntülerini çalıştırmak veya yapabilirsiniz Docker tarafından sunulan diğer işlemleri çalıştırmak için bir görev ekler. CLI.</span><span class="sxs-lookup"><span data-stu-id="baae6-140">The [Azure DevOps Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="baae6-141">Ayrıca, oluşturun, gönderin ve çok kapsayıcılı Docker uygulamaları çalıştırma veya Şekil 5-3'te gösterildiği gibi Docker Compose CLI tarafından sunulan diğer işlemleri çalıştırmak için kullanabileceğiniz bir Docker Compose görev ekler.</span><span class="sxs-lookup"><span data-stu-id="baae6-141">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="baae6-142">Şekil 5-3: Azure DevOps Hizmetleri Docker CI işlem hattında</span><span class="sxs-lookup"><span data-stu-id="baae6-142">Figure 5-3: The Docker CI pipeline in Azure DevOps Services</span></span>

<span data-ttu-id="baae6-143">Docker uzantısını hizmet uç noktaları, kapsayıcı ya da görüntü kayıt defterleri ve Docker ana bilgisayarları için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="baae6-143">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="baae6-144">Yerel bir Docker konağı varsa (Bu şu anda özel bir Azure DevOps Hizmetleri Aracısı gerektirir); görevleri varsayılan Aksi takdirde, bunlar bir Docker konağı bağlantı verdiğiniz gerektirir.</span><span class="sxs-lookup"><span data-stu-id="baae6-144">The tasks default to using a local Docker host if available (this currently requires a custom Azure DevOps Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="baae6-145">Bir Docker kayıt defteri bağlantısı sağlayan bir görüntü gönderme gibi bir Docker kayıt defteri ile kimlik doğrulaması üzerinde bağlı eylemler gerektirir.</span><span class="sxs-lookup"><span data-stu-id="baae6-145">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="baae6-146">Azure DevOps Hizmetleri Docker uzantısını Azure DevOps Services hesabınızda aşağıdaki bileşenleri yükler:</span><span class="sxs-lookup"><span data-stu-id="baae6-146">The Azure DevOps Services Docker extension installs the following components in your Azure DevOps Services account:</span></span>

-   <span data-ttu-id="baae6-147">Bir Docker kayıt defterine bağlanmak için hizmet uç noktası</span><span class="sxs-lookup"><span data-stu-id="baae6-147">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="baae6-148">Bir Docker kapsayıcısı ana bilgisayarına bağlanmak için hizmet uç noktası</span><span class="sxs-lookup"><span data-stu-id="baae6-148">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="baae6-149">Aşağıdakileri yapmak için bir Docker görevi:</span><span class="sxs-lookup"><span data-stu-id="baae6-149">A Docker task to do the following:</span></span>

-   <span data-ttu-id="baae6-150">Bir görüntü oluşturun</span><span class="sxs-lookup"><span data-stu-id="baae6-150">Build an image</span></span>

-   <span data-ttu-id="baae6-151">Bir kayıt defterine iletin, bir resim veya bir depo</span><span class="sxs-lookup"><span data-stu-id="baae6-151">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="baae6-152">Bir kapsayıcıdaki bir görüntü çalıştırma</span><span class="sxs-lookup"><span data-stu-id="baae6-152">Run an image in a container</span></span>

-   <span data-ttu-id="baae6-153">Docker komutu çalıştırın</span><span class="sxs-lookup"><span data-stu-id="baae6-153">Run a Docker command</span></span>

-   <span data-ttu-id="baae6-154">Bir Docker Compose komutu çalıştırmak için bir Docker Compose görevi</span><span class="sxs-lookup"><span data-stu-id="baae6-154">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="baae6-155">Azure DevOps Hizmetleri bu görevleri, bir derleme Linux Docker konak/VM Azure'da sağlanan ve tercih edilen Docker kayıt defterinizin (Azure Container Registry, Docker Hub, özel Docker DTR veya herhangi bir Docker kayıt), Docker sürekli tümleştirme işlem hattında birleştirebilirsiniz bir çok tutarlı bir yol.</span><span class="sxs-lookup"><span data-stu-id="baae6-155">With these Azure DevOps Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="baae6-156">***Gereksinimler:***</span><span class="sxs-lookup"><span data-stu-id="baae6-156">***Requirements:***</span></span>

-   <span data-ttu-id="baae6-157">Azure DevOps hizmetlerine veya şirket içi yüklemeler, Team Foundation Server 2015 güncelleştirme 3 veya sonraki sürümü için.</span><span class="sxs-lookup"><span data-stu-id="baae6-157">Azure DevOps Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="baae6-158">Docker ikili dosyaları içeren bir Azure DevOps Hizmetleri Aracısı.</span><span class="sxs-lookup"><span data-stu-id="baae6-158">An Azure DevOps Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="baae6-159">Bunlardan birini oluşturmak kolay bir yolu, Azure DevOps Hizmetleri Aracısı Docker görüntü temel alan bir kapsayıcı çalıştırmak için Docker kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="baae6-159">An easy way to create one of these is to use Docker to run a container based on the Azure DevOps Services agent Docker image.</span></span>

<span data-ttu-id="baae6-160">**Daha fazla bilgi** Azure DevOps Hizmetleri Docker CI birleştirme hakkında daha fazla işlem hattı ve izlenecek yollar, görüntülemek için aşağıdaki siteleri ziyaret edin:</span><span class="sxs-lookup"><span data-stu-id="baae6-160">**More info** To read more about assembling a Azure DevOps Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="baae6-161">Azure DevOps Hizmetleri aracıyı çalıştıran bir Docker kapsayıcısı: [ https://hub.docker.com/r/\ microsoft/vsts-agent /](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="baae6-161">Running an Azure DevOps Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="baae6-162">Azure DevOps Hizmetleri Docker uzantısı: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="baae6-162">Azure DevOps Services Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="baae6-163">Azure DevOps hizmetleriyle .NET Core Linux Docker görüntüleri oluşturma: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="baae6-163">Building .NET Core Linux Docker images with Azure DevOps Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="baae6-164">Docker desteği içeren Visual Studio Team Service Linux tabanlı yapı makinesini oluşturma: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="baae6-164">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="baae6-165">Tümleştirme, test etme ve çok kapsayıcılı Docker uygulamaları doğrula</span><span class="sxs-lookup"><span data-stu-id="baae6-165">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="baae6-166">Çoğu Docker uygulamalar genellikle birden çok kapsayıcı bir çoklu kapsayıcı yerine oluşur.</span><span class="sxs-lookup"><span data-stu-id="baae6-166">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="baae6-167">Mikro hizmet başına bir kapsayıcı olurdu ve mikro hizmet odaklı bir uygulama buna iyi bir örnektir.</span><span class="sxs-lookup"><span data-stu-id="baae6-167">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="baae6-168">Ancak, hatta kesinlikle mikro hizmetler yaklaşımı düzenleri olmadan, çok olası Docker uygulamanız birden çok kapsayıcı veya hizmet olarak sahipliğindeki.</span><span class="sxs-lookup"><span data-stu-id="baae6-168">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="baae6-169">Bu nedenle, uygulama kapsayıcıları CI işlem hattının oluşturduktan sonra ayrıca bir tümleştirme Docker konağı veya kümesine kapsayıcıları olduğu bile bir test kapsayıcılarında tüm bir bütün olarak uygulamadan test dağıtma ve tümleştirme gerekir Dağıtılmış.</span><span class="sxs-lookup"><span data-stu-id="baae6-169">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="baae6-170">Tek bir ana bilgisayar kullanıyorsanız, docker gibi Docker komutlarını kullanabilirsiniz-compose oluşturun ve ilgili kapsayıcıları tek bir VM Docker ortamında test edin ve dağıtın.</span><span class="sxs-lookup"><span data-stu-id="baae6-170">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="baae6-171">Ancak, DC/OS, Kubernetes ve Docker Swarm gibi bir orchestrator kümesi ile çalışıyorsanız, farklı mekanizma veya seçili küme/scheduler bağlı olarak, orchestrator ile kapsayıcılarınızı dağıtmanız gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="baae6-171">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="baae6-172">Docker kapsayıcıları karşı çalıştırabileceğiniz testleri çeşitli türleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="baae6-172">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="baae6-173">Docker kapsayıcıları için birim testleri</span><span class="sxs-lookup"><span data-stu-id="baae6-173">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="baae6-174">Test grupları birbiriyle uygulamaların veya mikro hizmetler</span><span class="sxs-lookup"><span data-stu-id="baae6-174">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="baae6-175">Üretim ve "kanarya" sürümlerde test</span><span class="sxs-lookup"><span data-stu-id="baae6-175">Test in production and "canary" releases</span></span>

<span data-ttu-id="baae6-176">Tümleştirme ve işlevsel testleri çalıştırırken, kapsayıcıların dışında gelen bu testlerin çalıştırılması gereken önemli noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="baae6-176">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="baae6-177">Testleri değil tanımlanmalı ve kapsayıcılar, üretime dağıtma gibi tam olarak olması gereken statik görüntüler tabanlı olduğundan, dağıttığınız kapsayıcılara çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="baae6-177">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="baae6-178">Birkaç kümelerini (küme, küme hazırlama ve üretim kümesi test) test gibi daha gelişmiş senaryoları test ederken çok uygun bir seçenek çeşitli kümelerinde test etmek için bir kayıt defterine görüntü yayımlamaktır.</span><span class="sxs-lookup"><span data-stu-id="baae6-178">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="baae6-179">Özel uygulama Docker görüntüsünü, genel Docker kayıt defterine gönderme</span><span class="sxs-lookup"><span data-stu-id="baae6-179">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="baae6-180">Docker görüntülerini test ve doğrulanmış sonra etiketleyebilir ve bunları Docker kayıt defterinize yayımlama isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="baae6-180">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="baae6-181">QA ve üretim ortamlarına dağıtılacak özel test (diğer adıyla "en görüntüleri") depoladığınız merkezi bir yerde olduğu için Docker kayıt defteri Docker uygulaması yaşam döngüsü içinde bir kritik hissettiğimiz parçaymış.</span><span class="sxs-lookup"><span data-stu-id="baae6-181">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="baae6-182">(Git, vb.) SCC deponuzda saklanan uygulama kodu, "gerçeklik kaynağı" nasıl olduğunu, Docker kayıt defteri, "gerçeklik kaynağı" ikili uygulamanızı veya BITS QA ya da üretim ortamı için dağıtılması için benzer.</span><span class="sxs-lookup"><span data-stu-id="baae6-182">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="baae6-183">Genellikle, Azure Container Registry veya Docker Trusted Registry gibi bir şirket içi kayıt defteri veya bir genel bulut kayıt defteri (gibi kısıtlı erişim için kendi özel görüntülerinizi özel depolarınızı ya da özel bir depoya sahip olmak isteyebilirsiniz Docker Hub), açık kaynak kodunuzu değilse, bu durumda son olsa da satıcının güvenlik güvenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="baae6-183">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="baae6-184">Her iki durumda da, bunu Şekil 5-4'te gösterildiği gibi docker itme komut sonuçta dayalı ve oldukça benzer yöntemidir.</span><span class="sxs-lookup"><span data-stu-id="baae6-184">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="baae6-185">Şekil 5-4: Özel görüntüleri Docker kayıt defterine yayımlama</span><span class="sxs-lookup"><span data-stu-id="baae6-185">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="baae6-186">Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay kayıt defteri ve benzeri gibi bulut satıcılarının Docker kayıt defterleri birden çok tekliflerin vardır.</span><span class="sxs-lookup"><span data-stu-id="baae6-186">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="baae6-187">Azure DevOps Hizmetleri Docker uzantısını kullanarak, Şekil 5-5'te gösterildiği gibi hizmet görüntüleri kimliği doğrulanmış bir Docker kayıt defterine (Azure Container Registry) gibi birden çok etiketi ile bir docker-compose.yml dosyası tarafından tanımlanan bir dizi gönderebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="baae6-187">Using the Azure DevOps Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="baae6-188">Şekil 5-5: Bir Docker kayıt defterine yayımlama özel görüntüleri için Azure DevOps Hizmetleri kullanma</span><span class="sxs-lookup"><span data-stu-id="baae6-188">Figure 5-5: Using Azure DevOps Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="baae6-189">**Daha fazla bilgi** daha fazla bilgi için Azure DevOps Services için Docker uzantısını hakkında Git <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="baae6-189">**More info** To read more about the Docker extension for Azure DevOps Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="baae6-190">Azure Container Registry hakkında daha fazla bilgi için şuraya gidin <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="baae6-190">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="baae6-191">4. Adım: CD dağıtma</span><span class="sxs-lookup"><span data-stu-id="baae6-191">Step 4: CD, Deploy</span></span>

<span data-ttu-id="baae6-192">Docker görüntülerinin değiştirilemezlik ne geliştirilen, CI aracılığıyla test ve üretim ortamında çalışması tekrarlanabilir bir dağıtım sağlar.</span><span class="sxs-lookup"><span data-stu-id="baae6-192">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="baae6-193">Docker kayıt defterinizde (özel veya genel) yayımlanmış uygulama Docker görüntüleri oluşturduktan sonra bunları sahip olabileceğiniz birden fazla ortam dağıtabilirsiniz (üretim, QA, hazırlama, vb.) gelen Azure DevOps hizmetlerini kullanarak CD işlem hattı işlem hattı görevler veya Azure DevOps Services Release Management.</span><span class="sxs-lookup"><span data-stu-id="baae6-193">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Azure DevOps Services pipeline tasks or Azure DevOps Services Release Management.</span></span>

<span data-ttu-id="baae6-194">Ancak, bu noktada, dağıttığınız ne tür bir Docker uygulaması üzerinde bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="baae6-194">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="baae6-195">Basit bir uygulaması (açısından bir oluşturma ve dağıtma) gibi bir tek parçalı birkaç kapsayıcılar veya hizmetler oluşturan uygulama ve dağıtılan birkaç sunucular veya VM'ler dağıtma gibi daha karmaşık bir uygulama dağıtmanızı çok farklı bir mikro hizmet tabanlı uygulama hiper ölçekli özelliklere sahip.</span><span class="sxs-lookup"><span data-stu-id="baae6-195">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="baae6-196">Bu iki senaryo aşağıdaki bölümlerde açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="baae6-196">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="baae6-197">Docker uygulamaları için birden fazla Docker ortamlarını oluşan dağıtma</span><span class="sxs-lookup"><span data-stu-id="baae6-197">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="baae6-198">Az karmaşık senaryo ilk bakalım: Basit Docker ana bilgisayarları (VM'ler veya sunucular) tek bir ortam ya da birden çok ortama dağıtma (QA, hazırlık ve üretim).</span><span class="sxs-lookup"><span data-stu-id="baae6-198">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="baae6-199">Bu senaryoda, dahili olarak docker CD işlem hattınızı kullanabilirsiniz-Şekil 5-6'da gösterildiği gibi kapsayıcılar ve hizmetler, ilgili alt kümesi ile Docker uygulamalarını dağıtma (Azure DevOps Hizmetleri dağıtım görevlerinizi) oluşturun.</span><span class="sxs-lookup"><span data-stu-id="baae6-199">In this scenario, internally your CD pipeline can use docker-compose (from your Azure DevOps Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="baae6-200">Şekil 5-6: Basit Docker konağı ortamları kayıt defterine uygulama kapsayıcıları dağıtma</span><span class="sxs-lookup"><span data-stu-id="baae6-200">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="baae6-201">Şekil 5-7, nasıl yapı CI QA ve test ortamları Azure DevOps hizmetleriyle Docker Compose Görev Ekle iletişim kutusuna tıklayarak bağlanabilirsiniz vurgular.</span><span class="sxs-lookup"><span data-stu-id="baae6-201">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Azure DevOps Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="baae6-202">Ancak, hazırlama veya üretim ortamlarına dağıtıldığında, genellikle birden çok ortama işleme Release Management özellikleri kullanmanız gerekir (ister QA, hazırlık ve üretim).</span><span class="sxs-lookup"><span data-stu-id="baae6-202">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="baae6-203">Tek Docker ana bilgisayarlara dağıtıyorsanız, Azure DevOps hizmetlerin kullandığı "Docker Compose" Görev (docker çağırma-başlık altında komut oluşturmanıza).</span><span class="sxs-lookup"><span data-stu-id="baae6-203">If you're deploying to single Docker hosts, it is using the Azure DevOps Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="baae6-204">Azure Container Service'e dağıtıyorsanız, aşağıdaki bölümde açıklandığı gibi Docker dağıtım görevini kullanır.</span><span class="sxs-lookup"><span data-stu-id="baae6-204">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="baae6-205">Şekil 5-7: Azure DevOps Hizmetleri hattında bir Docker Compose görev ekleme</span><span class="sxs-lookup"><span data-stu-id="baae6-205">Figure 5-7: Adding a Docker Compose task in a Azure DevOps Services pipeline</span></span>

<span data-ttu-id="baae6-206">Azure DevOps Hizmetleri'nde bir yayın oluştururken, giriş yapıtları kümesini alır.</span><span class="sxs-lookup"><span data-stu-id="baae6-206">When you create a release in Azure DevOps Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="baae6-207">Bunlar birden çok ortamda sürüm kullanım ömrü boyunca sabit olması amaçlanır.</span><span class="sxs-lookup"><span data-stu-id="baae6-207">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="baae6-208">Kapsayıcıları yapılırsa, giriş yapıları dağıtmak için bir kayıt defterindeki görüntüleri belirleyin.</span><span class="sxs-lookup"><span data-stu-id="baae6-208">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="baae6-209">Nasıl bunlar tanımlanır bağlı olarak, bunlar "myimage:latest" docker-compose dosyasından başvurduğunuzda olan en bariz örnek yayın süresi boyunca aynı kalması garanti edilmez.</span><span class="sxs-lookup"><span data-stu-id="baae6-209">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="baae6-210">Azure DevOps Services için Docker uzantısını, belirli kayıt defteri görüntü içeren derleme yapıtları oluşturma yeteneği özetleyen ikili aynı görüntü benzersiz olarak tanımlanabilmesi için garanti sunar.</span><span class="sxs-lookup"><span data-stu-id="baae6-210">The Docker extension for Azure DevOps Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="baae6-211">Gerçekten bir yayın için giriş olarak kullanmak istediklerinizi şunlardır.</span><span class="sxs-lookup"><span data-stu-id="baae6-211">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-azure-devops-services-release-management"></a><span data-ttu-id="baae6-212">Azure DevOps Services Release Management'ı kullanarak sürümleri için Docker ortamlarını yönetme</span><span class="sxs-lookup"><span data-stu-id="baae6-212">Managing releases to Docker environments by using Azure DevOps Services Release Management</span></span>

<span data-ttu-id="baae6-213">Azure DevOps Hizmetleri uzantıları, yeni bir görüntü oluşturun, bir Docker kayıt defterine yayımlama, Linux veya Windows konaklarda çalıştırın ve docker gibi komutları kullanın-tüm uygulama, Azure DevOps bakmalıyım olarak birden çok kapsayıcı dağıtmak için oluşturma Release Management özellikleri, birden çok ortam için hedeflenen Şekil 5-8'de gösterildiği gibi hizmetler.</span><span class="sxs-lookup"><span data-stu-id="baae6-213">Through the Azure DevOps Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Azure DevOps Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="baae6-214">Şekil 5-8: Azure DevOps Hizmetleri Docker Compose görevleri Azure DevOps Services Release Management'ı yapılandırma</span><span class="sxs-lookup"><span data-stu-id="baae6-214">Figure 5-8: Configuring Azure DevOps Services Docker Compose tasks from Azure DevOps Services Release Management</span></span>

<span data-ttu-id="baae6-215">Ancak, Şekil 5-6'daki ve uygulanan Şekil 5-8'de senaryo (Basit Docker ana bilgisayarları ve Vm'leri dağıtma ve tek kapsayıcı ya da örnek başına görüntü olacaktır) oldukça basittir ve yalnızca geliştirme veya test sc için büyük olasılıkla kullanılması gerektiğini göz önünde bulundurun enarios.</span><span class="sxs-lookup"><span data-stu-id="baae6-215">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="baae6-216">Çoğu Kurumsal üretim senaryosunda, yüksek kullanılabilirlik (HA) sahip istiyorsunuz ve birden çok düğüm, sunucuları ve Vm'leri artı "akıllı yük devretmeleri" arasında bu nedenle, bir sunucu veya düğüm Yük Dengeleme tarafından yönetilmesi kolay ölçeklenebilirlik başarısız olursa, hizmetlerinin ve kapsayıcılar, başka bir ana bilgisayar sunucusuna veya VM taşınır.</span><span class="sxs-lookup"><span data-stu-id="baae6-216">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="baae6-217">Bu durumda, kapsayıcı kümeleri ve düzenleyicileri zamanlayıcılar gibi daha gelişmiş teknolojilerden gerekir.</span><span class="sxs-lookup"><span data-stu-id="baae6-217">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="baae6-218">Bu nedenle, bu kümeye dağıtmak için tam olarak sonraki bölümde açıklanan Gelişmiş senaryolar aracılığıyla yoludur.</span><span class="sxs-lookup"><span data-stu-id="baae6-218">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="baae6-219">Docker kümeleri (DC/OS, Kubernetes ve Docker Swarm) karmaşık Docker uygulamalarını dağıtma</span><span class="sxs-lookup"><span data-stu-id="baae6-219">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="baae6-220">Dağıtılmış uygulamalar doğasını da dağıtılmış işlem kaynakları gerektirir.</span><span class="sxs-lookup"><span data-stu-id="baae6-220">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="baae6-221">HA havuza alınmış kaynaklar temelinde ve üretim ölçeği-özelliklerini kullanabilmek için yüksek ölçeklenebilirlik sağlayan özellikleri kümeleme olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="baae6-221">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="baae6-222">Kapsayıcıları el ile bu kümeye CLI aracından Docker Swarm gibi dağıtabilirsiniz (kullanma gibi [docker hizmeti oluşturulur](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) veya bir web kullanıcı Arabirimi gibi [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) kümeleri, ancak DC/OS için gerekir. Bu, yalnızca punctual dağıtımı test etmek veya ölçeklendirme genişletme veya izleme amacıyla gibi yönetim amacıyla saklı tutarız.</span><span class="sxs-lookup"><span data-stu-id="baae6-222">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="baae6-223">Özellikle, bir CD açısından ve Azure DevOps Hizmetleri kapsayıcıya alınmış uygulamalarınızı kapsayıcı dağıtılmış kümelerini dağıtır, Azure DevOps Services Release Management ortamlarından özel yapılan dağıtım görevlerini çalıştırabilirsiniz Şekil 5-9'da gösterildiği gibi hizmet.</span><span class="sxs-lookup"><span data-stu-id="baae6-223">From a CD point of view, and Azure DevOps Services specifically, you can run specially made deployment tasks from your Azure DevOps Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="baae6-224">Şekil 5-9: Dağıtılmış uygulamalar Container Service'e dağıtma</span><span class="sxs-lookup"><span data-stu-id="baae6-224">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="baae6-225">Başlangıçta, belirli bir küme veya düzenleyicileri dağıtırken, geleneksel olarak belirli bir dağıtım betikleri ve mekanizmalarına göre her bir orchestrator (diğer bir deyişle, Mesosphere DC/OS veya Kubernetes, Docker ve Docker değerinden farklı dağıtım mekanizmalarına sahip kullanmanız gerekir Yerine swarm) daha basit ve kullanımı kolay docker-docker-compose.yml tanımı dosyasını temel alan bir aracı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="baae6-225">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="baae6-226">Ancak, Şekil 5-10'da gösterilen Microsoft Azure DevOps Hizmetleri Docker dağıtımı görev sayesinde artık da DC/OS için Microsoft, "çeviri" sizin için gerçekleştirdiğinden yalnızca bilinen docker-compose.yml dosyanız kullanarak dağıtabilirsiniz (gelen, DC/OS tarafından gereken diğer biçimlere docker-compose.yml dosyası).</span><span class="sxs-lookup"><span data-stu-id="baae6-226">However, thanks to the Microsoft Azure DevOps Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="baae6-227">Şekil 5-10: Docker dağıtma görevi için ortam RM ekleme</span><span class="sxs-lookup"><span data-stu-id="baae6-227">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="baae6-228">Şekil 5-11 Docker dağıtma görevi düzenleyin ve hedef türünü (Azure Container Service DC/OS, bu durumda), Docker Compose dosyası ve Docker kayıt defteri bağlantıya (ör. Azure Container Registry veya Docker hub'ı) nasıl gösterir.</span><span class="sxs-lookup"><span data-stu-id="baae6-228">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="baae6-229">Görevin DC/OS kümesindeki kapsayıcılar olarak dağıtılması için kullanıma hazır özel Docker görüntülerinizi burada alır budur.</span><span class="sxs-lookup"><span data-stu-id="baae6-229">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="baae6-230">Şekil 5-11: Docker dağıtma görev tanımını Azure Container Service DC/OS için dağıtma</span><span class="sxs-lookup"><span data-stu-id="baae6-230">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="baae6-231">**Daha fazla bilgi** daha fazla bilgi için CD işlem hattının hakkında Azure DevOps Hizmetleri ve Docker ile aşağıdaki siteleri ziyaret edin:</span><span class="sxs-lookup"><span data-stu-id="baae6-231">**More info** To read more about the CD pipeline with Azure DevOps Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="baae6-232">Docker ve Azure Container Service için Azure DevOps Hizmetleri uzantısı: [ https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="baae6-232">Azure DevOps Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="baae6-233">Azure kapsayıcı hizmeti: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="baae6-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="baae6-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="baae6-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="baae6-235">5. Adım: Çalıştırma ve yönetme</span><span class="sxs-lookup"><span data-stu-id="baae6-235">Step 5: Run and manage</span></span>

<span data-ttu-id="baae6-236">Çalıştıran ve uygulamaları yönetmek için Kurumsal üretim sırasında önemli bir konu içinde ve kendisinin ve işlemleri türü nedeniyle düzeyidir ve bu alan büyük kapsamını yanı sıra bu düzeyde (BT işlemleri) çalışan kişiler, biz tüm sonraki HARCANMIŞTIR Bunu açıklayan için bölüm.</span><span class="sxs-lookup"><span data-stu-id="baae6-236">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="baae6-237">6. Adım: İzleme ve tanılama</span><span class="sxs-lookup"><span data-stu-id="baae6-237">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="baae6-238">Bu konuda, üretim sistemleri BT işlemleri gerçekleştiren görevler bir parçası olarak bir sonraki bölümde de ele alınmıştır; Bununla birlikte, uygulamayı sürekli olarak geliştirilir, bu adımda elde edilen içgörüleri Geliştirme takımına geri besleme gerekir vurgulamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="baae6-238">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="baae6-239">Görevleri ve işlemleri genellikle tarafından gerçekleştirilen olsa da bu açısından bakıldığında, ayrıca DevOps, parçasıdır BT.</span><span class="sxs-lookup"><span data-stu-id="baae6-239">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="baae6-240">Yalnızca izleme ve tanılama DevOps bölge içinde yüzde 100 olduğunda izleme işlemleri ve test veya beta ortamları karşı geliştirme ekibi tarafından gerçekleştirilen analiz olan.</span><span class="sxs-lookup"><span data-stu-id="baae6-240">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="baae6-241">Bu, yük testi yapma veya yalnızca beta veya beta test uzmanlarına yeni sürümleri nereden çalışıyorsunuz, QA ortamları izleme tarafından gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="baae6-241">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="baae6-242">[Önceki](index.md)
>[İleri](create-ci-cd-pipelines-azure-devops-services-aspnetcore-kubernetes.md)</span><span class="sxs-lookup"><span data-stu-id="baae6-242">[Previous](index.md)
[Next](create-ci-cd-pipelines-azure-devops-services-aspnetcore-kubernetes.md)</span></span>
