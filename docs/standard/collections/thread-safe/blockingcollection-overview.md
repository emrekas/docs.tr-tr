---
title: BlockingCollection Genel Bakışı
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- BlockingCollection, overview
ms.assetid: 987ea3d7-0ad5-4238-8b64-331ce4eb3f0b
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 07dbffff9f3d93a33fa458fb9c2f16e64aeaf977
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64664545"
---
# <a name="blockingcollection-overview"></a><span data-ttu-id="05ff5-102">BlockingCollection Genel Bakışı</span><span class="sxs-lookup"><span data-stu-id="05ff5-102">BlockingCollection Overview</span></span>
<span data-ttu-id="05ff5-103"><xref:System.Collections.Concurrent.BlockingCollection%601> Aşağıdaki özellikleri sağlayan bir iş parçacığı güvenli koleksiyon sınıfı şöyledir:</span><span class="sxs-lookup"><span data-stu-id="05ff5-103"><xref:System.Collections.Concurrent.BlockingCollection%601> is a thread-safe collection class that provides the following features:</span></span>  
  
- <span data-ttu-id="05ff5-104">Üretici-tüketici deseninin bir uygulaması.</span><span class="sxs-lookup"><span data-stu-id="05ff5-104">An implementation of the Producer-Consumer pattern.</span></span>  
  
- <span data-ttu-id="05ff5-105">Eş zamanlı ekleme ve birden çok iş parçacığından öğelerinin sürüyor.</span><span class="sxs-lookup"><span data-stu-id="05ff5-105">Concurrent adding and taking of items from multiple threads.</span></span>  
  
- <span data-ttu-id="05ff5-106">İsteğe bağlı kapasite üst sınırı.</span><span class="sxs-lookup"><span data-stu-id="05ff5-106">Optional maximum capacity.</span></span>  
  
- <span data-ttu-id="05ff5-107">Koleksiyon boş ya da tam olduğunda engelleme ekleme ve kaldırma işlemleri.</span><span class="sxs-lookup"><span data-stu-id="05ff5-107">Insertion and removal operations that block when collection is empty or full.</span></span>  
  
- <span data-ttu-id="05ff5-108">Ekleme ve kaldırma ", engelleme yapmadığından veya belirli bir süre kadar engelleme işlemleri deneyin".</span><span class="sxs-lookup"><span data-stu-id="05ff5-108">Insertion and removal "try" operations that do not block or that block up to a specified period of time.</span></span>  
  
- <span data-ttu-id="05ff5-109">Uygulayan herhangi bir koleksiyon türü yalıtır <xref:System.Collections.Concurrent.IProducerConsumerCollection%601></span><span class="sxs-lookup"><span data-stu-id="05ff5-109">Encapsulates any collection type that implements <xref:System.Collections.Concurrent.IProducerConsumerCollection%601></span></span>  
  
- <span data-ttu-id="05ff5-110">İptal belirteçleri ile iptal etme.</span><span class="sxs-lookup"><span data-stu-id="05ff5-110">Cancellation with cancellation tokens.</span></span>  
  
- <span data-ttu-id="05ff5-111">Sabit listesi ile iki tür `foreach` (`For Each` Visual Basic'te):</span><span class="sxs-lookup"><span data-stu-id="05ff5-111">Two kinds of enumeration with `foreach` (`For Each` in Visual Basic):</span></span>  
  
    1. <span data-ttu-id="05ff5-112">Salt okunur sabit listesi.</span><span class="sxs-lookup"><span data-stu-id="05ff5-112">Read-only enumeration.</span></span>  
  
    2. <span data-ttu-id="05ff5-113">Bunlar tıklamanızdır öğeleri kaldırır numaralandırması.</span><span class="sxs-lookup"><span data-stu-id="05ff5-113">Enumeration that removes items as they are enumerated.</span></span>  
  
## <a name="bounding-and-blocking-support"></a><span data-ttu-id="05ff5-114">Sınırlama ve engelleme desteği</span><span class="sxs-lookup"><span data-stu-id="05ff5-114">Bounding and Blocking Support</span></span>  
 <span data-ttu-id="05ff5-115"><xref:System.Collections.Concurrent.BlockingCollection%601> sınırlama ve engelleme destekler.</span><span class="sxs-lookup"><span data-stu-id="05ff5-115"><xref:System.Collections.Concurrent.BlockingCollection%601> supports bounding and blocking.</span></span> <span data-ttu-id="05ff5-116">Yol sınırlama koleksiyonunun kapasite üst sınırı ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="05ff5-116">Bounding means you can set the maximum capacity of the collection.</span></span> <span data-ttu-id="05ff5-117">Sınırlayıcı bellek koleksiyonda en büyük boyutunu denetlemenizi sağlar ve alıcı iş parçacığı önceden tablasından taşınmasını oluşturmayan iş parçacıkları engeller belirli senaryolarda önemlidir.</span><span class="sxs-lookup"><span data-stu-id="05ff5-117">Bounding is important in certain scenarios because it enables you to control the maximum size of the collection in memory, and it prevents the producing threads from moving too far ahead of the consuming threads.</span></span>  
  
 <span data-ttu-id="05ff5-118">Birden çok iş parçacığı veya görev öğeleri koleksiyona eşzamanlı olarak ekleyebilir ve koleksiyonu belirtilen en yüksek kapasiteye ulaşırsa, öğeyi kaldırılana kadar üretim iş parçacıkları engeller.</span><span class="sxs-lookup"><span data-stu-id="05ff5-118">Multiple threads or tasks can add items to the collection concurrently, and if the collection reaches its specified maximum capacity, the producing threads will block until an item is removed.</span></span> <span data-ttu-id="05ff5-119">Birden fazla tüketici öğelerini eşzamanlı olarak kaldırabilir ve koleksiyonu boş hale gelirse bir üretici bir öğe ekler kadar alıcı iş parçacığı engeller.</span><span class="sxs-lookup"><span data-stu-id="05ff5-119">Multiple consumers can remove items concurrently, and if the collection becomes empty, the consuming threads will block until a producer adds an item.</span></span> <span data-ttu-id="05ff5-120">Üretim iş parçacığı çağırabilirsiniz <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A> daha fazla öğe eklenmesi belirtmek için.</span><span class="sxs-lookup"><span data-stu-id="05ff5-120">A producing thread can call <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A> to indicate that no more items will be added.</span></span> <span data-ttu-id="05ff5-121">Tüketiciler İzleyici <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> özelliği zaman koleksiyonu boş olan ve daha fazla öğe eklenir.</span><span class="sxs-lookup"><span data-stu-id="05ff5-121">Consumers monitor the <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> property to know when the collection is empty and no more items will be added.</span></span> <span data-ttu-id="05ff5-122">Aşağıdaki örnek, bir basit Blockingcollection'a 100 sınırlanmış kapasitesine sahip gösterir.</span><span class="sxs-lookup"><span data-stu-id="05ff5-122">The following example shows a simple BlockingCollection with a bounded capacity of 100.</span></span> <span data-ttu-id="05ff5-123">Bazı dış koşul true'dur ve sonra çağıran sürece bir üretici görev öğeleri koleksiyona ekler. <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A>.</span><span class="sxs-lookup"><span data-stu-id="05ff5-123">A producer task adds items to the collection as long as some external condition is true, and then calls <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A>.</span></span> <span data-ttu-id="05ff5-124">Tüketici Görev öğeleri kadar sürer <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> özelliği true ise.</span><span class="sxs-lookup"><span data-stu-id="05ff5-124">The consumer task takes items until the <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> property is true.</span></span>  
  
 [!code-csharp[CDS_BlockingCollection#04](../../../../samples/snippets/csharp/VS_Snippets_Misc/cds_blockingcollection/cs/blockingcollection.cs#04)]
 [!code-vb[CDS_BlockingCollection#04](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_blockingcollection/vb/introsnippetsbc.vb#04)]  
  
 <span data-ttu-id="05ff5-125">Tam bir örnek için bkz. [nasıl yapılır: Ekleme ve öğeleri tek tek bir Blockingcollection'dan](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span><span class="sxs-lookup"><span data-stu-id="05ff5-125">For a complete example, see [How to: Add and Take Items Individually from a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span></span>  
  
## <a name="timed-blocking-operations"></a><span data-ttu-id="05ff5-126">İşlemleri engelleme zaman aşımına uğradı</span><span class="sxs-lookup"><span data-stu-id="05ff5-126">Timed Blocking Operations</span></span>  
 <span data-ttu-id="05ff5-127">Buna engelleyen zaman aşımına <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> ve <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> yöntemi operations sınırlanmış koleksiyonlarda çalışır eklemek veya bir öğe.</span><span class="sxs-lookup"><span data-stu-id="05ff5-127">In timed blocking <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> and <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> operations on bounded collections, the method tries to add or take an item.</span></span> <span data-ttu-id="05ff5-128">Bir öğe varsa başvuruyla geçirildi değişken içine yerleştirilir ve yöntem true değerini döndürür.</span><span class="sxs-lookup"><span data-stu-id="05ff5-128">If an item is available it is placed into the variable that was passed in by reference, and the method returns true.</span></span> <span data-ttu-id="05ff5-129">Yöntemi, belirtilen bir zaman aşımı süresi hiçbir öğe alınır değilse false döndürür.</span><span class="sxs-lookup"><span data-stu-id="05ff5-129">If no item is retrieved after a specified time-out period the method returns false.</span></span> <span data-ttu-id="05ff5-130">İş parçacığı ardından koleksiyon erişmek yeniden denemeden önce diğer bazı yararlı işleri yapmak ücretsizdir.</span><span class="sxs-lookup"><span data-stu-id="05ff5-130">The thread is then free to do some other useful work before trying again to access the collection.</span></span> <span data-ttu-id="05ff5-131">Zamanlanmış erişimi engelleyen bir örneği için ikinci örneğe bakın [nasıl yapılır: Ekleme ve öğeleri tek tek bir Blockingcollection'dan](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span><span class="sxs-lookup"><span data-stu-id="05ff5-131">For an example of timed blocking access, see the second example in [How to: Add and Take Items Individually from a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span></span>  
  
## <a name="cancelling-add-and-take-operations"></a><span data-ttu-id="05ff5-132">İptal etme ekleyin ve işlemleri Al</span><span class="sxs-lookup"><span data-stu-id="05ff5-132">Cancelling Add and Take Operations</span></span>  
 <span data-ttu-id="05ff5-133">Ekleme ve alma işlemleri, genellikle bir döngüde gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="05ff5-133">Add and Take operations are typically performed in a loop.</span></span> <span data-ttu-id="05ff5-134">Bir döngü geçirerek iptal edebilirsiniz bir <xref:System.Threading.CancellationToken> için <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> veya <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> yöntemi ve ardından belirtecin değerini kontrol <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> her yinelemede özelliği.</span><span class="sxs-lookup"><span data-stu-id="05ff5-134">You can cancel a loop by passing in a <xref:System.Threading.CancellationToken> to the <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> or <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> method, and then checking the value of the token's <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> property on each iteration.</span></span> <span data-ttu-id="05ff5-135">Ardından değeri true ise, size tüm kaynakları temizleme ve döngüden çıkma iptal isteğine yanıt vermesi olduğu.</span><span class="sxs-lookup"><span data-stu-id="05ff5-135">If the value is true, then it is up to you to respond the cancellation request by cleaning up any resources and exiting the loop.</span></span> <span data-ttu-id="05ff5-136">Aşağıdaki örnek, aşırı yüklenmesini gösterir <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> bir iptal belirteci alır ve kodu, bunu kullanır:</span><span class="sxs-lookup"><span data-stu-id="05ff5-136">The following example shows an overload of <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> that takes a cancellation token, and the code that uses it:</span></span>  
  
 [!code-csharp[CDS_BlockingCollection#05](../../../../samples/snippets/csharp/VS_Snippets_Misc/cds_blockingcollection/cs/blockingcollection.cs#05)]
 [!code-vb[CDS_BlockingCollection#05](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_blockingcollection/vb/introsnippetsbc.vb#05)]  
  
 <span data-ttu-id="05ff5-137">İkinci örnekte iptal desteği ekleme örneği için bkz [nasıl yapılır: Ekleme ve öğeleri tek tek bir Blockingcollection'dan](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span><span class="sxs-lookup"><span data-stu-id="05ff5-137">For an example of how to add cancellation support, see the second example in [How to: Add and Take Items Individually from a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span></span>  
  
## <a name="specifying-the-collection-type"></a><span data-ttu-id="05ff5-138">Koleksiyon türü belirtme</span><span class="sxs-lookup"><span data-stu-id="05ff5-138">Specifying the Collection Type</span></span>  
 <span data-ttu-id="05ff5-139">Oluştururken bir <xref:System.Collections.Concurrent.BlockingCollection%601>, yalnızca sınırlı kapasite aynı zamanda toplama türünü kullanmak için belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="05ff5-139">When you create a <xref:System.Collections.Concurrent.BlockingCollection%601>, you can specify not only the bounded capacity but also the type of collection to use.</span></span> <span data-ttu-id="05ff5-140">Örneğin, belirtebilirsiniz bir <xref:System.Collections.Concurrent.ConcurrentQueue%601> ilk olarak-ilk çıkar (FIFO) davranışı için veya bir <xref:System.Collections.Concurrent.ConcurrentStack%601> son içinde-ilk çıkar (LIFO) davranışı için.</span><span class="sxs-lookup"><span data-stu-id="05ff5-140">For example, you could specify a <xref:System.Collections.Concurrent.ConcurrentQueue%601> for first in-first out (FIFO) behavior, or a <xref:System.Collections.Concurrent.ConcurrentStack%601> for last in-first out (LIFO) behavior.</span></span> <span data-ttu-id="05ff5-141">Uygulayan herhangi bir koleksiyon sınıfının kullanabileceğiniz <xref:System.Collections.Concurrent.IProducerConsumerCollection%601> arabirimi.</span><span class="sxs-lookup"><span data-stu-id="05ff5-141">You can use any collection class that implements the <xref:System.Collections.Concurrent.IProducerConsumerCollection%601> interface.</span></span> <span data-ttu-id="05ff5-142">İçin varsayılan toplama türü <xref:System.Collections.Concurrent.BlockingCollection%601> olduğu <xref:System.Collections.Concurrent.ConcurrentQueue%601>.</span><span class="sxs-lookup"><span data-stu-id="05ff5-142">The default collection type for <xref:System.Collections.Concurrent.BlockingCollection%601> is <xref:System.Collections.Concurrent.ConcurrentQueue%601>.</span></span> <span data-ttu-id="05ff5-143">Aşağıdaki kod örneğinde nasıl oluşturulacağını gösterir. bir <xref:System.Collections.Concurrent.BlockingCollection%601> 1000 bir kapasiteye sahiptir ve kullandığı dizelerden oluşan bir <xref:System.Collections.Concurrent.ConcurrentBag%601>:</span><span class="sxs-lookup"><span data-stu-id="05ff5-143">The following code example shows how to create a <xref:System.Collections.Concurrent.BlockingCollection%601> of strings that has a capacity of 1000 and uses a <xref:System.Collections.Concurrent.ConcurrentBag%601>:</span></span>  
  
```vb  
Dim bc = New BlockingCollection(Of String)(New ConcurrentBag(Of String()), 1000)  
```  
  
```csharp  
BlockingCollection<string> bc = new BlockingCollection<string>(new ConcurrentBag<string>(), 1000 );  
```  
  
 <span data-ttu-id="05ff5-144">Daha fazla bilgi için [nasıl yapılır: Sınırlama ve engelleme işlevi bir koleksiyona ekleme](../../../../docs/standard/collections/thread-safe/how-to-add-bounding-and-blocking.md).</span><span class="sxs-lookup"><span data-stu-id="05ff5-144">For more information, see [How to: Add Bounding and Blocking Functionality to a Collection](../../../../docs/standard/collections/thread-safe/how-to-add-bounding-and-blocking.md).</span></span>  
  
## <a name="ienumerable-support"></a><span data-ttu-id="05ff5-145">IEnumerable desteği</span><span class="sxs-lookup"><span data-stu-id="05ff5-145">IEnumerable Support</span></span>  
 <span data-ttu-id="05ff5-146"><xref:System.Collections.Concurrent.BlockingCollection%601> sağlar bir <xref:System.Collections.Concurrent.BlockingCollection%601.GetConsumingEnumerable%2A> yönteminin kullanılacağını tüketiciler tanıyan `foreach` (`For Each` Visual Basic'te) koleksiyonu tamamlanana kadar öğeleri kaldırmak için yani boştur ve daha fazla öğe eklenir.</span><span class="sxs-lookup"><span data-stu-id="05ff5-146"><xref:System.Collections.Concurrent.BlockingCollection%601> provides a <xref:System.Collections.Concurrent.BlockingCollection%601.GetConsumingEnumerable%2A> method that enables consumers to use `foreach` (`For Each` in Visual Basic) to remove items until the collection is completed, which means it is empty and no more items will be added.</span></span> <span data-ttu-id="05ff5-147">Daha fazla bilgi için [nasıl yapılır: Bir Blockingcollection'daki öğeleri kaldırmak için ForEach kullanma](../../../../docs/standard/collections/thread-safe/how-to-use-foreach-to-remove.md).</span><span class="sxs-lookup"><span data-stu-id="05ff5-147">For more information, see [How to: Use ForEach to Remove Items in a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-use-foreach-to-remove.md).</span></span>  
  
## <a name="using-many-blockingcollections-as-one"></a><span data-ttu-id="05ff5-148">Birçok BlockingCollections kullanma</span><span class="sxs-lookup"><span data-stu-id="05ff5-148">Using Many BlockingCollections As One</span></span>  
 <span data-ttu-id="05ff5-149">Aynı anda birden çok koleksiyon öğeleri almak bir tüketici gereken senaryolarda, dizileri oluşturabilirsiniz <xref:System.Collections.Concurrent.BlockingCollection%601> ve statik yöntemleri kullanın <xref:System.Collections.Concurrent.BlockingCollection%601.TakeFromAny%2A> ve <xref:System.Collections.Concurrent.BlockingCollection%601.AddToAny%2A> , ekleme veya koleksiyonlar birinden yararlanın dizisi.</span><span class="sxs-lookup"><span data-stu-id="05ff5-149">For scenarios in which a consumer needs to take items from multiple collections simultaneously, you can create arrays of <xref:System.Collections.Concurrent.BlockingCollection%601> and use the static methods such as <xref:System.Collections.Concurrent.BlockingCollection%601.TakeFromAny%2A> and <xref:System.Collections.Concurrent.BlockingCollection%601.AddToAny%2A> that will add to or take from any of the collections in the array.</span></span> <span data-ttu-id="05ff5-150">Bir koleksiyon engelleme, işlemi gerçekleştiren bir bulana kadar yöntemi hemen başka bir çalışır.</span><span class="sxs-lookup"><span data-stu-id="05ff5-150">If one collection is blocking, the method immediately tries another until it finds one that can perform the operation.</span></span> <span data-ttu-id="05ff5-151">Daha fazla bilgi için [nasıl yapılır: Bir ardışık düzende engelleme koleksiyonları dizilerini kullanma](../../../../docs/standard/collections/thread-safe/how-to-use-arrays-of-blockingcollections.md).</span><span class="sxs-lookup"><span data-stu-id="05ff5-151">For more information, see [How to: Use Arrays of Blocking Collections in a Pipeline](../../../../docs/standard/collections/thread-safe/how-to-use-arrays-of-blockingcollections.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="05ff5-152">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="05ff5-152">See also</span></span>

- <xref:System.Collections.Concurrent?displayProperty=nameWithType>
- [<span data-ttu-id="05ff5-153">Koleksiyonlar ve Veri Yapıları</span><span class="sxs-lookup"><span data-stu-id="05ff5-153">Collections and Data Structures</span></span>](../../../../docs/standard/collections/index.md)
- [<span data-ttu-id="05ff5-154">İş Parçacığı Güvenli Koleksiyonları</span><span class="sxs-lookup"><span data-stu-id="05ff5-154">Thread-Safe Collections</span></span>](../../../../docs/standard/collections/thread-safe/index.md)
