---
title: Doğrudan istemci-mikro hizmet iletişimi ile API ağ geçidi düzeni
description: Farklar ve API ağ geçidi düzeni ve doğrudan istemci-mikro hizmet iletişimi kullanımlarını anlayın.
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 01/07/2019
ms.openlocfilehash: 35bebd9429dabbe0e3ddc3549a504719321e47e1
ms.sourcegitcommit: b8ace47d839f943f785b89e2fff8092b0bf8f565
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/03/2019
ms.locfileid: "55675458"
---
# <a name="the-api-gateway-pattern-versus-the-direct-client-to-microservice-communication"></a><span data-ttu-id="c0a7a-103">Doğrudan istemci-mikro hizmet iletişimi ile API ağ geçidi düzeni</span><span class="sxs-lookup"><span data-stu-id="c0a7a-103">The API gateway pattern versus the Direct client-to-microservice communication</span></span>

<span data-ttu-id="c0a7a-104">Bir mikro hizmet mimarisinde her mikro hizmet (genellikle) ayrıntılı uç noktalar kümesi sunar.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-104">In a microservices architecture, each microservice exposes a set of (typically) fine-grained endpoints.</span></span> <span data-ttu-id="c0a7a-105">Bu durum, bu bölümde açıklandığı gibi istemci mikro hizmet iletişimi etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-105">This fact can impact the client-to-microservice communication, as explained in this section.</span></span>

## <a name="direct-client-to-microservice-communication"></a><span data-ttu-id="c0a7a-106">Doğrudan istemci-mikro hizmet iletişimi</span><span class="sxs-lookup"><span data-stu-id="c0a7a-106">Direct client-to-microservice communication</span></span>

<span data-ttu-id="c0a7a-107">Olası bir yaklaşım, doğrudan istemci-mikro hizmet iletişimi mimarisi kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-107">A possible approach is to use a direct client-to-microservice communication architecture.</span></span> <span data-ttu-id="c0a7a-108">Bu yaklaşımda, bir istemci uygulaması mikro hizmetler, doğrudan bazıları için Şekil 4-12'de gösterildiği gibi isteğinde bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-108">In this approach, a client app can make requests directly to some of the microservices, as shown in Figure 4-12.</span></span>

![Burada her uygulama doğrudan bireysel mikro hizmetler ile iletişim kuran gösteren doğrudan istemci-mikro hizmet iletişimi mimari diyagramı.](./media/image12.png)

<span data-ttu-id="c0a7a-110">**Şekil 4-12**.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-110">**Figure 4-12**.</span></span> <span data-ttu-id="c0a7a-111">Doğrudan istemci-mikro hizmet iletişimi mimari kullanarak</span><span class="sxs-lookup"><span data-stu-id="c0a7a-111">Using a direct client-to-microservice communication architecture</span></span>

<span data-ttu-id="c0a7a-112">Bu yaklaşımda, her bir mikro hizmetin her mikro hizmet için farklı bir TCP bağlantı noktası ile bazen genel bir uç nokta vardır.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-112">In this approach, each microservice has a public endpoint, sometimes with a different TCP port for each microservice.</span></span> <span data-ttu-id="c0a7a-113">Belirli bir hizmet için bir URL örneği azure'da aşağıdaki URL'yi olabilir:</span><span class="sxs-lookup"><span data-stu-id="c0a7a-113">An example of a URL for a particular service could be the following URL in Azure:</span></span>

`http://eshoponcontainers.westus.cloudapp.azure.com:88/`

<span data-ttu-id="c0a7a-114">URL kümede kullanılan yük dengeleyici eşlemek bir küme, temel bir üretim ortamında hangi sırayla istekleri mikro hizmetler arasında dağıtır.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-114">In a production environment based on a cluster, that URL would map to the load balancer used in the cluster, which in turn distributes the requests across the microservices.</span></span> <span data-ttu-id="c0a7a-115">Üretim ortamlarında gibi uygulama teslim denetleyicisi (ADC) olabilir. [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) mikro hizmetlerin ve Internet arasında.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-115">In production environments, you could have an Application Delivery Controller (ADC) like [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) between your microservices and the Internet.</span></span> <span data-ttu-id="c0a7a-116">Bu, yalnızca Yük Dengeleme gerçekleştirir, ancak SSL sonlandırma sunarak hizmetlerinizin güvenliğini sağlar ve saydam bir katman olarak görev yapar.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-116">This acts as a transparent tier that not only performs load balancing, but secures your services by offering SSL termination.</span></span> <span data-ttu-id="c0a7a-117">Bu, CPU yoğunluklu SSL sonlandırma ve diğer yönlendirme görevlerini Azure Application gateway'e boşaltarak konaklarınız yükünü artırır.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-117">This improves the load of your hosts by offloading CPU-intensive SSL termination and other routing duties to the Azure Application Gateway.</span></span> <span data-ttu-id="c0a7a-118">Herhangi bir durumda, bir yük dengeleyici ve ADC bir mantıksal uygulama mimarisi açısından saydam.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-118">In any case, a load balancer and ADC are transparent from a logical application architecture point of view.</span></span>

<span data-ttu-id="c0a7a-119">Doğrudan istemci-mikro hizmet iletişimi mimari, özellikle bir ASP.NET MVC uygulaması gibi bir sunucu tarafı web uygulaması istemci uygulaması ise, bir küçük mikro hizmet tabanlı uygulama için yeterince iyi olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-119">A direct client-to-microservice communication architecture could be good enough for a small microservice-based application, especially if the client app is a server-side web application like an ASP.NET MVC app.</span></span> <span data-ttu-id="c0a7a-120">Ancak, büyük ve karmaşık mikro hizmet tabanlı uygulamalar (örneğin, mikro hizmet türleri onlarca işlerken) oluşturduğunuzda ve özellikle istemci uygulamaları uzak mobil uygulamalarından veya SPA web uygulamaları olduğunda bu yaklaşımı birkaç sorun yüzler.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-120">However, when you build large and complex microservice-based applications (for example, when handling dozens of microservice types), and especially when the client apps are remote mobile apps or SPA web applications, that approach faces a few issues.</span></span>

<span data-ttu-id="c0a7a-121">Mikro hizmetler üzerinde alan büyük bir uygulama geliştirirken aşağıdaki soruları göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="c0a7a-121">Consider the following questions when developing a large application based on microservices:</span></span>

- <span data-ttu-id="c0a7a-122">*Nasıl istemci uygulamaları istekleri arka ucuna sayısını en aza indirmek ve birden fazla mikro hizmetlere geveze iletişimi azaltmak?*</span><span class="sxs-lookup"><span data-stu-id="c0a7a-122">*How can client apps minimize the number of requests to the back end and reduce chatty communication to multiple microservices?*</span></span>

<span data-ttu-id="c0a7a-123">Tek bir kullanıcı Arabirimi ekranı oluşturmak için birden fazla mikro Hizmetleri ile etkileşim kurma Internet üzerinden gidiş dönüş sayısı artar.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-123">Interacting with multiple microservices to build a single UI screen increases the number of round trips across the Internet.</span></span> <span data-ttu-id="c0a7a-124">Bu, gecikme süresi ve UI tarafında karmaşıklığı artırır.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-124">This increases latency and complexity on the UI side.</span></span> <span data-ttu-id="c0a7a-125">İdeal olarak, yanıtları sunucu tarafı verimli bir şekilde toplanması.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-125">Ideally, responses should be efficiently aggregated in the server side.</span></span> <span data-ttu-id="c0a7a-126">Bu gecikme, paralel olarak birden çok veri parçasını dönün ve hazır duruma geldiği bazı kullanıcı Arabirimi veri gösterebilirsiniz azaltır.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-126">This reduces latency, since multiple pieces of data come back in parallel and some UI can show data as soon as it's ready.</span></span>

- <span data-ttu-id="c0a7a-127">*Yetkilendirme, veri dönüştürme seçenekleri ve dinamik istek gönderme gibi çapraz kesme konuları nasıl işleyebilirsiniz?*</span><span class="sxs-lookup"><span data-stu-id="c0a7a-127">*How can you handle cross-cutting concerns such as authorization, data transformations, and dynamic request dispatching?*</span></span>

<span data-ttu-id="c0a7a-128">Güvenlik ve her bir mikro hizmet yetkilendirme önemli geliştirme çalışma gerektirebilir gibi güvenlik ve geniş kapsamlı kritik konular uygulama.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-128">Implementing security and cross-cutting concerns like security and authorization on every microservice can require significant development effort.</span></span> <span data-ttu-id="c0a7a-129">Docker konağı veya iç küme dışarıdan kendisine doğrudan erişimi kısıtlamak için ve bir API ağ geçidi gibi merkezi bir yerde bu geniş kapsamlı kritik konular uygulamak için bu hizmetleri olası bir yaklaşımdır.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-129">A possible approach is to have those services within the Docker host or internal cluster to restrict direct access to them from the outside, and to implement those cross-cutting concerns in a centralized place, like an API Gateway.</span></span>

- <span data-ttu-id="c0a7a-130">*İstemci uygulamalarını Internet kolay protokolleri kullanan hizmetler ile nasıl iletişim kurabilir?*</span><span class="sxs-lookup"><span data-stu-id="c0a7a-130">*How can client apps communicate with services that use non-Internet-friendly protocols?*</span></span>

<span data-ttu-id="c0a7a-131">Sunucu tarafında (örneğin, AMQP veya ikili protokolleri) kullanılan protokoller, genellikle istemci uygulamalarında desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-131">Protocols used on the server side (like AMQP or binary protocols) are usually not supported in client apps.</span></span> <span data-ttu-id="c0a7a-132">Bu nedenle, istekleri gibi HTTP/HTTPS protokolleri üzerinden gerçekleştirilen ve gerekir için diğer protokolleri sonradan çevrilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-132">Therefore, requests must be performed through protocols like HTTP/HTTPS and translated to the other protocols afterwards.</span></span> <span data-ttu-id="c0a7a-133">A *adam-de-ADAM* yaklaşımı, bu durumda yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-133">A *man-in-the-middle* approach can help in this situation.</span></span>

- <span data-ttu-id="c0a7a-134">*Nasıl mobil uygulamalar için özellikle yapılan bir cephe şekillendirebileceğinize?*</span><span class="sxs-lookup"><span data-stu-id="c0a7a-134">*How can you shape a facade especially made for mobile apps?*</span></span>

<span data-ttu-id="c0a7a-135">Birden çok mikro hizmetler API'si için farklı istemci uygulamalarının ihtiyaçlarını da tasarlanmamış olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-135">The API of multiple microservices might not be well designed for the needs of different client applications.</span></span> <span data-ttu-id="c0a7a-136">Örneğin, bir mobil uygulama ihtiyaçlarını bir web uygulaması ihtiyaçlarını farklı olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-136">For instance, the needs of a mobile app might be different than the needs of a web app.</span></span> <span data-ttu-id="c0a7a-137">Mobil uygulamalarda, veri yanıtları daha verimli olabilir, böylece daha da iyileştirmek gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-137">For mobile apps, you might need to optimize even further so that data responses can be more efficient.</span></span> <span data-ttu-id="c0a7a-138">Birden fazla mikro hizmetin veri toplama ve tek bir veri kümesi döndüren ve bazen herhangi bir veri gerek yoktur, mobil uygulama tarafından bir yanıt ortadan bunu yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-138">You might do this by aggregating data from multiple microservices and returning a single set of data, and sometimes eliminating any data in the response that isn't needed by the mobile app.</span></span> <span data-ttu-id="c0a7a-139">Ve Elbette, bu verileri sıkıştırmak.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-139">And, of course, you might compress that data.</span></span> <span data-ttu-id="c0a7a-140">Tekrar bir cephe veya mobil uygulamayı ve mikro hizmetler arası API bu senaryo için kullanışlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-140">Again, a facade or API in between the mobile app and the microservices can be convenient for this scenario.</span></span>

## <a name="why-consider-api-gateways-instead-of-direct-client-to-microservice-communication"></a><span data-ttu-id="c0a7a-141">API ağ geçitleri yerine doğrudan istemci-mikro hizmet iletişimi neden düşünün</span><span class="sxs-lookup"><span data-stu-id="c0a7a-141">Why consider API Gateways instead of direct client-to-microservice communication</span></span>

<span data-ttu-id="c0a7a-142">Bir mikro hizmet mimarisinde birden fazla mikro hizmet işlevlerini kullanmak istemci uygulamaları genellikle gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-142">In a microservices architecture, the client apps usually need to consume functionality from more than one microservice.</span></span> <span data-ttu-id="c0a7a-143">Bu tüketim doğrudan gerçekleştirilirse, mikro hizmet uç noktaları için birden çok çağrıları işlemek istemcinin gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-143">If that consumption is performed directly, the client needs to handle multiple calls to microservice endpoints.</span></span> <span data-ttu-id="c0a7a-144">Uygulama geliştikçe yeni mikro hizmetler sunulan ve var olan bir mikro hizmetler güncelleştirilir ne olur?</span><span class="sxs-lookup"><span data-stu-id="c0a7a-144">What happens when the application evolves and new microservices are introduced or existing microservices are updated?</span></span> <span data-ttu-id="c0a7a-145">İstemci uygulamalardan gelen çok fazla uç işleme, birçok mikro hizmetler, uygulamanızın varsa bir onarımı kabus olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-145">If your application has many microservices, handling so many endpoints from the client apps can be a nightmare.</span></span> <span data-ttu-id="c0a7a-146">İstemci uygulaması iç uç sıkı bağlı olduğundan, mikro hizmetlerin gelecekteki gelişen istemci uygulamaları için yüksek etkili neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-146">Since the client app would be coupled to those internal endpoints, evolving the microservices in the future can cause high impact for the client apps.</span></span>

<span data-ttu-id="c0a7a-147">Bu nedenle, bir Orta düzeye veya yöneltme (ağ geçidi) katmanı sorun mikro hizmet tabanlı uygulamalar için kullanışlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-147">Therefore, having an intermediate level or tier of indirection (Gateway) can be very convenient for microservice-based applications.</span></span> <span data-ttu-id="c0a7a-148">API ağ geçitleri yoksa, istemci uygulamaları istekleri doğrudan mikro hizmetler göndermeniz gerekir ve aşağıdaki sorunlar gibi sorunlar oluşturan:</span><span class="sxs-lookup"><span data-stu-id="c0a7a-148">If you don't have API Gateways, the client apps must send requests directly to the microservices and that raises problems, such as the following issues:</span></span>

- <span data-ttu-id="c0a7a-149">**Eşlenmesiyle**: API ağ geçidi desenini istemci uygulamaları için iç mikro Hizmetleri bağlı.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-149">**Coupling**: Without the API Gateway pattern, the client apps are coupled to the internal microservices.</span></span> <span data-ttu-id="c0a7a-150">İstemci uygulamaları, uygulamanın birden fazla alana mikro hizmetleri nasıl ayrılmış bilmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-150">The client apps need to know how the multiple areas of the application are decomposed in microservices.</span></span> <span data-ttu-id="c0a7a-151">Gelişen ve iç mikro hizmetler yeniden düzenleme, bu eylemlerin etkisi, bakım yapıyorsak hatalı, bozucu değişiklikleri nedeniyle istemci doğrudan başvurudan iç mikro Hizmetleri için istemci uygulamaları için uygulamaları nedeni.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-151">When evolving and refactoring the internal microservices, those actions impact maintenance pretty badly because they cause breaking changes to the client apps due to the direct reference to the internal microservices from the client apps.</span></span> <span data-ttu-id="c0a7a-152">Çözüm geliştirilebilen daha zor hale sık güncelleştirilmesi istemci uygulamaları gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-152">Client apps need to be updated frequently, making the solution harder to evolve.</span></span>

- <span data-ttu-id="c0a7a-153">**Çok fazla gidiş dönüş**: Tek bir sayfa/ekran istemci uygulamasında, birden çok hizmeti çeşitli çağrılar gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-153">**Too many round trips**: A single page/screen in the client app might require several calls to multiple services.</span></span> <span data-ttu-id="c0a7a-154">Birden çok ağ sonucunda gelişlerin önemli bir gecikme ekleme, sunucu ile istemci arasında yuvarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-154">That can result in multiple network round trips between the client and the server, adding significant latency.</span></span> <span data-ttu-id="c0a7a-155">Bir ara düzeyinde ele toplama performansı ve kullanıcı deneyimi için istemci uygulaması geliştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-155">Aggregation handled in an intermediate level could improve the performance and user experience for the client app.</span></span>

- <span data-ttu-id="c0a7a-156">**Güvenlik sorunları**: Bir ağ geçidi "saldırı yüzeyini istemci uygulamalar tarafından doğrudan kullanılmayan iç mikro hizmetler gizlerseniz daha büyük hale dış dünya" için tüm mikro Hizmetleri sunulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-156">**Security issues**: Without a gateway, all the microservices must be exposed to the "external world", making the attack surface larger than if you hide internal microservices that aren't directly used by the client apps.</span></span> <span data-ttu-id="c0a7a-157">Daha küçük saldırı yüzeyini, uygulamanızı daha güvenli olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-157">The smaller the attack surface is, the more secure your application can be.</span></span>

- <span data-ttu-id="c0a7a-158">**Geniş kapsamlı kritik konular**: Genel olarak yayımlanan her mikro hizmet sorunları işlemesi yetkilendirme gibi SSL vs. İç mikro hizmetler basitleştirilmiştir böylece çoğu durumda, bu sorunları tek bir katmanda işlenmesi.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-158">**Cross-cutting concerns**: Each publicly published microservice must handle concerns such as authorization, SSL, etc. In many situations, those concerns could be handled in a single tier so the internal microservices are simplified.</span></span>

## <a name="what-is-the-api-gateway-pattern"></a><span data-ttu-id="c0a7a-159">API ağ geçidi düzeni nedir?</span><span class="sxs-lookup"><span data-stu-id="c0a7a-159">What is the API Gateway pattern?</span></span>

<span data-ttu-id="c0a7a-160">Tasarım ve büyük veya karmaşık mikro hizmet tabanlı uygulamaları birden çok istemci uygulamaları oluşturmak, dikkate almanız iyi bir yaklaşım olabilir bir [API ağ geçidi](https://microservices.io/patterns/apigateway.html).</span><span class="sxs-lookup"><span data-stu-id="c0a7a-160">When you design and build large or complex microservice-based applications with multiple client apps, a good approach to consider can be an [API Gateway](https://microservices.io/patterns/apigateway.html).</span></span> <span data-ttu-id="c0a7a-161">Bu tek giriş noktası belirli grupları mikro hizmetler sağlayan bir hizmettir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-161">This is a service that provides a single-entry point for certain groups of microservices.</span></span> <span data-ttu-id="c0a7a-162">Benzer [görünüm düzeni](https://en.wikipedia.org/wiki/Facade_pattern) nesne yönelimli Tasarım'dan ancak bu durumda, bu kullanıcının dağıtılmış bir sistemin parçası.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-162">It's similar to the [Facade pattern](https://en.wikipedia.org/wiki/Facade_pattern) from object-oriented design, but in this case, it's part of a distributed system.</span></span> <span data-ttu-id="c0a7a-163">API ağ geçidi desenini bazen "arka uç için ön uç" olarak bilinen ([BFF](https://samnewman.io/patterns/architectural/bff/)) istemci uygulamasının gereksinimlerini düşünmek sırasında derleme nedeni.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-163">The API Gateway pattern is also sometimes known as the "backend for frontend" ([BFF](https://samnewman.io/patterns/architectural/bff/)) because you build it while thinking about the needs of the client app.</span></span>

<span data-ttu-id="c0a7a-164">API ağ geçidi, bu nedenle, istemci uygulamalar ve mikro hizmetler arasında bulunur.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-164">Therefore, the API gateway sits between the client apps and the microservices.</span></span> <span data-ttu-id="c0a7a-165">Ters Ara sunucu, istemcilerden gelen yönlendirme isteklerini hizmetlerine görür.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-165">It acts as a reverse proxy, routing requests from clients to services.</span></span> <span data-ttu-id="c0a7a-166">Ayrıca, kimlik doğrulaması, SSL sonlandırma ve önbellek gibi ek çapraz özellikler de sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-166">It can also provide additional cross-cutting features such as authentication, SSL termination, and cache.</span></span>

<span data-ttu-id="c0a7a-167">Şekil 4-13 basitleştirilmiş bir mikro hizmet tabanlı mimari ile yalnızca birkaç mikro hizmetler halinde nasıl özel bir API ağ geçidi uygun gösterir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-167">Figure 4-13 shows how a custom API Gateway can fit into a simplified microservice-based architecture with just a few microservices.</span></span>

![Uygulamaları tek bir uç API istekleri iletmek üzere her bir mikro hizmetin yapılandırılmış ağ geçidine bağlanmak için bir API ağ geçidi özel bir hizmet olarak uygulanan gösteren diyagram.](./media/image13.png)

<span data-ttu-id="c0a7a-169">**Şekil 4-13**.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-169">**Figure 4-13**.</span></span> <span data-ttu-id="c0a7a-170">Özel bir hizmet olarak uygulanan bir API ağ geçidi kullanma</span><span class="sxs-lookup"><span data-stu-id="c0a7a-170">Using an API Gateway implemented as a custom service</span></span>

<span data-ttu-id="c0a7a-171">Bu örnekte, bir kapsayıcı olarak çalışan özel bir ASP.NET Core Web barındırma hizmeti olarak API ağ geçidi uygulanması.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-171">In this example, the API Gateway would be implemented as a custom ASP.NET Core WebHost service running as a container.</span></span>

<span data-ttu-id="c0a7a-172">Bu diyagramda vurgulamak önemlidir, birden çok'e yönelik tek bir özel API ağ geçidi hizmeti kullanılarak ve farklı istemci uygulamaları.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-172">It's important to highlight that in that diagram, you would be using a single custom API Gateway service facing multiple and different client apps.</span></span> <span data-ttu-id="c0a7a-173">API ağ geçidi hizmetiniz büyütmeye ve gelişen çünkü olgu önemli bir risk olabilir istemci uygulamalardan gelen çok sayıda farklı gereksinimlerine göre.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-173">That fact can be an important risk because your API Gateway service will be growing and evolving based on many different requirements from the client apps.</span></span> <span data-ttu-id="c0a7a-174">Sonuç olarak, bu farklı gereksinimleri nedeniyle bloated olacaktır ve etkili bir şekilde bir tek parçalı bir uygulama veya hizmet tek parçalı oldukça benzer olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-174">Eventually, it will be bloated because of those different needs and effectively it could be pretty similar to a monolithic application or monolithic service.</span></span> <span data-ttu-id="c0a7a-175">İşte bu çok birden çok hizmeti veya birden çok daha küçük API ağ geçitleri, istemci uygulama form faktörü türü, her bir API ağ geçidi örneği için bölmek için önerilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-175">That's why it's very much recommended to split the API Gateway in multiple services or multiple smaller API Gateways, one per client app form-factor type, for instance.</span></span>

<span data-ttu-id="c0a7a-176">API ağ geçidi desenini uygulama oluştururken dikkatli olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-176">You need to be careful when implementing the API Gateway pattern.</span></span> <span data-ttu-id="c0a7a-177">Genellikle tek bir API tüm iç mikro hizmetler, uygulamanızın toplama ağ geçidi için iyi bir fikir değildir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-177">Usually it isn't a good idea to have a single API Gateway aggregating all the internal microservices of your application.</span></span> <span data-ttu-id="c0a7a-178">Varsa, tek parçalı bir Toplayıcı veya orchestrator olarak görev yapar ve mikro hizmet otonomi tüm mikro Hizmetleri eşlenmesiyle tarafından ihlal ediyor.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-178">If it does, it acts as a monolithic aggregator or orchestrator and violates microservice autonomy by coupling all the microservices.</span></span>

<span data-ttu-id="c0a7a-179">Bu nedenle, API ağ geçitleri iş sınırları ve istemci uygulamaları ve değil Yasası göre tek bir Toplayıcı iç tüm mikro hizmetlere yönelik olarak ayrılmış.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-179">Therefore, the API Gateways should be segregated based on business boundaries and the client apps and not act as a single aggregator for all the internal microservices.</span></span>

<span data-ttu-id="c0a7a-180">Böylece her bir istemci uygulama ihtiyaçlarını için farklı bir cephe olabilir API ağ geçidi katmanı birden çok API ağ geçitleri bölünürken, uygulamanızın birden çok istemci uygulamalar varsa, birincil bir Özet birden çok API ağ geçitleri türleri tanımlamak için kullanıldığında olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-180">When splitting the API Gateway tier into multiple API Gateways, if your application has multiple client apps, that can be a primary pivot when identifying the multiple API Gateways types, so that you can have a different facade for the needs of each client app.</span></span> <span data-ttu-id="c0a7a-181">Bu durumda "Arka uç için ön uç" adlı bir desendir ([BFF](https://samnewman.io/patterns/architectural/bff/)) her bir API ağ geçidi sağlayabilir burada büyük olasılıkla bile istemci form faktörünün belirli bağdaştırıcı uygulayarak göre her istemci uygulaması türü için uyarlanmış farklı bir API kod, underneath birden çok iç mikro hizmetler, aşağıdaki görüntüde gösterildiği gibi çağırır:</span><span class="sxs-lookup"><span data-stu-id="c0a7a-181">This case is a pattern named "Backend for Frontend" ([BFF](https://samnewman.io/patterns/architectural/bff/)) where each API Gateway can provide a different API tailored for each client app type, possibly even based on the client form factor by implementing specific adapter code which underneath calls multiple internal microservices, as shown in the following image:</span></span>

![Birden çok özel API API ağ geçitleri istemci türüne göre nerede arkadaşlarından ağ geçitleri, gösteren diyagram; bir mobil istemciler, biri web istemcileri.](./media/image13.1.png)

<span data-ttu-id="c0a7a-184">**Şekil 4-13.1**.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-184">**Figure 4-13.1**.</span></span> <span data-ttu-id="c0a7a-185">Birden çok özel API ağ geçidi kullanma</span><span class="sxs-lookup"><span data-stu-id="c0a7a-185">Using multiple custom API Gateways</span></span>

<span data-ttu-id="c0a7a-186">Önceki görüntüde birden çok ayrıntılı API ağ geçitleri ile basitleştirilmiş bir mimari gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-186">The previous image shows a simplified architecture with multiple fine-grained API Gateways.</span></span> <span data-ttu-id="c0a7a-187">Bu durumda, her API ağ geçidi için tanımlanan sınırları tamamen "arka uç için ön uç üzerinde" dayalı ([BFF](https://samnewman.io/patterns/architectural/bff/)) deseni, bu nedenle yalnızca istemci uygulaması gerekli API göre.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-187">In this case, the boundaries identified for each API Gateway are based purely on the "Backend for Frontend" ([BFF](https://samnewman.io/patterns/architectural/bff/)) pattern, hence based just on the API needed per client app.</span></span> <span data-ttu-id="c0a7a-188">Ancak daha büyük uygulamalarında ayrıca daha da İleri gidin ve ek API ikinci bir tasarım Özet iş sınırlarına göre ağ geçitleri oluşturma.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-188">But in larger applications you should also go further and create additional API Gateways based on business boundaries as a second design pivot.</span></span>

## <a name="main-features-in-the-api-gateway-pattern"></a><span data-ttu-id="c0a7a-189">API ağ geçidi desenini temel özellikleri</span><span class="sxs-lookup"><span data-stu-id="c0a7a-189">Main features in the API Gateway pattern</span></span>

<span data-ttu-id="c0a7a-190">Bir API ağ geçidi, birden çok özellikler sunabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-190">An API Gateway can offer multiple features.</span></span> <span data-ttu-id="c0a7a-191">Ürün bağlı olarak daha zengin sağlayabilir veya basit özellikleri, ancak herhangi bir API ağ geçidi için en önemli ve temel özellikleri aşağıdaki tasarım modeli şunlardır:</span><span class="sxs-lookup"><span data-stu-id="c0a7a-191">Depending on the product it might offer richer or simpler features, however, the most important and foundational features for any API Gateway are the following design patterns:</span></span>

<span data-ttu-id="c0a7a-192">**Ters proxy ya da ağ geçidi yönlendirme olabilir.**</span><span class="sxs-lookup"><span data-stu-id="c0a7a-192">**Reverse proxy or gateway routing.**</span></span> <span data-ttu-id="c0a7a-193">API ağ geçidi yönlendirme veya iç mikro hizmet uç noktaları için istek (katman 7 yönlendirmeyi, genellikle HTTP isteklerini) yönlendirmek için ters Ara sunucu sunar.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-193">The API Gateway offers a reverse proxy to redirect or route requests (layer 7 routing, usually HTTP requests) to the endpoints of the internal microservices.</span></span> <span data-ttu-id="c0a7a-194">Ağ geçidi tek bir uç nokta veya URL istemci uygulamalar sağlar ve istekleri iç mikro hizmetler grubuna dahili olarak eşler.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-194">The gateway provides a single endpoint or URL for the client apps and then internally maps the requests to a group of internal microservices.</span></span> <span data-ttu-id="c0a7a-195">Yönlendirme bu özellik mikro Hizmetleri istemci uygulamalardan ayırmanıza yardımcı olur. ancak, tek parçalı bir API, API ağ geçidi arasında tek parça API ve istemci uygulamaları olduktan sonra durduğunu modernleştirme yeni API'ler yeni mikro hizmetler ekleyebilirsiniz da oldukça uygun olan Gelecekte birçok mikro hizmetler halinde bölme kadar süre hala eski tek yapılı API kullanarak.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-195">This routing feature helps to decouple the client apps from the microservices but it's also pretty convenient when modernizing a monolithic API by sitting the API Gateway in between the monolithic API and the client apps, then you can add new APIs as new microservices while still using the legacy monolithic API until it's split into many microservices in the future.</span></span> <span data-ttu-id="c0a7a-196">API ağ geçidi nedeniyle istemci uygulamalarını iç mikro hizmetler veya tek parça bir API ve daha da önemlisi, gelişen ve tek parça API mikro hizmetler halinde yeniden düzenleme teşekkürler API ağ geçidi yönlendirme için kullanılan API'ler uygulanmışsa fark olmaz , istemci uygulamaları olmaz etkilenebilir herhangi bir URI değişiklik ile.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-196">Because of the API Gateway, the client apps won't notice if the APIs being used are implemented as internal microservices or a monolithic API and more importantly, when evolving and refactoring the monolithic API into microservices, thanks to the API Gateway routing, client apps won't be impacted with any URI change.</span></span>

<span data-ttu-id="c0a7a-197">Daha fazla bilgi için [ağ geçidi yönlendirme düzeni](https://docs.microsoft.com/azure/architecture/patterns/gateway-routing).</span><span class="sxs-lookup"><span data-stu-id="c0a7a-197">For more information, see [Gateway routing pattern](https://docs.microsoft.com/azure/architecture/patterns/gateway-routing).</span></span>

<span data-ttu-id="c0a7a-198">**İstekleri toplama.**</span><span class="sxs-lookup"><span data-stu-id="c0a7a-198">**Requests aggregation.**</span></span> <span data-ttu-id="c0a7a-199">Ağ geçidi desenini bir parçası olarak birden çok iç mikro hizmetler tek bir istemci isteği hedefleyen birden çok istemci istekleri (genellikle, HTTP isteklerini) toplayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-199">As part of the gateway pattern you can aggregate multiple client requests (usually HTTP requests) targeting multiple internal microservices into a single client request.</span></span> <span data-ttu-id="c0a7a-200">İstemci sayfa/ekran birden fazla mikro hizmetler bilgilerinden gerektiğinde bu özellikle kullanışlı bir desendir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-200">This pattern is especially convenient when a client page/screen needs information from several microservices.</span></span> <span data-ttu-id="c0a7a-201">Bu yaklaşımda, istemci uygulaması iç mikro hizmetler için çeşitli istekler gönderir ve sonra sonuçları toplar ve her şeyi istemci uygulamasına gönderir API ağ geçidi tek bir istek gönderir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-201">With this approach, the client app sends a single request to the API Gateway that dispatches several requests to the internal microservices and then aggregates the results and sends everything back to the client app.</span></span> <span data-ttu-id="c0a7a-202">Bu tasarım deseni amacı ve ana avantajı olduğu yere mikro hizmetler, mobil uygulamalar veya SPA uygulamalardan gelen istekleri gibi canlı veri merkezi dışında uzak uygulamalar için özellikle önemli olan arasındaki iletişim yoğunluğunu istemci uygulamaları ve arka uç API'si, azaltmak için Uzak istemci tarayıcılarında JavaScript gelir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-202">The main benefit and goal of this design pattern is to reduce chattiness between the client apps and the backend API, which is especially important for remote apps out of the datacenter where the microservices live, like mobile apps or requests coming from SPA apps that come from Javascript in client remote browsers.</span></span> <span data-ttu-id="c0a7a-203">Bu düzen (örneğin, bir ASP.NET Core MVC web uygulaması) bir sunucu ortamında istekler gerçekleştiren normal web apps için gecikme süresi için Uzak istemci uygulamalarını çok daha küçük olduğu gibi önemli değildir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-203">For regular web apps performing the requests in the server environment (like an ASP.NET Core MVC web app), this pattern is not so important as the latency is very much smaller than for remote client apps.</span></span>

<span data-ttu-id="c0a7a-204">Kullandığınız API ağ geçidi ürün bağlı olarak, bu toplama gerçekleştirmek mümkün olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-204">Depending on the API Gateway product you use, it might be able to perform this aggregation.</span></span> <span data-ttu-id="c0a7a-205">Ancak, çoğu durumda, kodun içinde toplama tanımlamak için API ağ geçidi kapsamı altında toplama mikro hizmetler oluşturmak için daha esnektir (diğer bir deyişle, C# kod):</span><span class="sxs-lookup"><span data-stu-id="c0a7a-205">However, in many cases it's more flexible to create aggregation microservices under the scope of the API Gateway, so you define the aggregation in code (that is, C# code):</span></span>

<span data-ttu-id="c0a7a-206">Daha fazla bilgi için [ağ geçidi toplama düzeni](https://docs.microsoft.com/azure/architecture/patterns/gateway-aggregation).</span><span class="sxs-lookup"><span data-stu-id="c0a7a-206">For more information, see [Gateway aggregation pattern](https://docs.microsoft.com/azure/architecture/patterns/gateway-aggregation).</span></span>

<span data-ttu-id="c0a7a-207">**Geniş kapsamlı kritik konular veya ağ geçidi boşaltma.**</span><span class="sxs-lookup"><span data-stu-id="c0a7a-207">**Cross-cutting concerns or gateway offloading.**</span></span> <span data-ttu-id="c0a7a-208">Her bir API ağ geçidi ürün tarafından sunulan özelliklerin bağlı olarak, her bir mikro hizmetin işlevinden bir katmana geniş kapsamlı kritik konular birleştirerek her mikro hizmet uygulaması basitleştirir ağ geçidine boşaltabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-208">Depending on the features offered by each API Gateway product, you can offload functionality from individual microservices to the gateway, which simplifies the implementation of each microservice by consolidating cross-cutting concerns into one tier.</span></span> <span data-ttu-id="c0a7a-209">Bu, özellikle aşağıdaki işlevleri gibi iç her mikro hizmet içinde düzgün bir şekilde uygulamak için karmaşık olabilir özelleştirilmiş bir özellik için kullanışlıdır:</span><span class="sxs-lookup"><span data-stu-id="c0a7a-209">This is especially convenient for specialized features that can be complex to implement properly in every internal microservice, such as the following functionality:</span></span>

- <span data-ttu-id="c0a7a-210">Kimlik doğrulaması ve yetkilendirme</span><span class="sxs-lookup"><span data-stu-id="c0a7a-210">Authentication and authorization</span></span>
- <span data-ttu-id="c0a7a-211">Hizmet bulma tümleştirmesi</span><span class="sxs-lookup"><span data-stu-id="c0a7a-211">Service discovery integration</span></span>
- <span data-ttu-id="c0a7a-212">Yanıtları Önbelleğe Alma</span><span class="sxs-lookup"><span data-stu-id="c0a7a-212">Response caching</span></span>
- <span data-ttu-id="c0a7a-213">Yeniden deneme ilkeleri, devre kesici ve hizmet kalitesi</span><span class="sxs-lookup"><span data-stu-id="c0a7a-213">Retry policies, circuit breaker, and QoS</span></span>
- <span data-ttu-id="c0a7a-214">Oran sınırlandırma ve azaltma</span><span class="sxs-lookup"><span data-stu-id="c0a7a-214">Rate limiting and throttling</span></span>
- <span data-ttu-id="c0a7a-215">Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="c0a7a-215">Load balancing</span></span>
- <span data-ttu-id="c0a7a-216">Günlüğe kaydetme, izleme, bağıntı</span><span class="sxs-lookup"><span data-stu-id="c0a7a-216">Logging, tracing, correlation</span></span>
- <span data-ttu-id="c0a7a-217">Üstbilgiler, sorgu dizeleri ve talep dönüştürme</span><span class="sxs-lookup"><span data-stu-id="c0a7a-217">Headers, query strings, and claims transformation</span></span>
- <span data-ttu-id="c0a7a-218">IP beyaz listesi</span><span class="sxs-lookup"><span data-stu-id="c0a7a-218">IP whitelisting</span></span>

<span data-ttu-id="c0a7a-219">Daha fazla bilgi için [ağ geçidi boşaltma düzeni](https://docs.microsoft.com/azure/architecture/patterns/gateway-offloading).</span><span class="sxs-lookup"><span data-stu-id="c0a7a-219">For more information, see [Gateway offloading pattern](https://docs.microsoft.com/azure/architecture/patterns/gateway-offloading).</span></span>

## <a name="using-products-with-api-gateway-features"></a><span data-ttu-id="c0a7a-220">API ağ geçidi özellikleri ile ürünleri kullanma</span><span class="sxs-lookup"><span data-stu-id="c0a7a-220">Using products with API Gateway features</span></span>

<span data-ttu-id="c0a7a-221">Her uygulama bağlı olarak API ağ geçitleri ürünleri tarafından sunulan çok sayıda daha geniş kapsamlı kritik konular olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-221">There can be many more cross-cutting concerns offered by the API Gateways products depending on each implementation.</span></span> <span data-ttu-id="c0a7a-222">Biz burada keşfedeceğiz:</span><span class="sxs-lookup"><span data-stu-id="c0a7a-222">We'll explore here:</span></span>

- [<span data-ttu-id="c0a7a-223">Azure API Management</span><span class="sxs-lookup"><span data-stu-id="c0a7a-223">Azure API Management</span></span>](https://azure.microsoft.com/services/api-management/)
- [<span data-ttu-id="c0a7a-224">Ocelot</span><span class="sxs-lookup"><span data-stu-id="c0a7a-224">Ocelot</span></span>](https://github.com/ThreeMammals/Ocelot)

### <a name="azure-api-management"></a><span data-ttu-id="c0a7a-225">Azure API Management</span><span class="sxs-lookup"><span data-stu-id="c0a7a-225">Azure API Management</span></span>

<span data-ttu-id="c0a7a-226">[Azure API Management](https://azure.microsoft.com/services/api-management/) (Şekil 4-14'te gösterildiği gibi) değil yalnızca API ağ geçidi gereksinimlerinizi çözer ancak öngörüleri, API'lerinden toplama gibi özellikler sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-226">[Azure API Management](https://azure.microsoft.com/services/api-management/) (as shown in Figure 4-14) not only solves your API Gateway needs but provides features like gathering insights from your APIs.</span></span> <span data-ttu-id="c0a7a-227">API Yönetimi çözümünü kullanıyorsanız, bir API ağ geçidi, tam API yönetimi çözümü içinde yalnızca bir bileşen ' dir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-227">If you're using an API management solution, an API Gateway is only a component within that full API management solution.</span></span>

![Azure API Management, her iki API ağ geçidi ve yönetim gereksinimlerinizi günlüğe kaydetme, güvenlik, kullanım ölçümü, vb. çözer.](./media/image14.png)

<span data-ttu-id="c0a7a-229">**Şekil 4-14**.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-229">**Figure 4-14**.</span></span> <span data-ttu-id="c0a7a-230">API ağ geçidinizin Azure API Yönetimi'ni kullanma</span><span class="sxs-lookup"><span data-stu-id="c0a7a-230">Using Azure API Management for your API Gateway</span></span>

<span data-ttu-id="c0a7a-231">Bu tür bir API ağ geçitleri "ince" olduğu gibi Azure API Management, tek bir API ağ geçidi olabilir olgusu bir ürünü kullanmaya riskli olmadığı durumlarda, bu durumda, doğru tek parça gelişmek özel C# kod uygulamayıp anlamı bileşeni.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-231">In this case, when using a product like Azure API Management, the fact that you might have a single API Gateway is not so risky because these kinds of API Gateways are "thinner", meaning that you don't implement custom C# code that could evolve towards a monolithic component.</span></span> 

<span data-ttu-id="c0a7a-232">API ağ geçidi ürünler genellikle burada, ayrıca iç mikro hizmetler API'lerinden filtre yanı sıra bu tek katmanda yayımlanan API'leri için yetkilendirme uygulama giriş iletişim için ters proxy gibi davranır.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-232">The API Gateway products usually act like a reverse proxy for ingress communication, where you can also filter the APIs from the internal microservices plus apply authorization to the published APIs in this single tier.</span></span>

<span data-ttu-id="c0a7a-233">Bir API Management sistemi Yardım öngörüleri Apı'lerinizin nasıl kullanılacağı konusunda bilgi almak ve nasıl gerçekleştiriyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-233">The insights available from an API Management system help you get an understanding of how your APIs are being used and how they are performing.</span></span> <span data-ttu-id="c0a7a-234">Süreniz neredeyse gerçek zamanlı analiz raporları görüntüleyin ve işinizi etkileyebilecek eğilimleri belirleyerek bunu.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-234">They do this by letting you view near real-time analytics reports and identifying trends that might impact your business.</span></span> <span data-ttu-id="c0a7a-235">Ayrıca, hakkında daha fazla çevrimiçi ve çevrimdışı analiz için istek ve yanıt etkinlik günlükleri olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-235">Plus, you can have logs about request and response activity for further online and offline analysis.</span></span>

<span data-ttu-id="c0a7a-236">Azure API Management, bir anahtar, belirteç ve IP filtreleme kullanarak Apı'lerinizi güvenli hale getirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-236">With Azure API Management, you can secure your APIs using a key, a token, and IP filtering.</span></span> <span data-ttu-id="c0a7a-237">Bu özellikler, esnek ve ayrıntılı kotalar zorlamak ve oran sınırları, Şekil ve ilkeleri kullanarak Apı'lerinizi davranışını değiştirmek ve yanıt önbelleğe alma ile performansı sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-237">These features let you enforce flexible and fine-grained quotas and rate limits, modify the shape and behavior of your APIs using policies, and improve performance with response caching.</span></span>

<span data-ttu-id="c0a7a-238">Bu kılavuz ve referans örnek uygulaması (hizmetine), Azure API Management gibi PaaS ürünleri kullanmadan düz kapsayıcılarında odaklanabilmek için daha basit ve özel bir kapsayıcı mimarisi için sınırlı mimaridir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-238">In this guide and the reference sample application (eShopOnContainers), the architecture is limited to a simpler and custom-made containerized architecture in order to focus on plain containers without using PaaS products like Azure API Management.</span></span> <span data-ttu-id="c0a7a-239">Ancak, Microsoft Azure'a dağıtılan büyük mikro hizmet tabanlı uygulamalar için Azure API Management temel olarak üretim ortamında, bir API ağ geçitleri için değerlendirilecek geçirmenizi öneririz.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-239">But for large microservice-based applications that are deployed into Microsoft Azure, we encourage you to evaluate Azure API Management as the base for your API Gateways in production.</span></span>

### <a name="ocelot"></a><span data-ttu-id="c0a7a-240">Ocelot</span><span class="sxs-lookup"><span data-stu-id="c0a7a-240">Ocelot</span></span>

<span data-ttu-id="c0a7a-241">[Ocelot](https://github.com/ThreeMammals/Ocelot) bir basit API daha basit bir yaklaşım için önerilen, ağ geçididir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-241">[Ocelot](https://github.com/ThreeMammals/Ocelot) is a lightweight API Gateway, recommended for simpler approaches.</span></span> <span data-ttu-id="c0a7a-242">Ocelot tabanlı API ağ geçidi özellikle sistemlerine giriş birleşik noktalarına ihtiyaç mikro hizmet mimarisi için yapılan açık bir kaynak .NET Core ' dir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-242">Ocelot is an Open Source .NET Core based API Gateway especially made for microservices architecture that need unified points of entry into their system.</span></span> <span data-ttu-id="c0a7a-243">Bu basit, hızlı ve ölçeklenebilir ve Yönlendirme ve diğer birçok özelliği arasında kimlik doğrulaması sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-243">It's lightweight, fast, scalable and provides routing and authentication among many other features.</span></span>

<span data-ttu-id="c0a7a-244">Temel nedeni için Ocelot seçin [hizmetine başvuru uygulaması](https://github.com/dotnet-architecture/eShopOnContainers) Ocelot bir .NET Core basit API, burada dağıtma aynı uygulama dağıtım ortamına dağıtabilirsiniz ağ geçidi olduğundan mikro hizmetler/kapsayıcıları, Docker konağı, Kubernetes, Service Fabric, vb. gibi. Ve .NET Core üzerine dayalı olduğundan, platformlar arası, Linux veya Windows üzerinde dağıtmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-244">The main reason to choose Ocelot for the [eShopOnContainers reference application](https://github.com/dotnet-architecture/eShopOnContainers) is because Ocelot is a .NET Core lightweight API Gateway that you can deploy into the same application deployment environment where you're deploying your microservices/containers, such as a Docker Host, Kubernetes, Service Fabric, etc. And since it's based on .NET Core, it's cross-platform allowing you to deploy on Linux or Windows.</span></span>

<span data-ttu-id="c0a7a-245">Özel API kapsayıcılarda çalıştırılan ağ geçitleri gösteren önceki diyagramlarda tam olarak ne de Ocelot bir kapsayıcı ve mikro hizmet tabanlı uygulama çalıştırabilirsiniz olan.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-245">The previous diagrams showing custom API Gateways running in containers are precisely how you can also run Ocelot in a container and microservice-based application.</span></span>

<span data-ttu-id="c0a7a-246">Ayrıca, Apigee, Kong, MuleSoft, WSO2, API ağ geçitleri özellikleri sunan pazardaki diğer pek çok ürünlerin vardır ve giriş Denetleyicisi Özellikleri Linkerd ve Istio gibi diğer ürünleri için hizmet kafes.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-246">In addition, there are many other products in the market offering API Gateways features, such as Apigee, Kong, MuleSoft, WSO2, and other products like Linkerd and Istio for service mesh ingress controller features.</span></span>

<span data-ttu-id="c0a7a-247">İlk mimarisi ve desenleri açıklama bölümleri sonra sonraki bölümlerde, nasıl API ağ geçitleri ile gerçekleştirilebileceğini açıklamak. [Ocelot](https://github.com/ThreeMammals/Ocelot).</span><span class="sxs-lookup"><span data-stu-id="c0a7a-247">After the initial architecture and patterns explanation sections, the next sections explain how to implement API Gateways with [Ocelot](https://github.com/ThreeMammals/Ocelot).</span></span>

## <a name="drawbacks-of-the-api-gateway-pattern"></a><span data-ttu-id="c0a7a-248">API ağ geçidi desenini dezavantajları</span><span class="sxs-lookup"><span data-stu-id="c0a7a-248">Drawbacks of the API Gateway pattern</span></span>

- <span data-ttu-id="c0a7a-249">En önemli dezavantajı, bir API ağ geçidi uyguladığınızda, iç mikro hizmetlerin söz konusu katman eşlenmesiyle olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-249">The most important drawback is that when you implement an API Gateway, you're coupling that tier with the internal microservices.</span></span> <span data-ttu-id="c0a7a-250">Böyle bağlantısından uygulamanız için ciddi sorunlar yapabilecek.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-250">Coupling like this might introduce serious difficulties for your application.</span></span> <span data-ttu-id="c0a7a-251">Azure Service Bus ekibine Mimarı Clemens Vaster başvurduğu olası bu güçlük "Yeni ESB" olarak "[Mesajlaşma ve mikro Hizmetler](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" Git 2016 oturumunda.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-251">Clemens Vaster, architect at the Azure Service Bus team, refers to this potential difficulty as "the new ESB" in the "[Messaging and Microservices](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" session at GOTO 2016.</span></span>

- <span data-ttu-id="c0a7a-252">Mikro hizmetler API ağ geçidi kullanarak bir ek olası tek hata noktası oluşturur.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-252">Using a microservices API Gateway creates an additional possible single point of failure.</span></span>

- <span data-ttu-id="c0a7a-253">Bir API ağ geçidi ek ağ çağrısı nedeniyle yüksek yanıt süresi ortaya çıkarabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-253">An API Gateway can introduce increased response time due to the additional network call.</span></span> <span data-ttu-id="c0a7a-254">Ancak bu ek çağrı genellikle iç mikro Hizmetleri doğrudan çağırma çok sık iletişim kuran bir istemci arabirimi olması daha az bir etkisi yoktur.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-254">However, this extra call usually has less impact than having a client interface that's too chatty directly calling the internal microservices.</span></span>

- <span data-ttu-id="c0a7a-255">API ağ geçidi, düzgün bir şekilde ölçeği değil, bir performans sorunu haline gelebilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-255">If not scaled out properly, the API Gateway can become a bottleneck.</span></span>

- <span data-ttu-id="c0a7a-256">Özel mantığı ve veri toplama içeriyorsa, bir API ağ geçidi ek geliştirme maliyetini ve gelecekte bakım yapılmasını gerektiriyor.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-256">An API Gateway requires additional development cost and future maintenance if it includes custom logic and data aggregation.</span></span> <span data-ttu-id="c0a7a-257">Geliştiriciler, her bir mikro hizmetin ait uç noktalarını kullanıma için API ağ geçidi güncelleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-257">Developers must update the API Gateway in order to expose each microservice's endpoints.</span></span> <span data-ttu-id="c0a7a-258">Ayrıca, iç mikro Hizmetler uygulaması değişiklikleri API ağ geçidi düzeyde kod değişiklikleri neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-258">Moreover, implementation changes in the internal microservices might cause code changes at the API Gateway level.</span></span> <span data-ttu-id="c0a7a-259">Ancak, API ağ geçidi, yalnızca güvenlik, günlüğe kaydetme ve sürüm oluşturma uyguluyor varsa (as Azure API Management'ı kullanırken), bu ek geliştirme maliyetini geçerli.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-259">However, if the API Gateway is just applying security, logging, and versioning (as when using Azure API Management), this additional development cost might not apply.</span></span>

- <span data-ttu-id="c0a7a-260">API ağ geçidi tek bir ekip tarafından geliştirilmişse geliştirme performans sorunu olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-260">If the API Gateway is developed by a single team, there can be a development bottleneck.</span></span> <span data-ttu-id="c0a7a-261">Neden daha iyi bir yaklaşım birkaç fined şirketlerinde API için farklı istemci ihtiyaçları yanıt ağ geçitleri için başka bir nedeni budur.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-261">This is another reason why a better approach is to have several fined-grained API Gateways that respond to different client needs.</span></span> <span data-ttu-id="c0a7a-262">Siz de API ağ geçidi dahili olarak birden çok alanlar veya iç mikro hizmetleri üzerinde çalışan farklı ekipler tarafından sahip olunan katmanları ayırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0a7a-262">You could also segregate the API Gateway internally into multiple areas or layers that are owned by the different teams working on the internal microservices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="c0a7a-263">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="c0a7a-263">Additional resources</span></span>

- <span data-ttu-id="c0a7a-264">**Charles Uludağ. Desen: API ağ geçidi / arka uç için ön uç** \\</span><span class="sxs-lookup"><span data-stu-id="c0a7a-264">**Charles Richardson. Pattern: API Gateway / Backend for Front-End** \\</span></span>
  [*https://microservices.io/patterns/apigateway.html*](https://microservices.io/patterns/apigateway.html)

- <span data-ttu-id="c0a7a-265">**API ağ geçidi düzeni** \\</span><span class="sxs-lookup"><span data-stu-id="c0a7a-265">**API Gateway pattern** \\</span></span>
  [*https://docs.microsoft.com/azure/architecture/microservices/gateway*](https://docs.microsoft.com/azure/architecture/microservices/gateway)

- <span data-ttu-id="c0a7a-266">**Toplama ve birleştirme deseni** \\</span><span class="sxs-lookup"><span data-stu-id="c0a7a-266">**Aggregation and composition pattern** \\</span></span>
  [*https://microservices.io/patterns/data/api-composition.html*](https://microservices.io/patterns/data/api-composition.html)

- <span data-ttu-id="c0a7a-267">**Azure API Management** \\</span><span class="sxs-lookup"><span data-stu-id="c0a7a-267">**Azure API Management** \\</span></span>
  [*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)

- <span data-ttu-id="c0a7a-268">**UDI Dahan. Hizmet yönelimli oluşturma** \\</span><span class="sxs-lookup"><span data-stu-id="c0a7a-268">**Udi Dahan. Service Oriented Composition** \\</span></span>
  [*http://udidahan.com/2014/07/30/service-oriented-composition-with-video/*](http://udidahan.com/2014/07/30/service-oriented-composition-with-video/)

- <span data-ttu-id="c0a7a-269">**Clemens Vasters. Mesajlaşma ve mikro hizmetler, GOTO 2016 (video)** \\</span><span class="sxs-lookup"><span data-stu-id="c0a7a-269">**Clemens Vasters. Messaging and Microservices at GOTO 2016 (video)** \\</span></span>
  [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)

- <span data-ttu-id="c0a7a-270">**API ağ geçidi kısaca** (ASP.net Core API ağ geçidi öğretici serisi) \\</span><span class="sxs-lookup"><span data-stu-id="c0a7a-270">**API Gateway in a Nutshell** (ASP.net Core API Gateway Tutorial Series) \\</span></span>
  [*https://www.pogsdotnet.com/2018/08/api-gateway-in-nutshell.html*](https://www.pogsdotnet.com/2018/08/api-gateway-in-nutshell.html)

>[!div class="step-by-step"]
><span data-ttu-id="c0a7a-271">[Önceki](identify-microservice-domain-model-boundaries.md)
>[İleri](communication-in-microservice-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="c0a7a-271">[Previous](identify-microservice-domain-model-boundaries.md)
[Next](communication-in-microservice-architecture.md)</span></span>
