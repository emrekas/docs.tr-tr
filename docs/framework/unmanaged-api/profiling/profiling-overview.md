---
title: Profil Oluşturmaya Genel Bakış
ms.date: 03/30/2017
helpviewer_keywords:
- managed code, profiling API support
- unmanaged code, combining with managed code in profiling
- notification threads [.NET Framework profiling]
- unmanaged code, profiling
- profiling API [.NET Framework], and COM
- profiling API [.NET Framework], unmanaged code profiling
- profilers, writing
- profiling API [.NET Framework], call stacks
- code profilers, writing
- profiling API [.NET Framework], security considerations
- profiling API [.NET Framework], managed code support
- common language runtime, profiling
- profiling API [.NET Framework], notification threads
- call stacks [.NET Framework profiling]
- profiling API [.NET Framework], stack depth
- common language runtime, writing a profiler
- profiling API [.NET Framework], information retrieval interfaces
- shadow stacks [.NET Framework profiling]
- COM, using in the profiling API
- stack snapshots [.NET Framework profiling]
- profiling API [.NET Framework], supported features
- profiling API [.NET Framework], overview
- security, profiling API considerations
- stack depth [.NET Framework profiling]
ms.assetid: 864c2344-71dc-46f9-96b2-ed59fb6427a8
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 889a9b74bf0b2f2ef029dd622c7ddbbd9b844fa0
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64651184"
---
# <a name="profiling-overview"></a><span data-ttu-id="da62a-102">Profil Oluşturmaya Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="da62a-102">Profiling Overview</span></span>
<a name="top"></a> <span data-ttu-id="da62a-103">Bir profil oluşturucu başka bir uygulamanın yürütülmesini izleyen bir araçtır.</span><span class="sxs-lookup"><span data-stu-id="da62a-103">A profiler is a tool that monitors the execution of another application.</span></span> <span data-ttu-id="da62a-104">Ortak dil çalışma zamanı (CLR) Profil Oluşturucu, ileti almak ve CLR Profil oluşturma API'ı kullanarak göndermek işlevlerini içeren bir dinamik bağlantı kitaplığı (DLL) ' dir.</span><span class="sxs-lookup"><span data-stu-id="da62a-104">A common language runtime (CLR) profiler is a dynamic link library (DLL) that consists of functions that receive messages from, and send messages to, the CLR by using the profiling API.</span></span> <span data-ttu-id="da62a-105">Profil Oluşturucu DLL çalışma zamanında CLR tarafından yüklenir.</span><span class="sxs-lookup"><span data-stu-id="da62a-105">The profiler DLL is loaded by the CLR at run time.</span></span>  
  
 <span data-ttu-id="da62a-106">Geleneksel profil oluşturma araçları, uygulamanın yürütülmesini ölçmeye odaklanır.</span><span class="sxs-lookup"><span data-stu-id="da62a-106">Traditional profiling tools focus on measuring the execution of the application.</span></span> <span data-ttu-id="da62a-107">Diğer bir deyişle, her bir işlevin veya uygulamanın zaman bellek kullanımını harcanan süreyi ölçer.</span><span class="sxs-lookup"><span data-stu-id="da62a-107">That is, they measure the time that is spent in each function or the memory usage of the application over time.</span></span> <span data-ttu-id="da62a-108">Profil oluşturma API'SİNİN daha geniş bir kod kapsama araçları gibi tanılama araç sınıfı hedefler ve Gelişmiş hata ayıklama yardımları bile.</span><span class="sxs-lookup"><span data-stu-id="da62a-108">The profiling API targets a broader class of diagnostic tools such as code-coverage utilities and even advanced debugging aids.</span></span> <span data-ttu-id="da62a-109">Doğası gereği tüm tanılama bu kullanır.</span><span class="sxs-lookup"><span data-stu-id="da62a-109">These uses are all diagnostic in nature.</span></span> <span data-ttu-id="da62a-110">Profil oluşturma API ölçmekle kalmaz aynı zamanda bir uygulamanın yürütülmesini izler.</span><span class="sxs-lookup"><span data-stu-id="da62a-110">The profiling API not only measures but also monitors the execution of an application.</span></span> <span data-ttu-id="da62a-111">Bu nedenle, profil oluşturma API'si asla uygulamanın kendisi tarafından kullanılmamalıdır ve uygulamanın yürütülmesi bağlı olmamalıdır (veya ondan etkilenmemelidir) profil oluşturucu.</span><span class="sxs-lookup"><span data-stu-id="da62a-111">For this reason, the profiling API should never be used by the application itself, and the application’s execution should not depend on (or be affected by) the profiler.</span></span>  
  
 <span data-ttu-id="da62a-112">CLR uygulamasının profilini derlenmiş makine kodu gerekenden çok daha fazla desteği gerektirir.</span><span class="sxs-lookup"><span data-stu-id="da62a-112">Profiling a CLR application requires more support than profiling conventionally compiled machine code.</span></span> <span data-ttu-id="da62a-113">Uygulama etki alanları, çöp toplama, yönetilen özel durum işleme gibi CLR kavramlar tanıtılmaktadır olmasıdır (Microsoft Ara dili veya MSIL kodunu yerel makine koda dönüştürme), kod just-in-time (JIT) derleme ve benzer Özellikler.</span><span class="sxs-lookup"><span data-stu-id="da62a-113">This is because the CLR introduces concepts such as application domains, garbage collection, managed exception handling, just-in-time (JIT) compilation of code (converting Microsoft intermediate language, or MSIL, code into native machine code), and similar features.</span></span> <span data-ttu-id="da62a-114">Geleneksel profil oluşturma mekanizmaları tanımlayamaz ya da bu özellikler hakkında yararlı bilgiler sağlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-114">Conventional profiling mechanisms cannot identify or provide useful information about these features.</span></span> <span data-ttu-id="da62a-115">Profil oluşturma API CLR ile profili oluşturulan uygulamanın performansı üzerinde çok az etkisi olan bu eksik bilgiyi verimli bir şekilde sağlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-115">The profiling API provides this missing information efficiently, with minimal effect on the performance of the CLR and the profiled application.</span></span>  
  
 <span data-ttu-id="da62a-116">Çalışma zamanında JIT derlemesi profil oluşturma için iyi fırsatlar sağlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-116">JIT compilation at run time provides good opportunities for profiling.</span></span> <span data-ttu-id="da62a-117">Profil oluşturma API JIT olarak derlenmiş silinmeden önce bir yordam için bellek içi MSIL kod akışını değiştirmek bir profil oluşturucunun sağlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-117">The profiling API enables a profiler to change the in-memory MSIL code stream for a routine before it is JIT-compiled.</span></span> <span data-ttu-id="da62a-118">Bu şekilde, profil oluşturucu izleme kodu daha derin araştırma gerektiren belirli yordamlara dinamik olarak ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="da62a-118">In this manner, the profiler can dynamically add instrumentation code to particular routines that need deeper investigation.</span></span> <span data-ttu-id="da62a-119">Bu yaklaşım geleneksel senaryolarda mümkün olsa da, CLR Profil oluşturma API'ı kullanarak uygulama çok daha kolaydır.</span><span class="sxs-lookup"><span data-stu-id="da62a-119">Although this approach is possible in conventional scenarios, it is much easier to implement for the CLR by using the profiling API.</span></span>  
  
 <span data-ttu-id="da62a-120">Bu genel bakış aşağıdaki bölümlerden oluşur:</span><span class="sxs-lookup"><span data-stu-id="da62a-120">This overview consists of the following sections:</span></span>  
  
- [<span data-ttu-id="da62a-121">Profil oluşturma API'si</span><span class="sxs-lookup"><span data-stu-id="da62a-121">The Profiling API</span></span>](#profiling_api)  
  
- [<span data-ttu-id="da62a-122">Desteklenen özellikler</span><span class="sxs-lookup"><span data-stu-id="da62a-122">Supported Features</span></span>](#support)  
  
- [<span data-ttu-id="da62a-123">Bildirim iş parçacıkları</span><span class="sxs-lookup"><span data-stu-id="da62a-123">Notification Threads</span></span>](#notification_threads)  
  
- [<span data-ttu-id="da62a-124">Güvenlik</span><span class="sxs-lookup"><span data-stu-id="da62a-124">Security</span></span>](#security)  
  
- [<span data-ttu-id="da62a-125">Yönetilen ve yönetilmeyen kod Profiler kodu birleştirme</span><span class="sxs-lookup"><span data-stu-id="da62a-125">Combining Managed and Unmanaged Code in a Code Profiler</span></span>](#combining_managed_unmanaged)  
  
- [<span data-ttu-id="da62a-126">Yönetilmeyen kod profili oluşturma</span><span class="sxs-lookup"><span data-stu-id="da62a-126">Profiling Unmanaged Code</span></span>](#unmanaged)  
  
- [<span data-ttu-id="da62a-127">COM kullanma</span><span class="sxs-lookup"><span data-stu-id="da62a-127">Using COM</span></span>](#com)  
  
- [<span data-ttu-id="da62a-128">Çağrı yığınları</span><span class="sxs-lookup"><span data-stu-id="da62a-128">Call stacks</span></span>](#call_stacks)  
  
- [<span data-ttu-id="da62a-129">Geri çağrılar ve yığın derinliği</span><span class="sxs-lookup"><span data-stu-id="da62a-129">Callbacks and Stack Depth</span></span>](#callbacks)  
  
- [<span data-ttu-id="da62a-130">İlgili Konular</span><span class="sxs-lookup"><span data-stu-id="da62a-130">Related Topics</span></span>](#related_topics)  
  
<a name="profiling_api"></a>   
## <a name="the-profiling-api"></a><span data-ttu-id="da62a-131">Profil oluşturma API'si</span><span class="sxs-lookup"><span data-stu-id="da62a-131">The Profiling API</span></span>  
 <span data-ttu-id="da62a-132">Genellikle, profil oluşturma API yazmak için kullanılan bir *kod profil oluşturucu*, hangi yönetilen bir uygulamanın yürütülmesini izleyen bir programdır.</span><span class="sxs-lookup"><span data-stu-id="da62a-132">Typically, the profiling API is used to write a *code profiler*, which is a program that monitors the execution of a managed application.</span></span>  
  
 <span data-ttu-id="da62a-133">Profil oluşturma API, bir profil oluşturucu ile profili oluşturulan uygulamayla aynı işleme yüklenen DLL tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="da62a-133">The profiling API is used by a profiler DLL, which is loaded into the same process as the application that is being profiled.</span></span> <span data-ttu-id="da62a-134">Profil Oluşturucu DLL bir geri arama arayüzü uygular ([Icorprofilercallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) .NET Framework sürüm 1.0 ve 1.1 [Icorprofilercallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) sürüm 2.0 ve üzeri).</span><span class="sxs-lookup"><span data-stu-id="da62a-134">The profiler DLL implements a callback interface ([ICorProfilerCallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) in the .NET Framework version 1.0 and 1.1, [ICorProfilerCallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) in version 2.0 and later).</span></span> <span data-ttu-id="da62a-135">CLR, profili oluşturulan işlemdeki olayların profil oluşturucusuna bildirim için bu arabirimdeki yöntemleri çağırır.</span><span class="sxs-lookup"><span data-stu-id="da62a-135">The CLR calls the methods in that interface to notify the profiler of events in the profiled process.</span></span> <span data-ttu-id="da62a-136">Profil Oluşturucu geri çalışma zamanı tarafından bulunan yöntemleri kullanarak çağırabilirsiniz [Icorprofilerınfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) ve [Icorprofilerınfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md) oluşturulan uygulamanın durumu hakkında bilgi edinmek için arabirim.</span><span class="sxs-lookup"><span data-stu-id="da62a-136">The profiler can call back into the runtime by using the methods in the [ICorProfilerInfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) and [ICorProfilerInfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md) interfaces to obtain information about the state of the profiled application.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="da62a-137">Profili oluşturulan uygulamayla aynı işlemde profil oluşturucu çözümünün yalnızca veri toplama bölümü çalışmalıdır.</span><span class="sxs-lookup"><span data-stu-id="da62a-137">Only the data-gathering part of the profiler solution should be running in the same process as the profiled application.</span></span> <span data-ttu-id="da62a-138">Tüm kullanıcı arabirimi ve veri analizi ayrı bir işlemde gerçekleştirilmelidir.</span><span class="sxs-lookup"><span data-stu-id="da62a-138">All user interface and data analysis should be performed in a separate process.</span></span>  
  
 <span data-ttu-id="da62a-139">Aşağıdaki resimde, profil oluşturucu DLL'nin profili oluşturulan uygulama ve CLR ile nasıl etkileşim kurduğu gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="da62a-139">The following illustration shows how the profiler DLL interacts with the application that is being profiled and the CLR.</span></span>  
  
 ![Profil oluşturma mimarisi gösteren ekran görüntüsü.](./media/profiling-overview/profiling-architecture.png)  
  
### <a name="the-notification-interfaces"></a><span data-ttu-id="da62a-141">Bildirim arabirimleri</span><span class="sxs-lookup"><span data-stu-id="da62a-141">The Notification Interfaces</span></span>  
 <span data-ttu-id="da62a-142">[Icorprofilercallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) ve [Icorprofilercallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) bildirim arabirimleri olarak düşünülebilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-142">[ICorProfilerCallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) and [ICorProfilerCallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) can be considered notification interfaces.</span></span> <span data-ttu-id="da62a-143">Bu arabirimler yöntemleri gibi oluşur [ClassLoadStarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-classloadstarted-method.md), [ClassLoadFinished](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-classloadfinished-method.md), ve [Jıtcompilationstarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationstarted-method.md).</span><span class="sxs-lookup"><span data-stu-id="da62a-143">These interfaces consist of methods such as [ClassLoadStarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-classloadstarted-method.md), [ClassLoadFinished](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-classloadfinished-method.md), and [JITCompilationStarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationstarted-method.md).</span></span> <span data-ttu-id="da62a-144">Her zaman CLR yükler veya bir sınıf yüklemesini kaldırdığında, bir işlev derler ve bu şekilde karşılık gelen yöntemini profil oluşturucunun çağırır `ICorProfilerCallback` veya `ICorProfilerCallback2` arabirimi.</span><span class="sxs-lookup"><span data-stu-id="da62a-144">Each time the CLR loads or unloads a class, compiles a function, and so on, it calls the corresponding method in the profiler's `ICorProfilerCallback` or `ICorProfilerCallback2` interface.</span></span>  
  
 <span data-ttu-id="da62a-145">Örneğin, bir profil oluşturucu iki bildirim işlevi ile kod performansını ölçebilir: [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md) ve [FunctionLeave2](../../../../docs/framework/unmanaged-api/profiling/functionleave2-function.md).</span><span class="sxs-lookup"><span data-stu-id="da62a-145">For example, a profiler could measure code performance through two notification functions: [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md) and [FunctionLeave2](../../../../docs/framework/unmanaged-api/profiling/functionleave2-function.md).</span></span> <span data-ttu-id="da62a-146">Bu zaman damgaları her bir bildirim, sonuçları toplar ve hangi işlevleri gösteren bir liste çıkışı oluşturur yalnızca en çok CPU ya da duvar saati zaman uygulama yürütmesi sırasında kullanılan.</span><span class="sxs-lookup"><span data-stu-id="da62a-146">It just time-stamps each notification, accumulates results, and outputs a list that indicates which functions consumed the most CPU or wall-clock time during the execution of the application.</span></span>  
  
### <a name="the-information-retrieval-interfaces"></a><span data-ttu-id="da62a-147">Bilgi alım arabirimleri</span><span class="sxs-lookup"><span data-stu-id="da62a-147">The Information Retrieval Interfaces</span></span>  
 <span data-ttu-id="da62a-148">Diğer ana profil oluşturma dahil arabirimdir [Icorprofilerınfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) ve [Icorprofilerınfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md).</span><span class="sxs-lookup"><span data-stu-id="da62a-148">The other main interfaces involved in profiling are [ICorProfilerInfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) and [ICorProfilerInfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md).</span></span> <span data-ttu-id="da62a-149">Profil Oluşturucu Analizine yardımcı olmak için daha fazla bilgi edinmek için gerektiği gibi bu arabirimler çağırır.</span><span class="sxs-lookup"><span data-stu-id="da62a-149">The profiler calls these interfaces as required to obtain more information to help its analysis.</span></span> <span data-ttu-id="da62a-150">Örneğin, her CLR çağırır [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md) işlevi, bir işlev tanımlayıcı sağlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-150">For example, whenever the CLR calls the [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md) function, it supplies a function identifier.</span></span> <span data-ttu-id="da62a-151">Profil Oluşturucu çağırarak o işlev ile ilgili daha fazla bilgi edinebilirsiniz [Icorprofilerınfo2::getfunctionınfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-getfunctioninfo2-method.md) işlevin üst sınıfı, adı ve benzeri bulmak için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="da62a-151">The profiler can get more information about that function by calling the [ICorProfilerInfo2::GetFunctionInfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-getfunctioninfo2-method.md) method to discover the function's parent class, its name, and so on.</span></span>  
  
 [<span data-ttu-id="da62a-152">Başa dön</span><span class="sxs-lookup"><span data-stu-id="da62a-152">Back to top</span></span>](#top)  
  
<a name="support"></a>   
## <a name="supported-features"></a><span data-ttu-id="da62a-153">Desteklenen Özellikler</span><span class="sxs-lookup"><span data-stu-id="da62a-153">Supported Features</span></span>  
 <span data-ttu-id="da62a-154">Profil oluşturma API çeşitli olayları ve ortak dil çalışma zamanı'nda gerçekleşen eylemler hakkında bilgi sağlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-154">The profiling API provides information about a variety of events and actions that occur in the common language runtime.</span></span> <span data-ttu-id="da62a-155">Bu bilgileri, işlemlerin iç işleyişini izlemek ve .NET Framework uygulamanızın performansını çözümlemek için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="da62a-155">You can use this information to monitor the inner workings of processes and to analyze the performance of your .NET Framework application.</span></span>  
  
 <span data-ttu-id="da62a-156">Profil oluşturma API'si aşağıdaki eylemler ve CLR içerisinde gerçekleşen olayları hakkında bilgi alır:</span><span class="sxs-lookup"><span data-stu-id="da62a-156">The profiling API retrieves information about the following actions and events that occur in the CLR:</span></span>  
  
- <span data-ttu-id="da62a-157">CLR başlatma ve kapatma olayları.</span><span class="sxs-lookup"><span data-stu-id="da62a-157">CLR startup and shutdown events.</span></span>  
  
- <span data-ttu-id="da62a-158">Uygulama etki alanı oluşturma ve kapatma olayları.</span><span class="sxs-lookup"><span data-stu-id="da62a-158">Application domain creation and shutdown events.</span></span>  
  
- <span data-ttu-id="da62a-159">Derleme yükleme ve kaldırma olayları.</span><span class="sxs-lookup"><span data-stu-id="da62a-159">Assembly loading and unloading events.</span></span>  
  
- <span data-ttu-id="da62a-160">Modül yükleme ve kaldırma olayları.</span><span class="sxs-lookup"><span data-stu-id="da62a-160">Module loading and unloading events.</span></span>  
  
- <span data-ttu-id="da62a-161">COM vtable oluşturma ve yok etme olayları.</span><span class="sxs-lookup"><span data-stu-id="da62a-161">COM vtable creation and destruction events.</span></span>  
  
- <span data-ttu-id="da62a-162">Just-in-time (JIT) derlemeyi ve kod atışlı olaylar.</span><span class="sxs-lookup"><span data-stu-id="da62a-162">Just-in-time (JIT) compilation and code-pitching events.</span></span>  
  
- <span data-ttu-id="da62a-163">Yükleme ve kaldırma olayları sınıfı.</span><span class="sxs-lookup"><span data-stu-id="da62a-163">Class loading and unloading events.</span></span>  
  
- <span data-ttu-id="da62a-164">İş parçacığı oluşturma ve yok etme olayları'nı tıklatın.</span><span class="sxs-lookup"><span data-stu-id="da62a-164">Thread creation and destruction events.</span></span>  
  
- <span data-ttu-id="da62a-165">İşlev giriş ve çıkış olayları.</span><span class="sxs-lookup"><span data-stu-id="da62a-165">Function entry and exit events.</span></span>  
  
- <span data-ttu-id="da62a-166">Özel durumlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-166">Exceptions.</span></span>  
  
- <span data-ttu-id="da62a-167">Yönetilen ve yönetilmeyen kod yürütülmesi arasında geçişler.</span><span class="sxs-lookup"><span data-stu-id="da62a-167">Transitions between managed and unmanaged code execution.</span></span>  
  
- <span data-ttu-id="da62a-168">Farklı çalışma zamanı bağlamları arasında geçişler.</span><span class="sxs-lookup"><span data-stu-id="da62a-168">Transitions between different runtime contexts.</span></span>  
  
- <span data-ttu-id="da62a-169">Çalışma zamanını askıya alma hakkında bilgi sağlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-169">Information about runtime suspensions.</span></span>  
  
- <span data-ttu-id="da62a-170">Çalışma zamanı bellek yığını ve çöp toplama etkinliği hakkında bilgiler.</span><span class="sxs-lookup"><span data-stu-id="da62a-170">Information about the runtime memory heap and garbage collection activity.</span></span>  
  
 <span data-ttu-id="da62a-171">Profil oluşturma API tüm (yönetilmeyen) COM uyumlu dil üzerinden çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-171">The profiling API can be called from any (non-managed) COM-compatible language.</span></span>  
  
 <span data-ttu-id="da62a-172">API, CPU ve bellek tüketimi açısından verimlidir.</span><span class="sxs-lookup"><span data-stu-id="da62a-172">The API is efficient with regard to CPU and memory consumption.</span></span> <span data-ttu-id="da62a-173">Profil oluşturma profili oluşturulan uygulamada yanıltıcı sonuçlara neden olabilecek kadar önemli bir değişiklik gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="da62a-173">Profiling does not involve changes to the profiled application that are significant enough to cause misleading results.</span></span>  
  
 <span data-ttu-id="da62a-174">Profil oluşturma API hem örnekleme hem de örnekleme yapmayan profil oluşturucuları için yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="da62a-174">The profiling API is useful to both sampling and non-sampling profilers.</span></span> <span data-ttu-id="da62a-175">A *örnekleme profil oluşturucu* profili normal saat vuruşlarında, örneğin 5 mili saniye inceler.</span><span class="sxs-lookup"><span data-stu-id="da62a-175">A *sampling profiler* inspects the profile at regular clock ticks, say, at 5 milliseconds apart.</span></span> <span data-ttu-id="da62a-176">A *örnekleme olmayan profil oluşturucu* bir olayın zaman uyumlu olarak olayına neden olmadan iş parçacığı ile bilgilendirilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-176">A *non-sampling profiler* is informed of an event synchronously with the thread that causes the event.</span></span>  
  
### <a name="unsupported-functionality"></a><span data-ttu-id="da62a-177">Desteklenmeyen İşlev</span><span class="sxs-lookup"><span data-stu-id="da62a-177">Unsupported Functionality</span></span>  
 <span data-ttu-id="da62a-178">Profil oluşturma API'si aşağıdaki işlevleri desteklemez:</span><span class="sxs-lookup"><span data-stu-id="da62a-178">The profiling API does not support the following functionality:</span></span>  
  
- <span data-ttu-id="da62a-179">Geleneksel Win32 yöntemleri kullanılarak profili oluşturulması gereken yönetilmeyen kod.</span><span class="sxs-lookup"><span data-stu-id="da62a-179">Unmanaged code, which must be profiled using conventional Win32 methods.</span></span> <span data-ttu-id="da62a-180">Ancak, CLR Profil Oluşturucu yönetilen ve yönetilmeyen kod arasındaki sınırları belirlemek için geçiş olaylarını içerir.</span><span class="sxs-lookup"><span data-stu-id="da62a-180">However, the CLR profiler includes transition events to determine the boundaries between managed and unmanaged code.</span></span>  
  
- <span data-ttu-id="da62a-181">Kendi kendini değiştiren açı yönelimli programlama gibi amaçlarla kendi kodunu değiştiren uygulamalar.</span><span class="sxs-lookup"><span data-stu-id="da62a-181">Self-modifying applications that modify their own code for purposes such as aspect-oriented programming.</span></span>  
  
- <span data-ttu-id="da62a-182">Profil oluşturma API'si bu bilgileri sağlamaz sağlamadığı için sınır denetimi.</span><span class="sxs-lookup"><span data-stu-id="da62a-182">Bounds checking, because the profiling API does not provide this information.</span></span> <span data-ttu-id="da62a-183">CLR sınırlarının tüm yönetilen kod denetimi desteği sağlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-183">The CLR provides intrinsic support for bounds checking of all managed code.</span></span>  
  
- <span data-ttu-id="da62a-184">Aşağıdaki nedenlerden dolayı desteklenmeyen uzaktan profil oluşturma:</span><span class="sxs-lookup"><span data-stu-id="da62a-184">Remote profiling, which is not supported for the following reasons:</span></span>  
  
    - <span data-ttu-id="da62a-185">Uzaktan profil oluşturma, yürütme süresini uzatır.</span><span class="sxs-lookup"><span data-stu-id="da62a-185">Remote profiling extends execution time.</span></span> <span data-ttu-id="da62a-186">Profil oluşturma arabirimlerini kullandığınızda, böylece profil oluşturma sonuçlarının unduly etkilenmez, yürütme süresi en aza indirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="da62a-186">When you use the profiling interfaces, you must minimize execution time so that profiling results will not be unduly affected.</span></span> <span data-ttu-id="da62a-187">Bu, yürütme performansını izlendiğinde özellikle doğrudur.</span><span class="sxs-lookup"><span data-stu-id="da62a-187">This is especially true when execution performance is being monitored.</span></span> <span data-ttu-id="da62a-188">Profil oluşturma arabirimleri bellek kullanımını izlemek veya yığın çerçeveleri, nesneleri vb. hakkında çalışma zamanı bilgileri almak için kullanıldığında, ancak uzak profil oluşturma bir kısıtlaması değil.</span><span class="sxs-lookup"><span data-stu-id="da62a-188">However, remote profiling is not a limitation when the profiling interfaces are used to monitor memory usage or to obtain run-time information about stack frames, objects, and so on.</span></span>  
  
    - <span data-ttu-id="da62a-189">CLR kod Profilcisi bir veya daha fazla geri çağrı arabirimini, profili oluşturulan uygulamanın üzerinde çalıştığı yerel bilgisayardaki çalışma zamanı ile kaydetmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="da62a-189">The CLR code profiler must register one or more callback interfaces with the runtime on the local computer on which the profiled application is running.</span></span> <span data-ttu-id="da62a-190">Bu, bir uzaktan kod profil oluşturucu oluşturma özelliğini sınırlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-190">This limits the ability to create a remote code profiler.</span></span>  
  
- <span data-ttu-id="da62a-191">Yüksek kullanılabilirlik gereksinimleri olan üretim ortamlarında profil oluşturma.</span><span class="sxs-lookup"><span data-stu-id="da62a-191">Profiling in production environments with high-availability requirements.</span></span> <span data-ttu-id="da62a-192">Profil oluşturma API'si, geliştirme zamanı tanılamalarını desteklemek üzere oluşturulmuştur.</span><span class="sxs-lookup"><span data-stu-id="da62a-192">The profiling API was created to support development-time diagnostics.</span></span> <span data-ttu-id="da62a-193">Üretim ortamlarını desteklemek için gereken ciddi testleri gerçekleştirmedi.</span><span class="sxs-lookup"><span data-stu-id="da62a-193">It has not undergone the rigorous testing required to support production environments.</span></span>  
  
 [<span data-ttu-id="da62a-194">Başa dön</span><span class="sxs-lookup"><span data-stu-id="da62a-194">Back to top</span></span>](#top)  
  
<a name="notification_threads"></a>   
## <a name="notification-threads"></a><span data-ttu-id="da62a-195">Bildirim iş parçacıkları</span><span class="sxs-lookup"><span data-stu-id="da62a-195">Notification Threads</span></span>  
 <span data-ttu-id="da62a-196">Çoğu durumda, olay oluşturan iş parçacığı da bildirimleri yürütür.</span><span class="sxs-lookup"><span data-stu-id="da62a-196">In most cases, the thread that generates an event also executes notifications.</span></span> <span data-ttu-id="da62a-197">Bu tür bildirimleri (örneğin, [FunctionEnter](../../../../docs/framework/unmanaged-api/profiling/functionenter-function.md) ve [FunctionLeave](../../../../docs/framework/unmanaged-api/profiling/functionleave-function.md)) açık sağlamanız gerekmez `ThreadID`.</span><span class="sxs-lookup"><span data-stu-id="da62a-197">Such notifications (for example, [FunctionEnter](../../../../docs/framework/unmanaged-api/profiling/functionenter-function.md) and [FunctionLeave](../../../../docs/framework/unmanaged-api/profiling/functionleave-function.md)) do not need to supply the explicit `ThreadID`.</span></span> <span data-ttu-id="da62a-198">Ayrıca, profil oluşturucu depolamak ve analiz bloklarıyla dizin göre genel depoda analiz bloklarında yerine güncelleştirmek için iş parçacığı yerel depolama kullanmaya karar verebilir `ThreadID` etkilenen iş parçacığının.</span><span class="sxs-lookup"><span data-stu-id="da62a-198">Also, the profiler might decide to use thread-local storage to store and update its analysis blocks instead of indexing the analysis blocks in global storage, based on the `ThreadID` of the affected thread.</span></span>  
  
 <span data-ttu-id="da62a-199">Bu geri aramaların seri halde olmadığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="da62a-199">Note that these callbacks are not serialized.</span></span> <span data-ttu-id="da62a-200">Kullanıcılar, iş parçacığı açısından güvenli veri yapıları oluşturarak ve birden çok iş parçacığından paralel erişimi önlemek gerektiğinde profil oluşturucu kodu kilitleme kodlarını korumanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="da62a-200">Users must protect their code by creating thread-safe data structures and by locking the profiler code where necessary to prevent parallel access from multiple threads.</span></span> <span data-ttu-id="da62a-201">Bu nedenle, bazı durumlarda alışılmadık geri çağırmalar dizisi alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="da62a-201">Therefore, in certain cases you can receive an unusual sequence of callbacks.</span></span> <span data-ttu-id="da62a-202">Örneğin, yönetilen bir uygulama aynı kodu yürüten iki iş parçacığı ürettiğini varsayalım.</span><span class="sxs-lookup"><span data-stu-id="da62a-202">For example, assume that a managed application is spawning two threads that are executing identical code.</span></span> <span data-ttu-id="da62a-203">Bu durumda, almak olası bir [Icorprofilercallback::jıtcompilationstarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationstarted-method.md) olay bir iş parçacığından bazı işlevlere ait ve bir `FunctionEnter` geri alma önce diğer iş parçacığından [ Icorprofilercallback::jıtcompilationfinished](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationfinished-method.md) geri çağırma.</span><span class="sxs-lookup"><span data-stu-id="da62a-203">In this case, it is possible to receive a [ICorProfilerCallback::JITCompilationStarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationstarted-method.md) event for some function from one thread and a `FunctionEnter` callback from the other thread before receiving the [ICorProfilerCallback::JITCompilationFinished](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationfinished-method.md) callback.</span></span> <span data-ttu-id="da62a-204">Bu durumda, kullanıcı alacak bir `FunctionEnter` tam olarak yalnızca henüz derlenmiş zamanında (JIT) olmayabilen bir işlev için geri çağırma.</span><span class="sxs-lookup"><span data-stu-id="da62a-204">In this case, the user will receive a `FunctionEnter` callback for a function that may not have been fully just-in-time (JIT) compiled yet.</span></span>  
  
 [<span data-ttu-id="da62a-205">Başa dön</span><span class="sxs-lookup"><span data-stu-id="da62a-205">Back to top</span></span>](#top)  
  
<a name="security"></a>   
## <a name="security"></a><span data-ttu-id="da62a-206">Güvenlik</span><span class="sxs-lookup"><span data-stu-id="da62a-206">Security</span></span>  
 <span data-ttu-id="da62a-207">Bir profil oluşturucu DLL'si, ortak dil çalışma zamanı yürütme altyapısının bir parçası olarak çalışan yönetilmeyen bir DLL'dir.</span><span class="sxs-lookup"><span data-stu-id="da62a-207">A profiler DLL is an unmanaged DLL that runs as part of the common language runtime execution engine.</span></span> <span data-ttu-id="da62a-208">Yönetilen kod erişimi güvenliği sonuç olarak, kod profil oluşturucu DLL sınırlamalarına tabi değildir.</span><span class="sxs-lookup"><span data-stu-id="da62a-208">As a result, the code in the profiler DLL is not subject to the restrictions of managed code access security.</span></span> <span data-ttu-id="da62a-209">Profil Oluşturucu üzerindeki tek sınırlamalar DLL aittir uygulamasını çalıştıran kullanıcının işletim sistemi tarafından uygulanmaz.</span><span class="sxs-lookup"><span data-stu-id="da62a-209">The only limitations on the profiler DLL are those imposed by the operating system on the user who is running the profiled application.</span></span>  
  
 <span data-ttu-id="da62a-210">Profiler yazarları, güvenlikle ilgili sorunlardan kaçınmak için uygun önlemleri almalıdır.</span><span class="sxs-lookup"><span data-stu-id="da62a-210">Profiler authors should take appropriate precautions to avoid security-related issues.</span></span> <span data-ttu-id="da62a-211">Kötü niyetli bir kullanıcı değiştirememeleri Örneğin, yükleme sırasında bir erişim denetim listesine (ACL) bir profil oluşturucu DLL'si eklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="da62a-211">For example, during installation, a profiler DLL should be added to an access control list (ACL) so that a malicious user cannot modify it.</span></span>  
  
 [<span data-ttu-id="da62a-212">Başa dön</span><span class="sxs-lookup"><span data-stu-id="da62a-212">Back to top</span></span>](#top)  
  
<a name="combining_managed_unmanaged"></a>   
## <a name="combining-managed-and-unmanaged-code-in-a-code-profiler"></a><span data-ttu-id="da62a-213">Yönetilen ve yönetilmeyen kod Profiler kodu birleştirme</span><span class="sxs-lookup"><span data-stu-id="da62a-213">Combining Managed and Unmanaged Code in a Code Profiler</span></span>  
 <span data-ttu-id="da62a-214">Yanlış yazılmış bir profil oluşturucusu, beklenmeyen davranışla sonuçlanarak kendisine, döngüsel başvurulara neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-214">An incorrectly written profiler can cause circular references to itself, resulting in unpredictable behavior.</span></span>  
  
 <span data-ttu-id="da62a-215">CLR Profil oluşturma API'si bir gözden geçirme, COM birlikte çalışması veya dolaylı aramalar birbirini çağıran yönetilen ve yönetilmeyen bileşenler içeren bir profil oluşturucu yazabileceğiniz izlenimini oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-215">A review of the CLR profiling API may create the impression that you can write a profiler that contains managed and unmanaged components that call each other through COM interop or indirect calls.</span></span>  
  
 <span data-ttu-id="da62a-216">Bu tasarım açısından mümkün olsa da, profil oluşturma API'si yönetilen bileşenleri desteklemez.</span><span class="sxs-lookup"><span data-stu-id="da62a-216">Although this is possible from a design perspective, the profiling API does not support managed components.</span></span> <span data-ttu-id="da62a-217">Bir CLR Profil Oluşturucu bütünüyle yönetilmemelidir.</span><span class="sxs-lookup"><span data-stu-id="da62a-217">A CLR profiler must be completely unmanaged.</span></span> <span data-ttu-id="da62a-218">Yönetilen ve yönetilmeyen kodu bir CLR Profil Oluşturucusu'nda birleştirme girişimleri, erişim ihlallerine, program hatalarına veya kilitlenmelere neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-218">Attempts to combine managed and unmanaged code in a CLR profiler may cause access violations, program failure, or deadlocks.</span></span> <span data-ttu-id="da62a-219">Profil oluşturucunun yönetilen bileşenleri, sonradan döngüsel başvurulara da yönetilen bileşenleri tekrar çağıracak geri yönetilmeyen bileşenlerine olayları ateşlenir.</span><span class="sxs-lookup"><span data-stu-id="da62a-219">The managed components of the profiler will fire events back to their unmanaged components, which would subsequently call the managed components again, resulting in circular references.</span></span>  
  
 <span data-ttu-id="da62a-220">Burada bir CLR Profil Oluşturucu yönetilen kodu güvenle çağırabilirsiniz tek bir yöntemin Microsoft Ara dili (MSIL) gövdesi konumdur.</span><span class="sxs-lookup"><span data-stu-id="da62a-220">The only location where a CLR profiler can call managed code safely is in the Microsoft intermediate language (MSIL) body of a method.</span></span> <span data-ttu-id="da62a-221">MSIL gövdesinin değiştirilmesi için önerilen uygulama, JIT yeniden derleme yöntemlerini kullanmaktır [Icorprofilercallback4](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback4-interface.md) arabirimi.</span><span class="sxs-lookup"><span data-stu-id="da62a-221">The recommended practice for modifying the MSIL body is to use the  JIT recompilation methods in the [ICorProfilerCallback4](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback4-interface.md) interface.</span></span>  
  
 <span data-ttu-id="da62a-222">MSIL değiştirmek amacıyla eski araç yöntemleri kullanmak da mümkündür.</span><span class="sxs-lookup"><span data-stu-id="da62a-222">It is also possible to use the older instrumentation methods to modify MSIL.</span></span> <span data-ttu-id="da62a-223">Just-in-time (JIT) derleme işlev tamamlanmadan önce profiler MSIL gövdesinde bir yöntem ve sonra JIT derleme yönetilen çağrı ekleyebilirsiniz, (bkz [Icorprofilerınfo::getılfunctionbody](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-getilfunctionbody-method.md) yöntemi).</span><span class="sxs-lookup"><span data-stu-id="da62a-223">Before the just-in-time (JIT) compilation of a function is completed, the profiler can insert managed calls in the MSIL body of a method and then JIT-compile it (see the [ICorProfilerInfo::GetILFunctionBody](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-getilfunctionbody-method.md) method).</span></span> <span data-ttu-id="da62a-224">Bu teknik, yönetilen kod veya JIT hakkında istatistik ve performans verilerini toplamak için seçmeli araç başarıyla kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-224">This technique can successfully be used for selective instrumentation of managed code, or to gather statistics and performance data about the JIT.</span></span>  
  
 <span data-ttu-id="da62a-225">Alternatif olarak, kod profil oluşturucusu yönetilmeyen koda çağıran her yönetilen işlevin MSIL gövdesine yerel kancalar ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="da62a-225">Alternatively, a code profiler can insert native hooks in the MSIL body of every managed function that calls into unmanaged code.</span></span> <span data-ttu-id="da62a-226">Bu teknik, Araçlar ve kapsam için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-226">This technique can be used for instrumentation and coverage.</span></span> <span data-ttu-id="da62a-227">Örneğin, bir kod profil oluşturucu bloğun yürütülmesini emin olmak için her MSIL bloğundan sonra araç kancaları ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="da62a-227">For example, a code profiler could insert instrumentation hooks after every MSIL block to ensure that the block has been executed.</span></span> <span data-ttu-id="da62a-228">Bir yöntemin MSIL gövdesinin değiştirilmesi çok hassas bir işlemdir ve dikkate alınması gereken birçok faktör vardır.</span><span class="sxs-lookup"><span data-stu-id="da62a-228">The modification of the MSIL body of a method is a very delicate operation, and there are many factors that should be taken into consideration.</span></span>  
  
 [<span data-ttu-id="da62a-229">Başa dön</span><span class="sxs-lookup"><span data-stu-id="da62a-229">Back to top</span></span>](#top)  
  
<a name="unmanaged"></a>   
## <a name="profiling-unmanaged-code"></a><span data-ttu-id="da62a-230">Yönetilmeyen kod profili oluşturma</span><span class="sxs-lookup"><span data-stu-id="da62a-230">Profiling Unmanaged Code</span></span>  
 <span data-ttu-id="da62a-231">Profil oluşturma API'si ortak dil çalışma zamanı (CLR), yönetilmeyen kodun profilini çıkarmaya çok az destek sağlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-231">The common language runtime (CLR) profiling API provides minimal support for profiling unmanaged code.</span></span> <span data-ttu-id="da62a-232">Aşağıdaki işlev sağlanır:</span><span class="sxs-lookup"><span data-stu-id="da62a-232">The following functionality is provided:</span></span>  
  
- <span data-ttu-id="da62a-233">Yığın zincirlerini numaralandırma.</span><span class="sxs-lookup"><span data-stu-id="da62a-233">Enumeration of stack chains.</span></span> <span data-ttu-id="da62a-234">Bu özellik, yönetilen kod ve yönetimsiz kod arasındaki sınırları belirlemek bir kod profil oluşturucusu sağlar.</span><span class="sxs-lookup"><span data-stu-id="da62a-234">This feature enables a code profiler to determine the boundary between managed code and unmanaged code.</span></span>  
  
- <span data-ttu-id="da62a-235">Belirleme olup bir yığın zincirinin yönetilen koda veya yerel koda karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="da62a-235">Determination whether a stack chain corresponds to managed code or native code.</span></span>  
  
 <span data-ttu-id="da62a-236">.NET Framework sürüm 1.0 ve 1.1, bu yöntemler API hata ayıklama CLR'nin işlemdeki alt kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-236">In the .NET Framework versions 1.0 and 1.1, these methods are available through the in-process subset of the CLR debugging API.</span></span> <span data-ttu-id="da62a-237">Bunlar CorDebug.idl dosyasında tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="da62a-237">They are defined in the CorDebug.idl file.</span></span>  
  
 <span data-ttu-id="da62a-238">.NET Framework 2.0 ve sonraki sürümlerinde, kullanabileceğiniz [Icorprofilerınfo2::dostacksnapshot](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-dostacksnapshot-method.md) bu işlevselliği için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="da62a-238">In the .NET Framework 2.0 and later, you can use the [ICorProfilerInfo2::DoStackSnapshot](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-dostacksnapshot-method.md) method for this functionality.</span></span>  
  
 [<span data-ttu-id="da62a-239">Başa dön</span><span class="sxs-lookup"><span data-stu-id="da62a-239">Back to top</span></span>](#top)  
  
<a name="com"></a>   
## <a name="using-com"></a><span data-ttu-id="da62a-240">COM kullanma</span><span class="sxs-lookup"><span data-stu-id="da62a-240">Using COM</span></span>  
 <span data-ttu-id="da62a-241">Profil oluşturan arabirimler COM arabirimleri olarak tanımlansa da, ortak dil çalışma zamanı (CLR) aslında bu arabirimleri kullanması için com'i başlatmaz.</span><span class="sxs-lookup"><span data-stu-id="da62a-241">Although the profiling interfaces are defined as COM interfaces, the common language runtime (CLR) does not actually initialize COM to use these interfaces.</span></span> <span data-ttu-id="da62a-242">İş parçacığı modeli kullanarak ayarlamak zorunda kalmamak için nedeni [CoInitialize](/windows/desktop/api/objbase/nf-objbase-coinitialize) önce yönetilen uygulamanın kendi istenen iş parçacığı oluşturma modelini belirlemesine izin işlev.</span><span class="sxs-lookup"><span data-stu-id="da62a-242">The reason is to avoid having to set the threading model by using the [CoInitialize](/windows/desktop/api/objbase/nf-objbase-coinitialize) function before the managed application has had a chance to specify its desired threading model.</span></span> <span data-ttu-id="da62a-243">Benzer şekilde, profil oluşturucunun kendisi çağırmamalıdır `CoInitialize`, profili oluşturulan uygulamayla uyumsuz bir iş parçacığı modeli seçebileceği ve uygulamanın başarısız olmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-243">Similarly, the profiler itself should not call `CoInitialize`, because it may pick a threading model that is incompatible with the application being profiled and may cause the application to fail.</span></span>  
  
 [<span data-ttu-id="da62a-244">Başa dön</span><span class="sxs-lookup"><span data-stu-id="da62a-244">Back to top</span></span>](#top)  
  
<a name="call_stacks"></a>   
## <a name="call-stacks"></a><span data-ttu-id="da62a-245">Çağrı yığınları</span><span class="sxs-lookup"><span data-stu-id="da62a-245">Call Stacks</span></span>  
 <span data-ttu-id="da62a-246">Profil oluşturma API çağrı yığınlarının alınması için iki yol sunar: çağrı yığınlarının seyrek toplama toplanmasını sağlayan yığın anlık görüntüsü yöntemi ve her anında çağrı yığınını izleyen gölge yığın yöntemi.</span><span class="sxs-lookup"><span data-stu-id="da62a-246">The profiling API provides two ways to obtain call stacks: a stack snapshot method, which enables sparse gathering of call stacks, and a shadow stack method, which tracks the call stack at every instant.</span></span>  
  
### <a name="stack-snapshot"></a><span data-ttu-id="da62a-247">Yığın anlık görüntüsü</span><span class="sxs-lookup"><span data-stu-id="da62a-247">Stack Snapshot</span></span>  
 <span data-ttu-id="da62a-248">Yığın anlık görüntüsü bir iş parçacığı yığınının bir izleme anlık saattir.</span><span class="sxs-lookup"><span data-stu-id="da62a-248">A stack snapshot is a trace of the stack of a thread at an instant in time.</span></span> <span data-ttu-id="da62a-249">Profil oluşturma API yığın üzerinde yönetilen işlevlerin izlenmesini destekler ancak Yönetilmeyen işlevlerin izlenmesini profil oluşturucunun kendi yığın değişkenine bırakır.</span><span class="sxs-lookup"><span data-stu-id="da62a-249">The profiling API supports the tracing of managed functions on the stack, but it leaves the tracing of unmanaged functions to the profiler's own stack walker.</span></span>  
  
 <span data-ttu-id="da62a-250">Profil oluşturucuyu yönetilen yığınları ilerletmek hakkında daha fazla bilgi için bkz. [Icorprofilerınfo2::dostacksnapshot](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-dostacksnapshot-method.md) yöntemi bu belge kümesindeki ve [.NET Framework 2.0 Profiler Programlayacağınız yığını: Temeller ve ötesi](https://go.microsoft.com/fwlink/?LinkId=73638).</span><span class="sxs-lookup"><span data-stu-id="da62a-250">For more information about how to program the profiler to walk managed stacks, see the [ICorProfilerInfo2::DoStackSnapshot](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-dostacksnapshot-method.md) method in this documentation set, and [Profiler Stack Walking in the .NET Framework 2.0: Basics and Beyond](https://go.microsoft.com/fwlink/?LinkId=73638).</span></span>
  
### <a name="shadow-stack"></a><span data-ttu-id="da62a-251">Gölge yığını</span><span class="sxs-lookup"><span data-stu-id="da62a-251">Shadow Stack</span></span>  
 <span data-ttu-id="da62a-252">Anlık görüntü yönteminin çok sık kullanılması, hızlı bir performans sorunu oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-252">Using the snapshot method too frequently can quickly create a performance issue.</span></span> <span data-ttu-id="da62a-253">Yığın izlemelerini sık sık almak istiyorsanız, profil oluşturucu, bunun yerine bir gölge yığını kullanarak Sysprep.inf'in [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md), [FunctionLeave2](../../../../docs/framework/unmanaged-api/profiling/functionleave2-function.md), [FunctionTailcall2](../../../../docs/framework/unmanaged-api/profiling/functiontailcall2-function.md), ve [Icorprofilercallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) özel durum geri aramalarını.</span><span class="sxs-lookup"><span data-stu-id="da62a-253">If you want to take stack traces frequently, your profiler should instead build a shadow stack by using the [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md), [FunctionLeave2](../../../../docs/framework/unmanaged-api/profiling/functionleave2-function.md), [FunctionTailcall2](../../../../docs/framework/unmanaged-api/profiling/functiontailcall2-function.md), and [ICorProfilerCallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) exception callbacks.</span></span> <span data-ttu-id="da62a-254">Gölge yığını her zaman günceldir ve bir yığın anlık görüntüsü gerektiğinde hızla depoya kopyalanabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-254">The shadow stack is always current and can quickly be copied to storage whenever a stack snapshot is needed.</span></span>  
  
 <span data-ttu-id="da62a-255">Gölge yığını, işlev bağımsız değişkenleri ve dönüş değerleri genel örnek oluşturma hakkında bilgi edinebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="da62a-255">A shadow stack may obtain function arguments, return values, and information about generic instantiations.</span></span> <span data-ttu-id="da62a-256">Bu bilgiler, yalnızca gölge yığın içinde kullanılabilir ve denetim bir işleve aktarıldığında elde edilebilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-256">This information is available only through the shadow stack and may be obtained when control is handed to a function.</span></span> <span data-ttu-id="da62a-257">Ancak, bu bilgiler daha sonra işlevin çalışması sırasında kullanılabilir olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="da62a-257">However, this information may not be available later during the run of the function.</span></span>  
  
 [<span data-ttu-id="da62a-258">Başa dön</span><span class="sxs-lookup"><span data-stu-id="da62a-258">Back to top</span></span>](#top)  
  
<a name="callbacks"></a>   
## <a name="callbacks-and-stack-depth"></a><span data-ttu-id="da62a-259">Geri çağrılar ve yığın derinliği</span><span class="sxs-lookup"><span data-stu-id="da62a-259">Callbacks and Stack Depth</span></span>  
 <span data-ttu-id="da62a-260">Profiler geri aramaları fazlasıyla yığın kısıtlaması olan durumlarda verilebilir ve oluşturucu geri aramasında bir yığın taşması bir işlemden hemen çıkılmasına yol açar.</span><span class="sxs-lookup"><span data-stu-id="da62a-260">Profiler callbacks may be issued in very stack-constrained circumstances, and a stack overflow in a profiler callback will lead to an immediate process exit.</span></span> <span data-ttu-id="da62a-261">Bir profil oluşturucu geri çağırmalara yanıt olarak olabildiğince küçük yığın kullandığınızdan emin olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="da62a-261">A profiler should make sure to use as little stack as possible in response to callbacks.</span></span> <span data-ttu-id="da62a-262">Profil Oluşturucu yığın taşmasına karşı güçlü olan işlemlere karşı kullanılmak üzere tasarlanmışsa profil oluşturucunun kendisi de yığın taşmasını tetiklemekten kaçınmalıdır.</span><span class="sxs-lookup"><span data-stu-id="da62a-262">If the profiler is intended for use against processes that are robust against stack overflow, the profiler itself should also avoid triggering stack overflow.</span></span>  
  
 [<span data-ttu-id="da62a-263">Başa dön</span><span class="sxs-lookup"><span data-stu-id="da62a-263">Back to top</span></span>](#top)  
  
<a name="related_topics"></a>   
## <a name="related-topics"></a><span data-ttu-id="da62a-264">İlgili Konular</span><span class="sxs-lookup"><span data-stu-id="da62a-264">Related Topics</span></span>  
  
|<span data-ttu-id="da62a-265">Başlık</span><span class="sxs-lookup"><span data-stu-id="da62a-265">Title</span></span>|<span data-ttu-id="da62a-266">Açıklama</span><span class="sxs-lookup"><span data-stu-id="da62a-266">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="da62a-267">Profil Oluşturma Ortamını Ayarlama</span><span class="sxs-lookup"><span data-stu-id="da62a-267">Setting Up a Profiling Environment</span></span>](../../../../docs/framework/unmanaged-api/profiling/setting-up-a-profiling-environment.md)|<span data-ttu-id="da62a-268">Profil oluşturucuyu başlatmayı, olay bildirimlerini ayarlamayı ve bir Windows hizmeti profili açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="da62a-268">Explains how to initialize a profiler, set event notifications, and profile a Windows Service.</span></span>|  
|[<span data-ttu-id="da62a-269">Profil Oluşturma Arabirimleri</span><span class="sxs-lookup"><span data-stu-id="da62a-269">Profiling Interfaces</span></span>](../../../../docs/framework/unmanaged-api/profiling/profiling-interfaces.md)|<span data-ttu-id="da62a-270">Profil oluşturma API'SİNİN kullandığı yönetilmeyen arabirimleri açıklar.</span><span class="sxs-lookup"><span data-stu-id="da62a-270">Describes the unmanaged interfaces that the profiling API uses.</span></span>|  
|[<span data-ttu-id="da62a-271">Profil Oluşturma Genel Statik İşlevleri</span><span class="sxs-lookup"><span data-stu-id="da62a-271">Profiling Global Static Functions</span></span>](../../../../docs/framework/unmanaged-api/profiling/profiling-global-static-functions.md)|<span data-ttu-id="da62a-272">Profil oluşturma API'SİNİN kullandığı yönetilmeyen genel statik işlevleri açıklar.</span><span class="sxs-lookup"><span data-stu-id="da62a-272">Describes the unmanaged global static functions that the profiling API uses.</span></span>|  
|[<span data-ttu-id="da62a-273">Profil Oluşturma Sabit Listeleri</span><span class="sxs-lookup"><span data-stu-id="da62a-273">Profiling Enumerations</span></span>](../../../../docs/framework/unmanaged-api/profiling/profiling-enumerations.md)|<span data-ttu-id="da62a-274">Profil oluşturma API'SİNİN kullandığı yönetilmeyen numaralandırmaları açıklar.</span><span class="sxs-lookup"><span data-stu-id="da62a-274">Describes the unmanaged enumerations that the profiling API uses.</span></span>|  
|[<span data-ttu-id="da62a-275">Profil Oluşturma Yapıları</span><span class="sxs-lookup"><span data-stu-id="da62a-275">Profiling Structures</span></span>](../../../../docs/framework/unmanaged-api/profiling/profiling-structures.md)|<span data-ttu-id="da62a-276">Profil oluşturma API'SİNİN kullandığı yönetilmeyen yapıları açıklar.</span><span class="sxs-lookup"><span data-stu-id="da62a-276">Describes the unmanaged structures that the profiling API uses.</span></span>|
