---
title: Uygulama Ayarları Mimarisi
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- application settings [Windows Forms], architecture
ms.assetid: c8eb2ad0-fac6-4ea2-9140-675a4a44d562
ms.openlocfilehash: d0ca890e384fc1f282cfbb62562090ee858bd33f
ms.sourcegitcommit: c7a7e1468bf0fa7f7065de951d60dfc8d5ba89f5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/14/2019
ms.locfileid: "65592773"
---
# <a name="application-settings-architecture"></a><span data-ttu-id="1ef17-102">Uygulama Ayarları Mimarisi</span><span class="sxs-lookup"><span data-stu-id="1ef17-102">Application Settings Architecture</span></span>
<span data-ttu-id="1ef17-103">Bu konuda, uygulama ayarları mimarisi nasıl çalıştığını açıklanır ve mimarinin gruplandırılmış ayarları ve ayarları anahtarları gibi gelişmiş özellikleri keşfediyor.</span><span class="sxs-lookup"><span data-stu-id="1ef17-103">This topic describes how the Application Settings architecture works, and explores advanced features of the architecture, such as grouped settings and settings keys.</span></span>  
  
 <span data-ttu-id="1ef17-104">Uygulama ayarları mimarisi ya da uygulama veya kullanıcı kapsamı ve ayarları uygulama oturumları arasında kalıcı tanımlama türü kesin belirlenmiş ayarlarla destekler.</span><span class="sxs-lookup"><span data-stu-id="1ef17-104">The application settings architecture supports defining strongly typed settings with either application or user scope, and persisting the settings between application sessions.</span></span> <span data-ttu-id="1ef17-105">Mimari ayarları için kaydetme ve bunları yerel dosya sisteminden yükleme için varsayılan Kalıcılık altyapısı sağlar.</span><span class="sxs-lookup"><span data-stu-id="1ef17-105">The architecture provides a default persistence engine for saving settings to and loading them from the local file system.</span></span> <span data-ttu-id="1ef17-106">Mimari ayrıca özel bir Kalıcılık altyapısı sağladığı için arabirimleri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="1ef17-106">The architecture also defines interfaces for supplying a custom persistence engine.</span></span>  
  
 <span data-ttu-id="1ef17-107">Bir uygulamada barındırıldığında kendi ayarlarını kalıcı hale getirmek özel bileşenler sağlayan arabirimler sağlanır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-107">Interfaces are provided that enable custom components to persist their own settings when they are hosted in an application.</span></span> <span data-ttu-id="1ef17-108">Ayarları anahtarları kullanarak bileşenleri bileşenin birden çok örnek için ayarları ayrı kalmasını sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1ef17-108">By using settings keys, components can keep settings for multiple instances of the component separate.</span></span>  
  
## <a name="defining-settings"></a><span data-ttu-id="1ef17-109">Ayarları tanımlama</span><span class="sxs-lookup"><span data-stu-id="1ef17-109">Defining Settings</span></span>  
 <span data-ttu-id="1ef17-110">Uygulama ayarları mimarisi içinde her ikisi de kullanılan [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] ve Windows Forms ve her iki ortamlar genelinde paylaşılan, temel sınıfların bir sayı içerir.</span><span class="sxs-lookup"><span data-stu-id="1ef17-110">The application settings architecture is used within both [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] and Windows Forms, and it contains a number of base classes that are shared across both environments.</span></span> <span data-ttu-id="1ef17-111">En önemlisi <xref:System.Configuration.SettingsBase>, koleksiyonu aracılığıyla ayarlarına erişim sağlar ve yükleme ve kaydetme ayarları için alt düzey yöntemler sağlar.</span><span class="sxs-lookup"><span data-stu-id="1ef17-111">The most important is <xref:System.Configuration.SettingsBase>, which provides access to settings through a collection, and provides low-level methods for loading and saving settings.</span></span> <span data-ttu-id="1ef17-112">Her ortamın kendi sınıfından türetilen uygulayan <xref:System.Configuration.SettingsBase> bu ortam için ek ayarlar işlevselliği sağlamak için.</span><span class="sxs-lookup"><span data-stu-id="1ef17-112">Each environment implements its own class derived from <xref:System.Configuration.SettingsBase> to provide additional settings functionality for that environment.</span></span> <span data-ttu-id="1ef17-113">Windows Forms tabanlı bir uygulama, tüm uygulama ayarları türetilen bir sınıfta tanımlanmalıdır <xref:System.Configuration.ApplicationSettingsBase> temel sınıf için aşağıdaki işlevsellik ekleyen sınıfı:</span><span class="sxs-lookup"><span data-stu-id="1ef17-113">In a Windows Forms-based application, all application settings must be defined on a class derived from the <xref:System.Configuration.ApplicationSettingsBase> class, which adds the following functionality to the base class:</span></span>  
  
- <span data-ttu-id="1ef17-114">Üst düzey yükleme ve kaydetme işlemleri</span><span class="sxs-lookup"><span data-stu-id="1ef17-114">Higher-level loading and saving operations</span></span>  
  
- <span data-ttu-id="1ef17-115">Kullanıcı kapsamlı ayarları için destek</span><span class="sxs-lookup"><span data-stu-id="1ef17-115">Support for user-scoped settings</span></span>  
  
- <span data-ttu-id="1ef17-116">Kullanıcı ayarları için önceden tanımlanmış varsayılan döndürülüyor</span><span class="sxs-lookup"><span data-stu-id="1ef17-116">Reverting a user's settings to the predefined defaults</span></span>  
  
- <span data-ttu-id="1ef17-117">Uygulamanın önceki sürümden yükseltme ayarları</span><span class="sxs-lookup"><span data-stu-id="1ef17-117">Upgrading settings from a previous application version</span></span>  
  
- <span data-ttu-id="1ef17-118">Ayarlar doğrulanıyor, bunlar değiştirilmeden önce ya da önce kaydedilmeden</span><span class="sxs-lookup"><span data-stu-id="1ef17-118">Validating settings, either before they are changed or before they are saved</span></span>  
  
 <span data-ttu-id="1ef17-119">Bir dizi içinde tanımlanan öznitelikleri kullanarak ayarları açıklanabilir <xref:System.Configuration> ad alanı; bunlar [uygulama ayarları öznitelikleri](application-settings-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="1ef17-119">The settings can be described using a number of attributes defined within the <xref:System.Configuration> namespace; these are described in [Application Settings Attributes](application-settings-attributes.md).</span></span> <span data-ttu-id="1ef17-120">Bir ayar tanımlarken ile uygulamanız gerekir <xref:System.Configuration.ApplicationScopedSettingAttribute> veya <xref:System.Configuration.UserScopedSettingAttribute>, ayarı uygulamanın tamamı veya yalnızca geçerli kullanıcı için geçerli olup olmadığını açıklar.</span><span class="sxs-lookup"><span data-stu-id="1ef17-120">When you define a setting, you must apply it with either <xref:System.Configuration.ApplicationScopedSettingAttribute> or <xref:System.Configuration.UserScopedSettingAttribute>, which describes whether the setting applies to the entire application or just to the current user.</span></span>  
  
 <span data-ttu-id="1ef17-121">Aşağıdaki kod örneği özel ayarlar ile tek bir ayarı tanımlar `BackgroundColor`.</span><span class="sxs-lookup"><span data-stu-id="1ef17-121">The following code example defines a custom settings class with a single setting, `BackgroundColor`.</span></span>  
  
 [!code-csharp[ApplicationSettings.Create#1](~/samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Create/CS/MyAppSettings.cs#1)]
 [!code-vb[ApplicationSettings.Create#1](~/samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Create/VB/MyAppSettings.vb#1)]  
  
## <a name="settings-persistence"></a><span data-ttu-id="1ef17-122">Kalıcılık ayarları</span><span class="sxs-lookup"><span data-stu-id="1ef17-122">Settings Persistence</span></span>  
 <span data-ttu-id="1ef17-123"><xref:System.Configuration.ApplicationSettingsBase> Sınıfı değil kendisine kalıcı veya yük ayarları; bu iş öğesinden türetilen bir sınıf ayar sağlayıcısı düşer <xref:System.Configuration.SettingsProvider>.</span><span class="sxs-lookup"><span data-stu-id="1ef17-123">The <xref:System.Configuration.ApplicationSettingsBase> class does not itself persist or load settings; this job falls to the settings provider, a class that derives from <xref:System.Configuration.SettingsProvider>.</span></span> <span data-ttu-id="1ef17-124">Türetilen bir sınıfı varsa <xref:System.Configuration.ApplicationSettingsBase> aracılığıyla bir ayar sağlayıcısı belirtmiyor <xref:System.Configuration.SettingsProviderAttribute>, ardından varsayılan sağlayıcı <xref:System.Configuration.LocalFileSettingsProvider>, kullanılır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-124">If a derived class of <xref:System.Configuration.ApplicationSettingsBase> does not specify a settings provider through the <xref:System.Configuration.SettingsProviderAttribute>, then the default provider, <xref:System.Configuration.LocalFileSettingsProvider>, is used.</span></span>  
  
 <span data-ttu-id="1ef17-125">.NET Framework ile yayımlanan yapılandırma sistemi destekler yerel bilgisayarın machine.config dosyasının veya içinde statik uygulama yapılandırma verileri sağlayan bir `app.`ile dağıttığınız exe.config dosyası Uygulamanızı.</span><span class="sxs-lookup"><span data-stu-id="1ef17-125">The configuration system that was originally released with the .NET Framework supports providing static application configuration data through either the local computer's machine.config file or within an `app.`exe.config file that you deploy with your application.</span></span> <span data-ttu-id="1ef17-126"><xref:System.Configuration.LocalFileSettingsProvider> Sınıfı bu yerel destek aşağıdaki yollarla genişletir:</span><span class="sxs-lookup"><span data-stu-id="1ef17-126">The <xref:System.Configuration.LocalFileSettingsProvider> class expands this native support in the following ways:</span></span>  
  
- <span data-ttu-id="1ef17-127">Uygulama kapsamlı ayarlar ya da bir machine.config dosyasına depolanabilir veya `app.`exe.config dosyaları.</span><span class="sxs-lookup"><span data-stu-id="1ef17-127">Application-scoped settings can be stored in either the machine.config or `app.`exe.config files.</span></span> <span data-ttu-id="1ef17-128">Machine.config her zaman salt okunur, çalışırken `app`. exe.config uygulamalarının çoğu için güvenlik konuları salt okunur tarafından kısıtlanan.</span><span class="sxs-lookup"><span data-stu-id="1ef17-128">Machine.config is always read-only, while `app`.exe.config is restricted by security considerations to read-only for most applications.</span></span>  
  
- <span data-ttu-id="1ef17-129">Kullanıcı kapsamlı ayarları depolanabilir `app`. exe.config dosyaları, bu durumda bunlar statik varsayılan olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="1ef17-129">User-scoped settings can be stored in `app`.exe.config files, in which case they are treated as static defaults.</span></span>  
  
- <span data-ttu-id="1ef17-130">Varsayılan olmayan kullanıcı kapsamlı ayarları yeni bir dosyada depolanan *kullanıcı*.config, burada *kullanıcı* uygulama şu anda yürüten kişinin kullanıcı adıdır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-130">Non-default user-scoped settings are stored in a new file, *user*.config, where *user* is the user name of the person currently executing the application.</span></span> <span data-ttu-id="1ef17-131">Bir kullanıcı kapsamlı ayarı için varsayılan belirtebilirsiniz <xref:System.Configuration.DefaultSettingValueAttribute>.</span><span class="sxs-lookup"><span data-stu-id="1ef17-131">You can specify a default for a user-scoped setting with <xref:System.Configuration.DefaultSettingValueAttribute>.</span></span> <span data-ttu-id="1ef17-132">Kullanıcı kapsamlı ayarları uygulama yürütme sırasında sıklıkla değiştiğinden `user`.config olduğundan her zaman okuma/yazma.</span><span class="sxs-lookup"><span data-stu-id="1ef17-132">Because user-scoped settings often change during application execution, `user`.config is always read/write.</span></span>  
  
 <span data-ttu-id="1ef17-133">Tüm üç yapılandırma dosyaları XML biçiminde ayarları depolar.</span><span class="sxs-lookup"><span data-stu-id="1ef17-133">All three configuration files store settings in XML format.</span></span> <span data-ttu-id="1ef17-134">Uygulama kapsamlı ayarlar için üst düzey XML öğesi `<appSettings>`, ancak `<userSettings>` kullanıcı kapsamlı ayarları için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-134">The top-level XML element for application-scoped settings is `<appSettings>`, while `<userSettings>` is used for user-scoped settings.</span></span> <span data-ttu-id="1ef17-135">Bir `app`. exe.config dosyasını kullanıcı kapsamlı ayarları şuna benzer için hem uygulama kapsamlı ayarlar ve varsayılanlar içerir:</span><span class="sxs-lookup"><span data-stu-id="1ef17-135">An `app`.exe.config file which contains both application-scoped settings and defaults for user-scoped settings would look like this:</span></span>  
  
```xml  
<?xml version="1.0" encoding="utf-8" ?>  
<configuration>  
    <configSections>  
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >  
            <section name="WindowsApplication1.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />  
        </sectionGroup>  
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >  
            <section name="WindowsApplication1.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" />  
        </sectionGroup>  
    </configSections>  
    <applicationSettings>  
        <WindowsApplication1.Properties.Settings>  
            <setting name="Cursor" serializeAs="String">  
                <value>Default</value>  
            </setting>  
            <setting name="DoubleBuffering" serializeAs="String">  
                <value>False</value>  
            </setting>  
        </WindowsApplication1.Properties.Settings>  
    </applicationSettings>  
    <userSettings>  
        <WindowsApplication1.Properties.Settings>  
            <setting name="FormTitle" serializeAs="String">  
                <value>Form1</value>  
            </setting>  
            <setting name="FormSize" serializeAs="String">  
                <value>595, 536</value>  
            </setting>  
        </WindowsApplication1.Properties.Settings>  
    </userSettings>  
</configuration>  
```  
  
 <span data-ttu-id="1ef17-136">Bir yapılandırma dosyası uygulama ayarları bölümüne içindeki öğelerin tanımı için bkz: [uygulama ayarları şeması](../../configure-apps/file-schema/application-settings-schema.md).</span><span class="sxs-lookup"><span data-stu-id="1ef17-136">For a definition of the elements within the application settings section of a configuration file, see [Application Settings Schema](../../configure-apps/file-schema/application-settings-schema.md).</span></span>  
  
### <a name="settings-bindings"></a><span data-ttu-id="1ef17-137">Ayarları bağlamaları</span><span class="sxs-lookup"><span data-stu-id="1ef17-137">Settings Bindings</span></span>  
 <span data-ttu-id="1ef17-138">Uygulama ayarları, ayarları güncelleştirme ayarları nesnesi ve bileşenler arasında iki yönlü iletişim sağlamak için Windows Forms veri bağlama mimarisi kullanır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-138">Application settings uses the Windows Forms data binding architecture to provide two-way communication of settings updates between the settings object and components.</span></span> <span data-ttu-id="1ef17-139">Uygulama ayarları oluşturma ve bunları bileşen özellikleri atamak için Visual Studio kullanıyorsanız, bu bağlamaları otomatik olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="1ef17-139">If you use Visual Studio to create application settings and assign them to component properties, these bindings are generated automatically.</span></span>  
  
 <span data-ttu-id="1ef17-140">Destekleyen bir bileşeni için yalnızca bir uygulama ayarı bağlayabilirsiniz <xref:System.Windows.Forms.IBindableComponent> arabirimi.</span><span class="sxs-lookup"><span data-stu-id="1ef17-140">You can only bind an application setting to a component that supports the <xref:System.Windows.Forms.IBindableComponent> interface.</span></span> <span data-ttu-id="1ef17-141">Ayrıca, bileşen gerekir değişiklik olayı için belirli bir özelliğe uygulamak veya bildirim aracılığıyla özelliğin değiştirildiğini uygulama ayarları <xref:System.ComponentModel.INotifyPropertyChanged> arabirimi.</span><span class="sxs-lookup"><span data-stu-id="1ef17-141">Also, the component must implement a change event for a specific bound property, or notify application settings that the property has changed through the <xref:System.ComponentModel.INotifyPropertyChanged> interface.</span></span> <span data-ttu-id="1ef17-142">Bileşen uygulamazsa <xref:System.Windows.Forms.IBindableComponent> ve Visual Studio ile bağlıyorsanız, ilişkili özellikleri ilk kez ayarlanır, ancak değil güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="1ef17-142">If the component does not implement <xref:System.Windows.Forms.IBindableComponent> and you are binding through Visual Studio, the bound properties will be set the first time, but will not update.</span></span> <span data-ttu-id="1ef17-143">Bileşen uyguluyorsa <xref:System.Windows.Forms.IBindableComponent> ancak desteği özelliğini bildirimleri değişiyor mu, özelliği değiştirildiğinde bağlama ayarları dosyasında güncelleştirmez.</span><span class="sxs-lookup"><span data-stu-id="1ef17-143">If the component implements <xref:System.Windows.Forms.IBindableComponent> but does not support property change notifications, the binding will not update in the settings file when the property is changed.</span></span>  
  
 <span data-ttu-id="1ef17-144">Bazı Windows Forms bileşenleri gibi <xref:System.Windows.Forms.ToolStripItem>, ayarları bağlamaları desteklemiyor.</span><span class="sxs-lookup"><span data-stu-id="1ef17-144">Some Windows Forms components, such as <xref:System.Windows.Forms.ToolStripItem>, do not support settings bindings.</span></span>  
  
### <a name="settings-serialization"></a><span data-ttu-id="1ef17-145">Ayarları seri hale getirme</span><span class="sxs-lookup"><span data-stu-id="1ef17-145">Settings Serialization</span></span>  
 <span data-ttu-id="1ef17-146">Zaman <xref:System.Configuration.LocalFileSettingsProvider> ayarları diske kaydetmelisiniz aşağıdaki eylemleri gerçekleştirir:</span><span class="sxs-lookup"><span data-stu-id="1ef17-146">When <xref:System.Configuration.LocalFileSettingsProvider> must save settings to disk, it performs the following actions:</span></span>  
  
1. <span data-ttu-id="1ef17-147">Tanımlanan tüm özellikler incelemek için yansıtma kullanır, <xref:System.Configuration.ApplicationSettingsBase> türetilmiş sınıf ile uygulanan bu bulma, <xref:System.Configuration.ApplicationScopedSettingAttribute> veya <xref:System.Configuration.UserScopedSettingAttribute>.</span><span class="sxs-lookup"><span data-stu-id="1ef17-147">Uses reflection to examine all of the properties defined on your <xref:System.Configuration.ApplicationSettingsBase> derived class, finding those that are applied with either <xref:System.Configuration.ApplicationScopedSettingAttribute> or <xref:System.Configuration.UserScopedSettingAttribute>.</span></span>  
  
2. <span data-ttu-id="1ef17-148">Disk özelliğine serileştirir.</span><span class="sxs-lookup"><span data-stu-id="1ef17-148">Serializes the property to disk.</span></span> <span data-ttu-id="1ef17-149">Çağırmak ilk deneme <xref:System.ComponentModel.TypeConverter.ConvertToString%2A> veya <xref:System.ComponentModel.TypeConverter.ConvertFromString%2A> üzerinde türü ilişkili <xref:System.ComponentModel.TypeConverter>.</span><span class="sxs-lookup"><span data-stu-id="1ef17-149">It first attempts to call the <xref:System.ComponentModel.TypeConverter.ConvertToString%2A> or <xref:System.ComponentModel.TypeConverter.ConvertFromString%2A> on the type's associated <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="1ef17-150">Bu başarısız olursa, bunun yerine XML serileştirme kullanır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-150">If this does not succeed, it uses XML serialization instead.</span></span>  
  
3. <span data-ttu-id="1ef17-151">Hangi dosyaların ayarlarınız belirler ayarın özniteliğine dayanarak.</span><span class="sxs-lookup"><span data-stu-id="1ef17-151">Determines which settings go in which files, based on the setting's attribute.</span></span>  
  
 <span data-ttu-id="1ef17-152">Kendi ayarları sınıfı uygularsanız, kullanabileceğiniz <xref:System.Configuration.SettingsSerializeAsAttribute> ikili veya özel serileştirme kullanmak için bir ayar işaretlemek için <xref:System.Configuration.SettingsSerializeAs> sabit listesi.</span><span class="sxs-lookup"><span data-stu-id="1ef17-152">If you implement your own settings class, you can use the <xref:System.Configuration.SettingsSerializeAsAttribute> to mark a setting for either binary or custom serialization using the <xref:System.Configuration.SettingsSerializeAs> enumeration.</span></span> <span data-ttu-id="1ef17-153">Kodda kendi ayarları sınıfı oluşturma ile ilgili daha fazla bilgi için bkz: [nasıl yapılır: Uygulama ayarları oluşturma](how-to-create-application-settings.md).</span><span class="sxs-lookup"><span data-stu-id="1ef17-153">For more information on creating your own settings class in code, see [How to: Create Application Settings](how-to-create-application-settings.md).</span></span>  
  
### <a name="settings-file-locations"></a><span data-ttu-id="1ef17-154">Ayarlar dosyası konumları</span><span class="sxs-lookup"><span data-stu-id="1ef17-154">Settings File Locations</span></span>  
 <span data-ttu-id="1ef17-155">Konumunu `app`. exe.config ve *kullanıcı*.config dosyalar farklı bağlı olarak uygulama nasıl yüklenir.</span><span class="sxs-lookup"><span data-stu-id="1ef17-155">The location of the `app`.exe.config and *user*.config files will differ based on how the application is installed.</span></span> <span data-ttu-id="1ef17-156">Yerel bilgisayara kopyalanır ve Windows Forms tabanlı bir uygulama için `app`. exe.config olarak, uygulamanın ana yürütülebilir dosyasını temel dizini ile aynı dizinde bulunacağı ve *kullanıcı*.config bulunacağı tarafından belirtilen konuma <xref:System.Windows.Forms.Application.LocalUserAppDataPath%2A?displayProperty=nameWithType> özelliği.</span><span class="sxs-lookup"><span data-stu-id="1ef17-156">For a Windows Forms-based application copied onto the local computer, `app`.exe.config will reside in the same directory as the base directory of the application's main executable file, and *user*.config will reside in the location specified by the <xref:System.Windows.Forms.Application.LocalUserAppDataPath%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="1ef17-157">Yoluyla yüklü bir uygulama için [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)], bu dosyaların her ikisini de yer alacağı [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] veri dizini %InstallRoot%\Documents ve ayarlar altındaki\\*kullanıcıadı*\Local ayarları.</span><span class="sxs-lookup"><span data-stu-id="1ef17-157">For an application installed by means of [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)], both of these files will reside in the [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] Data Directory underneath %InstallRoot%\Documents and Settings\\*username*\Local Settings.</span></span>  
  
 <span data-ttu-id="1ef17-158">Bu dosyalar depolama konumu, bir kullanıcının gezici profiller etkinleştirilmişse ve isterse diğer bilgisayarlar bir etki alanı içinde kullanıldığında farklı Windows ve uygulama ayarlarını tanımlamak bir kullanıcı sağlayan biraz farklıdır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-158">The storage location of these files is slightly different if a user has enabled roaming profiles, which enables a user to define different Windows and application settings when he or she is using other computers within a domain.</span></span> <span data-ttu-id="1ef17-159">Bu durumda, her ikisi de [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] uygulamaları ve olmayan-[!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] sahip olacak uygulamaları kendi `app`. exe.config ve *kullanıcı*%InstallRoot%\Documents ve ayarları altında depolanan .config dosyaları\\ *kullanıcıadı*\Application veri.</span><span class="sxs-lookup"><span data-stu-id="1ef17-159">In that case, both [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] applications and non-[!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] applications will have their `app`.exe.config and *user*.config files stored under %InstallRoot%\Documents and Settings\\*username*\Application Data.</span></span>  
  
 <span data-ttu-id="1ef17-160">Yeni dağıtım teknolojisi ile uygulama ayarlarını özelliğinin işleyişi hakkında daha fazla bilgi için bkz. [ClickOnce ve uygulama ayarlarını](/visualstudio/deployment/clickonce-and-application-settings).</span><span class="sxs-lookup"><span data-stu-id="1ef17-160">For more information about how the Application Settings feature works with the new deployment technology, see [ClickOnce and Application Settings](/visualstudio/deployment/clickonce-and-application-settings).</span></span> <span data-ttu-id="1ef17-161">Hakkında daha fazla bilgi için [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] veri dizini bkz [erişen yerel ve uzak veri ClickOnce uygulamalarında](/visualstudio/deployment/accessing-local-and-remote-data-in-clickonce-applications).</span><span class="sxs-lookup"><span data-stu-id="1ef17-161">For more information about the [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] Data Directory, see [Accessing Local and Remote Data in ClickOnce Applications](/visualstudio/deployment/accessing-local-and-remote-data-in-clickonce-applications).</span></span>  
  
## <a name="application-settings-and-security"></a><span data-ttu-id="1ef17-162">Uygulama ayarları ve güvenlik</span><span class="sxs-lookup"><span data-stu-id="1ef17-162">Application Settings and Security</span></span>  
 <span data-ttu-id="1ef17-163">Uygulama ayarları, kısmi güven, Internet veya intranet üzerinden barındırılan Windows Forms uygulamaları için varsayılan değer kısıtlı bir ortam içinde çalışacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-163">Application settings are designed to work in partial trust, a restricted environment that is the default for Windows Forms applications hosted over the Internet or an intranet.</span></span> <span data-ttu-id="1ef17-164">Kısmi güven ötesinde özel izin uygulama ayarlarını varsayılan ayar sağlayıcısı ile kullanmak için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="1ef17-164">No special permissions beyond partial trust are needed to use application settings with the default settings provider.</span></span>  
  
 <span data-ttu-id="1ef17-165">Ne zaman uygulama ayarları kullanılır bir [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] uygulama `user`.config dosyasında depolanan [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] veri dizini.</span><span class="sxs-lookup"><span data-stu-id="1ef17-165">When application settings are used in a [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] application, the `user`.config file is stored in the [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] data directory.</span></span> <span data-ttu-id="1ef17-166">Uygulamanın boyutunu `user`.config dosyasını belirlediği veri dizini kotasını aşamaz [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1ef17-166">The size of the application's `user`.config file cannot exceed the data directory quota set by [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)].</span></span> <span data-ttu-id="1ef17-167">Daha fazla bilgi için [ClickOnce ve uygulama ayarlarını](/visualstudio/deployment/clickonce-and-application-settings).</span><span class="sxs-lookup"><span data-stu-id="1ef17-167">For more information, see [ClickOnce and Application Settings](/visualstudio/deployment/clickonce-and-application-settings).</span></span>  
  
## <a name="custom-settings-providers"></a><span data-ttu-id="1ef17-168">Özel ayarları sağlayıcıları</span><span class="sxs-lookup"><span data-stu-id="1ef17-168">Custom Settings Providers</span></span>  
 <span data-ttu-id="1ef17-169">Uygulama ayarları mimaride sarmalayıcı sınıfından türetilen uygulamaları ayarları arasında gevşek bir bağlantı yoktur <xref:System.Configuration.ApplicationSettingsBase>, ve ilgili ayarları sağlayıcı veya sağlayıcıları, türetilen <xref:System.Configuration.SettingsProvider>.</span><span class="sxs-lookup"><span data-stu-id="1ef17-169">In the Application Settings architecture, there is a loose coupling between the applications settings wrapper class, derived from <xref:System.Configuration.ApplicationSettingsBase>, and the associated settings provider or providers, derived from <xref:System.Configuration.SettingsProvider>.</span></span> <span data-ttu-id="1ef17-170">Bu ilişkilendirmeyi yalnızca tanımlanan <xref:System.Configuration.SettingsProviderAttribute> sarmalayıcı sınıfı veya özelliklerini tek tek uygulanır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-170">This association is defined only by the <xref:System.Configuration.SettingsProviderAttribute> applied to the wrapper class or its individual properties.</span></span> <span data-ttu-id="1ef17-171">Bir ayar sağlayıcısı değil açıkça belirtilmişse varsayılan sağlayıcı <xref:System.Configuration.LocalFileSettingsProvider>, kullanılır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-171">If a settings provider is not explicitly specified, the default provider, <xref:System.Configuration.LocalFileSettingsProvider>, is used.</span></span> <span data-ttu-id="1ef17-172">Sonuç olarak, bu mimari, oluşturma ve özel ayarları sağlayıcılarını kullanarak destekler.</span><span class="sxs-lookup"><span data-stu-id="1ef17-172">As a result, this architecture supports creating and using custom settings providers.</span></span>  
  
 <span data-ttu-id="1ef17-173">Örneğin, geliştirme ve kullanmak istediğinizi varsayalım `SqlSettingsProvider`, tüm ayarlarını verilerini bir Microsoft SQL Server veritabanında depolayacak bir sağlayıcı.</span><span class="sxs-lookup"><span data-stu-id="1ef17-173">For example, suppose that you want to develop and use `SqlSettingsProvider`, a provider that will store all settings data in a Microsoft SQL Server database.</span></span> <span data-ttu-id="1ef17-174"><xref:System.Configuration.SettingsProvider>-Türetilmiş sınıf bu bilgileri almak kendi `Initialize` yöntemi türünde bir parametre olarak <xref:System.Collections.Specialized.NameValueCollection?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="1ef17-174">Your <xref:System.Configuration.SettingsProvider>-derived class would receive this information in its `Initialize` method as a parameter of type <xref:System.Collections.Specialized.NameValueCollection?displayProperty=nameWithType>.</span></span> <span data-ttu-id="1ef17-175">Ardından uygulamak <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> ayarlarınızı veri deposundan alınacak yöntemi ve <xref:System.Configuration.SettingsProvider.SetPropertyValues%2A> bunları kaydetmek için.</span><span class="sxs-lookup"><span data-stu-id="1ef17-175">You would then implement the <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> method to retrieve your settings from the data store, and <xref:System.Configuration.SettingsProvider.SetPropertyValues%2A> to save them.</span></span> <span data-ttu-id="1ef17-176">Sağlayıcınız kullanabilirsiniz <xref:System.Configuration.SettingsPropertyCollection> sağlanan <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> yanı sıra tüm diğer ayarları öznitelikleri özelliğin adını, türünü ve kapsam belirlemek için bu özellik için tanımlanmış.</span><span class="sxs-lookup"><span data-stu-id="1ef17-176">Your provider can use the <xref:System.Configuration.SettingsPropertyCollection> supplied to <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> to determine the property's name, type, and scope, as well as any other settings attributes defined for that property.</span></span>  
  
 <span data-ttu-id="1ef17-177">Sağlayıcınız bir özellik ve yöntem uygulamaları belirgin olmayabilir uygulamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="1ef17-177">Your provider will need to implement one property and one method whose implementations may not be obvious.</span></span> <span data-ttu-id="1ef17-178"><xref:System.Configuration.SettingsProvider.ApplicationName%2A> Özelliktir bir soyut özelliğini <xref:System.Configuration.SettingsProvider>; aşağıdaki döndürmek için program:</span><span class="sxs-lookup"><span data-stu-id="1ef17-178">The <xref:System.Configuration.SettingsProvider.ApplicationName%2A> property is an abstract property of <xref:System.Configuration.SettingsProvider>; you should program it to return the following:</span></span>  
  
 [!code-csharp[ApplicationSettings.Architecture#2](~/samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Architecture/CS/DummyClass.cs#2)]
 [!code-vb[ApplicationSettings.Architecture#2](~/samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Architecture/VB/DummyProviderClass.vb#2)]  
  
 <span data-ttu-id="1ef17-179">Türetilmiş sınıfınızın de uygulamalıdır bir `Initialize` yönteminin hiçbir bağımsız değişkeni alır ve herhangi bir değer döndürür.</span><span class="sxs-lookup"><span data-stu-id="1ef17-179">Your derived class must also implement an `Initialize` method that takes no arguments and returns no value.</span></span> <span data-ttu-id="1ef17-180">Bu yöntem tarafından tanımlı değil <xref:System.Configuration.SettingsProvider>.</span><span class="sxs-lookup"><span data-stu-id="1ef17-180">This method is not defined by <xref:System.Configuration.SettingsProvider>.</span></span>  
  
 <span data-ttu-id="1ef17-181">Son olarak, uygulamanız <xref:System.Configuration.IApplicationSettingsProvider> ayarlarının yenilenmesi için destek sağlamak için sağlayıcı üzerinde varsayılan ayarlarına geri alma ve ayarlarını bir uygulama sürümünden yükseltme.</span><span class="sxs-lookup"><span data-stu-id="1ef17-181">Finally, you implement <xref:System.Configuration.IApplicationSettingsProvider> on your provider to provide support for refreshing settings, reverting settings to their defaults, and upgrading settings from one application version to another.</span></span>  
  
 <span data-ttu-id="1ef17-182">Uygulanan ve sağlayıcınız derlenmiş sonra bu sağlayıcıyı kullanmak yerine varsayılan ayarları sınıfınıza istemek gerekir.</span><span class="sxs-lookup"><span data-stu-id="1ef17-182">Once you have implemented and compiled your provider, you need to instruct your settings class to use this provider instead of the default.</span></span> <span data-ttu-id="1ef17-183">Bunun aracılığıyla <xref:System.Configuration.SettingsProviderAttribute>.</span><span class="sxs-lookup"><span data-stu-id="1ef17-183">You accomplish this through the <xref:System.Configuration.SettingsProviderAttribute>.</span></span> <span data-ttu-id="1ef17-184">Bir tüm ayarları sınıfa uygulandığında, sağlayıcı sınıfı tanımlayan her ayar için kullanılır; tek tek ayarlar uygulandığında, uygulama ayarları mimarisi bu sağlayıcı için bu ayarları yalnızca kullanır ve kullandığı <xref:System.Configuration.LocalFileSettingsProvider> geri kalanı için.</span><span class="sxs-lookup"><span data-stu-id="1ef17-184">If applied to an entire settings class, the provider is used for each setting that the class defines; if applied to individual settings, Application Settings architecture uses that provider for those settings only, and uses <xref:System.Configuration.LocalFileSettingsProvider> for the rest.</span></span> <span data-ttu-id="1ef17-185">Aşağıdaki kod örneği, özel sağlayıcınızın kullanılacak ayarları sınıfı isteyin gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="1ef17-185">The following code example shows how to instruct the settings class to use your custom provider.</span></span>  
  
 [!code-csharp[ApplicationSettings.Architecture#1](~/samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Architecture/CS/DummyClass.cs#1)]
 [!code-vb[ApplicationSettings.Architecture#1](~/samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Architecture/VB/DummyProviderClass.vb#1)]  
  
 <span data-ttu-id="1ef17-186">Bir sağlayıcı birden çok iş parçacıklarından aynı anda çağrılabilir, ancak her zaman aynı depolama konumuna Yazar; Bu nedenle, uygulama ayarları mimarisi her zaman sadece tek bir örnek sağlayıcısı sınıfınızın örneği oluşturulmaz.</span><span class="sxs-lookup"><span data-stu-id="1ef17-186">A provider may be called from multiple threads simultaneously, but it will always write to the same storage location; therefore, the Application Settings architecture will only ever instantiate a single instance of your provider class.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="1ef17-187">Sağlayıcınız iş parçacığı açısından güvenlidir ve yalnızca tek bir iş parçacığı için yapılandırma dosyalarını yazmak için bir zaman izin verir emin olmalısınız.</span><span class="sxs-lookup"><span data-stu-id="1ef17-187">You should ensure that your provider is thread-safe, and only allows one thread at a time to write to the configuration files.</span></span>  
  
 <span data-ttu-id="1ef17-188">Tüm öznitelikler tanımlanan ayarları desteklemek sağlayıcınıza gerekmez <xref:System.Configuration?displayProperty=nameWithType> ad alanı, en az bir destek gerekir ancak <xref:System.Configuration.ApplicationScopedSettingAttribute> ve <xref:System.Configuration.UserScopedSettingAttribute>ve ayrıca desteklemelidir <xref:System.Configuration.DefaultSettingValueAttribute>.</span><span class="sxs-lookup"><span data-stu-id="1ef17-188">Your provider does not need to support all of the settings attributes defined in the <xref:System.Configuration?displayProperty=nameWithType> namespace, though it must at a minimum support <xref:System.Configuration.ApplicationScopedSettingAttribute> and <xref:System.Configuration.UserScopedSettingAttribute>, and should also support <xref:System.Configuration.DefaultSettingValueAttribute>.</span></span> <span data-ttu-id="1ef17-189">Özniteliklerle her zaman desteklemediği sağlayıcınız yalnızca bildirimi başarısız olması; bir özel durum oluşturmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="1ef17-189">For those attributes that it does not support, your provider should just fail without notification; it should not throw an exception.</span></span> <span data-ttu-id="1ef17-190">Ayarları sınıfı öznitelikleri için geçersiz bir birleşim ancak kullanıp kullanmadığını — uygulama gibi <xref:System.Configuration.ApplicationScopedSettingAttribute> ve <xref:System.Configuration.UserScopedSettingAttribute> aynı ayarı — sağlayıcınız bir özel durum ve işlemin sona ermesi.</span><span class="sxs-lookup"><span data-stu-id="1ef17-190">If the settings class uses an invalid combination of attributes, however — such as applying <xref:System.Configuration.ApplicationScopedSettingAttribute> and <xref:System.Configuration.UserScopedSettingAttribute> to the same setting — your provider should throw an exception and cease operation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1ef17-191">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="1ef17-191">See also</span></span>

- <xref:System.Configuration.ApplicationSettingsBase>
- <xref:System.Configuration.SettingsProvider>
- <xref:System.Configuration.LocalFileSettingsProvider>
- [<span data-ttu-id="1ef17-192">Uygulama Ayarlarına Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="1ef17-192">Application Settings Overview</span></span>](application-settings-overview.md)
- [<span data-ttu-id="1ef17-193">Özel Denetimler için Uygulama Ayarları</span><span class="sxs-lookup"><span data-stu-id="1ef17-193">Application Settings for Custom Controls</span></span>](application-settings-for-custom-controls.md)
- [<span data-ttu-id="1ef17-194">ClickOnce ve Uygulama Ayarları</span><span class="sxs-lookup"><span data-stu-id="1ef17-194">ClickOnce and Application Settings</span></span>](/visualstudio/deployment/clickonce-and-application-settings)
- [<span data-ttu-id="1ef17-195">Uygulama Ayarları Şeması</span><span class="sxs-lookup"><span data-stu-id="1ef17-195">Application Settings Schema</span></span>](../../configure-apps/file-schema/application-settings-schema.md)
