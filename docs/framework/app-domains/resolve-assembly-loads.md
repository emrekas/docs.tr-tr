---
title: Derleme Yüklerini Çözme
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- assemblies [.NET Framework], resolving loads
- application domains, loading assemblies
- resolving assembly loads
- assemblies [.NET Framework], loading
- application domains, resolving assembly loads
ms.assetid: 5099e549-f4fd-49fb-a290-549edd456c6a
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: accb06421b8a697b0ee89adab0a9dffa23cffb05
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61705681"
---
# <a name="resolving-assembly-loads"></a><span data-ttu-id="c1e90-102">Derleme Yüklerini Çözme</span><span class="sxs-lookup"><span data-stu-id="c1e90-102">Resolving Assembly Loads</span></span>
<span data-ttu-id="c1e90-103">.NET Framework sağlar <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> olay yüklenirken derleme üzerinde daha fazla denetim gerektiren uygulamalar için.</span><span class="sxs-lookup"><span data-stu-id="c1e90-103">The .NET Framework provides the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event for applications that require greater control over assembly loading.</span></span> <span data-ttu-id="c1e90-104">Bu olayını işleyerek, uygulamanız hangisinin birkaç derleme sürümlerini yüklemek için dinamik bir derleme yayılamıyor ve döndürün. yük bağlamdan normal algılama yolları, select dışındaki bir derlemeyi yüklemek vb.</span><span class="sxs-lookup"><span data-stu-id="c1e90-104">By handling this event, your application can load an assembly into the load context from outside the normal probing paths, select which of several assembly versions to load, emit a dynamic assembly and return it, and so on.</span></span> <span data-ttu-id="c1e90-105">Bu konuda işleme yönelik yönergeler sağlanmaktadır <xref:System.AppDomain.AssemblyResolve> olay.</span><span class="sxs-lookup"><span data-stu-id="c1e90-105">This topic provides guidance for handling the <xref:System.AppDomain.AssemblyResolve> event.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c1e90-106">Derleme yüklerini salt yansıma bağlamında çözümlemek için <xref:System.AppDomain.ReflectionOnlyAssemblyResolve?displayProperty=nameWithType> olay yerine.</span><span class="sxs-lookup"><span data-stu-id="c1e90-106">For resolving assembly loads in the reflection-only context, use the <xref:System.AppDomain.ReflectionOnlyAssemblyResolve?displayProperty=nameWithType> event instead.</span></span>  
  
## <a name="how-the-assemblyresolve-event-works"></a><span data-ttu-id="c1e90-107">AssemblyResolve olay nasıl çalışır?</span><span class="sxs-lookup"><span data-stu-id="c1e90-107">How the AssemblyResolve Event Works</span></span>  
 <span data-ttu-id="c1e90-108">İçin bir işleyici kaydettiğinizde <xref:System.AppDomain.AssemblyResolve> olay işleyicisi adına göre çalışma zamanının bir derlemeye bağlanacak başarısız olduğunda çağrılır.</span><span class="sxs-lookup"><span data-stu-id="c1e90-108">When you register a handler for the <xref:System.AppDomain.AssemblyResolve> event, the handler is invoked whenever the runtime fails to bind to an assembly by name.</span></span> <span data-ttu-id="c1e90-109">Örneğin, aşağıdaki yöntemleri çağırarak kullanıcı kodundan neden <xref:System.AppDomain.AssemblyResolve> tetiklenecek olayı:</span><span class="sxs-lookup"><span data-stu-id="c1e90-109">For example, calling the following methods from user code can cause the <xref:System.AppDomain.AssemblyResolve> event to be raised:</span></span>  
  
- <span data-ttu-id="c1e90-110">Bir <xref:System.AppDomain.Load%2A?displayProperty=nameWithType> yöntemi aşırı yüklemesini veya <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> yöntemi aşırı yüklemesi, ilk bağımsız değişken olan yüklenecek derlemenin görünen adını temsil eden bir dize (yani tarafından döndürülen dize <xref:System.Reflection.Assembly.FullName%2A?displayProperty=nameWithType> özelliği).</span><span class="sxs-lookup"><span data-stu-id="c1e90-110">An <xref:System.AppDomain.Load%2A?displayProperty=nameWithType> method overload or <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> method overload whose first argument is a string that represents the display name of the assembly to load (that is, the string returned by the <xref:System.Reflection.Assembly.FullName%2A?displayProperty=nameWithType> property).</span></span>  
  
- <span data-ttu-id="c1e90-111">Bir <xref:System.AppDomain.Load%2A?displayProperty=nameWithType> yöntemi aşırı yüklemesini veya <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> yöntemi aşırı yüklemesi, ilk bağımsız değişken bir <xref:System.Reflection.AssemblyName> yüklenecek derlemenin tanımlayan nesne.</span><span class="sxs-lookup"><span data-stu-id="c1e90-111">An <xref:System.AppDomain.Load%2A?displayProperty=nameWithType> method overload or <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> method overload whose first argument is an <xref:System.Reflection.AssemblyName> object that identifies the assembly to load.</span></span>  
  
- <span data-ttu-id="c1e90-112">Bir <xref:System.Reflection.Assembly.LoadWithPartialName%2A?displayProperty=nameWithType> yöntemi aşırı yüklemesi.</span><span class="sxs-lookup"><span data-stu-id="c1e90-112">An <xref:System.Reflection.Assembly.LoadWithPartialName%2A?displayProperty=nameWithType> method overload.</span></span>  
  
- <span data-ttu-id="c1e90-113">Bir <xref:System.AppDomain.CreateInstance%2A?displayProperty=nameWithType> veya <xref:System.AppDomain.CreateInstanceAndUnwrap%2A?displayProperty=nameWithType> başka bir uygulama etki alanındaki bir nesnesini başlatan bir yöntemi aşırı yüklemesi.</span><span class="sxs-lookup"><span data-stu-id="c1e90-113">An <xref:System.AppDomain.CreateInstance%2A?displayProperty=nameWithType> or <xref:System.AppDomain.CreateInstanceAndUnwrap%2A?displayProperty=nameWithType> method overload that instantiates an object in another application domain.</span></span>  
  
### <a name="what-the-event-handler-does"></a><span data-ttu-id="c1e90-114">Olay işleyicisi yapar</span><span class="sxs-lookup"><span data-stu-id="c1e90-114">What the Event Handler Does</span></span>  
 <span data-ttu-id="c1e90-115">İşleyici için <xref:System.AppDomain.AssemblyResolve> olayı içinde yüklenen derlemenin görünen adı alır <xref:System.ResolveEventArgs.Name%2A?displayProperty=nameWithType> özelliği.</span><span class="sxs-lookup"><span data-stu-id="c1e90-115">The handler for the <xref:System.AppDomain.AssemblyResolve> event receives the display name of the assembly to be loaded, in the <xref:System.ResolveEventArgs.Name%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="c1e90-116">İşleyicinin derleme adı tanımazsa, null değeri döndürür (`Nothing` Visual Basic'te `nullptr` Visual C++'ta).</span><span class="sxs-lookup"><span data-stu-id="c1e90-116">If the handler does not recognize the assembly name, it returns null (`Nothing` in Visual Basic, `nullptr` in Visual C++).</span></span>  
  
 <span data-ttu-id="c1e90-117">İşleyicinin derleme adı tanıyorsa Bu yük ve istek karşılayan bir derleme döndürür.</span><span class="sxs-lookup"><span data-stu-id="c1e90-117">If the handler recognizes the assembly name, it can load and return an assembly that satisfies the request.</span></span> <span data-ttu-id="c1e90-118">Aşağıdaki liste bazı örnek senaryolar açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="c1e90-118">The following list describes some sample scenarios.</span></span>  
  
- <span data-ttu-id="c1e90-119">İşleyicinin bir derlemenin sürümünü konumunu biliyorsa kullanarak derleme yükleyebileceği <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> veya <xref:System.Reflection.Assembly.LoadFile%2A?displayProperty=nameWithType> yöntemi ve yüklenen derleme başarılıysa döndürebilir.</span><span class="sxs-lookup"><span data-stu-id="c1e90-119">If the handler knows the location of a version of the assembly, it can load the assembly by using the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> or <xref:System.Reflection.Assembly.LoadFile%2A?displayProperty=nameWithType> method, and can return the loaded assembly if successful.</span></span>  
  
- <span data-ttu-id="c1e90-120">İşleyici derlemeleri bayt dizileri depolanan bir veritabanına erişimi varsa, aşağıdakilerden birini kullanarak bir bayt dizisi yükleyebileceği <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> bir bayt dizisi ele yöntemi aşırı yüklemeleri.</span><span class="sxs-lookup"><span data-stu-id="c1e90-120">If the handler has access to a database of assemblies stored as byte arrays, it can load a byte array by using one of the <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> method overloads that take a byte array.</span></span>  
  
- <span data-ttu-id="c1e90-121">İşleyici, dinamik bir derleme oluşturmak ve onu döndürür.</span><span class="sxs-lookup"><span data-stu-id="c1e90-121">The handler can generate a dynamic assembly and return it.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c1e90-122">İşleyicinin derleme load-from bağlamı, yükleme bağlamı veya bağlam olmadan içine yüklemeniz gerekir. İşleyicinin derleme salt yansıma bağlamına kullanarak yükler, <xref:System.Reflection.Assembly.ReflectionOnlyLoad%2A?displayProperty=nameWithType> veya <xref:System.Reflection.Assembly.ReflectionOnlyLoadFrom%2A?displayProperty=nameWithType> yöntemi, yükleme denemesi başlatan <xref:System.AppDomain.AssemblyResolve> event başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="c1e90-122">The handler must load the assembly into the load-from context, into the load context, or without context.If the handler loads the assembly into the reflection-only context by using the <xref:System.Reflection.Assembly.ReflectionOnlyLoad%2A?displayProperty=nameWithType> or the <xref:System.Reflection.Assembly.ReflectionOnlyLoadFrom%2A?displayProperty=nameWithType> method, the load attempt that raised the <xref:System.AppDomain.AssemblyResolve> event fails.</span></span>  
  
 <span data-ttu-id="c1e90-123">Uygun bir derleme döndürmek için olay işleyicisinin sorumluluğundadır.</span><span class="sxs-lookup"><span data-stu-id="c1e90-123">It is the responsibility of the event handler to return a suitable assembly.</span></span> <span data-ttu-id="c1e90-124">İşleyicinin istenen derlemenin görünen adını geçirerek ayrıştırabilirsiniz <xref:System.ResolveEventArgs.Name%2A?displayProperty=nameWithType> özellik değerini <xref:System.Reflection.AssemblyName.%23ctor%28System.String%29> Oluşturucusu.</span><span class="sxs-lookup"><span data-stu-id="c1e90-124">The handler can parse the display name of the requested assembly by passing the <xref:System.ResolveEventArgs.Name%2A?displayProperty=nameWithType> property value to the <xref:System.Reflection.AssemblyName.%23ctor%28System.String%29> constructor.</span></span> <span data-ttu-id="c1e90-125">İle başlayarak [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], işleyici kullanabilirsiniz <xref:System.ResolveEventArgs.RequestingAssembly%2A?displayProperty=nameWithType> geçerli istek başka bir derlemenin bir bağımlılık olup olmadığını belirlemek için özellik.</span><span class="sxs-lookup"><span data-stu-id="c1e90-125">Beginning with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], the handler can use the <xref:System.ResolveEventArgs.RequestingAssembly%2A?displayProperty=nameWithType> property to determine whether the current request is a dependency of another assembly.</span></span> <span data-ttu-id="c1e90-126">Bu bilgiler bağımlılığını yerine getirecek bir derleme belirlemenize yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="c1e90-126">This information can help identify an assembly that will satisfy the dependency.</span></span>  
  
 <span data-ttu-id="c1e90-127">Olay işleyicisi, istenen sürümden derlemenin farklı bir sürümünü geri dönebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c1e90-127">The event handler can return a different version of the assembly than the version that was requested.</span></span>  
  
 <span data-ttu-id="c1e90-128">Çoğu durumda, işleyici tarafından döndürülen derleme yükleme bağlamı işleyicisi içine yükler bağlamı bağımsız olarak görünür.</span><span class="sxs-lookup"><span data-stu-id="c1e90-128">In most cases, the assembly that is returned by the handler appears in the load context, regardless of the context the handler loads it into.</span></span> <span data-ttu-id="c1e90-129">Örneğin, işleyicinin kullanıyorsa <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> load-from bağlamı içine derleme bir derlemeyi yüklemek için yöntemi işleyici döndürdüğünde yükleme bağlamı içinde görünür.</span><span class="sxs-lookup"><span data-stu-id="c1e90-129">For example, if the handler uses the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method to load an assembly into the load-from context, the assembly appears in the load context when the handler returns it.</span></span> <span data-ttu-id="c1e90-130">Ancak, aşağıdaki örnekte işleyici döndürdüğünde bağlamı olmadan derleme görünür:</span><span class="sxs-lookup"><span data-stu-id="c1e90-130">However, in the following case the assembly appears without context when the handler returns it:</span></span>  
  
- <span data-ttu-id="c1e90-131">İşleyici bağlamı olmadan bir derleme yükler.</span><span class="sxs-lookup"><span data-stu-id="c1e90-131">The handler loads an assembly without context.</span></span>  
  
- <span data-ttu-id="c1e90-132"><xref:System.ResolveEventArgs.RequestingAssembly%2A?displayProperty=nameWithType> Özelliği null değil.</span><span class="sxs-lookup"><span data-stu-id="c1e90-132">The <xref:System.ResolveEventArgs.RequestingAssembly%2A?displayProperty=nameWithType> property is not null.</span></span>  
  
- <span data-ttu-id="c1e90-133">İstenen derleme (diğer bir deyişle, tarafından döndürülen derleme <xref:System.ResolveEventArgs.RequestingAssembly%2A?displayProperty=nameWithType> özelliği) bağlamı olmadan yüklendi.</span><span class="sxs-lookup"><span data-stu-id="c1e90-133">The requesting assembly (that is, the assembly that is returned by the <xref:System.ResolveEventArgs.RequestingAssembly%2A?displayProperty=nameWithType> property) was loaded without context.</span></span>  
  
 <span data-ttu-id="c1e90-134">Bağlamları hakkında daha fazla bilgi için bkz. <xref:System.Reflection.Assembly.LoadFrom%28System.String%29?displayProperty=nameWithType> yöntemi aşırı yüklemesi.</span><span class="sxs-lookup"><span data-stu-id="c1e90-134">For information about contexts, see the <xref:System.Reflection.Assembly.LoadFrom%28System.String%29?displayProperty=nameWithType> method overload.</span></span>  
  
 <span data-ttu-id="c1e90-135">Aynı uygulama etki alanına aynı derlemenin birden çok sürümü yüklenebilir.</span><span class="sxs-lookup"><span data-stu-id="c1e90-135">Multiple versions of the same assembly can be loaded into the same application domain.</span></span> <span data-ttu-id="c1e90-136">Atama sorunları türüne neden olabileceği için bu uygulama önerilmez.</span><span class="sxs-lookup"><span data-stu-id="c1e90-136">This practice is not recommended, because it can lead to type assignment problems.</span></span> <span data-ttu-id="c1e90-137">Bkz: [en iyi uygulamalar için derleme yükleme](../../../docs/framework/deployment/best-practices-for-assembly-loading.md).</span><span class="sxs-lookup"><span data-stu-id="c1e90-137">See [Best Practices for Assembly Loading](../../../docs/framework/deployment/best-practices-for-assembly-loading.md).</span></span>  
  
### <a name="what-the-event-handler-should-not-do"></a><span data-ttu-id="c1e90-138">Hangi olay işleyicisi yapmanız gerekir</span><span class="sxs-lookup"><span data-stu-id="c1e90-138">What the Event Handler Should Not Do</span></span>  
 <span data-ttu-id="c1e90-139">İşleme için birincil kuralı <xref:System.AppDomain.AssemblyResolve> olaydır tarafından tanınmayan bir derleme döndürülecek denememelisiniz.</span><span class="sxs-lookup"><span data-stu-id="c1e90-139">The primary rule for handling the <xref:System.AppDomain.AssemblyResolve> event is that you should not try to return an assembly you do not recognize.</span></span> <span data-ttu-id="c1e90-140">İşleyici yazdığınızda, hangi derlemelerin olay verilmesine neden olabilecek bilmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="c1e90-140">When you write the handler, you should know which assemblies might cause the event to be raised.</span></span> <span data-ttu-id="c1e90-141">İşleyicinizi diğer derlemeler için null değeri döndürmelidir.</span><span class="sxs-lookup"><span data-stu-id="c1e90-141">Your handler should return null for other assemblies.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="c1e90-142">İle başlayarak [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], <xref:System.AppDomain.AssemblyResolve> olayı için uydu derlemeleri oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="c1e90-142">Beginning with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], the <xref:System.AppDomain.AssemblyResolve> event is raised for satellite assemblies.</span></span> <span data-ttu-id="c1e90-143">Tüm derleme yük istekleri çözmek işleyici çalışırsa, bu değişiklik .NET Framework'ün önceki bir sürümü için yazılmış bir olay işleyicisi etkiler.</span><span class="sxs-lookup"><span data-stu-id="c1e90-143">This change affects an event handler that was written for an earlier version of the .NET Framework, if the handler tries to resolve all assembly load requests.</span></span> <span data-ttu-id="c1e90-144">Tarafından tanınmayan bütünleştirilmiş kodları yoksay olay işleyicileri, bu değişiklikten etkilenmez: Bunlar, null döndürür ve normal bir geri dönüş mekanizması izlenir.</span><span class="sxs-lookup"><span data-stu-id="c1e90-144">Event handlers that ignore assemblies they do not recognize are not affected by this change: They return null, and normal fallback mechanisms are followed.</span></span>  
  
 <span data-ttu-id="c1e90-145">Bir derleme yüklenirken, olay işleyicisi herhangi birini kullanmak zorunda değilsiniz <xref:System.AppDomain.Load%2A?displayProperty=nameWithType> veya <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> neden olabilecek bir yöntem aşırı yüklemeleri <xref:System.AppDomain.AssemblyResolve> bu için yığın taşmasına neden olabileceği için yükseltilmiş yinelemeli olarak olay.</span><span class="sxs-lookup"><span data-stu-id="c1e90-145">When loading an assembly, the event handler must not use any of the <xref:System.AppDomain.Load%2A?displayProperty=nameWithType> or <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> method overloads that can cause the <xref:System.AppDomain.AssemblyResolve> event to be raised recursively, because this can lead to a stack overflow.</span></span> <span data-ttu-id="c1e90-146">(Bu konunun önceki kısımlarında sağlanan listesine bakın.) Bu, özel durum işleme yükleme isteği için sağladığınız tüm olay işleyicileri dönene kadar hiçbir özel durum nedeniyle olsa bile gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="c1e90-146">(See the list provided earlier in this topic.) This happens even if you provide exception handling for the load request, because no exception is thrown until all event handlers have returned.</span></span> <span data-ttu-id="c1e90-147">Bu nedenle, aşağıdaki kod, bir yığın taşması sonuçları `MyAssembly` bulunamadı:</span><span class="sxs-lookup"><span data-stu-id="c1e90-147">Thus, the following code results in a stack overflow if `MyAssembly` is not found:</span></span>  
  
 [!code-cpp[AssemblyResolveRecursive#1](../../../samples/snippets/cpp/VS_Snippets_CLR/assemblyresolverecursive/cpp/example.cpp#1)]
 [!code-csharp[AssemblyResolveRecursive#1](../../../samples/snippets/csharp/VS_Snippets_CLR/assemblyresolverecursive/cs/example.cs#1)]
 [!code-vb[AssemblyResolveRecursive#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/assemblyresolverecursive/vb/example.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="c1e90-148">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="c1e90-148">See also</span></span>

- [<span data-ttu-id="c1e90-149">Bütünleştirilmiş Kod Yükleme için En İyi Yöntemler</span><span class="sxs-lookup"><span data-stu-id="c1e90-149">Best Practices for Assembly Loading</span></span>](../../../docs/framework/deployment/best-practices-for-assembly-loading.md)
- [<span data-ttu-id="c1e90-150">Uygulama Etki Alanlarını Kullanma</span><span class="sxs-lookup"><span data-stu-id="c1e90-150">Using Application Domains</span></span>](../../../docs/framework/app-domains/use.md)
