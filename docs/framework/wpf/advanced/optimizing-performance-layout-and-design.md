---
title: 'Performansı iyileştirme: Düzen ve Tasarım'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- layout [WPF], optimizing performance
- design considerations [WPF]
- layout pass [WPF]
ms.assetid: 005f4cda-a849-448b-916b-38d14d9a96fe
ms.openlocfilehash: 8a76dd5de9f374d77345eeab3d259624546fed7c
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/08/2019
ms.locfileid: "59107074"
---
# <a name="optimizing-performance-layout-and-design"></a><span data-ttu-id="9c73b-102">Performansı iyileştirme: Düzen ve Tasarım</span><span class="sxs-lookup"><span data-stu-id="9c73b-102">Optimizing Performance: Layout and Design</span></span>
<span data-ttu-id="9c73b-103">Tasarımı, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] Düzen hesaplama ve nesne başvurularını doğrulama gereksiz yük oluşturarak uygulama performansını etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-103">The design of your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application can impact its performance by creating unnecessary overhead in calculating layout and validating object references.</span></span> <span data-ttu-id="9c73b-104">Nesneleri, oluşumunu özellikle, çalışma zamanında uygulamanızın performans özelliklerine etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-104">The construction of objects, particularly at run time, can affect the performance characteristics of your application.</span></span>  
  
 <span data-ttu-id="9c73b-105">Bu konu, bu alanlarda performans önerileri sağlar.</span><span class="sxs-lookup"><span data-stu-id="9c73b-105">This topic provides performance recommendations in these areas.</span></span>  
  
## <a name="layout"></a><span data-ttu-id="9c73b-106">Düzen</span><span class="sxs-lookup"><span data-stu-id="9c73b-106">Layout</span></span>  
 <span data-ttu-id="9c73b-107">"Düzen geçişi" terimi ölçme ve üyelerinin düzenleme işlemi açıklanır bir <xref:System.Windows.Controls.Panel>-türetilen nesne koleksiyonunu ve bunların ekranda çizim.</span><span class="sxs-lookup"><span data-stu-id="9c73b-107">The term "layout pass" describes the process of measuring and arranging the members of a <xref:System.Windows.Controls.Panel>-derived object's collection of children, and then drawing them onscreen.</span></span> <span data-ttu-id="9c73b-108">Düzen geçişi matematiksel olarak yoğun bir işlemdir; öğelerinin koleksiyondaki sayıda büyük sayısının hesaplamaların gerekli.</span><span class="sxs-lookup"><span data-stu-id="9c73b-108">The layout pass is a mathematically-intensive process—the larger the number of children in the collection, the greater the number of calculations required.</span></span> <span data-ttu-id="9c73b-109">Bir alt her zaman örneğin <xref:System.Windows.UIElement> nesne koleksiyonundaki konumuna değişiklikleri, yeni bir düzen sistemi geçişi tetikleme olasılığına sahiptir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-109">For example, each time a child <xref:System.Windows.UIElement> object in the collection changes its position, it has the potential to trigger a new pass by the layout system.</span></span> <span data-ttu-id="9c73b-110">Nesne özellikleri ve düzeni davranışı arasındaki yakın ilişkileri nedeniyle düzen sistemi çağırabilirsiniz olayların türünü anlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-110">Because of the close relationship between object characteristics and layout behavior, it's important to understand the type of events that can invoke the layout system.</span></span> <span data-ttu-id="9c73b-111">Uygulamanızın mümkün olduğunca düzenini gereksiz tüm çağrıları geçirmek azaltarak daha iyi sonuç verecektir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-111">Your application will perform better by reducing as much as possible any unnecessary invocations of the layout pass.</span></span>  
  
 <span data-ttu-id="9c73b-112">Düzen sistemi, bir koleksiyondaki her bir alt üyesi için iki geçiş yapar: bir ölçü geçişi ve düzenleme geçişi.</span><span class="sxs-lookup"><span data-stu-id="9c73b-112">The layout system completes two passes for each child member in a collection: a measure pass, and an arrange pass.</span></span> <span data-ttu-id="9c73b-113">Her alt nesne geçersiz kılınan kendi uygulamasını sağlar <xref:System.Windows.UIElement.Measure%2A> ve <xref:System.Windows.UIElement.Arrange%2A> kendi özel düzen davranışı sağlamak için yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="9c73b-113">Each child object provides its own overridden implementation of the <xref:System.Windows.UIElement.Measure%2A> and <xref:System.Windows.UIElement.Arrange%2A> methods in order to provide its own specific layout behavior.</span></span> <span data-ttu-id="9c73b-114">En basit şekliyle, düzen, bir öğenin yeniden boyutlandırılmış konumlandırılmış ve ekranda çizilmiş müşteri adayları bir özyinelemeli sistemidir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-114">At its simplest, layout is a recursive system that leads to an element being sized, positioned, and drawn onscreen.</span></span>  
  
-   <span data-ttu-id="9c73b-115">Bir alt <xref:System.Windows.UIElement> nesne, çekirdek özellikleri sağlayarak düzen işlemine başlar.</span><span class="sxs-lookup"><span data-stu-id="9c73b-115">A child <xref:System.Windows.UIElement> object begins the layout process by first having its core properties measured.</span></span>  
  
-   <span data-ttu-id="9c73b-116">Nesnenin <xref:System.Windows.FrameworkElement> boyutu gibi ilişkili özellikleri <xref:System.Windows.FrameworkElement.Width%2A>, <xref:System.Windows.FrameworkElement.Height%2A>, ve <xref:System.Windows.FrameworkElement.Margin%2A>, değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-116">The object's <xref:System.Windows.FrameworkElement> properties that are related to size, such as <xref:System.Windows.FrameworkElement.Width%2A>, <xref:System.Windows.FrameworkElement.Height%2A>, and <xref:System.Windows.FrameworkElement.Margin%2A>, are evaluated.</span></span>  
  
-   <xref:System.Windows.Controls.Panel><span data-ttu-id="9c73b-117">-belirli bir mantıksal uygulandığı gibi <xref:System.Windows.Controls.DockPanel.Dock%2A> özelliği <xref:System.Windows.Controls.DockPanel>, veya <xref:System.Windows.Controls.StackPanel.Orientation%2A> özelliği <xref:System.Windows.Controls.StackPanel>.</span><span class="sxs-lookup"><span data-stu-id="9c73b-117">-specific logic is applied, such as the <xref:System.Windows.Controls.DockPanel.Dock%2A> property of the <xref:System.Windows.Controls.DockPanel>, or the <xref:System.Windows.Controls.StackPanel.Orientation%2A> property of the <xref:System.Windows.Controls.StackPanel>.</span></span>  
  
-   <span data-ttu-id="9c73b-118">İçerik düzenleme veya tüm alt nesneleri ölçüldükten sonra konumlandırılmış.</span><span class="sxs-lookup"><span data-stu-id="9c73b-118">Content is arranged, or positioned, after all child objects have been measured.</span></span>  
  
-   <span data-ttu-id="9c73b-119">Alt nesneler koleksiyonunun ekrana çizilir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-119">The collection of child objects is drawn to the screen.</span></span>  
  
 <span data-ttu-id="9c73b-120">Aşağıdaki eylemlerden herhangi birini meydana gelirse düzeni geçiş işlemi tekrar çağrılır:</span><span class="sxs-lookup"><span data-stu-id="9c73b-120">The layout pass process is invoked again if any of the following actions occur:</span></span>  
  
-   <span data-ttu-id="9c73b-121">Bir alt nesnesi, koleksiyona eklenir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-121">A child object is added to the collection.</span></span>  
  
-   <span data-ttu-id="9c73b-122">A <xref:System.Windows.FrameworkElement.LayoutTransform%2A> alt nesneye uygulanır.</span><span class="sxs-lookup"><span data-stu-id="9c73b-122">A <xref:System.Windows.FrameworkElement.LayoutTransform%2A> is applied to the child object.</span></span>  
  
-   <span data-ttu-id="9c73b-123"><xref:System.Windows.UIElement.UpdateLayout%2A> Yöntemi, alt nesne için çağrılır.</span><span class="sxs-lookup"><span data-stu-id="9c73b-123">The <xref:System.Windows.UIElement.UpdateLayout%2A> method is called for the child object.</span></span>  
  
-   <span data-ttu-id="9c73b-124">Geçişleri düzenleme veya ölçü etkileyen meta verileri ile işaretlenmiş bir bağımlılık özelliğinin değeri için bir değişiklik olduğunda.</span><span class="sxs-lookup"><span data-stu-id="9c73b-124">When a change occurs to the value of a dependency property that is marked with metadata affecting the measure or arrange passes.</span></span>  
  
### <a name="use-the-most-efficient-panel-where-possible"></a><span data-ttu-id="9c73b-125">Mümkün olduğunda en verimli panelini kullanın</span><span class="sxs-lookup"><span data-stu-id="9c73b-125">Use the Most Efficient Panel where Possible</span></span>  
 <span data-ttu-id="9c73b-126">Düzen işleminin doğrudan, düzen davranışını karmaşıklığı <xref:System.Windows.Controls.Panel>-türetilmiş öğeleri kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="9c73b-126">The complexity of the layout process is directly based on the layout behavior of the <xref:System.Windows.Controls.Panel>-derived elements you use.</span></span> <span data-ttu-id="9c73b-127">Örneğin, bir <xref:System.Windows.Controls.Grid> veya <xref:System.Windows.Controls.StackPanel> denetimi çok daha fazla işlevsellik sağlayan bir <xref:System.Windows.Controls.Canvas> denetimi.</span><span class="sxs-lookup"><span data-stu-id="9c73b-127">For example, a <xref:System.Windows.Controls.Grid> or <xref:System.Windows.Controls.StackPanel> control provides much more functionality than a <xref:System.Windows.Controls.Canvas> control.</span></span> <span data-ttu-id="9c73b-128">Bu işlev daha büyük bir artış fiyat performans maliyetleri daha büyük bir artış olur.</span><span class="sxs-lookup"><span data-stu-id="9c73b-128">The price for this greater increase in functionality is a greater increase in performance costs.</span></span> <span data-ttu-id="9c73b-129">Ancak, İşlevler gerekmiyorsa, bir <xref:System.Windows.Controls.Grid> denetimi sağlar, kullanmanız gerektiğini daha az maliyetli alternatifleri gibi bir <xref:System.Windows.Controls.Canvas> veya özel bir paneli.</span><span class="sxs-lookup"><span data-stu-id="9c73b-129">However, if you do not require the functionality that a <xref:System.Windows.Controls.Grid> control provides, you should use the less costly alternatives, such as a <xref:System.Windows.Controls.Canvas> or a custom panel.</span></span>  
  
 <span data-ttu-id="9c73b-130">Daha fazla bilgi için [panellere genel bakış](../controls/panels-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9c73b-130">For more information, see [Panels Overview](../controls/panels-overview.md).</span></span>  
  
### <a name="update-rather-than-replace-a-rendertransform"></a><span data-ttu-id="9c73b-131">Bir RenderTransform değiştirmek yerine güncelleştir</span><span class="sxs-lookup"><span data-stu-id="9c73b-131">Update Rather than Replace a RenderTransform</span></span>  
 <span data-ttu-id="9c73b-132">Güncelleştirme olabilir bir <xref:System.Windows.Media.Transform> değeri olarak değiştirmek yerine bir <xref:System.Windows.UIElement.RenderTransform%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="9c73b-132">You may be able to update a <xref:System.Windows.Media.Transform> rather than replacing it as the value of a <xref:System.Windows.UIElement.RenderTransform%2A> property.</span></span> <span data-ttu-id="9c73b-133">Bu, özellikle animasyon içeren senaryolarda geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-133">This is particularly true in scenarios that involve animation.</span></span> <span data-ttu-id="9c73b-134">Mevcut bir güncelleştirerek <xref:System.Windows.Media.Transform>, gereksiz Düzen hesaplamasını başlatma kaçının.</span><span class="sxs-lookup"><span data-stu-id="9c73b-134">By updating an existing <xref:System.Windows.Media.Transform>, you avoid initiating an unnecessary layout calculation.</span></span>  
  
### <a name="build-your-tree-top-down"></a><span data-ttu-id="9c73b-135">Ağaç yukarıdan aşağıya oluşturun</span><span class="sxs-lookup"><span data-stu-id="9c73b-135">Build Your Tree Top-Down</span></span>  
 <span data-ttu-id="9c73b-136">Bir düğüm eklendiğinde veya mantıksal ağacından kaldırıldı özelliği geçersiz kılmalar düğümün üst ve alt öğeleri üzerinde oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="9c73b-136">When a node is added or removed from the logical tree, property invalidations are raised on the node's parent and all its children.</span></span> <span data-ttu-id="9c73b-137">Sonuç olarak, yukarıdan aşağıya yapım deseni zaten doğrulanmış düğümlerdeki kılınması maliyetini önlemek için her zaman gelmelidir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-137">As a result, a top-down construction pattern should always be followed to avoid the cost of unnecessary invalidations on nodes that have already been validated.</span></span> <span data-ttu-id="9c73b-138">Aşağıdaki tablo, yürütme hızını yukarıdan aşağıya aşağıdan yukarıya, tek bir 150 düzeyden bulunduğu ağaç karşı ağacı oluşturma arasındaki farkı gösterir <xref:System.Windows.Controls.TextBlock> ve <xref:System.Windows.Controls.DockPanel> her düzeyde.</span><span class="sxs-lookup"><span data-stu-id="9c73b-138">The following table shows the difference in execution speed between building a tree top-down versus bottom-up, where the tree is 150 levels deep with a single <xref:System.Windows.Controls.TextBlock> and <xref:System.Windows.Controls.DockPanel> at each level.</span></span>  
  
|**<span data-ttu-id="9c73b-139">Eylem</span><span class="sxs-lookup"><span data-stu-id="9c73b-139">Action</span></span>**|**<span data-ttu-id="9c73b-140">Ağaç (ms) oluşturma</span><span class="sxs-lookup"><span data-stu-id="9c73b-140">Tree building (in ms)</span></span>**|**<span data-ttu-id="9c73b-141">İşleme — ağaç (ms) oluşturmayı içerir</span><span class="sxs-lookup"><span data-stu-id="9c73b-141">Render—includes tree building (in ms)</span></span>**|  
|----------------|---------------------------------|-------------------------------------------------|  
|<span data-ttu-id="9c73b-142">Aşağıdan yukarıya</span><span class="sxs-lookup"><span data-stu-id="9c73b-142">Bottom-up</span></span>|<span data-ttu-id="9c73b-143">366</span><span class="sxs-lookup"><span data-stu-id="9c73b-143">366</span></span>|<span data-ttu-id="9c73b-144">454</span><span class="sxs-lookup"><span data-stu-id="9c73b-144">454</span></span>|  
|<span data-ttu-id="9c73b-145">Yukarıdan aşağıya</span><span class="sxs-lookup"><span data-stu-id="9c73b-145">Top-down</span></span>|<span data-ttu-id="9c73b-146">11</span><span class="sxs-lookup"><span data-stu-id="9c73b-146">11</span></span>|<span data-ttu-id="9c73b-147">96</span><span class="sxs-lookup"><span data-stu-id="9c73b-147">96</span></span>|  
  
 <span data-ttu-id="9c73b-148">Aşağıdaki kod örneği, ağaç yukarıdan aşağı oluşturma işlemini gösterir.</span><span class="sxs-lookup"><span data-stu-id="9c73b-148">The following code example demonstrates how to create a tree top down.</span></span>  
  
 [!code-csharp[Performance#PerformanceSnippet1](~/samples/snippets/csharp/VS_Snippets_Wpf/Performance/CSharp/Window1.xaml.cs#performancesnippet1)]
 [!code-vb[Performance#PerformanceSnippet1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/Performance/visualbasic/window1.xaml.vb#performancesnippet1)]  
  
 <span data-ttu-id="9c73b-149">Mantıksal ağacı hakkında daha fazla bilgi için bkz. [WPF içinde ağaçlar](trees-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="9c73b-149">For more information on the logical tree, see [Trees in WPF](trees-in-wpf.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9c73b-150">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="9c73b-150">See also</span></span>

- [<span data-ttu-id="9c73b-151">WPF Uygulama Performansını İyileştirme</span><span class="sxs-lookup"><span data-stu-id="9c73b-151">Optimizing WPF Application Performance</span></span>](optimizing-wpf-application-performance.md)
- [<span data-ttu-id="9c73b-152">Uygulama Performansını Planlama</span><span class="sxs-lookup"><span data-stu-id="9c73b-152">Planning for Application Performance</span></span>](planning-for-application-performance.md)
- [<span data-ttu-id="9c73b-153">Donanımdan Yararlanma</span><span class="sxs-lookup"><span data-stu-id="9c73b-153">Taking Advantage of Hardware</span></span>](optimizing-performance-taking-advantage-of-hardware.md)
- [<span data-ttu-id="9c73b-154">2B Grafikleri ve Görüntüleme</span><span class="sxs-lookup"><span data-stu-id="9c73b-154">2D Graphics and Imaging</span></span>](optimizing-performance-2d-graphics-and-imaging.md)
- [<span data-ttu-id="9c73b-155">Nesne Davranışı</span><span class="sxs-lookup"><span data-stu-id="9c73b-155">Object Behavior</span></span>](optimizing-performance-object-behavior.md)
- [<span data-ttu-id="9c73b-156">Uygulama Kaynakları</span><span class="sxs-lookup"><span data-stu-id="9c73b-156">Application Resources</span></span>](optimizing-performance-application-resources.md)
- [<span data-ttu-id="9c73b-157">Metin</span><span class="sxs-lookup"><span data-stu-id="9c73b-157">Text</span></span>](optimizing-performance-text.md)
- [<span data-ttu-id="9c73b-158">Veri Bağlama</span><span class="sxs-lookup"><span data-stu-id="9c73b-158">Data Binding</span></span>](optimizing-performance-data-binding.md)
- [<span data-ttu-id="9c73b-159">Diğer Performans Önerileri</span><span class="sxs-lookup"><span data-stu-id="9c73b-159">Other Performance Recommendations</span></span>](optimizing-performance-other-recommendations.md)
- [<span data-ttu-id="9c73b-160">Düzen</span><span class="sxs-lookup"><span data-stu-id="9c73b-160">Layout</span></span>](layout.md)
