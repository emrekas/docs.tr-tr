---
title: Kalıcılık katılımcıları
ms.date: 03/30/2017
ms.assetid: f84d2d5d-1c1b-4f19-be45-65b552d3e9e3
ms.openlocfilehash: 66178adda593192678542ebf5ed8906e0dffc908
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/23/2019
ms.locfileid: "54569511"
---
# <a name="persistence-participants"></a><span data-ttu-id="72669-102">Kalıcılık katılımcıları</span><span class="sxs-lookup"><span data-stu-id="72669-102">Persistence Participants</span></span>
<span data-ttu-id="72669-103">Kalıcılık Katılımcısı bir uygulama ana bilgisayarı tarafından tetiklenen bir Kalıcılık işlemi (kaydetme veya yük) katılabilir.</span><span class="sxs-lookup"><span data-stu-id="72669-103">A persistence participant can participate in a persistence operation (Save or Load) triggered by an application host.</span></span> <span data-ttu-id="72669-104">[!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] İki soyut sınıf ile birlikte gelen **PersistenceParticipant** ve **PersistenceIOParticipant**, hangi Kalıcılık Katılımcısı oluşturma için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="72669-104">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with two abstract classes, **PersistenceParticipant** and **PersistenceIOParticipant**, which you can use to create a persistence participant.</span></span> <span data-ttu-id="72669-105">Kalıcılık Katılımcısı bu sınıflardan birine türetilen, ilgilenilen yöntemlerini uygular ve sonra sınıfa bir örneğini ekler <xref:System.ServiceModel.Activities.WorkflowServiceHost.WorkflowExtensions%2A> koleksiyonunda <xref:System.ServiceModel.Activities.WorkflowServiceHost> .</span><span class="sxs-lookup"><span data-stu-id="72669-105">A persistence participant derives from one of these classes, implements the methods of interest, and then adds an instance of the class to the <xref:System.ServiceModel.Activities.WorkflowServiceHost.WorkflowExtensions%2A> collection on the <xref:System.ServiceModel.Activities.WorkflowServiceHost> .</span></span> <span data-ttu-id="72669-106">Uygulama konağı, bir iş akışı örneği kalıcı olduğunda bu tür iş akışı uzantılar için Ara ve uygun zamanlarda Kalıcılık katılımcıları uygun yöntemleri çağırmak olabilir.</span><span class="sxs-lookup"><span data-stu-id="72669-106">The application host may look for such workflow extensions when persisting a workflow instance and invoke appropriate methods on the persistence participants at appropriate times.</span></span>  
  
 <span data-ttu-id="72669-107">Aşağıdaki listede, kalan (Kaydet) işlemi farklı aşamalarında Kalıcılık alt sistemi tarafından gerçekleştirilen görevleri açıklar.</span><span class="sxs-lookup"><span data-stu-id="72669-107">The following list describes the tasks performed by the persistence subsystem in different stages of the Persist (Save) operation.</span></span> <span data-ttu-id="72669-108">Kalıcılık katılımcıları üçüncü ve dördüncü aşamasında kullanılır.</span><span class="sxs-lookup"><span data-stu-id="72669-108">The persistence participants are used in the third and fourth stages.</span></span> <span data-ttu-id="72669-109">Katılımcı bir g/ç Katılımcısı (g/ç işlemlerinde da katıldığı bir Kalıcılık Katılımcısı) ise, katılımcı de altıncı aşamasında kullanılır.</span><span class="sxs-lookup"><span data-stu-id="72669-109">If the participant is an I/O participant (a persistence participant that also participates in I/O operations), the participant is also used in the sixth stage.</span></span>  
  
1.  <span data-ttu-id="72669-110">İş akışı durumu, yer işaretleri, eşlenen değişkenleri ve zaman damgası dahil olmak üzere yerleşik değerleri toplar.</span><span class="sxs-lookup"><span data-stu-id="72669-110">Gathers built-in values, including workflow state, bookmarks, mapped variables, and timestamp.</span></span>  
  
2.  <span data-ttu-id="72669-111">İş akışı örneği ile ilişkili Uzantı koleksiyonu eklenen tüm Kalıcılık katılımcıları toplar.</span><span class="sxs-lookup"><span data-stu-id="72669-111">Gathers all persistence participants that were added to the extension collection associated with the workflow instance.</span></span>  
  
3.  <span data-ttu-id="72669-112">Çağıran <xref:System.Activities.Persistence.PersistenceParticipant.CollectValues%2A> tüm Kalıcılık katılımcıları tarafından uygulanan yöntem.</span><span class="sxs-lookup"><span data-stu-id="72669-112">Invokes the <xref:System.Activities.Persistence.PersistenceParticipant.CollectValues%2A> method implemented by all persistence participants.</span></span>  
  
4.  <span data-ttu-id="72669-113">Çağıran <xref:System.Activities.Persistence.PersistenceParticipant.MapValues%2A> tüm Kalıcılık katılımcıları tarafından uygulanan yöntem.</span><span class="sxs-lookup"><span data-stu-id="72669-113">Invokes the <xref:System.Activities.Persistence.PersistenceParticipant.MapValues%2A> method implemented by all persistence participants.</span></span>  
  
5.  <span data-ttu-id="72669-114">Kalıcı veya iş akışı kalıcı depoya kaydedin.</span><span class="sxs-lookup"><span data-stu-id="72669-114">Persist or save the workflow into the persistence store.</span></span>  
  
6.  <span data-ttu-id="72669-115">Çağıran <xref:System.Activities.Persistence.PersistenceIOParticipant.BeginOnSave%2A> tüm g/ç Kalıcılık katılımcıları yöntemi.</span><span class="sxs-lookup"><span data-stu-id="72669-115">Invokes the <xref:System.Activities.Persistence.PersistenceIOParticipant.BeginOnSave%2A> method on all of the persistence I/O participants.</span></span> <span data-ttu-id="72669-116">Katılımcı bir g/ç katılımcı değilse bu görev atlandı.</span><span class="sxs-lookup"><span data-stu-id="72669-116">If the participant is not an I/O participant, this task is skipped.</span></span> <span data-ttu-id="72669-117">Kalıcılık bölüm işlemsel ise, işlem Transaction.Current özelliğinde sağlanır.</span><span class="sxs-lookup"><span data-stu-id="72669-117">If the persistence episode is transactional, the transaction is provided in Transaction.Current property.</span></span>  
  
7.  <span data-ttu-id="72669-118">Tüm Kalıcılık katılımcıları tamamlanmasını bekler.</span><span class="sxs-lookup"><span data-stu-id="72669-118">Waits for all persistence participants to complete.</span></span> <span data-ttu-id="72669-119">Tüm katılımcıları kalıcı örnek verileri başarılı olursa, işlem taahhüt eder.</span><span class="sxs-lookup"><span data-stu-id="72669-119">If all the participants succeed in persisting instance data, commits the transaction.</span></span>  
  
 <span data-ttu-id="72669-120">Kalıcılık Katılımcısı türetildiği **PersistenceParticipant** uygulayabilir ve sınıf **CollectValues** ve **MapValues** yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="72669-120">A persistence participant derives from the **PersistenceParticipant** class and may implement the **CollectValues** and **MapValues** methods.</span></span> <span data-ttu-id="72669-121">Türetilen bir g/ç Kalıcılık Katılımcısı **PersistenceIOParticipant** uygulayabilir ve sınıf **BeginOnSave** uygulama yanı sıra yöntemi **CollectValues**ve **MapValues** yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="72669-121">A persistence I/O participant derives from the **PersistenceIOParticipant** class and may implement the **BeginOnSave** method in addition to implementing the **CollectValues** and **MapValues** methods.</span></span>  
  
 <span data-ttu-id="72669-122">Her aşama, sonraki aşamasına başlamadan önce tamamlanır.</span><span class="sxs-lookup"><span data-stu-id="72669-122">Each stage is completed before the next stage begins.</span></span> <span data-ttu-id="72669-123">Örneğin, gelen değerleri toplanan **tüm** Kalıcılık katılımcıları ilk aşamasında.</span><span class="sxs-lookup"><span data-stu-id="72669-123">For example, values are collected from **all** persistence participants in the first stage.</span></span> <span data-ttu-id="72669-124">Ardından ilk aşamada toplanan tüm değerler tüm Kalıcılık Katılımcıları ikinci aşamasında eşleme için sağlanır.</span><span class="sxs-lookup"><span data-stu-id="72669-124">Then all the values collected in the first stage are provided to all persistence participants in the second stage for mapping.</span></span> <span data-ttu-id="72669-125">Ardından birinci ve İkinci aşamada eşlenen ve toplanan tüm değerler için kalıcı bir sağlayıcı üçüncü aşamada sağlanır ve benzeri.</span><span class="sxs-lookup"><span data-stu-id="72669-125">Then all the values collected and mapped in the first and second stages are provided to the persistence provider in the third stage, and so on.</span></span>  
  
 <span data-ttu-id="72669-126">Aşağıdaki listede, yükleme işlemi farklı aşamalarında Kalıcılık alt sistemi tarafından gerçekleştirilen görevleri açıklar.</span><span class="sxs-lookup"><span data-stu-id="72669-126">The following list describes the tasks performed by the persistence subsystem in different stages of the Load operation.</span></span> <span data-ttu-id="72669-127">Kalıcılık katılımcıları dördüncü aşamasında kullanılır.</span><span class="sxs-lookup"><span data-stu-id="72669-127">The persistence participants are used in the fourth stage.</span></span> <span data-ttu-id="72669-128">Kalıcılık g/ç katılımcıları (g/ç işlemlerinde ayrıca katılmayı Kalıcılık katılımcıları), ayrıca üçüncü aşamada kullanılır.</span><span class="sxs-lookup"><span data-stu-id="72669-128">The persistence I/O participants (persistence participants that also participate in I/O operations) are also used in the third stage.</span></span>  
  
1.  <span data-ttu-id="72669-129">İş akışı örneği ile ilişkili Uzantı koleksiyonu eklenen tüm Kalıcılık katılımcıları toplar.</span><span class="sxs-lookup"><span data-stu-id="72669-129">Gathers all persistence participants that were added to the extension collection associated with the workflow instance.</span></span>  
  
2.  <span data-ttu-id="72669-130">İş akışını sürdürme deposundan yükler.</span><span class="sxs-lookup"><span data-stu-id="72669-130">Loads the workflow from the persistence store.</span></span>  
  
3.  <span data-ttu-id="72669-131">Çağıran <xref:System.Activities.Persistence.PersistenceIOParticipant.BeginOnLoad%2A> tüm g/ç Kalıcılık Katılımcıları ve tamamlamak tüm Kalıcılık katılımcıları bekler.</span><span class="sxs-lookup"><span data-stu-id="72669-131">Invokes the <xref:System.Activities.Persistence.PersistenceIOParticipant.BeginOnLoad%2A> on all persistence I/O participants and waits for all the persistence participants to complete.</span></span> <span data-ttu-id="72669-132">Kalıcılık bölüm işlemsel ise, işlem Transaction.Current sağlanır.</span><span class="sxs-lookup"><span data-stu-id="72669-132">If the persistence episode is transactional, the transaction is provided in Transaction.Current.</span></span>  
  
4.  <span data-ttu-id="72669-133">İş akışı örneği sürdürme deposundan alınan verileri temel alan bellekte yükler.</span><span class="sxs-lookup"><span data-stu-id="72669-133">Loads the workflow instance in memory based on the data retrieved from the persistence store.</span></span>  
  
5.  <span data-ttu-id="72669-134">Çağıran <xref:System.Activities.Persistence.PersistenceParticipant.PublishValues%2A> her Kalıcılık Katılımcısı üzerinde.</span><span class="sxs-lookup"><span data-stu-id="72669-134">Invokes <xref:System.Activities.Persistence.PersistenceParticipant.PublishValues%2A> on each persistence participant.</span></span>  
  
 <span data-ttu-id="72669-135">Kalıcılık Katılımcısı türetildiği **PersistenceParticipant** uygulayabilir ve sınıf **PublishValues** yöntemi.</span><span class="sxs-lookup"><span data-stu-id="72669-135">A persistence participant derives from the **PersistenceParticipant** class and may implement the **PublishValues** method.</span></span> <span data-ttu-id="72669-136">Türetilen bir g/ç Kalıcılık Katılımcısı **PersistenceIOParticipant** uygulayabilir ve sınıf **BeginOnLoad** uygulama yanı sıra yöntemi **PublishValues**yöntemi.</span><span class="sxs-lookup"><span data-stu-id="72669-136">A persistence I/O participant derives from the **PersistenceIOParticipant** class and may implement the **BeginOnLoad** method in addition to implementing the **PublishValues** method.</span></span>  
  
 <span data-ttu-id="72669-137">Bir iş akışı örneği yüklenirken kalıcı bir sağlayıcı bu örneği üzerinde bir kilit oluşturur.</span><span class="sxs-lookup"><span data-stu-id="72669-137">When loading a workflow instance the persistence provider creates a lock on that instance.</span></span> <span data-ttu-id="72669-138">Bu örnek, bir çok düğümlü senaryosunda birden fazla konak tarafından yüklenen engeller.</span><span class="sxs-lookup"><span data-stu-id="72669-138">This prevents the instance from being loaded by more than one host in a multi-node scenario.</span></span> <span data-ttu-id="72669-139">Kilitli bir iş akışı örneği yüklemeye çalışırsanız aşağıdaki gibi bir özel durum görürsünüz: Özel durum "System.ServiceModel.persistence.ınstancelockexception: İstenen işlemi tamamlayamadı çünkü kilitleme örneği için ' 00000000-0000-0000-0000-000000000000' alınmamış ".</span><span class="sxs-lookup"><span data-stu-id="72669-139">If you attempt to load a workflow instance that has been locked you will see an exception like the following: The exception " System.ServiceModel.Persistence.InstanceLockException: The requested operation could not complete because the lock for instance '00000000-0000-0000-0000-000000000000' could not be acquired".</span></span> <span data-ttu-id="72669-140">Aşağıdakilerden biri oluştuğunda, bu hataya neden olur:</span><span class="sxs-lookup"><span data-stu-id="72669-140">This error is caused when one of the following occurs:</span></span>  
  
-   <span data-ttu-id="72669-141">Bir çok düğümlü senaryosunda örneği başka bir ana bilgisayar tarafından yüklenir.</span><span class="sxs-lookup"><span data-stu-id="72669-141">In a multi-node scenario the instance is loaded by another host.</span></span>  <span data-ttu-id="72669-142">Bu tür çakışmaları çözmek için birkaç farklı yolu vardır: yeniden deneme ve kilit sahibi olan düğüme işleme iletmek veya çalışmalarını kaydetmeleri için başka bir konak neden olacak yük zorla.</span><span class="sxs-lookup"><span data-stu-id="72669-142">There are a few different ways to resolve these types of conflicts: forward the processing to the node which owns the lock and retry, or force the load which will cause the other host to be unable to save their work.</span></span>  
  
-   <span data-ttu-id="72669-143">Tek düğümlü senaryo ve konak kilitlendi.</span><span class="sxs-lookup"><span data-stu-id="72669-143">In a single-node scenario and the host crashed.</span></span>  <span data-ttu-id="72669-144">Ana bilgisayar başlatıldığında, kilit henüz süresi dolmadığından hala eski ana bilgisayar tarafından kilitli bir örnek yüklemek yeni ana bilgisayara yeniden (bir işlem geri dönüştürme veya yeni bir Kalıcılık sağlayıcı üreteci oluşturma) çalışır.</span><span class="sxs-lookup"><span data-stu-id="72669-144">When the host starts up again (a process recycle or creating a new persistence provider factory) the new host attempts to load an instance which is still locked by the old host because the lock hasn't expired yet.</span></span>  
  
-   <span data-ttu-id="72669-145">Tek düğümlü bir senaryo örneği, söz konusu noktada durduruldu ve farklı bir ana bilgisayar kimliği olan yeni bir Kalıcılık sağlayıcı örneği oluşturulur</span><span class="sxs-lookup"><span data-stu-id="72669-145">In a single-node scenario and the instance in question was aborted at some point and a new persistence provider instance is created which has a different host ID.</span></span>  
  
 <span data-ttu-id="72669-146">Varsayılan değer olan 5 dakika kilit zaman aşımı değerine sahip, farklı bir zaman aşımı çağrılırken belirtebilirsiniz <xref:System.ServiceModel.Persistence.PersistenceProvider.Load%2A>.</span><span class="sxs-lookup"><span data-stu-id="72669-146">The lock timeout value has a default value of 5 minutes, you can specify a different timeout value when calling <xref:System.ServiceModel.Persistence.PersistenceProvider.Load%2A>.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="72669-147">Bu Bölümde</span><span class="sxs-lookup"><span data-stu-id="72669-147">In This Section</span></span>  
  
-   [<span data-ttu-id="72669-148">Nasıl yapılır: Özel Kalıcılık Katılımcısı oluşturma</span><span class="sxs-lookup"><span data-stu-id="72669-148">How to: Create a Custom Persistence Participant</span></span>](../../../docs/framework/windows-workflow-foundation/how-to-create-a-custom-persistence-participant.md)  
  
## <a name="see-also"></a><span data-ttu-id="72669-149">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="72669-149">See also</span></span>
- [<span data-ttu-id="72669-150">Depo Genişletilebilirliği</span><span class="sxs-lookup"><span data-stu-id="72669-150">Store Extensibility</span></span>](../../../docs/framework/windows-workflow-foundation/store-extensibility.md)
