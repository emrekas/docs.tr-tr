---
title: Dış kural kümesi Araç Seti
ms.date: 03/30/2017
ms.assetid: a306d283-a031-475e-aa01-9ae86e7adcb0
ms.openlocfilehash: 7a331f139fd7d3127892e6a103b370ec50dc9c99
ms.sourcegitcommit: 5137208fa414d9ca3c58cdfd2155ac81bc89e917
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2019
ms.locfileid: "57482372"
---
# <a name="external-ruleset-toolkit"></a><span data-ttu-id="7b67e-102">Dış kural kümesi Araç Seti</span><span class="sxs-lookup"><span data-stu-id="7b67e-102">External Ruleset Toolkit</span></span>

<span data-ttu-id="7b67e-103">Bir iş akışı uygulama içinde kuralları kullanıldığında, normal derlemenin parçası kurallardır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-103">Normally when rules are used within a workflow application, the rules are part of the assembly.</span></span> <span data-ttu-id="7b67e-104">Bazı senaryolarda, yeniden oluşturma ve iş akışı derleme dağıtılmadan güncelleştirilebilir ayrı olarak derlemesinden RuleSets sağlamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7b67e-104">In some scenarios, you may want to maintain the RuleSets separately from the assembly so that they can be updated without rebuilding and deploying the workflow assembly.</span></span> <span data-ttu-id="7b67e-105">Bu örnek ve bir veritabanında RuleSets düzenleyin ve çalışma zamanında bir iş akışından bu RuleSets erişimi yönetmesine olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-105">This sample allows you to manage and edit RuleSets in a database and access those RuleSets from a workflow at runtime.</span></span> <span data-ttu-id="7b67e-106">Bu kural kümesi değişiklikleri otomatik olarak birleştirmek çalışan iş akışı örnekleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="7b67e-106">This enables running workflow instances to automatically incorporate RuleSet changes.</span></span>

<span data-ttu-id="7b67e-107">Dış kural kümesi Araç Seti örnek yönetmek ve veritabanındaki RuleSet sürümlerini düzenlemek için kullanabileceğiniz bir Windows Forms tabanlı bir araç içerir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-107">The External RuleSet Toolkit sample contains a Windows Forms-based tool that you can use to manage and edit RuleSet versions in a database.</span></span> <span data-ttu-id="7b67e-108">Ayrıca, etkinlik ve bu kurallar yürütmeye yönelik bir ana bilgisayar hizmeti de içerir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-108">It also includes an activity and a host service for executing those rules.</span></span>

> [!NOTE]
> <span data-ttu-id="7b67e-109">Bu örnek gerektirir [Microsoft SQL Server](https://go.microsoft.com/fwlink/?LinkId=96181).</span><span class="sxs-lookup"><span data-stu-id="7b67e-109">This sample requires [Microsoft SQL Server](https://go.microsoft.com/fwlink/?LinkId=96181).</span></span>

<span data-ttu-id="7b67e-110">Visual Studio, Windows Workflow Foundation (WF) bir parçası olarak bir kural kümesi Düzenleyicisi sağlar.</span><span class="sxs-lookup"><span data-stu-id="7b67e-110">Visual Studio provides a RuleSet editor as part of the Windows Workflow Foundation (WF).</span></span> <span data-ttu-id="7b67e-111">Bu Düzenleyici'yi tıklatarak başlatabilirsiniz `Policy` etkinliğini bir iş akışında; iş akışıyla ilişkilendirilmiş .rules dosya için tanımlı RuleSet nesnesi seri hale getirir (bir `Policy` karşı iş akışı etkinlik çalıştırmalarını bir kural kümesi örneği).</span><span class="sxs-lookup"><span data-stu-id="7b67e-111">You can start this editor by double-clicking the `Policy` activity in a workflow; it serializes the defined RuleSet object to the .rules file associated with the workflow (a `Policy` activity runs a RuleSet instance against the workflow).</span></span> <span data-ttu-id="7b67e-112">İş akışı projesi oluşturma sırasında .rules dosyanın derleme kaynağı olarak derlenir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-112">The .rules file is compiled into the assembly as a resource when you build the workflow project.</span></span>

<span data-ttu-id="7b67e-113">Bu örnek Ekle bileşenlerinin:</span><span class="sxs-lookup"><span data-stu-id="7b67e-113">The components of this sample include:</span></span>

- <span data-ttu-id="7b67e-114">Düzenleme ve veritabanındaki RuleSet sürümlerini yönetmek için kullanabileceğiniz bir RuleSet grafik kullanıcı arabirimi aracıdır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-114">A RuleSet graphical user interface tool that you can use to edit and manage RuleSet versions in the database.</span></span>

- <span data-ttu-id="7b67e-115">Ana bilgisayar uygulaması üzerinde yapılandırıldığı ve veritabanından RuleSets erişen bir RuleSet hizmeti.</span><span class="sxs-lookup"><span data-stu-id="7b67e-115">A RuleSet service that is configured on the host application and accesses RuleSets from the database.</span></span>

- <span data-ttu-id="7b67e-116">Bir `ExternalPolicy` RuleSet hizmetinden bir RuleSet istekleri ve RuleSet karşı iş akışını çalıştıran etkinlik.</span><span class="sxs-lookup"><span data-stu-id="7b67e-116">An `ExternalPolicy` activity that requests a RuleSet from the RuleSet service and runs the RuleSet against the workflow.</span></span>

<span data-ttu-id="7b67e-117">Şekil 1'de bileşenlerin etkileşimi gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-117">The interaction of the components is shown in Figure 1.</span></span> <span data-ttu-id="7b67e-118">Aşağıdaki bölümlerde, her bir bileşeni açıklar.</span><span class="sxs-lookup"><span data-stu-id="7b67e-118">The sections that follow describe each component.</span></span>

<span data-ttu-id="7b67e-119">![Dış kural kümesi örnek kavramsal genel bakış](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesettoolkitsampleoverview.gif "RuleSetToolkitSampleOverview")</span><span class="sxs-lookup"><span data-stu-id="7b67e-119">![External RuleSet Sample Conceptual Overview](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesettoolkitsampleoverview.gif "RuleSetToolkitSampleOverview")</span></span>

<span data-ttu-id="7b67e-120">Şekil 1: Örnek genel bakış</span><span class="sxs-lookup"><span data-stu-id="7b67e-120">Figure 1: Sample Overview</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7b67e-121">Örnekler, makinenizde zaten yüklü.</span><span class="sxs-lookup"><span data-stu-id="7b67e-121">The samples may already be installed on your machine.</span></span> <span data-ttu-id="7b67e-122">Devam etmeden önce şu (varsayılan) dizin denetleyin.</span><span class="sxs-lookup"><span data-stu-id="7b67e-122">Check for the following (default) directory before continuing.</span></span>
>
> `<InstallDrive>:\WF_WCF_Samples`
>
> <span data-ttu-id="7b67e-123">Bu dizin mevcut değilse Git [Windows Communication Foundation (WCF) ve .NET Framework 4 için Windows Workflow Foundation (WF) örnekleri](https://go.microsoft.com/fwlink/?LinkId=150780) tüm Windows Communication Foundation (WCF) indirmek için ve [!INCLUDE[wf1](../../../../includes/wf1-md.md)] örnekleri.</span><span class="sxs-lookup"><span data-stu-id="7b67e-123">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="7b67e-124">Bu örnek, şu dizinde bulunur.</span><span class="sxs-lookup"><span data-stu-id="7b67e-124">This sample is located in the following directory.</span></span>
>
> `<InstallDrive>:\WF_WCF_Samples\WF\Scenario\ExternalRuleSetToolKit`

## <a name="ruleset-tool"></a><span data-ttu-id="7b67e-125">Kural kümesi araç</span><span class="sxs-lookup"><span data-stu-id="7b67e-125">RuleSet Tool</span></span>

<span data-ttu-id="7b67e-126">Şekil 2'de bir RuleSet aracı ekran görüntüsü gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-126">A screen shot of the RuleSet tool is shown in Figure 2.</span></span> <span data-ttu-id="7b67e-127">Gelen **kural Store** menüsünde kullanılabilir RuleSets veritabanından yükleyin ve değiştirilen RuleSets depoya kaydedin.</span><span class="sxs-lookup"><span data-stu-id="7b67e-127">From the **Rule Store** menu, you can load the available RuleSets from the database and save modified RuleSets back to the store.</span></span> <span data-ttu-id="7b67e-128">Uygulama yapılandırma dosyası bir veritabanı bağlantı dizesi için RuleSet veritabanı sağlar.</span><span class="sxs-lookup"><span data-stu-id="7b67e-128">An application configuration file provides a database connection string for the RuleSet database.</span></span> <span data-ttu-id="7b67e-129">Aracı'nı başlattığınızda, yapılandırılmış veritabanından otomatik olarak RuleSets yükler.</span><span class="sxs-lookup"><span data-stu-id="7b67e-129">When you start the tool, it automatically loads the RuleSets from the configured database.</span></span>

<span data-ttu-id="7b67e-130">![Dış kural kümesi Araç Seti örnek çıktı](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetbrowser.gif "RuleSetBrowser")</span><span class="sxs-lookup"><span data-stu-id="7b67e-130">![External RuleSet Toolkit Sample output](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetbrowser.gif "RuleSetBrowser")</span></span>

<span data-ttu-id="7b67e-131">Şekil 2: RuleSet tarayıcı</span><span class="sxs-lookup"><span data-stu-id="7b67e-131">Figure 2: RuleSet Browser</span></span>

<span data-ttu-id="7b67e-132">Kural kümesi araç aynı anda korumak ve (araç kilitleme veya diğer yapılandırma sürümü oluşturma yeteneğine ek yönetim özellikleri sağlar) birden çok sürümlerini depolamanıza olanak tanıyan RuleSets büyük ve küçük sürüm numaralarına uygular.</span><span class="sxs-lookup"><span data-stu-id="7b67e-132">The RuleSet tool applies major and minor version numbers to the RuleSets, allowing you to simultaneously maintain and store multiple versions (the tool provides no locking or other configuration management features in addition to the versioning capability).</span></span> <span data-ttu-id="7b67e-133">Aracı'nı kullanarak yeni RuleSet sürümler oluşturabilir veya mevcut sürümleri silin.</span><span class="sxs-lookup"><span data-stu-id="7b67e-133">Using the tool, you can create new RuleSet versions or delete existing versions.</span></span> <span data-ttu-id="7b67e-134">Tıkladığınızda **yeni**, aracı yeni bir kural kümesi adı oluşturur ve sürüm 1.0 için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-134">When you click **New**, the tool creates a new RuleSet name and applies version 1.0.</span></span> <span data-ttu-id="7b67e-135">Bir sürüm kopyaladığınızda, aracın kapsanan kuralları dahil olmak üzere seçili RuleSet sürümünün bir kopyasını oluşturur ve yeni, benzersiz sürüm numaraları atar.</span><span class="sxs-lookup"><span data-stu-id="7b67e-135">When you copy a version, the tool creates a copy of the selected RuleSet version, including the contained rules, and assigns new, unique version numbers.</span></span> <span data-ttu-id="7b67e-136">Bu sürüm numaralarını üzerinde mevcut RuleSets sürüm numaralarını temel alır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-136">These version numbers are based on the version numbers of existing RuleSets.</span></span> <span data-ttu-id="7b67e-137">Formda ilişkili alanlarını kullanarak RuleSet adını ve sürüm numaralarını değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7b67e-137">You can change the RuleSet name and version numbers using the associated fields on the form.</span></span>

<span data-ttu-id="7b67e-138">Tıkladığınızda **kurallarını Düzenle**, Şekil 3'te gösterildiği gibi kural kümesi Düzenleyicisi'ni başlatır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-138">When you click **Edit Rules**, the RuleSet editor starts, as shown in Figure 3.</span></span>

<span data-ttu-id="7b67e-139">![Dış kural kümesi Araç Seti örnek çıktı](../../../../docs/framework/windows-workflow-foundation/samples/media/ruleseteditor.gif "RuleSetEditor")</span><span class="sxs-lookup"><span data-stu-id="7b67e-139">![External RuleSet Toolkit Sample Output](../../../../docs/framework/windows-workflow-foundation/samples/media/ruleseteditor.gif "RuleSetEditor")</span></span>

<span data-ttu-id="7b67e-140">Şekil 3: Kural kümesi Düzenleyicisi</span><span class="sxs-lookup"><span data-stu-id="7b67e-140">Figure 3: RuleSet Editor</span></span>

<span data-ttu-id="7b67e-141">Bir Windows Workflow Foundation için Visual Studio eklentisinin bir parçası olan Düzenleyicisi iletişim yeniden barındırma budur.</span><span class="sxs-lookup"><span data-stu-id="7b67e-141">This is a re-hosting of the editor dialog that is part of the Windows Workflow Foundation Visual Studio add-in.</span></span> <span data-ttu-id="7b67e-142">Bu, IntelliSense desteği dahil olmak üzere aynı işlevselliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="7b67e-142">It provides the same functionality, including Intellisense support.</span></span> <span data-ttu-id="7b67e-143">Kurallar, araç kümesinde ile ilişkili olan bir hedef türü (örneğin, bir iş akışı) karşı yazılan; tıkladığınızda **Gözat** ana aracı iletişim kutusunda **türündeki iş akışı Seçici** Şekil 4'te gösterildiği gibi iletişim kutusu görünür.</span><span class="sxs-lookup"><span data-stu-id="7b67e-143">The rules are authored against a target type (such as a workflow) that is associated with the RuleSet in the tool; when you click **Browse** in the main tool dialog, the **Workflow/Type Selector** dialog appears, as shown in Figure 4.</span></span>

<span data-ttu-id="7b67e-144">![İş akışı &#47;yazın seçimi](../../../../docs/framework/windows-workflow-foundation/samples/media/71f08d57-e8f2-499e-8151-ece2cbdcabfd.gif "71f08d57-e8f2-499e-8151-ece2cbdcabfd")</span><span class="sxs-lookup"><span data-stu-id="7b67e-144">![Workflow &#47;Type Selection](../../../../docs/framework/windows-workflow-foundation/samples/media/71f08d57-e8f2-499e-8151-ece2cbdcabfd.gif "71f08d57-e8f2-499e-8151-ece2cbdcabfd")</span></span>

<span data-ttu-id="7b67e-145">Şekil 4: İş akışı/türü Seçici</span><span class="sxs-lookup"><span data-stu-id="7b67e-145">Figure 4: Workflow/Type Selector</span></span>

<span data-ttu-id="7b67e-146">Kullanabileceğiniz **türündeki iş akışı Seçici** iletişim bir derleme ve bu derleme içinde belirli bir tür belirtmek için.</span><span class="sxs-lookup"><span data-stu-id="7b67e-146">You can use the **Workflow/Type Selector** dialog to specify an assembly and a specific type within that assembly.</span></span> <span data-ttu-id="7b67e-147">Hedef türü karşı kuralları yazılan (çalıştırmanız ve) türüdür.</span><span class="sxs-lookup"><span data-stu-id="7b67e-147">This type is the target type against which the rules are authored (and run).</span></span> <span data-ttu-id="7b67e-148">Çoğu durumda, bir iş akışı veya başka bir etkinlik türü hedef türü olur.</span><span class="sxs-lookup"><span data-stu-id="7b67e-148">In many cases, the target type is a workflow or some other activity type.</span></span> <span data-ttu-id="7b67e-149">Ancak, bir RuleSet herhangi bir .NET türü karşı çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7b67e-149">However, you can run a RuleSet against any .NET type.</span></span>

<span data-ttu-id="7b67e-150">Derleme dosya ve tür yolu `name are stored with the` RuleSet veritabanındaki zaman RuleSet veritabanından alınır böylece aracı çalışır hedef türü otomatik olarak yüklenecek.</span><span class="sxs-lookup"><span data-stu-id="7b67e-150">The path to the assembly file and the type `name are stored with the` RuleSet in the database, so that when the RuleSet is retrieved from the database, the tool attempts to automatically load the target type.</span></span>

<span data-ttu-id="7b67e-151">Tıkladığınızda **Tamam** içinde **türündeki iş akışı Seçici** iletişim kutusunda, seçili türü hedef türü kurallar tarafından başvurulan tüm üyeleri olduğundan emin olmak için RuleSet karşı doğrular.</span><span class="sxs-lookup"><span data-stu-id="7b67e-151">When you click **OK** in the **Workflow/Type Selector** dialog, it validates the selected type against the RuleSet, to ensure that the target type has all the members referenced by the rules.</span></span> <span data-ttu-id="7b67e-152">Hatalar gösterilir bir **doğrulama hatalarını** iletişim (bkz: Şekil 5).</span><span class="sxs-lookup"><span data-stu-id="7b67e-152">Errors are shown in a **Validation Errors** dialog (see Figure 5).</span></span> <span data-ttu-id="7b67e-153">Hataları rağmen değişiklik ile devam edin veya seçebileceğiniz **iptal**.</span><span class="sxs-lookup"><span data-stu-id="7b67e-153">You can choose to continue with the change despite the errors, or click **Cancel**.</span></span> <span data-ttu-id="7b67e-154">Gelen **Araçları** menüsünde ana aracı iletişim kutusunda, tıklayabilirsiniz **doğrulama** hedef etkinlik karşı RuleSet sürümü yeniden doğrulamak için.</span><span class="sxs-lookup"><span data-stu-id="7b67e-154">From the **Tools** menu in the main tool dialog, you can click **Validate** to re-validate the RuleSet version against the target activity.</span></span>

<span data-ttu-id="7b67e-155">![Doğrulama hataları dış RuleSet örnekten](../../../../docs/framework/windows-workflow-foundation/samples/media/validationerrorsruleset.png "ValidationErrorsRuleSet")</span><span class="sxs-lookup"><span data-stu-id="7b67e-155">![Validation Errors from External RuleSet Sample](../../../../docs/framework/windows-workflow-foundation/samples/media/validationerrorsruleset.png "ValidationErrorsRuleSet")</span></span>

<span data-ttu-id="7b67e-156">Şekil 5: Doğrulama hataları</span><span class="sxs-lookup"><span data-stu-id="7b67e-156">Figure 5: Validation Errors</span></span>

<span data-ttu-id="7b67e-157">Gelen **veri** menü aracında içeri ve dışarı aktarma RuleSets.</span><span class="sxs-lookup"><span data-stu-id="7b67e-157">From the **Data** menu in the tool, you can import and export RuleSets.</span></span> <span data-ttu-id="7b67e-158">Tıkladığınızda **alma**, bir dosya Seçici iletişim kutusu görünürse, .rules dosya seçin.</span><span class="sxs-lookup"><span data-stu-id="7b67e-158">When you click **Import**, a file-chooser dialog appears, from which you can select a .rules file.</span></span> <span data-ttu-id="7b67e-159">Bu olabilir veya başlangıçta Visual Studio'da oluşturulan bir dosya olabilir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-159">This may or may not be a file initially created in Visual Studio.</span></span> <span data-ttu-id="7b67e-160">.Rules dosya seri hale getirilmiş bir içermelidir `RuleDefinitions` koşulların koleksiyonunu ve RuleSets koleksiyonunu içeren örneği.</span><span class="sxs-lookup"><span data-stu-id="7b67e-160">The .rules file should contain a serialized `RuleDefinitions` instance that contains a collection of conditions and a collection of RuleSets.</span></span> <span data-ttu-id="7b67e-161">Koşulları koleksiyonu Aracı'nı kullanmaz, ancak kullanmak `RuleDefinitions` Visual Studio ortamını etkileşime izin vermek için .rules biçimi.</span><span class="sxs-lookup"><span data-stu-id="7b67e-161">The tool does not use the conditions collection, but it does use the `RuleDefinitions` .rules format to allow interaction with the Visual Studio environment.</span></span>

<span data-ttu-id="7b67e-162">.Rules dosyayı seçtikten sonra bir **RuleSet Seçici** iletişim kutusu görünür (bkz. Şekil 6).</span><span class="sxs-lookup"><span data-stu-id="7b67e-162">After selecting a .rules file, a **RuleSet Selector** dialog appears (see Figure 6).</span></span> <span data-ttu-id="7b67e-163">İletişim kutusu içeri aktarmak istediğiniz dosyasından RuleSets seçmek için kullanabilirsiniz (varsayılan, tüm RuleSets belirtir).</span><span class="sxs-lookup"><span data-stu-id="7b67e-163">You can use the dialog to select the RuleSets from the file that you want to import (the default specifies all RuleSets).</span></span> <span data-ttu-id="7b67e-164">WF projedeki kendi sürüm oluşturma derlemenin sürümü ile aynı olduğundan RuleSets .rules dosyasında sürüm numaralarının yok.</span><span class="sxs-lookup"><span data-stu-id="7b67e-164">RuleSets in the .rules file do not have version numbers, because their versioning within a WF project is the same as the version of the assembly.</span></span> <span data-ttu-id="7b67e-165">İçeri aktarma işlemi sırasında Aracı'nı (içeri aktardıktan sonra değiştirebilirsiniz) sonraki kullanılabilir ana sürüm numarası otomatik olarak atar; atanan sürüm numaraları gördüğünüz **RuleSet Seçici** listesi.</span><span class="sxs-lookup"><span data-stu-id="7b67e-165">During the importing process, the tool automatically assigns the next available major version number (which you can change after importing); you can see the assigned version numbers in the **RuleSet Selector** list.</span></span>

<span data-ttu-id="7b67e-166">Bunu aktarır her kural kümesi için aracı denemeleri .rules dosyasının (varsa) konumu altında bin\Debug klasöründen ilişkili türünü bulun temel kümesinde kullanılan üyeler.</span><span class="sxs-lookup"><span data-stu-id="7b67e-166">For each RuleSet it imports, the tool attempts to locate the associated type from the bin\Debug folder under the location of the .rules file (if it exists), based on the members used in the RuleSet.</span></span> <span data-ttu-id="7b67e-167">Aracın birden çok eşleşen türleri bulur .rules dosya adı ve tür adı arasında bir eşleşme göre bir türü seçmek çalışır (örneğin, `Workflow1` Workflow1.rules için karşılık gelen türü).</span><span class="sxs-lookup"><span data-stu-id="7b67e-167">If the tool finds multiple matching types, it attempts to choose a type based on a match between the .rules file name and the type name (for example, the `Workflow1` type corresponds to Workflow1.rules).</span></span> <span data-ttu-id="7b67e-168">Birden çok eşleşme varsa, türü seçmek için istenir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-168">If multiple matches exist, you are prompted to select the type.</span></span> <span data-ttu-id="7b67e-169">Eşleşen bir derleme veya tür bulmak bu otomatik kimlik mekanizması başarısız durumunda tıklayabilirsiniz içeri aktardıktan sonra **Gözat** ilişkili türe gitmek için ana aracı iletişim.</span><span class="sxs-lookup"><span data-stu-id="7b67e-169">If this auto-identification mechanism fails to locate a matching assembly or type, then after importing you can click **Browse** on the main tool dialog to navigate to the associated type.</span></span>

<span data-ttu-id="7b67e-170">![Kural kümesi Seçici](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetselector.gif "RuleSetSelector")</span><span class="sxs-lookup"><span data-stu-id="7b67e-170">![Ruleset selector](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetselector.gif "RuleSetSelector")</span></span>

<span data-ttu-id="7b67e-171">Şekil 6: Kural kümesi Seçici</span><span class="sxs-lookup"><span data-stu-id="7b67e-171">Figure 6: RuleSet Selector</span></span>

<span data-ttu-id="7b67e-172">Tıkladığınızda **verileri dışarı aktarma** ana aracı menüsünden **RuleSet Seçici** verilmeli veritabanından RuleSets belirlemek iletişim yeniden görünür.</span><span class="sxs-lookup"><span data-stu-id="7b67e-172">When you click **Data-Export** from the main tool menu, the **RuleSet Selector** dialog appears again, from which you can determine the RuleSets from the database that should be exported.</span></span> <span data-ttu-id="7b67e-173">Tıkladığınızda **Tamam**, **dosyayı Kaydet** iletişim kutusu açılır, sonuçta elde edilen .rules dosyasının konumunu ve adını belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7b67e-173">When you click **OK**, a **Save File** dialog appears, in which you can specify the name and location of the resulting .rules file.</span></span> <span data-ttu-id="7b67e-174">.Rules dosya sürüm bilgisi içermediğinden, yalnızca belirli bir RuleSet ada sahip bir kural kümesi sürümü seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7b67e-174">Because the .rules file does not contain version information, you can only select one RuleSet version with a given RuleSet name.</span></span>

## <a name="policyfromservice-activity"></a><span data-ttu-id="7b67e-175">PolicyFromService etkinliği</span><span class="sxs-lookup"><span data-stu-id="7b67e-175">PolicyFromService Activity</span></span>

<span data-ttu-id="7b67e-176">Kodu `PolicyFromService` etkinliktir basit.</span><span class="sxs-lookup"><span data-stu-id="7b67e-176">The code for the `PolicyFromService` activity is straightforward.</span></span> <span data-ttu-id="7b67e-177">Gibi çalıştığını `Policy` sağlanan ile WF etkinliği, ancak ' % s'hedef RuleSet .rules dosyasından almak yerine RuleSet örneği elde etmek için bir ana bilgisayar hizmeti çağırır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-177">It works much like the `Policy` activity provided with WF, but instead of retrieving the target RuleSet from the .rules file, it calls a host service to obtain the RuleSet instance.</span></span> <span data-ttu-id="7b67e-178">Ardından RuleSet kök iş akışı etkinliği örneği karşı çalışır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-178">It then runs the RuleSet against the root workflow activity instance.</span></span>

<span data-ttu-id="7b67e-179">Bir iş akışında etkinlik kullanmak için bir başvuru ekleyin. `PolicyActivities` ve `RuleSetService` iş akışı projenizden derlemeler.</span><span class="sxs-lookup"><span data-stu-id="7b67e-179">To use the activity in a workflow, add a reference to the `PolicyActivities` and `RuleSetService` assemblies from your workflow project.</span></span> <span data-ttu-id="7b67e-180">Araç kutusuna etkinlik ekleme hakkında ayrıntılı bilgi için bu konunun sonunda yordamına bakın.</span><span class="sxs-lookup"><span data-stu-id="7b67e-180">See the procedure at the end of this topic for a discussion of how to add the activity to the toolbox.</span></span>

<span data-ttu-id="7b67e-181">Etkinlik akışınızdaki yerleştirildikten sonra çalıştırılacak RuleSet adını sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-181">After placing the activity in your workflow, you must provide the name of the RuleSet to be run.</span></span> <span data-ttu-id="7b67e-182">Değişmez değer adını girin veya bir iş akışı değişkeninin veya başka bir etkinliğin özelliği için bağlama.</span><span class="sxs-lookup"><span data-stu-id="7b67e-182">You can enter the name as a literal value, or bind to a workflow variable or property of another activity.</span></span> <span data-ttu-id="7b67e-183">İsteğe bağlı olarak çalıştırılması gereken özel kural kümesi için sürüm numaraları girebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7b67e-183">Optionally, you can enter version numbers for the specific RuleSet that should be run.</span></span> <span data-ttu-id="7b67e-184">Birincil ve ikincil sürüm numaraları 0 varsayılan değerini değiştirmeden bırakırsanız, veritabanındaki en son sürüm numarasını etkinliği için otomatik olarak sağlanır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-184">If you leave the default value of 0 for the major and minor version numbers, the latest version number in the database is automatically provided for the activity.</span></span>

## <a name="ruleset-service"></a><span data-ttu-id="7b67e-185">Kural kümesi hizmeti</span><span class="sxs-lookup"><span data-stu-id="7b67e-185">RuleSet Service</span></span>

<span data-ttu-id="7b67e-186">Hizmet, veritabanından belirtilen kural kümesi sürümü alma ve arama etkinliğine döndürmeden sorumludur.</span><span class="sxs-lookup"><span data-stu-id="7b67e-186">The service is responsible for retrieving the specified RuleSet version from the database and returning it to the calling activity.</span></span> <span data-ttu-id="7b67e-187">Birincil ve ikincil sürüm değer iletilmezse daha önce açıklandığı gibi `GetRuleSet` çağrı, her iki 0 hizmetin en son sürümünü alır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-187">As previously discussed, if the major and minor version values passed in the `GetRuleSet` call are both 0, the service retrieves the latest version.</span></span> <span data-ttu-id="7b67e-188">Bu noktada, yoktur RuleSet tanımları veya örnekleri önbelleğe alma; benzer şekilde, RuleSet sürümleri "Sürüyor RuleSets ayrılmaları için dağıtılan" olarak işaretlemek için herhangi bir özellik vardır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-188">At this point, there is no caching of RuleSet definitions or instances; similarly, there are no features for marking RuleSet versions as "deployed" to differentiate them from in-progress RuleSets.</span></span>

<span data-ttu-id="7b67e-189">Veritabanı Hizmet tarafından erişilecek bir uygulama yapılandırma dosyası kullanarak konakta yapılandırılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-189">The database to be accessed by the service should be configured on the host using an application configuration file.</span></span>

#### <a name="to-run-the-tool"></a><span data-ttu-id="7b67e-190">Aracı çalıştırmak için</span><span class="sxs-lookup"><span data-stu-id="7b67e-190">To run the tool</span></span>

1. <span data-ttu-id="7b67e-191">Araç ve hizmet tarafından kullanılan RuleSet tablo ayarlar klasörü Setup.sql dosyası içerir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-191">The folder that sets up the RuleSet table used by the tool and the service contains a Setup.sql file.</span></span> <span data-ttu-id="7b67e-192">SQL Express kuralları veritabanını oluşturmak için ve RuleSet tablosu oluşturmak için Setup.cmd toplu iş dosyasını çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7b67e-192">You can run the Setup.cmd batch file to create the Rules database on SQL Express and to set up the RuleSet table.</span></span>

2. <span data-ttu-id="7b67e-193">Toplu iş dosyası veya Setup.sql düzenleyip SQL Express kullanmayacak şekilde veya başka bir şey adlı bir veritabanında tablo yerleştirmek için belirtin `Rules`, uygulama yapılandırma dosyaları RuleSet aracında ve `UsageSample` projeleri düzenlenmesi gerekir ile aynı bilgiler.</span><span class="sxs-lookup"><span data-stu-id="7b67e-193">If you edit the batch file or Setup.sql and specify not to use SQL Express or to place the table in a database named something other than `Rules`, the application configuration files in the RuleSet tool and `UsageSample` projects should be edited with the same information.</span></span>

3. <span data-ttu-id="7b67e-194">Setup.sql betiği çalıştırdıktan sonra oluşturabileceğiniz `ExternalRuleSetToolkit` çözüm ve ardından başlatma RuleSet ExternalRuleSetTool projeden aracı.</span><span class="sxs-lookup"><span data-stu-id="7b67e-194">After you run the Setup.sql script, you can build the `ExternalRuleSetToolkit` solution and then launch the RuleSet tool from the ExternalRuleSetTool project.</span></span>

4. <span data-ttu-id="7b67e-195">`RuleSetToolkitUsageSample` Sıralı iş akışı konsol uygulaması çözümü bir örnek iş akışı içerir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-195">The `RuleSetToolkitUsageSample` Sequential Workflow Console Application solution includes a sample workflow.</span></span> <span data-ttu-id="7b67e-196">İş akışı oluşan bir `PolicyFromService` etkinliği ve iki değişken `orderValue` ve `discount`, ' % s'hedef RuleSet çalıştığı karşı.</span><span class="sxs-lookup"><span data-stu-id="7b67e-196">The workflow consists of a `PolicyFromService` activity and two variables, `orderValue` and `discount`, against which the target RuleSet runs.</span></span>

5. <span data-ttu-id="7b67e-197">Örneği kullanmak için yapı `RuleSetToolkitUsageSample` çözüm.</span><span class="sxs-lookup"><span data-stu-id="7b67e-197">To use the sample, build the `RuleSetToolkitUsageSample` solution.</span></span> <span data-ttu-id="7b67e-198">RuleSet aracı ana menüden ardından **veri içeri aktarma** ve RuleSetToolkitUsageSample klasördeki DiscountRuleSet.rules dosyasına işaret.</span><span class="sxs-lookup"><span data-stu-id="7b67e-198">Then from the RuleSet tool main menu, click **Data-Import** and point to the DiscountRuleSet.rules file in the RuleSetToolkitUsageSample folder.</span></span> <span data-ttu-id="7b67e-199">Tıklayın **kural Store tasarrufu** içeri aktarılan RuleSet veritabanına kaydetmek için menü seçeneği.</span><span class="sxs-lookup"><span data-stu-id="7b67e-199">Click the **Rule Store-Save** menu option to save the imported RuleSet to the database.</span></span>

6. <span data-ttu-id="7b67e-200">Çünkü `PolicyActivities` derleme örnek iş akışı projeden başvurulan `PolicyFromService` etkinlik iş akışında görünür.</span><span class="sxs-lookup"><span data-stu-id="7b67e-200">Because the `PolicyActivities` assembly is referenced from the sample workflow project, the `PolicyFromService` activity appears in the workflow.</span></span> <span data-ttu-id="7b67e-201">Bu ancak araç kutusunda varsayılan olarak görünmez.</span><span class="sxs-lookup"><span data-stu-id="7b67e-201">It does not, however, appear in the toolbox by default.</span></span> <span data-ttu-id="7b67e-202">Araç kutusuna eklemek için aşağıdakileri yapın:</span><span class="sxs-lookup"><span data-stu-id="7b67e-202">To add it to the toolbox, do the following:</span></span>

    - <span data-ttu-id="7b67e-203">Araç kutusu sağ tıklayıp **öğelerini Seç** (Bu işlem biraz sürebilir).</span><span class="sxs-lookup"><span data-stu-id="7b67e-203">Right-click the toolbox and select **Choose Items** (this may take a while).</span></span>

    - <span data-ttu-id="7b67e-204">Zaman **araç kutusu öğelerini Seç** iletişim kutusu görüntülendikten sonra **etkinlikleri** sekmesi.</span><span class="sxs-lookup"><span data-stu-id="7b67e-204">When the **Choose Toolbox Items** dialog appears, click the **Activities** tab.</span></span>

    - <span data-ttu-id="7b67e-205">Gözat `PolicyActivities` derlemede `ExternalRuleSetToolkit` çözüm ve tıklatın **açık**.</span><span class="sxs-lookup"><span data-stu-id="7b67e-205">Browse to the `PolicyActivities` assembly in the `ExternalRuleSetToolkit` solution and click **Open**.</span></span>

    - <span data-ttu-id="7b67e-206">Emin `PolicyFromService` etkinlik seçili **araç kutusu öğelerini Seç** iletişim ve ardından **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="7b67e-206">Ensure that the `PolicyFromService` activity is selected in the **Choose Toolbox Items** dialog and then click **OK**.</span></span>

    - <span data-ttu-id="7b67e-207">Etkinlik artık araç kutusundan gözükeceğini **RuleSetToolkitUsageSample bileşenleri** kategorisi.</span><span class="sxs-lookup"><span data-stu-id="7b67e-207">The activity should now appear in the toolbox in the **RuleSetToolkitUsageSample Components** category.</span></span>

7. <span data-ttu-id="7b67e-208">Kural kümesi hizmeti aşağıdaki deyimi Program.cs içinde kullanarak konsol uygulama konağı üzerinde zaten yapılandırılmış.</span><span class="sxs-lookup"><span data-stu-id="7b67e-208">The RuleSet service is already configured on the console application host using the following statement in Program.cs.</span></span>

    ```csharp
    workflowRuntime.AddService(new RuleSetService());
    ```

8. <span data-ttu-id="7b67e-209">Ayrıca hizmet yapılandırma dosyası kullanarak konakta yapılandırabilirsiniz; Ayrıntılar için SDK belgelerine bakın.</span><span class="sxs-lookup"><span data-stu-id="7b67e-209">You can also configure the service on the host using a configuration file; see the SDK documentation for details.</span></span>

9. <span data-ttu-id="7b67e-210">Uygulama yapılandırma dosyası, hizmet tarafından kullanılmak üzere veritabanı için bağlantı dizesini belirtmek için iş akışı projesine eklenir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-210">An application configuration file is added to the workflow project to specify the connection string for the database to be used by the service.</span></span> <span data-ttu-id="7b67e-211">Bu kural kümesi tablo içeren bir veritabanına işaret eden RuleSet aracı tarafından kullanılan aynı bağlantı dizesi olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7b67e-211">This should be the same connection string used by the RuleSet tool, which points to the database that contains the RuleSet table.</span></span>

10. <span data-ttu-id="7b67e-212">Şimdi Çalıştır `RuleSetToolkitUsageSample` proje başka bir iş akışı konsol uygulaması gibi.</span><span class="sxs-lookup"><span data-stu-id="7b67e-212">You can now run the `RuleSetToolkitUsageSample` project as you would any other workflow console application.</span></span> <span data-ttu-id="7b67e-213">F5 veya Visual Studio içinde Ctrl + F5 tuşlarına basın veya doğrudan RuleSetToolkitUsageSample.exe dosyasını çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="7b67e-213">Press F5 or Ctrl+F5 within Visual Studio or run the RuleSetToolkitUsageSample.exe file directly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="7b67e-214">Kullanım örneği derleme yüklediğinden, araç kullanım örneği derleyin RuleSet aracını kapatmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7b67e-214">You must close the RuleSet tool to recompile the usage sample, because the tool loads the usage sample assembly.</span></span>
