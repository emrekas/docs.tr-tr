---
title: Windows Workflow Foundation 4 performansı
ms.date: 03/30/2017
ms.assetid: 67d2b3e8-3777-49f8-9084-abbb33b5a766
ms.openlocfilehash: 29fc675e0eee37bac7cd6a9e309fa68b29bf28c8
ms.sourcegitcommit: acd8ed14fe94e9d4e3a7fb685fe83d05e941073c
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/20/2019
ms.locfileid: "56442886"
---
# <a name="windows-workflow-foundation-4-performance"></a><span data-ttu-id="27e29-102">Windows Workflow Foundation 4 performansı</span><span class="sxs-lookup"><span data-stu-id="27e29-102">Windows Workflow Foundation 4 Performance</span></span>
<span data-ttu-id="27e29-103">Dustin Metzgar</span><span class="sxs-lookup"><span data-stu-id="27e29-103">Dustin Metzgar</span></span>

 <span data-ttu-id="27e29-104">Wenlong Dongu</span><span class="sxs-lookup"><span data-stu-id="27e29-104">Wenlong Dong</span></span>

 <span data-ttu-id="27e29-105">Microsoft Corporation ' ın Eylül 2010</span><span class="sxs-lookup"><span data-stu-id="27e29-105">Microsoft Corporation, September 2010</span></span>

 <span data-ttu-id="27e29-106">Microsoft [!INCLUDE[netfx40_long](../../../includes/netfx40-long-md.md)] büyük bir düzeltme ağır yatırımlarla Windows Workflow Foundation (WF), performans içerir.</span><span class="sxs-lookup"><span data-stu-id="27e29-106">Microsoft [!INCLUDE[netfx40_long](../../../includes/netfx40-long-md.md)] includes a major revision of the Windows Workflow Foundation (WF) with heavy investments in performance.</span></span>  <span data-ttu-id="27e29-107">Bu yeni bir düzeltme önemli tasarım değişiklikleri önceki sürümlerinden tanıtır [!INCLUDE[wf1](../../../includes/wf1-md.md)] .NET Framework 3.0 bir parçası olarak gönderilen ve [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="27e29-107">This new revision introduces significant design changes from the previous versions of [!INCLUDE[wf1](../../../includes/wf1-md.md)] that shipped as part of .NET Framework 3.0 and [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)].</span></span> <span data-ttu-id="27e29-108">Programlama modeli, çalışma zamanı ve performansı ve kullanılabilirliği büyük ölçüde artırmak için araç setinin bir mimariye kavuşturulan olmuştur.</span><span class="sxs-lookup"><span data-stu-id="27e29-108">It has been re-architected from the core of the programming model, runtime, and tooling to greatly improve performance and usability.</span></span> <span data-ttu-id="27e29-109">Bu konu, bu değişiklikleri önemli performans özellikleri gösterir ve bu önceki sürüme karşı karşılaştırır.</span><span class="sxs-lookup"><span data-stu-id="27e29-109">This topic shows the important performance characteristics of these revisions and compares them against those of the previous version.</span></span>

 <span data-ttu-id="27e29-110">Tek bir iş akışı bileşen performansı, WF3 WF4 arasındaki onlarca kat artırdı.</span><span class="sxs-lookup"><span data-stu-id="27e29-110">Individual workflow component performance has increased by orders of magnitude between WF3 and WF4.</span></span>  <span data-ttu-id="27e29-111">Windows Communication Foundation (WCF) hizmetlerini elle kodlanmış ve oldukça küçük olacak şekilde WCF iş akışı hizmetleri arasında boşluk bırakır.</span><span class="sxs-lookup"><span data-stu-id="27e29-111">This leaves the gap between hand-coded Windows Communication Foundation (WCF) services and WCF workflow services to be quite small.</span></span>  <span data-ttu-id="27e29-112">İş akışı gecikme süresi içinde WF4 önemli ölçüde azalttı.</span><span class="sxs-lookup"><span data-stu-id="27e29-112">Workflow latency has been significantly reduced in WF4.</span></span>  <span data-ttu-id="27e29-113">Kalıcılık performans 2.5 3.0 faktörüyle arttı.</span><span class="sxs-lookup"><span data-stu-id="27e29-113">Persistence performance has increased by a factor of 2.5 - 3.0.</span></span>  <span data-ttu-id="27e29-114">İş akışı izleme yoluyla sistem durumu izleme önemli ölçüde daha az yüke sahiptir.</span><span class="sxs-lookup"><span data-stu-id="27e29-114">Health monitoring by means of workflow tracking has significantly less overhead.</span></span>  <span data-ttu-id="27e29-115">Bu, geçiş veya uygulamalarınızda WF4 benimsemek için neden cazip.</span><span class="sxs-lookup"><span data-stu-id="27e29-115">These are compelling reasons to migrate to or adopt WF4 in your applications.</span></span>

## <a name="terminology"></a><span data-ttu-id="27e29-116">Terminoloji</span><span class="sxs-lookup"><span data-stu-id="27e29-116">Terminology</span></span>
 <span data-ttu-id="27e29-117">Sürümü [!INCLUDE[wf1](../../../includes/wf1-md.md)] sunulan [!INCLUDE[netfx40_short](../../../includes/netfx40-short-md.md)] için bu konunun geri kalanı için WF4 anılacaktır.</span><span class="sxs-lookup"><span data-stu-id="27e29-117">The version of [!INCLUDE[wf1](../../../includes/wf1-md.md)] introduced in [!INCLUDE[netfx40_short](../../../includes/netfx40-short-md.md)] will be referred to as WF4 for the rest of this topic.</span></span>  [!INCLUDE[wf1](../../../includes/wf1-md.md)] <span data-ttu-id="27e29-118">.NET 3.0 kullanılmıştır ve birkaç küçük düzeltmeden sahipti [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)] SP1.</span><span class="sxs-lookup"><span data-stu-id="27e29-118">was introduced in .Net 3.0 and had a few minor revisions through [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)] SP1.</span></span> <span data-ttu-id="27e29-119">[!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)] Workflow Foundation sürümü başvurulabilir WF3 bu konunun geri kalanı için.</span><span class="sxs-lookup"><span data-stu-id="27e29-119">The [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)] version of Workflow Foundation will be referred to as WF3 for the rest of this topic.</span></span> <span data-ttu-id="27e29-120">WF3 gönderildiği [!INCLUDE[netfx40_short](../../../includes/netfx40-short-md.md)] yan yana WF4 ile.</span><span class="sxs-lookup"><span data-stu-id="27e29-120">WF3 is shipped in [!INCLUDE[netfx40_short](../../../includes/netfx40-short-md.md)] side-by-side with WF4.</span></span> <span data-ttu-id="27e29-121">WF3 yapılara WF4 geçirme hakkında daha fazla bilgi için bkz: [Windows Workflow Foundation 4 Geçiş Kılavuzu](https://go.microsoft.com/fwlink/?LinkID=153313)</span><span class="sxs-lookup"><span data-stu-id="27e29-121">For more information about migrating WF3 artifacts to WF4 see: [Windows Workflow Foundation 4 Migration Guide](https://go.microsoft.com/fwlink/?LinkID=153313)</span></span>

 <span data-ttu-id="27e29-122">Windows Communication Foundation (WCF) hizmet yönelimli uygulamalar oluşturmak için Microsoft'un programlama modelidir.</span><span class="sxs-lookup"><span data-stu-id="27e29-122">Windows Communication Foundation (WCF) is Microsoft’s unified programming model for building service-oriented applications.</span></span> <span data-ttu-id="27e29-123">İlk .net 3.0 WF3 birlikte bir parçası olarak kullanıma sunulmuştur ve artık'in temel bileşenlerinden biri olan [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="27e29-123">It was first introduced as part of .Net 3.0 together with WF3 and now is one of the key components of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span></span>

 <span data-ttu-id="27e29-124">Windows Server AppFabric oluşturun, ölçek ve Web uygulamaları ve IIS'de çalışan bileşik uygulamaları yönetmek kolaylaştıran tümleşik teknoloji kümesidir.</span><span class="sxs-lookup"><span data-stu-id="27e29-124">Windows Server AppFabric is a set of integrated technologies that make it easier to build, scale and manage Web and composite applications that run on IIS.</span></span> <span data-ttu-id="27e29-125">Hizmetleri ve iş akışlarını yönetme ve izleme araçları sağlar.</span><span class="sxs-lookup"><span data-stu-id="27e29-125">It provides tools for monitoring and managing services and workflows.</span></span> <span data-ttu-id="27e29-126">Daha fazla bilgi için [Windows Server AppFabric 1.0](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="27e29-126">For more information, see [Windows Server AppFabric 1.0](https://docs.microsoft.com/previous-versions/appfabric/ff384253(v=azure.10)).</span></span>

## <a name="goals"></a><span data-ttu-id="27e29-127">Hedefleri</span><span class="sxs-lookup"><span data-stu-id="27e29-127">Goals</span></span>
 <span data-ttu-id="27e29-128">Bu konu başlığının hedefi farklı senaryolar için ölçülen verilerle WF4 performans özellikleri göstermektir.</span><span class="sxs-lookup"><span data-stu-id="27e29-128">The goal of this topic is to show the performance characteristics of WF4 with data measured for different scenarios.</span></span> <span data-ttu-id="27e29-129">Ayrıca WF4 WF3 arasındaki ayrıntılı karşılaştırmalarıdır sağlar ve bu nedenle yeni bu düzeltmede yapılan önemli geliştirmeler gösterir.</span><span class="sxs-lookup"><span data-stu-id="27e29-129">It also provides detailed comparisons between WF4 and WF3, and thus shows the great improvements that have been made in this new revision.</span></span> <span data-ttu-id="27e29-130">Senaryolar ve bu makalede gösterilen verileri temel maliyetleri WF4 ve WF3 farklı yönlerini de ölçme.</span><span class="sxs-lookup"><span data-stu-id="27e29-130">The scenarios and data presented in this article quantify the underlying cost of different aspects of WF4 and WF3.</span></span> <span data-ttu-id="27e29-131">Bu veriler WF4 performans özellikleri anlamak yararlı ve WF3 geçişleri WF4 için planlama veya uygulama geliştirmesinde WF4 kullanarak yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-131">This data is useful in understanding the performance characteristics of WF4 and can be helpful in planning migrations from WF3 to WF4 or using WF4 in application development.</span></span> <span data-ttu-id="27e29-132">Ancak, bu makaledeki sunulan veriler ile sonuçları içinde dikkatli olunması.</span><span class="sxs-lookup"><span data-stu-id="27e29-132">However, care should be taken in the conclusions drawn from the data presented in this article.</span></span> <span data-ttu-id="27e29-133">Bir bileşik iş akışı uygulamasının performansını, yüksek oranda bağımlı iş akışını nasıl uygulandığını ve farklı bileşenleri ile tümleştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="27e29-133">The performance of a composite workflow application is highly dependent on how the workflow is implemented and how different components are integrated.</span></span> <span data-ttu-id="27e29-134">Bir uygulama performans özelliklerini belirlemek için her bir uygulama ölçmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="27e29-134">One must measure each application to determine the performance characteristics of that application.</span></span>

## <a name="overview-of-wf4-performance-enhancements"></a><span data-ttu-id="27e29-135">WF4 performans geliştirmelerini genel bakış</span><span class="sxs-lookup"><span data-stu-id="27e29-135">Overview of WF4 Performance Enhancements</span></span>
 <span data-ttu-id="27e29-136">WF4 dikkatli bir şekilde tasarlanmış ve yüksek performans ve ölçeklenebilirlik aşağıdaki bölümlerde açıklanan ile uygulanmıştır.</span><span class="sxs-lookup"><span data-stu-id="27e29-136">WF4 was carefully designed and implemented with high performance and scalability which are described in the following sections.</span></span>

### <a name="wf-runtime"></a><span data-ttu-id="27e29-137">WF çalışma zamanı</span><span class="sxs-lookup"><span data-stu-id="27e29-137">WF Runtime</span></span>
 <span data-ttu-id="27e29-138">Setinin merkezinde [!INCLUDE[wf1](../../../includes/wf1-md.md)] yürütme etkinliklerinin bir iş akışında yönlendiren bir zaman uyumsuz bir zamanlayıcı çalışma zamanıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-138">At the core of the [!INCLUDE[wf1](../../../includes/wf1-md.md)] runtime is an asynchronous scheduler that drives the execution of the activities in a workflow.</span></span> <span data-ttu-id="27e29-139">Bu yüksek performanslı, etkinlikler için öngörülebilir yürütme ortamı sağlar.</span><span class="sxs-lookup"><span data-stu-id="27e29-139">It provides a performant, predictable execution environment for activities.</span></span> <span data-ttu-id="27e29-140">Ortamda yürütme, devamlılık, tamamlama, iptal, özel durumlar ve öngörülebilir bir iş parçacığı modeli için iyi tanımlanmış bir sözleşme var.</span><span class="sxs-lookup"><span data-stu-id="27e29-140">The environment has a well-defined contract for execution, continuation, completion, cancellation, exceptions, and a predictable threading model.</span></span>

 <span data-ttu-id="27e29-141">WF3 kolaylığına WF4 çalışma zamanı daha verimli bir zamanlayıcı var.</span><span class="sxs-lookup"><span data-stu-id="27e29-141">In comparison to WF3, the WF4 runtime has a more efficient scheduler.</span></span> <span data-ttu-id="27e29-142">Bu, toplu iş öğelerini yürütülürken en çok verimli olan WCF için kullanılan g/ç iş parçacığı havuzu yararlanır.</span><span class="sxs-lookup"><span data-stu-id="27e29-142">It leverages the same I/O thread pool that is used for WCF, which is very efficient at executing batched work items.</span></span> <span data-ttu-id="27e29-143">İç iş öğesi Zamanlayıcı sıranın en sık karşılaşılan kullanım desenleri için optimize edilmiştir.</span><span class="sxs-lookup"><span data-stu-id="27e29-143">The internal work item scheduler queue is optimized for most common usage patterns.</span></span> <span data-ttu-id="27e29-144">WF4 çalışma zamanı yürütme durumları en az bir eşitleme ve olay ağır olay kaydı ve karmaşık eşitleme için durum geçişlerini gerçekleştirmek için çağırma WF3 bağlıdır ancak mantıksal, işleme çok hafif bir yolla da yönetir.</span><span class="sxs-lookup"><span data-stu-id="27e29-144">The WF4 runtime also manages the execution states in a very light-weight way with minimal synchronization and event handling logic, while WF3 depends on heavy-weight event registration and invocation to perform complex synchronization for state transitions.</span></span>

### <a name="data-storage-and-flow"></a><span data-ttu-id="27e29-145">Veri depolama ve akış</span><span class="sxs-lookup"><span data-stu-id="27e29-145">Data Storage and Flow</span></span>
 <span data-ttu-id="27e29-146">WF3 içinde tür tarafından uygulanan bağımlılık özellikleri aracılığıyla bir etkinlikle ilişkili verileri modellenmiştir <xref:System.Windows.DependencyProperty>.</span><span class="sxs-lookup"><span data-stu-id="27e29-146">In WF3, data associated with an activity is modeled through dependency properties implemented by the type <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="27e29-147">Bağımlılık özelliği desenini Windows Presentation Foundation (WPF) kullanıma sunulmuştur.</span><span class="sxs-lookup"><span data-stu-id="27e29-147">The dependency property pattern was introduced in Windows Presentation Foundation (WPF).</span></span> <span data-ttu-id="27e29-148">Genel olarak, bu düzen kolay veri bağlama ve diğer kullanıcı Arabirimi özellikleri desteklemek için çok esnektir.</span><span class="sxs-lookup"><span data-stu-id="27e29-148">In general, this pattern is very flexible to support easy data binding and other UI features.</span></span> <span data-ttu-id="27e29-149">Ancak, deseni, iş akışı tanımında statik alanlar olarak tanımlanması için özellikleri gerektirir.</span><span class="sxs-lookup"><span data-stu-id="27e29-149">However, the pattern requires the properties to be defined as static fields in the workflow definition.</span></span> <span data-ttu-id="27e29-150">Her [!INCLUDE[wf1](../../../includes/wf1-md.md)] çalışma zamanı özellik değerlerini alır veya ayarlar, yoğun ağırlıklı arama mantığı içerir.</span><span class="sxs-lookup"><span data-stu-id="27e29-150">Whenever the [!INCLUDE[wf1](../../../includes/wf1-md.md)] runtime sets or gets the property values, it involves heavily-weighted look-up logic.</span></span>

 <span data-ttu-id="27e29-151">WF4 mantığı kapsam verileri Temizle bir iş akışında verilerin nasıl işlendiğini büyük ölçüde artırmak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="27e29-151">WF4 uses clear data scoping logic to greatly improve how data is handled in a workflow.</span></span> <span data-ttu-id="27e29-152">İki farklı kavram kullanarak etkinlik sınırları boyunca akan verileri etkinliği depolanan veriler ayırır: değişkenler ve bağımsız değişkenler.</span><span class="sxs-lookup"><span data-stu-id="27e29-152">It separates the data stored in an activity from the data that is flowing across the activity boundaries by using two different concepts: variables and arguments.</span></span> <span data-ttu-id="27e29-153">Değişkenleri ve ", / Out/Inout" bağımsız değişkenler için clear hiyerarşik bir kapsamı kullanarak, etkinlikler için veri kullanımı karmaşıklığı önemli ölçüde azaltılır ve veri ömrünü da otomatik olarak kapsamlıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-153">By using a clear hierarchical scope for variables and "In/Out/InOut" arguments, the data usage complexity for activities is dramatically reduced and the lifetime of the data is also automatically scoped.</span></span> <span data-ttu-id="27e29-154">Etkinlikler, kendi bağımsız değişken tarafından açıklanan iyi tanımlanmış bir imzaya sahip.</span><span class="sxs-lookup"><span data-stu-id="27e29-154">Activities have a well-defined signature described by its arguments.</span></span> <span data-ttu-id="27e29-155">Bir etkinlik inceleyerek hangi verileri almak için bekliyor ve hangi verilerin tarafından yürütülmesinin bir sonucu olarak üretilecek belirleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27e29-155">By simply inspecting an activity you can determine what data it expects to receive and what data will be produced by it as the result of its execution.</span></span>

 <span data-ttu-id="27e29-156">Bir iş akışı oluşturulurken WF3 içinde etkinlikleri hazırlaması başlatılmış.</span><span class="sxs-lookup"><span data-stu-id="27e29-156">In WF3 activities were initialized when a workflow was created.</span></span> <span data-ttu-id="27e29-157">Yalnızca ilgili etkinlikleri yürütürken WF 4'te etkinlikleri başlatılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-157">In WF 4 activities are initialized only when the corresponding activities are executing.</span></span> <span data-ttu-id="27e29-158">Bu yeni bir iş akışı örneği oluşturulduğunda ve bu nedenle daha fazla verimlilik elde ettiği başlatma/Uninitialize işlemleri gerçekleştirmeden daha basit bir etkinlik yaşam döngüsü sağlar</span><span class="sxs-lookup"><span data-stu-id="27e29-158">This allows a simpler activity lifecycle without performing Initialize/Uninitialize operations when a new workflow instance is created, and thus has achieved more efficiency</span></span>

### <a name="control-flow"></a><span data-ttu-id="27e29-159">Denetim Akışı</span><span class="sxs-lookup"><span data-stu-id="27e29-159">Control Flow</span></span>
 <span data-ttu-id="27e29-160">Herhangi bir programlama dilinde olduğu gibi [!INCLUDE[wf1](../../../includes/wf1-md.md)] sıralama, döngü, dallanma ve desenler için denetim akışı etkinlikleri kümesi sunarak iş akışı tanımları için Denetim akışları için destek sağlar.</span><span class="sxs-lookup"><span data-stu-id="27e29-160">Just as in any programming language, [!INCLUDE[wf1](../../../includes/wf1-md.md)] provides support for control flows for workflow definitions by introducing a set of control flow activities for sequencing, looping, branching and other patterns.</span></span> <span data-ttu-id="27e29-161">İçinde aynı etkinlik, yeni bir yeniden yürütülür gerektiğinde WF3 <xref:System.Workflow.ComponentModel.ActivityExecutionContext> oluşturulur ve etkinlik dayalı bir ağır serileştirme ve seri durumundan çıkarma mantık aracılığıyla kopyalanan <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter>.</span><span class="sxs-lookup"><span data-stu-id="27e29-161">In WF3, when the same activity needs to be re-executed, a new <xref:System.Workflow.ComponentModel.ActivityExecutionContext> is created and the activity is cloned through a heavy-weight serialization and deserialization logic based on <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter>.</span></span> <span data-ttu-id="27e29-162">Genellikle performans yinelemeli denetim akışı için bir etkinlik dizisini çalıştırma daha yavaştır.</span><span class="sxs-lookup"><span data-stu-id="27e29-162">Usually the performance for iterative control flows is much slower than executing a sequence of activities.</span></span>

 <span data-ttu-id="27e29-163">WF4 bu oldukça farklı işler.</span><span class="sxs-lookup"><span data-stu-id="27e29-163">WF4 handles this quite differently.</span></span> <span data-ttu-id="27e29-164">Etkinlik şablonunu alıp, yeni bir ActivityInstance nesnesi oluşturur ve Zamanlayıcı kuyruğa ekler.</span><span class="sxs-lookup"><span data-stu-id="27e29-164">It takes the activity template, creates a new ActivityInstance object, and adds it to the scheduler queue.</span></span> <span data-ttu-id="27e29-165">Tüm bu işlem yalnızca açık nesne oluşturma içerir ve çok hafif.</span><span class="sxs-lookup"><span data-stu-id="27e29-165">This whole process only involves explicit object creation and is very light-weight.</span></span>

### <a name="asynchronous-programming"></a><span data-ttu-id="27e29-166">Zaman uyumsuz programlama</span><span class="sxs-lookup"><span data-stu-id="27e29-166">Asynchronous Programming</span></span>
 <span data-ttu-id="27e29-167">Uygulamalar genellikle daha iyi performans ve ölçeklenebilirlik g/ç gibi uzun süre çalışan engelleme işlemleri veya dağıtılmış bilgi işlem işlemleri için zaman uyumsuz programlama ile sahiptir.</span><span class="sxs-lookup"><span data-stu-id="27e29-167">Applications usually have better performance and scalability with asynchronous programming for long running blocking operations such as I/O or distributed computing operations.</span></span> <span data-ttu-id="27e29-168">Temel etkinlik türleri aracılığıyla zaman uyumsuz destek WF4 sağlar <xref:System.Activities.AsyncCodeActivity>, <xref:System.Activities.AsyncCodeActivity%601>.</span><span class="sxs-lookup"><span data-stu-id="27e29-168">WF4 provides asynchronous support through base activity types <xref:System.Activities.AsyncCodeActivity>, <xref:System.Activities.AsyncCodeActivity%601>.</span></span> <span data-ttu-id="27e29-169">Çalışma zamanı zaman uyumsuz etkinlikler yerel olarak anlıyor ve zaman uyumsuz iş bekleyen olmakla birlikte bu nedenle otomatik olarak örnek no-persist bölgesinde koyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27e29-169">The runtime natively understands asynchronous activities and therefore can automatically put the instance in a no-persist zone while the asynchronous work is outstanding.</span></span> <span data-ttu-id="27e29-170">Özel etkinlikler iş akışı Zamanlayıcı iş parçacığı bulunduran ve paralel olarak çalıştırmak için herhangi bir etkinlik engelleme olmadan zaman uyumsuz çalışmayı gerçekleştirmek için bu türlerinden türeyebilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-170">Custom activities can derive from these types to perform asynchronous work without holding the workflow scheduler thread and blocking any activities that may be able to run in parallel.</span></span>

### <a name="messaging"></a><span data-ttu-id="27e29-171">İleti</span><span class="sxs-lookup"><span data-stu-id="27e29-171">Messaging</span></span>
 <span data-ttu-id="27e29-172">Başlangıçta WF3 çok olan dış olayları ya da web aracılığıyla sınırlı Mesajlaşma destek hizmetleri çağrıları.</span><span class="sxs-lookup"><span data-stu-id="27e29-172">Initially WF3 had very limited messaging support through external events or web services invocations.</span></span> <span data-ttu-id="27e29-173">.NET 3.5, iş akışları WCF istemcileri olarak uygulanan veya WCF hizmetleri kullanıma sunulan <xref:System.Workflow.Activities.SendActivity> ve <xref:System.Workflow.Activities.ReceiveActivity>.</span><span class="sxs-lookup"><span data-stu-id="27e29-173">In .Net 3.5, workflows could be implemented as WCF clients or exposed as WCF services through <xref:System.Workflow.Activities.SendActivity> and <xref:System.Workflow.Activities.ReceiveActivity>.</span></span> <span data-ttu-id="27e29-174">WF4 içinde iş akışı tabanlı bir Mesajlaşma programlama kavramı daha sıkı bir tümleştirme WCF, WF mantığının Mesajlaşma aracılığıyla güçlendirilmiş.</span><span class="sxs-lookup"><span data-stu-id="27e29-174">In WF4, the concept of workflow-based messaging programming has been further strengthened through the tight integration of WCF messaging logic into WF.</span></span>

 <span data-ttu-id="27e29-175">WCF .net 4'te sunulan birleşik ileti işleme işlem hattı, önemli ölçüde daha iyi performans ve ölçeklenebilirlik WF3 daha WF4 Hizmetleri yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="27e29-175">The unified message processing pipeline provided in WCF in .Net 4 helps WF4 services to have significantly better performance and scalability than WF3.</span></span> <span data-ttu-id="27e29-176">WF4, karmaşık ileti Exchange desenleri (MEPs) modelleyebilir daha zengin Mesajlaşma programlama desteği de sağlar.</span><span class="sxs-lookup"><span data-stu-id="27e29-176">WF4 also provides richer messaging programming support that can model complex Message Exchange Patterns (MEPs).</span></span> <span data-ttu-id="27e29-177">Geliştiriciler, ya da yazılı Hizmet sözleşmeleri, kolay bir programlama veya türsüz hizmet sözleşme serileştirme maliyetler için ödeme gerek kalmadan daha iyi performans elde etmek için elde etmek için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27e29-177">Developers can use either typed service contracts to achieve easy programming or un-typed service contracts to achieve better performance without paying serialization costs.</span></span> <span data-ttu-id="27e29-178">İstemci tarafı önbelleğe alma desteği aracılığıyla kanal <xref:System.ServiceModel.Activities.SendMessageChannelCache> WF4 sınıfında geliştiricilerin çok az bir çabayla hızlı uygulamalar oluşturmasına yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="27e29-178">The client-side channel caching support through the <xref:System.ServiceModel.Activities.SendMessageChannelCache> class in WF4 helps developers build fast applications with minimal effort.</span></span> <span data-ttu-id="27e29-179">Daha fazla bilgi için [etkinlikleri göndermek için önbellek paylaşımı düzeylerini değiştirme](../../../docs/framework/wcf/feature-details/changing-the-cache-sharing-levels-for-send-activities.md).</span><span class="sxs-lookup"><span data-stu-id="27e29-179">For more information, see [Changing the Cache Sharing Levels for Send Activities](../../../docs/framework/wcf/feature-details/changing-the-cache-sharing-levels-for-send-activities.md).</span></span>

### <a name="declarative-programming"></a><span data-ttu-id="27e29-180">Bildirim temelli programlama</span><span class="sxs-lookup"><span data-stu-id="27e29-180">Declarative Programming</span></span>
 <span data-ttu-id="27e29-181">WF4 bir temiz ve basit tanımlayıcı programlama çerçevesi model iş süreçleri ve hizmetleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="27e29-181">WF4 provides a clean and simple declarative programming framework to model business processes and services.</span></span> <span data-ttu-id="27e29-182">Tam bildirim temelli etkinliklerle, hiçbir kod-iş akışı yazma büyük ölçüde basitleştirme yanında, oluşumunu programlama modelini destekler.</span><span class="sxs-lookup"><span data-stu-id="27e29-182">The programming model supports fully declarative composition of activities, with no code-beside, greatly simplifying workflow authoring.</span></span> <span data-ttu-id="27e29-183">İçinde [!INCLUDE[netfx40_short](../../../includes/netfx40-short-md.md)], tek bir derlemeye hem WPF ve WF desteklemek için System.Xaml.dll XAML tabanlı bildirime dayalı programlama çerçevesi birleşik.</span><span class="sxs-lookup"><span data-stu-id="27e29-183">In [!INCLUDE[netfx40_short](../../../includes/netfx40-short-md.md)], the XAML-based declarative programming framework has been unified into the single assembly System.Xaml.dll to support both WPF and WF.</span></span>

 <span data-ttu-id="27e29-184">XAML WF4, gerçek anlamda bildirim temelli bir deneyim sağlar ve etkinlikleri ve .NET kullanarak yerleşik türlerine başvuran tüm iş akışı tanımı için XML biçimlendirme içinde tanımlanmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="27e29-184">In WF4, XAML provides a truly declarative experience and allows for the entire definition of the workflow to be defined in XML markup, referencing activities and types built using .NET.</span></span> <span data-ttu-id="27e29-185">Özel arka plan kod mantığının işe karıştırılmaksızın WF3 içinde XOML biçimi ile yapmak zordu.</span><span class="sxs-lookup"><span data-stu-id="27e29-185">This was difficult to do in WF3 with XOML format without involving custom code-behind logic.</span></span> <span data-ttu-id="27e29-186">Yeni XAML yığın .net 4'te, serileştirme/iş akışı yapıtları seri durumdan çıkarılırken çok daha iyi performans sahiptir ve bildirim temelli programlama daha cazip ve sağlam hale getirir.</span><span class="sxs-lookup"><span data-stu-id="27e29-186">The new XAML-stack in .Net 4 has much better performance in serializing/deserializing workflow artifacts and makes declarative programming more attractive and solid.</span></span>

### <a name="workflow-designer"></a><span data-ttu-id="27e29-187">İş Akışı Tasarımcısı</span><span class="sxs-lookup"><span data-stu-id="27e29-187">Workflow Designer</span></span>
 <span data-ttu-id="27e29-188">Tam bildirim temelli programlama desteği WF4 açıkça daha büyük iş akışları için tasarım zamanı performans gereksinimleri getirir.</span><span class="sxs-lookup"><span data-stu-id="27e29-188">Fully declarative programming support for WF4 explicitly imposes higher requirements for design time performance for large workflows.</span></span> <span data-ttu-id="27e29-189">İş Akışı Tasarımcısı'nda WF4 WF3 için daha büyük iş akışları için çok daha yüksek ölçeklenebilirlikten sahiptir.</span><span class="sxs-lookup"><span data-stu-id="27e29-189">The Workflow designer in WF4 has much better scalability for large workflows than that for WF3.</span></span> <span data-ttu-id="27e29-190">Bir iş akışı birkaç yüz etkinliklerin WF3 tasarımcı ile yüklemek neredeyse imkansız olduğu sürece kullanıcı Arabirimi sanallaştırma desteği sayesinde, Tasarımcı kolayca 1000 etkinlik büyük bir iş akışı birkaç saniye içinde yükleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27e29-190">With UI virtualization support, the designer can easily load a large workflow of 1000 activities in a few seconds, while it is almost impossible to load a workflow of a few hundred activities with the WF3 designer.</span></span>

## <a name="component-level-performance-comparisons"></a><span data-ttu-id="27e29-191">Bileşen düzeyinde performans karşılaştırmaları</span><span class="sxs-lookup"><span data-stu-id="27e29-191">Component-level Performance Comparisons</span></span>
 <span data-ttu-id="27e29-192">Bu bölümde WF3 ve WF4 iş akışlarında etkinlikler arasında doğrudan bir karşılaştırma verilerini içerir.</span><span class="sxs-lookup"><span data-stu-id="27e29-192">This section contains data on direct comparisons between individual activities in WF3 and WF4 workflows.</span></span>  <span data-ttu-id="27e29-193">Kalıcılık gibi önemli alanlardan performans etkinliği ayrı Bileşenler'den daha çok büyük bir etkiye sahip.</span><span class="sxs-lookup"><span data-stu-id="27e29-193">Key areas like persistence have a more profound impact on performance than the individual activity components.</span></span>  <span data-ttu-id="27e29-194">Bileşenleri artık düzenleme el kodlanmış mantıksal karşı Karşılaştırılacak hızlı olduğundan WF4 bileşenleri tek tek'taki performans iyileştirmelerinden yine de önemlidir.</span><span class="sxs-lookup"><span data-stu-id="27e29-194">The performance improvements in individual components in WF4 are important though because the components are now fast enough to be compared against hand-coded orchestration logic.</span></span>  <span data-ttu-id="27e29-195">Bir örneği, sonraki bölümde ele alınmıştır: "Hizmet oluşturma senaryosu."</span><span class="sxs-lookup"><span data-stu-id="27e29-195">An example of which is covered in the next section: "Service Composition Scenario."</span></span>

### <a name="environment-setup"></a><span data-ttu-id="27e29-196">Ortam Kurulumu</span><span class="sxs-lookup"><span data-stu-id="27e29-196">Environment Setup</span></span>
 <span data-ttu-id="27e29-197">![İş akışı performans sınama ortamı](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span><span class="sxs-lookup"><span data-stu-id="27e29-197">![Workflow Performance Test Environment](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span></span>

 <span data-ttu-id="27e29-198">Yukarıdaki şekilde, bileşen düzeyinde performans ölçümü için kullanılan makine yapılandırmasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="27e29-198">The above figure shows the machine configuration used for component-level performance measurement.</span></span> <span data-ttu-id="27e29-199">Tek bir sunucu ve beş istemciler üzerinde bir 1 GB/sn Ethernet ağ arabirim bağlı.</span><span class="sxs-lookup"><span data-stu-id="27e29-199">A single server and five clients connected over one 1-Gbps Ethernet network interface.</span></span> <span data-ttu-id="27e29-200">Kolay ölçümleri için sunucu Windows Server 2008 x86 çalıştıran bir çift proc/dört çekirdek sunucusunun tek bir çekirdek kullanmak için yapılandırılmış.</span><span class="sxs-lookup"><span data-stu-id="27e29-200">For easy measurements, the server is configured to use a single core of a dual-proc/quad-core server  running Windows Server 2008 x86.</span></span> <span data-ttu-id="27e29-201">CPU kullanımı sistem neredeyse % 100 oranında korunur.</span><span class="sxs-lookup"><span data-stu-id="27e29-201">The system CPU utilization is maintained at nearly 100%.</span></span>

### <a name="test-details"></a><span data-ttu-id="27e29-202">Test ayrıntıları</span><span class="sxs-lookup"><span data-stu-id="27e29-202">Test Details</span></span>
 <span data-ttu-id="27e29-203">WF3 <xref:System.Workflow.Activities.CodeActivity> büyük olasılıkla bir WF3 iş akışında kullanılabilecek basit bir etkinliktir.</span><span class="sxs-lookup"><span data-stu-id="27e29-203">The WF3 <xref:System.Workflow.Activities.CodeActivity> is likely the simplest activity that can be used in a WF3 workflow.</span></span>  <span data-ttu-id="27e29-204">Etkinlik iş akışı programcının özel kod içine koyabilirsiniz kodu arka plan içindeki bir yöntemi çağırır.</span><span class="sxs-lookup"><span data-stu-id="27e29-204">The activity calls a method in the code-behind that the workflow programmer can put custom code into.</span></span>  <span data-ttu-id="27e29-205">WF4 içinde hiçbir karşılıklarına WF3 yoktur <xref:System.Workflow.Activities.CodeActivity> aynı işlevselliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="27e29-205">In WF4, there is no direct analog to the WF3 <xref:System.Workflow.Activities.CodeActivity> that provides the same functionality.</span></span>  <span data-ttu-id="27e29-206">Unutmayın bir <xref:System.Activities.CodeActivity> temel sınıfta WF3 için ilgili olmayan WF4 <xref:System.Workflow.Activities.CodeActivity>.</span><span class="sxs-lookup"><span data-stu-id="27e29-206">Note that there is a <xref:System.Activities.CodeActivity> base class in WF4 that is not related to the WF3 <xref:System.Workflow.Activities.CodeActivity>.</span></span>  <span data-ttu-id="27e29-207">Özel etkinlikler ve yalnızca XAML iş akışları oluşturmak için iş akışı yazarları önerilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-207">Workflow authors are encouraged to create custom activities and build XAML-only workflows.</span></span>  <span data-ttu-id="27e29-208">Bir etkinlik testlerinde adlı `Comment` yerine boş bir kullanılan <xref:System.Workflow.Activities.CodeActivity> WF4 iş akışlarında.</span><span class="sxs-lookup"><span data-stu-id="27e29-208">In the tests below, an activity called `Comment` is used in place of an empty <xref:System.Workflow.Activities.CodeActivity> in WF4 workflows.</span></span>  <span data-ttu-id="27e29-209">Kodda `Comment` etkinlik aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="27e29-209">The code in the `Comment` activity is as follows:</span></span>

```
[ContentProperty("Body")]
    public sealed class Comment : CodeActivity
    {
        public Comment()
            : base()
        {
        }

        [DefaultValue(null)]
        public Activity Body
        {
            get;
            set;
        }

        protected override void Execute(CodeActivityContext context)
        {
        }
    }
```

### <a name="empty-workflow"></a><span data-ttu-id="27e29-210">Boş iş akışı</span><span class="sxs-lookup"><span data-stu-id="27e29-210">Empty Workflow</span></span>
 <span data-ttu-id="27e29-211">Bu test, hiçbir alt etkinliklerle bir sıralı iş akışı kullanır.</span><span class="sxs-lookup"><span data-stu-id="27e29-211">This test uses a sequence workflow with no child activities.</span></span>

### <a name="single-activity"></a><span data-ttu-id="27e29-212">Tek Etkinlik</span><span class="sxs-lookup"><span data-stu-id="27e29-212">Single Activity</span></span>
 <span data-ttu-id="27e29-213">Bir alt etkinlik içeren bir sıralı iş akışı iş akışıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-213">The workflow is a sequence workflow containing one child activity.</span></span>  <span data-ttu-id="27e29-214">Etkinlik bir <xref:System.Workflow.Activities.CodeActivity> WF3 durumda kod olmadan ve `Comment` etkinlik WF4 durumda.</span><span class="sxs-lookup"><span data-stu-id="27e29-214">The activity is a <xref:System.Workflow.Activities.CodeActivity> with no code in the WF3 case and a `Comment` activity in the WF4 case.</span></span>

### <a name="while-with-1000-iterations"></a><span data-ttu-id="27e29-215">While 1000 yineleme ile</span><span class="sxs-lookup"><span data-stu-id="27e29-215">While with 1000 Iterations</span></span>
 <span data-ttu-id="27e29-216">Bir sıralı iş akışı içeren <xref:System.Activities.Statements.While> etkinliği ile bir alt etkinlik Döngüdeki herhangi bir iş yapmaz.</span><span class="sxs-lookup"><span data-stu-id="27e29-216">The sequence workflow contains one <xref:System.Activities.Statements.While> activity with one child activity in the loop that does not perform any work.</span></span>

### <a name="replicator-compared-to-parallelforeach"></a><span data-ttu-id="27e29-217">Çoğaltıcı ParallelForEach için karşılaştırma</span><span class="sxs-lookup"><span data-stu-id="27e29-217">Replicator compared to ParallelForEach</span></span>
 <span data-ttu-id="27e29-218"><xref:System.Workflow.Activities.ReplicatorActivity> sıralı ve Paralel yürütme modları WF3 vardır.</span><span class="sxs-lookup"><span data-stu-id="27e29-218"><xref:System.Workflow.Activities.ReplicatorActivity> in WF3 has sequential and parallel execution modes.</span></span>  <span data-ttu-id="27e29-219">Sıralı modunda etkinliğe ilişkin performans benzer <xref:System.Workflow.Activities.WhileActivity>.</span><span class="sxs-lookup"><span data-stu-id="27e29-219">In sequential mode, the activity’s performance is similar to the <xref:System.Workflow.Activities.WhileActivity>.</span></span>  <span data-ttu-id="27e29-220"><xref:System.Workflow.Activities.ReplicatorActivity> Paralel yürütme için kullanışlıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-220">The <xref:System.Workflow.Activities.ReplicatorActivity> is most useful for parallel execution.</span></span>  <span data-ttu-id="27e29-221">Bu WF4 analog olan <xref:System.Activities.Statements.ParallelForEach%601> etkinlik.</span><span class="sxs-lookup"><span data-stu-id="27e29-221">The WF4 analog for this is the <xref:System.Activities.Statements.ParallelForEach%601> activity.</span></span>

 <span data-ttu-id="27e29-222">Aşağıdaki diyagramda, bu test için kullanılan iş akışlarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="27e29-222">The following diagram shows the workflows used for this test.</span></span> <span data-ttu-id="27e29-223">WF3 iş akışı sol tarafta ve WF4 iş akışı sağ tarafta.</span><span class="sxs-lookup"><span data-stu-id="27e29-223">The WF3 workflow is on the left and the WF4 workflow is on the right.</span></span>

 <span data-ttu-id="27e29-224">![WF3 ReplicatorActivity ve WF4 ParallelForEach](../../../docs/framework/windows-workflow-foundation/media/replicatorandparallelforeach.gif "ReplicatorAndParallelForEach")</span><span class="sxs-lookup"><span data-stu-id="27e29-224">![WF3 ReplicatorActivity and WF4 ParallelForEach](../../../docs/framework/windows-workflow-foundation/media/replicatorandparallelforeach.gif "ReplicatorAndParallelForEach")</span></span>

### <a name="sequential-workflow-with-five-activities"></a><span data-ttu-id="27e29-225">Beş etkinlikleri olan sıralı iş akışı</span><span class="sxs-lookup"><span data-stu-id="27e29-225">Sequential Workflow with Five Activities</span></span>
 <span data-ttu-id="27e29-226">Bu test, sıralı biçimde yürütmek birkaç etkinliği olan etkisini göstermek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="27e29-226">This test is meant to show the effect of having several activities execute in sequence.</span></span>  <span data-ttu-id="27e29-227">Sırayla beş etkinlikler vardır.</span><span class="sxs-lookup"><span data-stu-id="27e29-227">There are five activities in the sequence.</span></span>

### <a name="transaction-scope"></a><span data-ttu-id="27e29-228">İşlem kapsamı</span><span class="sxs-lookup"><span data-stu-id="27e29-228">Transaction Scope</span></span>
 <span data-ttu-id="27e29-229">Her yineleme için yeni bir iş akışı örneği oluşturulmamış işlem kapsamı test diğer testlerden biraz farklıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-229">The transaction scope test differs from the other tests slightly in that a new workflow instance is not created for every iteration.</span></span>  <span data-ttu-id="27e29-230">Bunun yerine, iş akışı biraz ile yapılandırılmış döngü içeren bir <xref:System.Activities.Statements.TransactionScope> hiçbir çalışır, tek bir etkinlik içeren etkinlik.</span><span class="sxs-lookup"><span data-stu-id="27e29-230">Instead, the workflow is structured with a while loop containing a <xref:System.Activities.Statements.TransactionScope> activity containing a single activity that does no work.</span></span>  <span data-ttu-id="27e29-231">Her bir toplu 50 yinelemelerin while aracılığıyla döngü, tek bir işlem olarak sayılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-231">Each run of a batch of 50 iterations through the while loop is counted as a single operation.</span></span>

### <a name="compensation"></a><span data-ttu-id="27e29-232">Dengeleme</span><span class="sxs-lookup"><span data-stu-id="27e29-232">Compensation</span></span>
 <span data-ttu-id="27e29-233">Adlı tek bir üst öğesi dengelenebilir etkinlik WF3 iş akışı sahip `WorkScope`.</span><span class="sxs-lookup"><span data-stu-id="27e29-233">The WF3 workflow has a single compensatable activity named `WorkScope`.</span></span>  <span data-ttu-id="27e29-234">Yalnızca bir etkinlik uygulayan <xref:System.Workflow.ComponentModel.ICompensatableActivity> arabirimi:</span><span class="sxs-lookup"><span data-stu-id="27e29-234">The activity simply implements the <xref:System.Workflow.ComponentModel.ICompensatableActivity> interface:</span></span>

```
class WorkScope :
        CompositeActivity, ICompensatableActivity
    {
        public WorkScope() : base() { }

        public WorkScope(string name)
        {
            this.Name = name;
        }

        public ActivityExecutionStatus Compensate(
            ActivityExecutionContext executionContext)
        {
            return ActivityExecutionStatus.Closed;
        }
    }
```

 <span data-ttu-id="27e29-235">Hata işleyicisi hedefleri `WorkScope` etkinlik. WF4 iş akışı eşit basit kalıyor.</span><span class="sxs-lookup"><span data-stu-id="27e29-235">The fault handler targets the `WorkScope` activity.The WF4 workflow is equally simplistic.</span></span>  <span data-ttu-id="27e29-236">A <xref:System.Activities.Statements.CompensableActivity> gövde ve bir dengeleme işleyicisini vardır.</span><span class="sxs-lookup"><span data-stu-id="27e29-236">A <xref:System.Activities.Statements.CompensableActivity> has a body and a compensation handler.</span></span>  <span data-ttu-id="27e29-237">Bir açık compensate dizideki sonraki.</span><span class="sxs-lookup"><span data-stu-id="27e29-237">An explicit compensate is next in the sequence.</span></span>  <span data-ttu-id="27e29-238">Gövde etkinliği ve maaş işleyicisi etkinliği boş hem uygulamalardır:</span><span class="sxs-lookup"><span data-stu-id="27e29-238">The body activity and compensation handler activity are both empty implementations:</span></span>

```
public sealed class CompensableActivityEmptyCompensation : CodeActivity
    {
        public CompensableActivityEmptyCompensation()
            : base() { }

        public Activity Body { get; set; }

        protected override void Execute(CodeActivityContext context) { }
    }
    public sealed class CompensableActivityEmptyBody : CodeActivity
    {
        public CompensableActivityEmptyBody()
            : base() { }

        public Activity Body { get; set; }

        protected override void Execute(CodeActivityContext context) { }
    }
```

 <span data-ttu-id="27e29-239">![WF3 ve WF iş akışlarını temel maaş](../../../docs/framework/windows-workflow-foundation/media/basiccompensationworkflows.gif "BasicCompensationWorkflows")</span><span class="sxs-lookup"><span data-stu-id="27e29-239">![WF3 and WF basic compensation workflows](../../../docs/framework/windows-workflow-foundation/media/basiccompensationworkflows.gif "BasicCompensationWorkflows")</span></span>

 <span data-ttu-id="27e29-240">Şekil 2 – WF3 (solda) ve WF4 (sağda) temel Maaş iş akışları</span><span class="sxs-lookup"><span data-stu-id="27e29-240">Figure 2 – WF3 (left) and WF4 (right) basic compensation workflows</span></span>

### <a name="performance-test-results"></a><span data-ttu-id="27e29-241">Performans testi sonuçları</span><span class="sxs-lookup"><span data-stu-id="27e29-241">Performance Test Results</span></span>
 <span data-ttu-id="27e29-242">![Performans testi sonuçları](../../../docs/framework/windows-workflow-foundation/media/performancedata.gif "PerformanceData")</span><span class="sxs-lookup"><span data-stu-id="27e29-242">![Performance Test Results](../../../docs/framework/windows-workflow-foundation/media/performancedata.gif "PerformanceData")</span></span>

 <span data-ttu-id="27e29-243">![Performans testi veri grafiği](../../../docs/framework/windows-workflow-foundation/media/performancetestchart.gif "PerformanceTestChart")</span><span class="sxs-lookup"><span data-stu-id="27e29-243">![Performance Test Data Graph](../../../docs/framework/windows-workflow-foundation/media/performancetestchart.gif "PerformanceTestChart")</span></span>

 <span data-ttu-id="27e29-244">Tüm testler, iş akışlarında işlem kapsamı test dışında saniye başına ölçülür.</span><span class="sxs-lookup"><span data-stu-id="27e29-244">All tests are measured in workflows per second with the exception of the transaction scope test.</span></span>  <span data-ttu-id="27e29-245">Yukarıdaki görüldüğü gibi [!INCLUDE[wf1](../../../includes/wf1-md.md)] panosunda, özellikle while gibi aynı etkinliğin birden çok yürütme gerektiren alanları genelinde çalışma zamanı performansı geliştirildi döngü.</span><span class="sxs-lookup"><span data-stu-id="27e29-245">As can be seen above, the [!INCLUDE[wf1](../../../includes/wf1-md.md)] runtime performance has improved across the board, especially in areas that require multiple executions of the same activity like the while loop.</span></span>

## <a name="service-composition-scenario"></a><span data-ttu-id="27e29-246">Hizmetleri oluşturma senaryosu</span><span class="sxs-lookup"><span data-stu-id="27e29-246">Service Composition Scenario</span></span>
 <span data-ttu-id="27e29-247">"Bileşen düzeyinde performans karşılaştırma," önceki bölümde gösterildiği gibi ek yüküne WF3 WF4 arasındaki önemli bir azalma olmuştur.</span><span class="sxs-lookup"><span data-stu-id="27e29-247">As is shown in the previous section, "Component-level Performance Comparisons," there has been a significant reduction in overhead between WF3 and WF4.</span></span>  <span data-ttu-id="27e29-248">WCF iş akışı Hizmetleri artık el kodlanmış WCF hizmetleri performansını neredeyse eşleşen ancak tüm avantajlarını çözümlenmedi [!INCLUDE[wf1](../../../includes/wf1-md.md)] çalışma zamanı.</span><span class="sxs-lookup"><span data-stu-id="27e29-248">WCF workflow services can now almost match the performance of hand-coded WCF services but still have all the benefits of the [!INCLUDE[wf1](../../../includes/wf1-md.md)] runtime.</span></span>  <span data-ttu-id="27e29-249">Bu test senaryosu WF4 WCF iş akışı hizmetinde bir WCF Hizmeti karşılaştırır.</span><span class="sxs-lookup"><span data-stu-id="27e29-249">This test scenario compares a WCF service against a WCF workflow service in WF4.</span></span>

### <a name="online-store-service"></a><span data-ttu-id="27e29-250">Çevrimiçi Store hizmeti</span><span class="sxs-lookup"><span data-stu-id="27e29-250">Online Store Service</span></span>
 <span data-ttu-id="27e29-251">Windows Workflow Foundation'ın gücünü birkaç hizmet kullanan işlemleri oluşturma olanağı biridir.</span><span class="sxs-lookup"><span data-stu-id="27e29-251">One of the strengths of Windows Workflow Foundation is the ability to compose processes using several services.</span></span>  <span data-ttu-id="27e29-252">Bu örnekte, bir sipariş satın almak için iki hizmet çağrıları düzenleyen bir çevrimiçi mağaza hizmeti yok.</span><span class="sxs-lookup"><span data-stu-id="27e29-252">For this example, there is an online store service that orchestrates two service calls to purchase an order.</span></span>  <span data-ttu-id="27e29-253">İlk adım bir sipariş doğrulama hizmetini kullanarak sırasını doğrulamaktır.</span><span class="sxs-lookup"><span data-stu-id="27e29-253">The first step is to validate the order using an Order Validating Service.</span></span>  <span data-ttu-id="27e29-254">İkinci adım, ambarı hizmetini kullanmaya sırasını doldurmaktır.</span><span class="sxs-lookup"><span data-stu-id="27e29-254">The second step is to fill the order using a Warehouse Service.</span></span>

 <span data-ttu-id="27e29-255">İki arka uç Hizmetleri, sipariş doğrulama hizmeti ve ambar hizmeti, her iki testler için aynı kalır.</span><span class="sxs-lookup"><span data-stu-id="27e29-255">The two backend services, Order Validating Service and Warehouse Service, remain the same for both tests.</span></span>  <span data-ttu-id="27e29-256">Değişiklikleri bölümü çevrimiçi Store düzenleme gerçekleştiren hizmettir.</span><span class="sxs-lookup"><span data-stu-id="27e29-256">The part that changes is the Online Store Service that performs the orchestration.</span></span>  <span data-ttu-id="27e29-257">Bir durumda, bir WCF hizmeti olarak ele kodlanmış hizmetidir.</span><span class="sxs-lookup"><span data-stu-id="27e29-257">In one case, the service is hand-coded as a WCF service.</span></span>  <span data-ttu-id="27e29-258">Diğer bir olay için hizmet WF4 WCF iş akışı hizmetinde olarak yazılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-258">For the other case, the service is written as a WCF workflow service in WF4.</span></span> [!INCLUDE[wf1](../../../includes/wf1-md.md)]<span data-ttu-id="27e29-259">-İzleme ve Kalıcılık bu test için kapalı gibi belirli özellikleri.</span><span class="sxs-lookup"><span data-stu-id="27e29-259">-specific features like tracking and persistence are turned off for this test.</span></span>

### <a name="environment"></a><span data-ttu-id="27e29-260">Ortam</span><span class="sxs-lookup"><span data-stu-id="27e29-260">Environment</span></span>
 <span data-ttu-id="27e29-261">![İş akışı performans sınama ortamı](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span><span class="sxs-lookup"><span data-stu-id="27e29-261">![Workflow Performance Test Environment](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span></span>

 <span data-ttu-id="27e29-262">İstemci istekleri, birden çok bilgisayarda çevrimiçi Store hizmetine HTTP üzerinden yapılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-262">Client requests are made to the Online Store Service via HTTP from multiple computers.</span></span>  <span data-ttu-id="27e29-263">Tek bir bilgisayar, tüm üç hizmeti barındırır.</span><span class="sxs-lookup"><span data-stu-id="27e29-263">A single computer hosts all three services.</span></span>  <span data-ttu-id="27e29-264">Çevrimiçi Store hizmeti ve arka uç hizmetleri arasında Aktarım katmanı, TCP veya HTTP ' dir.</span><span class="sxs-lookup"><span data-stu-id="27e29-264">The transport layer between the Online Store Service and the backend services is TCP or HTTP.</span></span>  <span data-ttu-id="27e29-265">Ölçü işlem/saniye sayısına dayanır tamamlanmış `PurchaseOrder` çevrimiçi Store hizmetine yapılan çağrılar.</span><span class="sxs-lookup"><span data-stu-id="27e29-265">The measurement of operations/second is based on the number of completed `PurchaseOrder` calls made to the Online Store Service.</span></span>  <span data-ttu-id="27e29-266">Kanal havuzu yeni WF4 içinde kullanılabilen bir özelliktir.</span><span class="sxs-lookup"><span data-stu-id="27e29-266">Channel pooling is a new feature available in WF4.</span></span>  <span data-ttu-id="27e29-267">Basit bir havuzu oluşturma tekniği el kodlanmış bir uyarlamasını çevrimiçi Store hizmette kullanılan şekilde WCF'de kullanıma hazır bu test kanal havuz bölümü sağlanmadı.</span><span class="sxs-lookup"><span data-stu-id="27e29-267">In the WCF portion of this test channel pooling is not provided out of the box so a hand-coded implementation of a simple pooling technique was used in the Online Store Service.</span></span>

### <a name="performance"></a><span data-ttu-id="27e29-268">Performans</span><span class="sxs-lookup"><span data-stu-id="27e29-268">Performance</span></span>
 <span data-ttu-id="27e29-269">![Çevrimiçi Store hizmeti performans grafiği](../../../docs/framework/windows-workflow-foundation/media/onlinestoreperfgraph.gif "OnlineStorePerfGraph")</span><span class="sxs-lookup"><span data-stu-id="27e29-269">![Online Store Service Performance Graph](../../../docs/framework/windows-workflow-foundation/media/onlinestoreperfgraph.gif "OnlineStorePerfGraph")</span></span>

 <span data-ttu-id="27e29-270">Kanal havuzu olmadan arka uç TCP hizmetlere bağlanma [!INCLUDE[wf1](../../../includes/wf1-md.md)] hizmeti, aktarım hızını %17,2 etkiye sahiptir.</span><span class="sxs-lookup"><span data-stu-id="27e29-270">Connecting to backend TCP services without channel pooling, the [!INCLUDE[wf1](../../../includes/wf1-md.md)] service has a 17.2% impact on throughput.</span></span>  <span data-ttu-id="27e29-271">Kanal havuzu ile yaklaşık %23,8 cezasına sebep olur.</span><span class="sxs-lookup"><span data-stu-id="27e29-271">With channel pooling, the penalty is about 23.8%.</span></span>  <span data-ttu-id="27e29-272">HTTP için çok daha az olmasının etkisidir: 4,3 havuzu olmadan % ve 8.1 havuzu ile %.</span><span class="sxs-lookup"><span data-stu-id="27e29-272">For HTTP, the impact is much less: 4.3% without pooling and 8.1% with pooling.</span></span>  <span data-ttu-id="27e29-273">Kanal havuzu çok az avantajı HTTP kullanırken sağladığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="27e29-273">It is also important to note that the channel pooling provides very little benefit when using HTTP.</span></span>

 <span data-ttu-id="27e29-274">Varken yükü bu testteki el kodlanmış WCF Hizmeti ile karşılaştırıldığında WF4 çalışma zamanının, iki katına senaryo değerlendirilebilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-274">While there is overhead from the WF4 runtime compared with a hand-coded WCF service in this test, it could be considered a worst-case scenario.</span></span>  <span data-ttu-id="27e29-275">Bu testteki iki arka uç Hizmetleri, çok az iş yapın.</span><span class="sxs-lookup"><span data-stu-id="27e29-275">The two backend services in this test do very little work.</span></span>  <span data-ttu-id="27e29-276">Gerçek için uçtan uca bir senaryoda, bu hizmetler, veritabanı çağrıları, Aktarım katmanı performans etkisini daha az önemli yapma gibi daha pahalı işlemler gerçekleştirmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="27e29-276">In a real end-to-end scenario, these services would perform more expensive operations like database calls, making the performance impact of the transport layer less important.</span></span>  <span data-ttu-id="27e29-277">Bu artı WF4 içinde kullanılabilir özelliklerden avantajlarını Workflow Foundation düzenleme hizmetleri oluşturmak için uygulanabilir bir seçenek yapar.</span><span class="sxs-lookup"><span data-stu-id="27e29-277">This plus the benefits of the features available in WF4 makes Workflow Foundation a viable choice for creating orchestration services.</span></span>

## <a name="key-performance-considerations"></a><span data-ttu-id="27e29-278">Ana performans konuları</span><span class="sxs-lookup"><span data-stu-id="27e29-278">Key Performance Considerations</span></span>
 <span data-ttu-id="27e29-279">Birlikte çalışma, hariç olmak üzere bu bölümdeki özellik alanları, WF4 WF3 arasında önemli ölçüde değişti.</span><span class="sxs-lookup"><span data-stu-id="27e29-279">The feature areas in this section, with the exception of interop, have dramatically changed between WF3 and WF4.</span></span>  <span data-ttu-id="27e29-280">Bu tasarım performansının yanı sıra iş akışı uygulamaları etkiler.</span><span class="sxs-lookup"><span data-stu-id="27e29-280">This affects the design of workflow applications as well as the performance.</span></span>

#### <a name="workflow-activation-latency"></a><span data-ttu-id="27e29-281">İş akışı etkinleştirme gecikmesi</span><span class="sxs-lookup"><span data-stu-id="27e29-281">Workflow Activation Latency</span></span>
 <span data-ttu-id="27e29-282">WCF iş akışı hizmeti uygulaması içinde yeni bir iş akışı başlatma veya varolan bir iş akışı yüklenirken için gecikme süresi, engelleme gibi önemlidir.</span><span class="sxs-lookup"><span data-stu-id="27e29-282">In a WCF workflow service application, the latency for starting a new workflow or loading an existing workflow is important as it can be blocking.</span></span>  <span data-ttu-id="27e29-283">Bu test çalışması, tipik bir senaryoda bir WF4 XAMLX konağa karşı WF3 XOML konak ölçer.</span><span class="sxs-lookup"><span data-stu-id="27e29-283">This test case measures a WF3 XOML host against a WF4 XAMLX host in a typical scenario.</span></span>

##### <a name="environment-setup"></a><span data-ttu-id="27e29-284">Ortam Kurulumu</span><span class="sxs-lookup"><span data-stu-id="27e29-284">Environment Setup</span></span>
 <span data-ttu-id="27e29-285">![Gecikme süresi ve aktarım hızı testler için ortam Kurulumu](../../../docs/framework/windows-workflow-foundation/media/latencyandthroughputenvironment.gif "LatencyAndThroughputEnvironment")</span><span class="sxs-lookup"><span data-stu-id="27e29-285">![Environment setup for latency and throughput tests](../../../docs/framework/windows-workflow-foundation/media/latencyandthroughputenvironment.gif "LatencyAndThroughputEnvironment")</span></span>

##### <a name="test-setup"></a><span data-ttu-id="27e29-286">Test Kurulumu</span><span class="sxs-lookup"><span data-stu-id="27e29-286">Test Setup</span></span>
 <span data-ttu-id="27e29-287">Senaryoda bir istemci bilgisayara içerik temelli bağıntı kullanarak bir WCF iş akışı hizmeti ile iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="27e29-287">In the scenario, a client computer contacts a WCF workflow service using context-based correlation.</span></span>  <span data-ttu-id="27e29-288">Bağlam bağıntı özel bağlam bağlama gerektirir ve iletileri için doğru iş akışı örneği ilişkilendirmek için bir bağlam üst bilgi veya tanımlama bilgisi kullanır.</span><span class="sxs-lookup"><span data-stu-id="27e29-288">Context correlation requires a special context binding and uses a context header or cookie to relate messages to the correct workflow instance.</span></span>  <span data-ttu-id="27e29-289">Bir performans, bağıntı kimliği, ileti gövdesi ayrıştırılacak gerek kalmayacak şekilde ileti üstbilgisinde bulunur fayda var.</span><span class="sxs-lookup"><span data-stu-id="27e29-289">It has a performance benefit in that the correlation Id is located in the message header so the message body does not need to be parsed.</span></span>

 <span data-ttu-id="27e29-290">Hizmet isteği ile yeni bir iş akışı oluşturma ve anlık bir yanıt gönderin, böylece gecikme süresi ölçümü iş akışını çalıştıran geçen süre dahil değildir.</span><span class="sxs-lookup"><span data-stu-id="27e29-290">The service will create a new workflow with the request and send an immediate response so that the measurement of latency does not include the time spent running the workflow.</span></span>  <span data-ttu-id="27e29-291">WF3 iş akışı XOML arka plan kod ile ve WF4 iş akışı tamamen XAML.</span><span class="sxs-lookup"><span data-stu-id="27e29-291">The WF3 workflow is XOML with a code-behind and the WF4 workflow is entirely XAML.</span></span>  <span data-ttu-id="27e29-292">WF4 iş akışı şöyledir:</span><span class="sxs-lookup"><span data-stu-id="27e29-292">The WF4 workflow looks like this:</span></span>

 <span data-ttu-id="27e29-293">![WF 4 bağıntı kapsam](../../../docs/framework/windows-workflow-foundation/media/correlationscopeworkflow.gif "CorrelationScopeWorkflow")</span><span class="sxs-lookup"><span data-stu-id="27e29-293">![WF 4 Correlation Scope](../../../docs/framework/windows-workflow-foundation/media/correlationscopeworkflow.gif "CorrelationScopeWorkflow")</span></span>

 <span data-ttu-id="27e29-294"><xref:System.ServiceModel.Activities.Receive> Etkinlik iş akışı örneği oluşturur.</span><span class="sxs-lookup"><span data-stu-id="27e29-294">The <xref:System.ServiceModel.Activities.Receive> activity creates the workflow instance.</span></span>  <span data-ttu-id="27e29-295">Alınan iletide geçirilen bir değer yanıt iletisinde okunmaz.</span><span class="sxs-lookup"><span data-stu-id="27e29-295">A value passed in the received message is echoed in the reply message.</span></span>  <span data-ttu-id="27e29-296">Yanıt aşağıdaki bir dizi iş akışının geri kalanı içerir.</span><span class="sxs-lookup"><span data-stu-id="27e29-296">A sequence following the reply contains the rest of the workflow.</span></span>  <span data-ttu-id="27e29-297">Yukarıdaki durumda, yalnızca bir yorum etkinliği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="27e29-297">In the above case, only one comment activity is shown.</span></span>  <span data-ttu-id="27e29-298">Açıklama etkinlik sayısı, iş akışı karmaşıklığı benzetimini yapmak için değiştirilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-298">The number of comment activities is changed to simulate workflow complexity.</span></span>  <span data-ttu-id="27e29-299">Bir yorum etkinliği için bir WF3 eşdeğerdir <xref:System.Workflow.Activities.CodeActivity> , hiçbir çalışma gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="27e29-299">A comment activity is equivalent to a WF3 <xref:System.Workflow.Activities.CodeActivity> that performs no work.</span></span> <span data-ttu-id="27e29-300">Açıklama etkinliği hakkında daha fazla bilgi için bu makalenin önceki kısımlarında "bileşen düzeyinde performans karşılaştırması" bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="27e29-300">For more information about the comment activity, see the "Component-level Performance Comparison" section earlier in this article.</span></span>

##### <a name="test-results"></a><span data-ttu-id="27e29-301">Test Sonuçları</span><span class="sxs-lookup"><span data-stu-id="27e29-301">Test Results</span></span>
 <span data-ttu-id="27e29-302">![Gecikme süresi sonuçları](../../../docs/framework/windows-workflow-foundation/media/latencyresultsgraph.gif "LatencyResultsGraph")</span><span class="sxs-lookup"><span data-stu-id="27e29-302">![Latency Results](../../../docs/framework/windows-workflow-foundation/media/latencyresultsgraph.gif "LatencyResultsGraph")</span></span>

 <span data-ttu-id="27e29-303">3 – Durgun şekil ve normal WCF iş akışı hizmetleri için gecikme süresi</span><span class="sxs-lookup"><span data-stu-id="27e29-303">Figure 3 – Cold and warm latency for WCF workflow services</span></span>

 <span data-ttu-id="27e29-304">Yukarıdaki grafikte, soğuk servis talebini başvuruyor değil mevcut olduğunda <xref:System.ServiceModel.WorkflowServiceHost> belirtilen iş akışı için.</span><span class="sxs-lookup"><span data-stu-id="27e29-304">In the graph above, cold refers to the case where there is not an existing <xref:System.ServiceModel.WorkflowServiceHost> for the given workflow.</span></span>  <span data-ttu-id="27e29-305">Diğer bir deyişle, iş akışı, ilk kez kullanılıyor ve derlenmesi gereken XOML veya XAML soğuk bir gecikme olur.</span><span class="sxs-lookup"><span data-stu-id="27e29-305">In other words, cold latency is when the workflow is being used for the first time and the XOML or XAML needs to be compiled.</span></span>  <span data-ttu-id="27e29-306">Sıcak gecikme süresi, iş akışı türü zaten derlendikleri zaman yeni bir iş akışı örneği oluşturmak için saattir.</span><span class="sxs-lookup"><span data-stu-id="27e29-306">Warm latency is the time to create a new workflow instance when the workflow type has already been compiled.</span></span>  <span data-ttu-id="27e29-307">İş akışı karmaşıklığını WF4 durumda tutulmaları şeylerdir ancak WF3 durumda doğrusal ilerlemeyi sahip değil.</span><span class="sxs-lookup"><span data-stu-id="27e29-307">The complexity of the workflow makes very little difference in the WF4 case but has a linear progression in the WF3 case.</span></span>

#### <a name="correlation-throughput"></a><span data-ttu-id="27e29-308">Bağıntı aktarım hızı</span><span class="sxs-lookup"><span data-stu-id="27e29-308">Correlation Throughput</span></span>
 <span data-ttu-id="27e29-309">WF4 yeni bir içerik temelli bağıntı özelliği sunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="27e29-309">WF4 introduces a new content-based correlation feature.</span></span>  <span data-ttu-id="27e29-310">Yalnızca içerik temelli bağıntı WF3 sağlanır.</span><span class="sxs-lookup"><span data-stu-id="27e29-310">WF3 provided only context-based correlation.</span></span>  <span data-ttu-id="27e29-311">İçerik temelli bağıntı yalnızca belirli WCF kanal bağlamaları yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-311">Context-based correlation could only be done over specific WCF channel bindings.</span></span>  <span data-ttu-id="27e29-312">İş akışı kimliği, ileti üst bilgisi içinde bu bağlamaları kullanırken eklenir.</span><span class="sxs-lookup"><span data-stu-id="27e29-312">The workflow Id is inserted into the message header when using these bindings.</span></span>  <span data-ttu-id="27e29-313">WF3 çalışma zamanı yalnızca kendi kimliğine göre bir iş akışı tanımlayabilir  İçerik temelli bağıntı ile iş akışı Yazar hesap numarası veya müşteri kimliği gibi verilerle ilgili bir parçasını dışında bir bağıntı anahtar oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27e29-313">The WF3 runtime could only identify a workflow by its Id.  With content-based correlation, the workflow author can create a correlation key out of a relevant piece of data like an account number or customer Id.</span></span>

 <span data-ttu-id="27e29-314">Bağıntı anahtar ileti üstbilgisinde bulunan, içerik temelli bağıntı performans avantajı vardır.</span><span class="sxs-lookup"><span data-stu-id="27e29-314">Context-based correlation has a performance advantage in that the correlation key is located in the message header.</span></span>  <span data-ttu-id="27e29-315">Anahtar sona erdirme olanağı-serialization/ileti kopyalama olmadan iletisi okuyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27e29-315">The key can be read from the message without de-serialization/message-copying.</span></span>  <span data-ttu-id="27e29-316">İçerik temelli bağıntı bağıntı anahtar ileti gövdesi içinde depolanır.</span><span class="sxs-lookup"><span data-stu-id="27e29-316">In content-based correlation, the correlation key is stored in the message body.</span></span>  <span data-ttu-id="27e29-317">Bir XPath ifadesi anahtarı bulmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-317">An XPath expression is used to locate the key.</span></span>  <span data-ttu-id="27e29-318">Bu ek işlem maliyetini ileti gövdesi ve anahtar sayısı anahtarı derinliğini boyutuna bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-318">The cost of this extra processing depends on the size of the message, depth of the key in the body, and the number of keys.</span></span>  <span data-ttu-id="27e29-319">Bu test, içerik ve içerik temelli bağıntı karşılaştırır ve ayrıca birden çok anahtar kullanırken performans düşüşü gösterir.</span><span class="sxs-lookup"><span data-stu-id="27e29-319">This test compares context- and content-based correlation and also shows the performance degradation when using multiple keys.</span></span>

#### <a name="environment-setup"></a><span data-ttu-id="27e29-320">Ortam Kurulumu</span><span class="sxs-lookup"><span data-stu-id="27e29-320">Environment Setup</span></span>
 <span data-ttu-id="27e29-321">![İş akışı performans sınama ortamı](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span><span class="sxs-lookup"><span data-stu-id="27e29-321">![Workflow Performance Test Environment](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span></span>

#### <a name="test-setup"></a><span data-ttu-id="27e29-322">Test Kurulumu</span><span class="sxs-lookup"><span data-stu-id="27e29-322">Test Setup</span></span>
 <span data-ttu-id="27e29-323">![Bağıntı işleme iş akışı Test](../../../docs/framework/windows-workflow-foundation/media/correlationthroughputworkflow.gif "CorrelationThroughputWorkflow")</span><span class="sxs-lookup"><span data-stu-id="27e29-323">![Correlation Throughput Workflow Test](../../../docs/framework/windows-workflow-foundation/media/correlationthroughputworkflow.gif "CorrelationThroughputWorkflow")</span></span>

 <span data-ttu-id="27e29-324">Yukarıda gösterilen "Kalıcılık" bölümünde kullanılan hizmet örneğiyle aynı iş akışıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-324">The workflow shown above is the same one used in the "Persistence" section below.</span></span>  <span data-ttu-id="27e29-325">Kalıcılık olmadan bağıntı testler için çalışma zamanı'nda yüklü bir Kalıcılık sağlayıcı yok.</span><span class="sxs-lookup"><span data-stu-id="27e29-325">For the correlation tests without persistence there is no persistence provider installed in the runtime.</span></span>  <span data-ttu-id="27e29-326">Bağıntı iki yerde oluşur: CreateOrder ve CompleteOrder.</span><span class="sxs-lookup"><span data-stu-id="27e29-326">Correlation occurs in two places: CreateOrder and CompleteOrder.</span></span>

#### <a name="test-results"></a><span data-ttu-id="27e29-327">Test Sonuçları</span><span class="sxs-lookup"><span data-stu-id="27e29-327">Test Results</span></span>
 <span data-ttu-id="27e29-328">![Bağıntı aktarım hızı](../../../docs/framework/windows-workflow-foundation/media/correlationthroughputgraph.gif "CorrelationThroughputGraph")</span><span class="sxs-lookup"><span data-stu-id="27e29-328">![Correlation Throughput](../../../docs/framework/windows-workflow-foundation/media/correlationthroughputgraph.gif "CorrelationThroughputGraph")</span></span>

 <span data-ttu-id="27e29-329">Bu grafik, içerik temelli bağıntı artışlar kullanılan anahtar sayısı olarak performans gösterir.</span><span class="sxs-lookup"><span data-stu-id="27e29-329">This graph shows a decrease in performance as the number of keys used in content-based correlation increases.</span></span>  <span data-ttu-id="27e29-330">Bu iletişim kuralları ile ilgili ek yükü TCP ve HTTP arasında eğrileri içinde benzerlik gösterir.</span><span class="sxs-lookup"><span data-stu-id="27e29-330">The similarity in the curves between TCP and HTTP indicates the overhead associated with these protocols.</span></span>

#### <a name="correlation-with-persistence"></a><span data-ttu-id="27e29-331">Yurt içi hasıla ile kalıcılığı</span><span class="sxs-lookup"><span data-stu-id="27e29-331">Correlation with Persistence</span></span>
 <span data-ttu-id="27e29-332">Kalıcı bir iş akışı ile CPU baskısı içerik temelli bağıntı alanından SQL veritabanına iş akışı çalışma zamanını şuradan kaydırır.</span><span class="sxs-lookup"><span data-stu-id="27e29-332">With a persisted workflow, the CPU pressure from content-based correlation shifts from the workflow runtime to the SQL database.</span></span>  <span data-ttu-id="27e29-333">SQL kalıcı bir sağlayıcı saklı yordamları, uygun iş akışı bulmak için anahtarları eşleşen iş yapın.</span><span class="sxs-lookup"><span data-stu-id="27e29-333">The stored procedures in the SQL persistence provider do the work of matching the keys to locate the appropriate workflow.</span></span>

 <span data-ttu-id="27e29-334">![Bağıntı ve Kalıcılık sonuçları](../../../docs/framework/windows-workflow-foundation/media/correlationandpersistencegraph.gif "CorrelationAndPersistenceGraph")</span><span class="sxs-lookup"><span data-stu-id="27e29-334">![Correlation and persistence results](../../../docs/framework/windows-workflow-foundation/media/correlationandpersistencegraph.gif "CorrelationAndPersistenceGraph")</span></span>

 <span data-ttu-id="27e29-335">İçerik temelli bağıntı hala içerik temelli bağıntı hızlıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-335">Context-based correlation is still faster than content-based correlation.</span></span>  <span data-ttu-id="27e29-336">Ancak, fark Kalıcılık daha fazla bağıntı performans üzerindeki etkisi olarak daha az belirgin olur.</span><span class="sxs-lookup"><span data-stu-id="27e29-336">However, the difference is less pronounced as persistence has more impact on performance than correlation.</span></span>

### <a name="complex-workflow-throughput"></a><span data-ttu-id="27e29-337">Karmaşık iş akışı işleme</span><span class="sxs-lookup"><span data-stu-id="27e29-337">Complex Workflow Throughput</span></span>
 <span data-ttu-id="27e29-338">Bir iş akışı karmaşıklığını yalnızca etkinlikleri sayısına göre ölçülmez.</span><span class="sxs-lookup"><span data-stu-id="27e29-338">The complexity of a workflow is not measured only by the number of activities.</span></span>  <span data-ttu-id="27e29-339">Bileşik etkinlikleri birçok alt içerebilir ve alt bileşik etkinlikleri de olabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-339">Composite activities can contain many children and those children can also be composite activities.</span></span>  <span data-ttu-id="27e29-340">İç içe geçmiş bir artış düzeylerini sayısı arttıkça, bu nedenle şu anda yürütülen durumunda olabilir etkinliklerin sayısını ve durumda olabilecek bir değişken sayısı yapar.</span><span class="sxs-lookup"><span data-stu-id="27e29-340">As the number of levels of nesting increases, so does the number of activities that can be currently in the executing state and the number of variables that can be in state.</span></span>  <span data-ttu-id="27e29-341">Bu test, karmaşık iş akışı yürütülürken işleme WF3 WF4 arasındaki karşılaştırır.</span><span class="sxs-lookup"><span data-stu-id="27e29-341">This test compares throughput between WF3 and WF4 when executing complex workflows.</span></span>

### <a name="test-setup"></a><span data-ttu-id="27e29-342">Test Kurulumu</span><span class="sxs-lookup"><span data-stu-id="27e29-342">Test Setup</span></span>
 <span data-ttu-id="27e29-343">Bu testler, üzerinde bir Intel Xeon X5355 2.66 GHz 4 yönlü bilgisayar @ 4 GB RAM çalıştıran Windows Server 2008 x64 yürütüldü.</span><span class="sxs-lookup"><span data-stu-id="27e29-343">These tests were executed on an Intel Xeon X5355 @ 2.66GHz 4-way computer with 4GB RAM running Windows Server 2008 x64.</span></span>  <span data-ttu-id="27e29-344">Test kodu, % 100 CPU kullanımına ulaşmak için çekirdek başına tek bir iş parçacığı ile tek bir işlemde çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="27e29-344">The test code runs in a single process with one thread per core to reach 100% CPU utilization.</span></span>

 <span data-ttu-id="27e29-345">Bu test için oluşturulan iş akışları iki ana değişkene sahiptir: derinliği ve her bir dizideki etkinlik sayısı.</span><span class="sxs-lookup"><span data-stu-id="27e29-345">The workflows generated for this test have two main variables: depth and number of activities in each sequence.</span></span>  <span data-ttu-id="27e29-346">Her derinlik düzeyini döngü, kararlar, atamalarını ve dizileri sırasında paralel bir etkinlik içerir.</span><span class="sxs-lookup"><span data-stu-id="27e29-346">Each depth level includes a parallel activity, while loop, decisions, assignments, and sequences.</span></span>  <span data-ttu-id="27e29-347">Aşağıda gösterilen WF4 tasarımcısında, üst düzey akış çizelgesi Resimli.</span><span class="sxs-lookup"><span data-stu-id="27e29-347">In the WF4 designer pictured below, the top-level flow chart is pictured.</span></span>  <span data-ttu-id="27e29-348">Her akış çizelgesi etkinlik ana akış benzer.</span><span class="sxs-lookup"><span data-stu-id="27e29-348">Each flowchart activity resembles the main flowchart.</span></span>  <span data-ttu-id="27e29-349">Bu iş akışı derinliği test parametreleri için sınırlı olduğu picturing olduğunda bir düzgünleştiren parçalı dikkate almak yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-349">It may be helpful to think of a fractal when picturing this workflow, where the depth is limited to the parameters of the test.</span></span>

 <span data-ttu-id="27e29-350">Belirli bir testi etkinliklerin sayısını derinliği ve dizisi başına etkinlik sayısı tarafından belirlenir.</span><span class="sxs-lookup"><span data-stu-id="27e29-350">The number of activities in a given test is determined by the depth and number of activities per sequence.</span></span>  <span data-ttu-id="27e29-351">Aşağıdaki denklemi WF4 test etkinliklerin sayısını hesaplar:</span><span class="sxs-lookup"><span data-stu-id="27e29-351">The following equation computes the number of activities in the WF4 test:</span></span>

 <span data-ttu-id="27e29-352">![Etkinliklerin sayısını hesaplamak için eşitlik](../../../docs/framework/windows-workflow-foundation/media/numberofactivitiesequation.gif "NumberOfActivitiesEquation")</span><span class="sxs-lookup"><span data-stu-id="27e29-352">![Equation to compute number of activities](../../../docs/framework/windows-workflow-foundation/media/numberofactivitiesequation.gif "NumberOfActivitiesEquation")</span></span>

 <span data-ttu-id="27e29-353">WF3 testin etkinlik sayısı, ek bir sıra nedeniyle biraz farklı bir eşitlik ile hesaplanabilir:</span><span class="sxs-lookup"><span data-stu-id="27e29-353">The WF3 test’s activity count can be computed with a slightly different equation due to an extra sequence:</span></span>

 <span data-ttu-id="27e29-354">![Etkinliklerin sayısını hesaplamak için eşitlik](../../../docs/framework/windows-workflow-foundation/media/w3numberofactivitiesequation.gif "W3NumberOfActivitiesEquation")</span><span class="sxs-lookup"><span data-stu-id="27e29-354">![Equation to compute number of activities](../../../docs/framework/windows-workflow-foundation/media/w3numberofactivitiesequation.gif "W3NumberOfActivitiesEquation")</span></span>

 <span data-ttu-id="27e29-355">D derinliği olduğu ve etkinliği dizisi her sayısıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-355">Where d is the depth and a is the number of activities per sequence.</span></span>  <span data-ttu-id="27e29-356">Bu denklemler ardındaki mantığı ilk sabit zaman çarpılarak emin olup dizileri sayısı ve statik düzeyine etkinliklerin sayısını ikinci sabittir.</span><span class="sxs-lookup"><span data-stu-id="27e29-356">The logic behind these equations is that the first constant, multiplied by a, is the number of sequences and the second constant is the static number of activities in the current level.</span></span>  <span data-ttu-id="27e29-357">Her akış üç akış alt etkinlik vardır.</span><span class="sxs-lookup"><span data-stu-id="27e29-357">There are three flowchart child activities in each flowchart.</span></span>  <span data-ttu-id="27e29-358">Alt derinliği düzeyde, bu akış çizelgeleri boş ancak diğer düzeylerde bunlar ana akış kopyalarını.</span><span class="sxs-lookup"><span data-stu-id="27e29-358">At the bottom depth level, these flowcharts are empty but at the other levels they are copies of the main flowchart.</span></span>  <span data-ttu-id="27e29-359">Aşağıdaki tabloda her test değişim ait iş akışı tanımında etkinliklerinin sayısı gösterilir:</span><span class="sxs-lookup"><span data-stu-id="27e29-359">The number of activities in each test variation’s workflow definition is indicated in the following table:</span></span>

 <span data-ttu-id="27e29-360">![Her testte kullanılan etkinliklerin sayısını karşılaştıran](../../../docs/framework/windows-workflow-foundation/media/comparechart.gif "CompareChart")</span><span class="sxs-lookup"><span data-stu-id="27e29-360">![Compares number of activities used in each test](../../../docs/framework/windows-workflow-foundation/media/comparechart.gif "CompareChart")</span></span>

 <span data-ttu-id="27e29-361">İş akışı tanımında etkinliklerin sayısını keskin ile her derinlik düzeyini artırır.</span><span class="sxs-lookup"><span data-stu-id="27e29-361">The number of activities in the workflow definition increases sharply with each depth level.</span></span>  <span data-ttu-id="27e29-362">Karar noktası başına yalnızca bir yol yürütülür, ancak belirli bir iş akışı örneğinde, gerçek etkinliklerin yalnızca küçük bir kısmı yürütülür.</span><span class="sxs-lookup"><span data-stu-id="27e29-362">But only one path per decision point is executed in a given workflow instance, so only a small subset of the actual activities are executed.</span></span>

 <span data-ttu-id="27e29-363">![Karmaşık iş akışı](../../../docs/framework/windows-workflow-foundation/media/complexworkflowthroughputworkflow.gif "ComplexWorkflowThroughputWorkflow")</span><span class="sxs-lookup"><span data-stu-id="27e29-363">![Complex Workflow](../../../docs/framework/windows-workflow-foundation/media/complexworkflowthroughputworkflow.gif "ComplexWorkflowThroughputWorkflow")</span></span>

 <span data-ttu-id="27e29-364">Eşdeğer bir iş akışı için WF3 oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="27e29-364">An equivalent workflow was created for WF3.</span></span> <span data-ttu-id="27e29-365">WF3 Tasarımcı iş akışının tamamını tasarımı alanında yerine iç içe geçme, bu nedenle, bu konu başlığında görüntülenecek çok büyük gösteriyor.</span><span class="sxs-lookup"><span data-stu-id="27e29-365">The WF3 designer shows the entire workflow in the design area instead of nesting, therefore it is too big to display in this topic.</span></span> <span data-ttu-id="27e29-366">İş akışının bir parçacığı aşağıda gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="27e29-366">A snippet of the workflow is shown below.</span></span>

 <span data-ttu-id="27e29-367">![WF3 İş akışı](../../../docs/framework/windows-workflow-foundation/media/wf3workflow.gif "WF3Workflow")</span><span class="sxs-lookup"><span data-stu-id="27e29-367">![WF3 Workflow](../../../docs/framework/windows-workflow-foundation/media/wf3workflow.gif "WF3Workflow")</span></span>

 <span data-ttu-id="27e29-368">İç içe bir olağanüstü durumda kullanmak için bu testin bir parçası olan başka bir iş akışı 100 iç içe geçmiş sıralar kullanır.</span><span class="sxs-lookup"><span data-stu-id="27e29-368">To exercise nesting in an extreme case, another workflow that is part of this test uses 100 nested sequences.</span></span>  <span data-ttu-id="27e29-369">En içteki içinde tek bir dizidir `Comment` veya <xref:System.Workflow.Activities.CodeActivity>.</span><span class="sxs-lookup"><span data-stu-id="27e29-369">In the innermost sequence is a single `Comment` or <xref:System.Workflow.Activities.CodeActivity>.</span></span>

 <span data-ttu-id="27e29-370">![İç içe dizileri](../../../docs/framework/windows-workflow-foundation/media/nestedsequencewf.gif "NestedSequenceWF")</span><span class="sxs-lookup"><span data-stu-id="27e29-370">![Nested sequences](../../../docs/framework/windows-workflow-foundation/media/nestedsequencewf.gif "NestedSequenceWF")</span></span>

 <span data-ttu-id="27e29-371">Bu testin bir parçası olarak, izleme ve Kalıcılık kullanılmaz.</span><span class="sxs-lookup"><span data-stu-id="27e29-371">Tracking and persistence are not used as part of this test.</span></span>

### <a name="test-results"></a><span data-ttu-id="27e29-372">Test Sonuçları</span><span class="sxs-lookup"><span data-stu-id="27e29-372">Test Results</span></span>
 <span data-ttu-id="27e29-373">![Üretilen iş grafiklerini](../../../docs/framework/windows-workflow-foundation/media/testresults1.gif "TestResults1")</span><span class="sxs-lookup"><span data-stu-id="27e29-373">![Throughput Graph](../../../docs/framework/windows-workflow-foundation/media/testresults1.gif "TestResults1")</span></span>

 <span data-ttu-id="27e29-374">Daha karmaşık iş akışlarıyla derinliği çok sayıda ve çok sayıda etkinlikleri performans sonuçlarını bu makalenin önceki bölümlerinde gösterilen diğer aktarım hızı numaralarının tutarlıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-374">Even with complex workflows with lots of depth and a high number of activities, the performance results are consistent with other throughput numbers shown earlier in this article.</span></span>  <span data-ttu-id="27e29-375">WF4'ın aktarım hızı kat daha hızlı ve Logaritmik ölçekte Karşılaştırılacak vardır.</span><span class="sxs-lookup"><span data-stu-id="27e29-375">WF4’s throughput is orders of magnitude faster and has to be compared on a logarithmic scale.</span></span>

### <a name="memory"></a><span data-ttu-id="27e29-376">Bellek</span><span class="sxs-lookup"><span data-stu-id="27e29-376">Memory</span></span>
 <span data-ttu-id="27e29-377">Windows Workflow Foundation bellek yükü iki önemli alanda ölçülür: iş akışı karmaşıklığı ve iş akışı tanımları sayısı.</span><span class="sxs-lookup"><span data-stu-id="27e29-377">The memory overhead of Windows Workflow Foundation is measured in two key areas: workflow complexity and number of workflow definitions.</span></span>  <span data-ttu-id="27e29-378">Bellek ölçümleri, Windows 7 64-bit istasyonunda alınmıştır.</span><span class="sxs-lookup"><span data-stu-id="27e29-378">Memory measurements were taken on a Windows 7 64-bit workstation.</span></span>  <span data-ttu-id="27e29-379">Çalışma kümesi boyutu performans sayaçlarını izleme, Environment.WorkingSet yoklama veya VMMap kullanılabilir gibi bir araç kullanarak gibi ölçüsü elde etmek için birçok yolu vardır [VMMap](/sysinternals/downloads/vmmap).</span><span class="sxs-lookup"><span data-stu-id="27e29-379">There are many ways to obtain the measurement of working set size such as monitoring performance counters, polling Environment.WorkingSet, or using a tool like VMMap available from [VMMap](/sysinternals/downloads/vmmap).</span></span> <span data-ttu-id="27e29-380">Yöntemlerin bir bileşimi elde edilir ve her test sonuçlarını doğrulamak için kullanıldı.</span><span class="sxs-lookup"><span data-stu-id="27e29-380">A combination of methods was used to obtain and verify the results of each test.</span></span>

### <a name="workflow-complexity-test"></a><span data-ttu-id="27e29-381">İş akışı karmaşıklığı Test</span><span class="sxs-lookup"><span data-stu-id="27e29-381">Workflow Complexity Test</span></span>
 <span data-ttu-id="27e29-382">Bir iş akışı karmaşıklığı fark çalışma kümesi iş akışı karmaşıklığı test ölçer.</span><span class="sxs-lookup"><span data-stu-id="27e29-382">The workflow complexity test measures the working set difference based on the complexity of the workflow.</span></span>  <span data-ttu-id="27e29-383">Önceki bölümde kullanılan karmaşık iş akışlarının yanı sıra yeni çeşitlemeleri iki temel servis taleplerini karşılamak için eklenir: tek bir etkinlik iş akışı ve 1000 etkinliklerle bir dizisi.</span><span class="sxs-lookup"><span data-stu-id="27e29-383">In addition to the complex workflows used in the previous section, new variations are added to cover two basic cases: a single activity workflow and a sequence with 1000 activities.</span></span>  <span data-ttu-id="27e29-384">Bu testler için iş akışlarını başlatılır ve tek bir seri döngü tamamlanmasında bir dakikalık bir süre için çalıştırılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-384">For these tests the workflows are initialized and executed to completion in a single serial loop for a period of one minute.</span></span>  <span data-ttu-id="27e29-385">Her test değişim üç kez çalışır ve kaydedilen bilgiler bu üç çalıştırması ortalamasıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-385">Each test variation is run three times and the data recorded is the average of those three runs.</span></span>

 <span data-ttu-id="27e29-386">İki yeni temel testleri gibi aşağıda gösterilen şekilde iş akışları sahiptir:</span><span class="sxs-lookup"><span data-stu-id="27e29-386">The two new basic tests have workflows that look like those shown below:</span></span>

 <span data-ttu-id="27e29-387">![Karmaşık iş akışları](../../../docs/framework/windows-workflow-foundation/media/complexworkflowboth.gif "ComplexWorkflowBoth")</span><span class="sxs-lookup"><span data-stu-id="27e29-387">![Complex Workflows](../../../docs/framework/windows-workflow-foundation/media/complexworkflowboth.gif "ComplexWorkflowBoth")</span></span>

 <span data-ttu-id="27e29-388">Yukarıda gösterilen WF3 iş akışında boş <xref:System.Workflow.Activities.CodeActivity> etkinlikleri kullanılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-388">In the WF3 workflow shown above, empty <xref:System.Workflow.Activities.CodeActivity> activities are used.</span></span>  <span data-ttu-id="27e29-389">Kullanımlar yukarıda WF4 iş akışı `Comment` etkinlikler.</span><span class="sxs-lookup"><span data-stu-id="27e29-389">The WF4 workflow above uses `Comment` activities.</span></span>  <span data-ttu-id="27e29-390">`Comment` Etkinlik bileşen düzeyinde performans karşılaştırmalar bölümü bu makalenin önceki kısımlarında açıklanan.</span><span class="sxs-lookup"><span data-stu-id="27e29-390">The `Comment` activity was described in the Component-level Performance Comparisons section earlier in this article.</span></span>

 <span data-ttu-id="27e29-391">![Bellek kullanımı grafiğinde](../../../docs/framework/windows-workflow-foundation/media/complexmemoryusage.gif "ComplexMemoryUsage")</span><span class="sxs-lookup"><span data-stu-id="27e29-391">![Memory Usage Graph](../../../docs/framework/windows-workflow-foundation/media/complexmemoryusage.gif "ComplexMemoryUsage")</span></span>

 <span data-ttu-id="27e29-392">Bu grafikte fark Temizle eğilimlerini iç içe geçme bellek kullanımını WF3 hem de WF4 göreceli olarak en az bir etkiye sahip biridir.</span><span class="sxs-lookup"><span data-stu-id="27e29-392">One of the clear trends to notice in this graph is that nesting has relatively minimal impact on memory usage in both WF3 and WF4.</span></span>  <span data-ttu-id="27e29-393">Belirli bir iş akışındaki etkinliklerin sayısını en önemli bellek etkisi gelir.</span><span class="sxs-lookup"><span data-stu-id="27e29-393">The most significant memory impact comes from the number of activities in a given workflow.</span></span>  <span data-ttu-id="27e29-394">Veri dizisi 1000, karmaşık derinliği 5 dizisi 5 ve karmaşık derinlik 1 7 serisi çeşitlemeleri verildiğinde, etkinliklerin sayısını binlik girdiğinde, bellek kullanım artışı daha belirgin hale işaretlenmemiştir.</span><span class="sxs-lookup"><span data-stu-id="27e29-394">Given the data from the sequence 1000, complex depth 5 sequence 5, and complex depth 7 sequence 1 variations, it is clear that as the number of activities enters the thousands, the memory usage increase becomes more noticeable.</span></span>  <span data-ttu-id="27e29-395">(1 derinliği 7 serisi) olağanüstü durumda ~ 29K etkinlikleri olduğu WF4 neredeyse %79 daha az bellek WF3 daha kullanıyor.</span><span class="sxs-lookup"><span data-stu-id="27e29-395">In the extreme case (depth 7 sequence 1) where there are ~29K activities, WF4 is using almost 79% less memory than WF3.</span></span>

### <a name="multiple-workflow-definitions-test"></a><span data-ttu-id="27e29-396">Birden çok iş akışı tanımları Test</span><span class="sxs-lookup"><span data-stu-id="27e29-396">Multiple Workflow Definitions Test</span></span>
 <span data-ttu-id="27e29-397">İş akışı tanımı başına bellek ölçme iki farklı testlere WF3 ve WF4 iş akışlarını barındırmak için kullanılabilir seçenekleri nedeniyle ayrılmıştır.</span><span class="sxs-lookup"><span data-stu-id="27e29-397">Measuring memory per workflow definition is divided into two different tests because of the available options for hosting workflows in WF3 and WF4.</span></span>  <span data-ttu-id="27e29-398">Belirli bir iş akışı örnekli ve tanımı yalnızca bir kere yürütülen iş akışı karmaşıklığı test değerinden farklı bir şekilde testleri çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="27e29-398">The tests are run in a different manner than the workflow complexity test in that a given workflow is instanced and executed only once per definition.</span></span>  <span data-ttu-id="27e29-399">İş akışı tanımı ile bunun konağı AppDomain ömrü boyunca bellekte kalır olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-399">This is because the workflow definition and its host remain in memory for the lifetime of the AppDomain.</span></span>  <span data-ttu-id="27e29-400">Belirtilen iş akışı örneği'ni çalıştırarak kullanılan bellek, çöp toplama sırasında temizlenmelidir.</span><span class="sxs-lookup"><span data-stu-id="27e29-400">The memory used by running a given workflow instance should be cleaned up during garbage collection.</span></span>  <span data-ttu-id="27e29-401">Geçiş kılavuzunu WF4 için barındırma seçenekleri hakkında daha ayrıntılı bilgi içerir.</span><span class="sxs-lookup"><span data-stu-id="27e29-401">The migration guidance for WF4 contains more detailed information on the hosting options.</span></span> <span data-ttu-id="27e29-402">Daha fazla bilgi için [WF geçiş Kitapçığı: İş akışı barındırma](https://go.microsoft.com/fwlink/?LinkID=153313).</span><span class="sxs-lookup"><span data-stu-id="27e29-402">For more information, see [WF Migration Cookbook: Workflow Hosting](https://go.microsoft.com/fwlink/?LinkID=153313).</span></span>

 <span data-ttu-id="27e29-403">Bir iş akışı tanımı test için çok iş akışı tanımları oluşturma, çeşitli şekillerde yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-403">Creating many workflow definitions for a workflow definition test can be done in several ways.</span></span>  <span data-ttu-id="27e29-404">Örneği için bir ad dışında aynı olan 1000 iş akışları oluşturmak için kod oluşturmayı kullan ve bu iş akışlarının her ayrı dosyaların kaydedileceği.</span><span class="sxs-lookup"><span data-stu-id="27e29-404">For instance, one could use code generation to create a set of 1000 workflows that are identical except in name and save each of those workflows into separate files.</span></span>  <span data-ttu-id="27e29-405">Bu yaklaşım, konsolu barındırılan testi yapılmadı.</span><span class="sxs-lookup"><span data-stu-id="27e29-405">This approach was taken for the console-hosted test.</span></span>  <span data-ttu-id="27e29-406">WF3 içinde <xref:System.Workflow.Runtime.WorkflowRuntime> sınıf, iş akışı tanımları çalıştırmak için kullanıldı.</span><span class="sxs-lookup"><span data-stu-id="27e29-406">In WF3, the <xref:System.Workflow.Runtime.WorkflowRuntime> class was used to run the workflow definitions.</span></span>  <span data-ttu-id="27e29-407">WF4 olabilir ya da kullanım <xref:System.Activities.WorkflowApplication> doğrudan kullanabilir veya tek bir iş akışı örneği için <xref:System.Activities.WorkflowInvoker> bir yöntem çağrısının değilmiş gibi etkinliği çalıştırmak için.</span><span class="sxs-lookup"><span data-stu-id="27e29-407">WF4 can either use <xref:System.Activities.WorkflowApplication> to create a single workflow instance or directly use <xref:System.Activities.WorkflowInvoker> to run the activity as if it were a method call.</span></span>  <span data-ttu-id="27e29-408"><xref:System.Activities.WorkflowApplication> bir iş akışı tek örneği çok sayıda ve daha yakın özellik eşliği için <xref:System.Workflow.Runtime.WorkflowRuntime> böylece bu sınamada kullanıldı.</span><span class="sxs-lookup"><span data-stu-id="27e29-408"><xref:System.Activities.WorkflowApplication> is a host of a single workflow instance and has closer feature parity to <xref:System.Workflow.Runtime.WorkflowRuntime> so that was used in this test.</span></span>

 <span data-ttu-id="27e29-409">IIS akışlarında barındırırken kullanmak mümkün mü bir <xref:System.Web.Hosting.VirtualPathProvider> yeni bir <xref:System.ServiceModel.WorkflowServiceHost> tüm XAMLX veya XOML dosyaları oluşturmak yerine.</span><span class="sxs-lookup"><span data-stu-id="27e29-409">When hosting workflows in IIS it is possible to use a <xref:System.Web.Hosting.VirtualPathProvider> to create a new <xref:System.ServiceModel.WorkflowServiceHost> instead of generating all of the XAMLX or XOML files.</span></span>  <span data-ttu-id="27e29-410"><xref:System.Web.Hosting.VirtualPathProvider> Gelen isteği işler ve "bir veritabanından yüklendi ya da, bu durumda, çalışma sırasında oluşturulan bir sanal dosya" ile yanıt verir.</span><span class="sxs-lookup"><span data-stu-id="27e29-410">The <xref:System.Web.Hosting.VirtualPathProvider> handles the incoming request and responds with a "virtual file" that can be loaded from a database or, in this case, generated on the fly.</span></span>  <span data-ttu-id="27e29-411">Bu nedenle, 1000 fiziksel dosyaları oluşturmak gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="27e29-411">It is therefore unnecessary to create 1000 physical files.</span></span>

 <span data-ttu-id="27e29-412">Konsol testte kullanılan iş akışı tanımları basit sıralı iş akışları ile tek bir etkinlik oldu.</span><span class="sxs-lookup"><span data-stu-id="27e29-412">The workflow definitions used in the console test were simple sequential workflows with a single activity.</span></span>  <span data-ttu-id="27e29-413">Boş bir tek bir etkinlik oldu <xref:System.Workflow.Activities.CodeActivity> WF3 çalışması için ve bir `Comment` WF4 çalışması için etkinlik.</span><span class="sxs-lookup"><span data-stu-id="27e29-413">The single activity was an empty <xref:System.Workflow.Activities.CodeActivity> for the WF3 case and a `Comment` activity for the WF4 case.</span></span>  <span data-ttu-id="27e29-414">IIS barındırılan durum iletisi ve bir yanıt gönderme son alınmasına başlangıç iş akışları kullanılır:</span><span class="sxs-lookup"><span data-stu-id="27e29-414">The IIS-hosted case used workflows that start on receiving a message and end on sending a reply:</span></span>

 <span data-ttu-id="27e29-415">![İş akışı hizmetleri WF3 ve WF4](../../../docs/framework/windows-workflow-foundation/media/receiveworkflowboth.gif "ReceiveWorkflowBoth")</span><span class="sxs-lookup"><span data-stu-id="27e29-415">![Workflow Services in WF3 and WF4](../../../docs/framework/windows-workflow-foundation/media/receiveworkflowboth.gif "ReceiveWorkflowBoth")</span></span>

 <span data-ttu-id="27e29-416">Şekil 4-istek/yanıt düzendeki ReceiveActivity ve WF4 iş akışı ile WF3 iş akışı</span><span class="sxs-lookup"><span data-stu-id="27e29-416">Figure 4 – WF3 workflow with ReceiveActivity and WF4 workflow with request/response pattern</span></span>

 <span data-ttu-id="27e29-417">Aşağıdaki tabloda çalışma kümesi tek bir iş akışı tanımı ve 1001 tanımları arasında değişiklik gösterir:</span><span class="sxs-lookup"><span data-stu-id="27e29-417">The table below shows the delta in working set between a single workflow definition and 1001 definitions:</span></span>

|<span data-ttu-id="27e29-418">Barındırma seçenekleri</span><span class="sxs-lookup"><span data-stu-id="27e29-418">Hosting Options</span></span>|<span data-ttu-id="27e29-419">WF3 Çalışma kümesi Delta</span><span class="sxs-lookup"><span data-stu-id="27e29-419">WF3 Working Set Delta</span></span>|<span data-ttu-id="27e29-420">WF4 Çalışma kümesi Delta</span><span class="sxs-lookup"><span data-stu-id="27e29-420">WF4 Working Set Delta</span></span>|
|---------------------|---------------------------|---------------------------|
|<span data-ttu-id="27e29-421">İş akışı konsol uygulaması barındırılan</span><span class="sxs-lookup"><span data-stu-id="27e29-421">Console Application Hosted Workflows</span></span>|<span data-ttu-id="27e29-422">18 MB</span><span class="sxs-lookup"><span data-stu-id="27e29-422">18 MB</span></span>|<span data-ttu-id="27e29-423">9 MB</span><span class="sxs-lookup"><span data-stu-id="27e29-423">9 MB</span></span>|
|<span data-ttu-id="27e29-424">IIS barındırılan iş akışı Hizmetleri</span><span class="sxs-lookup"><span data-stu-id="27e29-424">IIS Hosted Workflow Services</span></span>|<span data-ttu-id="27e29-425">446 MB</span><span class="sxs-lookup"><span data-stu-id="27e29-425">446 MB</span></span>|<span data-ttu-id="27e29-426">364 MB</span><span class="sxs-lookup"><span data-stu-id="27e29-426">364 MB</span></span>|

 <span data-ttu-id="27e29-427">İş akışı tanımları IIS'de barındırma nedeniyle çok daha fazla bellek tüketir <xref:System.ServiceModel.WorkflowServiceHost>, ayrıntılı WCF hizmeti yapıları ve işleme mantığı konakla ilişkili ileti.</span><span class="sxs-lookup"><span data-stu-id="27e29-427">Hosting workflow definitions in IIS consumes much more memory due to the <xref:System.ServiceModel.WorkflowServiceHost>, detailed WCF service artifacts, and the message processing logic associated with the host.</span></span>

 <span data-ttu-id="27e29-428">Konsolu WF3 içinde iş akışları barındırma için XOML yerine kod da uygulanan.</span><span class="sxs-lookup"><span data-stu-id="27e29-428">For console hosting in WF3 the workflows were implemented in code instead of XOML.</span></span>  <span data-ttu-id="27e29-429">İçinde WF4 varsayılan XAML kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="27e29-429">In WF4 the default is to use XAML.</span></span>  <span data-ttu-id="27e29-430">XAML derlemesinde gömülü bir kaynak olarak depolanan ve çalışma zamanı sırasında bir iş akışı bir uygulama sağlamak için derlenmiş.</span><span class="sxs-lookup"><span data-stu-id="27e29-430">The XAML is stored as an embedded resource in the assembly and compiled during runtime to provide the implementation of the workflow.</span></span>  <span data-ttu-id="27e29-431">Bu işlemle ilişkili bazı ek yükler vardır.</span><span class="sxs-lookup"><span data-stu-id="27e29-431">There is some overhead associated with this process.</span></span>  <span data-ttu-id="27e29-432">Kodlanmış iş akışları WF3 ve WF4 arasında adil bir karşılaştırma yapmak için XAML yerine kullanıldı.</span><span class="sxs-lookup"><span data-stu-id="27e29-432">In order to make a fair comparison between WF3 and WF4, coded workflows were used instead of XAML.</span></span>  <span data-ttu-id="27e29-433">WF4 iş akışlarının bir örneği aşağıda gösterilmiştir:</span><span class="sxs-lookup"><span data-stu-id="27e29-433">An example of one of the WF4 workflows is shown below:</span></span>

```
public class Workflow1 : Activity
{
    protected override Func<Activity> Implementation
    {
        get
        {
            return new Func<Activity>(() =>
            {
                return new Sequence
                {
                    Activities = {
                        new Comment()
                    }
                };
            });
        }
        set
        {
            base.Implementation = value;
        }
    }
}
```

 <span data-ttu-id="27e29-434">Bellek tüketimi etkileyebilecek diğer birçok faktörü vardır.</span><span class="sxs-lookup"><span data-stu-id="27e29-434">There are many other factors that can affect memory consumption.</span></span> <span data-ttu-id="27e29-435">Aynı öneriler tüm yönetilen programlar için geçerli olacaktır.</span><span class="sxs-lookup"><span data-stu-id="27e29-435">The same advice for all managed programs still applies.</span></span>  <span data-ttu-id="27e29-436">IIS barındırılan ortamlarda <xref:System.ServiceModel.WorkflowServiceHost> bir iş akışı tanımı için oluşturulan nesne, uygulama havuzu geri dönüştürülmeden kadar bellekte kalır.</span><span class="sxs-lookup"><span data-stu-id="27e29-436">In IIS-hosted environments, the <xref:System.ServiceModel.WorkflowServiceHost> object created for a workflow definition stays in memory until the application pool is recycled.</span></span>  <span data-ttu-id="27e29-437">Bunu göz önünde uzantıları yazarken tutulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-437">This should be kept in mind when writing extensions.</span></span>  <span data-ttu-id="27e29-438">Ayrıca, "Genel" değişkenler (tüm iş akışına kapsamlı değişkenler) kullanmaktan kaçının ve mümkünse değişkenleri kapsamını sınırlamak idealdir.</span><span class="sxs-lookup"><span data-stu-id="27e29-438">Also, it is best to avoid "global" variables (variables scoped to the whole workflow) and limit the scope of variables wherever possible.</span></span>

## <a name="workflow-runtime-services"></a><span data-ttu-id="27e29-439">İş akışı çalışma zamanı Hizmetleri</span><span class="sxs-lookup"><span data-stu-id="27e29-439">Workflow Runtime Services</span></span>

### <a name="persistence"></a><span data-ttu-id="27e29-440">Kalıcılığı</span><span class="sxs-lookup"><span data-stu-id="27e29-440">Persistence</span></span>
 <span data-ttu-id="27e29-441">WF3 ve WF4 hem de SQL kalıcı bir sağlayıcı ile gönderin.</span><span class="sxs-lookup"><span data-stu-id="27e29-441">WF3 and WF4 both ship with a SQL persistence provider.</span></span>  <span data-ttu-id="27e29-442">WF3 SQL kalıcı bir sağlayıcı iş akışı örneği serileştirir ve bir blobun depolayan basit bir uygulamadır.</span><span class="sxs-lookup"><span data-stu-id="27e29-442">The WF3 SQL persistence provider is a simple implementation that serializes the workflow instance and stores it in a blob.</span></span>  <span data-ttu-id="27e29-443">Bu nedenle, bu sağlayıcı performansı yoğun iş akışı örneği boyutuna bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-443">For this reason, the performance of this provider depends heavily on the size of the workflow instance.</span></span>  <span data-ttu-id="27e29-444">WF3 içinde bu belgede daha önce anlatıldığı gibi çeşitli nedenlerle örnek boyutunu artırabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-444">In WF3, the instance size could increase for many reasons, as is discussed previously in this paper.</span></span>  <span data-ttu-id="27e29-445">Birçok müşteri, serileştirilmiş bir örnek, bir veritabanında saklamanın hiçbir iş akışı durumunu görünürlük sağladığından varsayılan SQL kalıcı bir sağlayıcı kullanmamayı seçin.</span><span class="sxs-lookup"><span data-stu-id="27e29-445">Many customers choose not to use the default SQL persistence provider because storing a serialized instance in a database gives no visibility into the state of the workflow.</span></span>  <span data-ttu-id="27e29-446">Belirli bir iş akışı, iş akışı kimliği bilmeden bulmak amacıyla bir kalıcı her örneği seri durumdan ve içeriğini inceleyin gerekir.</span><span class="sxs-lookup"><span data-stu-id="27e29-446">In order to find a particular workflow without knowing the workflow id, one would have to deserialize each persisted instance and examine the contents.</span></span>  <span data-ttu-id="27e29-447">Bu sorunu çözmek için kendi Kalıcılık sağlayıcıları yazmak birçok geliştiricinin tercih eder.</span><span class="sxs-lookup"><span data-stu-id="27e29-447">Many developers prefer to write their own persistence providers to overcome this obstacle.</span></span>

 <span data-ttu-id="27e29-448">WF4 SQL kalıcı bir sağlayıcı, bu sorunlar bazılarını ele almak çalıştı.</span><span class="sxs-lookup"><span data-stu-id="27e29-448">The WF4 SQL persistence provider has tried to address some of these concerns.</span></span>  <span data-ttu-id="27e29-449">Kalıcılık tablolar active yer işaretleri ve promotable özellikleri gibi belirli bilgileri ortaya çıkarır.</span><span class="sxs-lookup"><span data-stu-id="27e29-449">The persistence tables expose certain information such as the active bookmarks and promotable properties.</span></span>  <span data-ttu-id="27e29-450">WF4 yeni içerik temelli bağıntı özelliği de kalıcı iş akışı örneği bir kuruluştaki bazı değişiklik yürütmüştür WF3 SQL Kalıcılık yaklaşımı kullanarak işlemi.</span><span class="sxs-lookup"><span data-stu-id="27e29-450">The new content-based correlation feature in WF4 would not perform well using the WF3 SQL persistence approach, which has driven some change in the organization of the persisted workflow instance.</span></span>  <span data-ttu-id="27e29-451">Bu kalıcı bir sağlayıcı işini daha karmaşık hale getirir ve veritabanı üzerinde ek yük getirir.</span><span class="sxs-lookup"><span data-stu-id="27e29-451">This makes the job of the persistence provider more complex and puts extra stress on the database.</span></span>

### <a name="environment-setup"></a><span data-ttu-id="27e29-452">Ortam Kurulumu</span><span class="sxs-lookup"><span data-stu-id="27e29-452">Environment Setup</span></span>
 <span data-ttu-id="27e29-453">![İş akışı performans sınama ortamı](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span><span class="sxs-lookup"><span data-stu-id="27e29-453">![Workflow Performance Test Environment](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span></span>

### <a name="test-setup"></a><span data-ttu-id="27e29-454">Test Kurulumu</span><span class="sxs-lookup"><span data-stu-id="27e29-454">Test Setup</span></span>
 <span data-ttu-id="27e29-455">Hatta bir gelişmiş özellik kümesi ve daha iyi eşzamanlılık işleme ile WF4 SQL Kalıcılık sağlayıcı WF3 sağlayıcısında hızlıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-455">Even with an improved feature set and better concurrency handling, the SQL persistence provider in WF4 is faster than the provider in WF3.</span></span>  <span data-ttu-id="27e29-456">Bu göstermek için aşağıda WF3 ve WF4 temelde aynı işlemleri gerçekleştirme iki iş akışları karşılaştırılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-456">To showcase this, two workflows that perform essentially the same operations in WF3 and WF4 are compared below.</span></span>

 <span data-ttu-id="27e29-457">![Kalıcılık iş akışları](../../../docs/framework/windows-workflow-foundation/media/persistworkflow.gif "PersistWorkflow")</span><span class="sxs-lookup"><span data-stu-id="27e29-457">![Persistence Workflows](../../../docs/framework/windows-workflow-foundation/media/persistworkflow.gif "PersistWorkflow")</span></span>

 <span data-ttu-id="27e29-458">Şekil 5 – WF3 üzerinde iş akışı kalıcılığı sol ve sağ taraftaki WF4</span><span class="sxs-lookup"><span data-stu-id="27e29-458">Figure 5 – Persistence workflow in WF3 on left and WF4 on right</span></span>

 <span data-ttu-id="27e29-459">İki iş akışları her ikisi tarafından alınan bir ileti oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="27e29-459">The two workflows are both created by a received message.</span></span>  <span data-ttu-id="27e29-460">Bir ilk yanıt gönderdikten sonra iş akışı kalıcı hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-460">After sending an initial reply, the workflow is persisted.</span></span>  <span data-ttu-id="27e29-461">WF3 durumda, boş bir <xref:System.Workflow.ComponentModel.TransactionScopeActivity> Kalıcılık başlatmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-461">In the WF3 case, an empty <xref:System.Workflow.ComponentModel.TransactionScopeActivity> is used to initiate the persistence.</span></span>  <span data-ttu-id="27e29-462">Aynı WF3 içinde bir etkinlik "kalıcı olarak kapalı durumda." olarak işaretleyerek elde edilebilir</span><span class="sxs-lookup"><span data-stu-id="27e29-462">The same could be achieved in WF3 by marking an activity as "persist on close."</span></span>  <span data-ttu-id="27e29-463">İş akışı ikinci, ilişkili bir iletiyi tamamlar.</span><span class="sxs-lookup"><span data-stu-id="27e29-463">A second, correlated message completes the workflow.</span></span>  <span data-ttu-id="27e29-464">İş akışı kalıcı ancak değil kaldırıldı.</span><span class="sxs-lookup"><span data-stu-id="27e29-464">The workflows are persisted but not unloaded.</span></span>

### <a name="test-results"></a><span data-ttu-id="27e29-465">Test Sonuçları</span><span class="sxs-lookup"><span data-stu-id="27e29-465">Test Results</span></span>
 <span data-ttu-id="27e29-466">![Aktarım hızı Kalıcılık](../../../docs/framework/windows-workflow-foundation/media/throughputpersistence.gif "ThroughputPersistence")</span><span class="sxs-lookup"><span data-stu-id="27e29-466">![Throughput Persistence](../../../docs/framework/windows-workflow-foundation/media/throughputpersistence.gif "ThroughputPersistence")</span></span>

 <span data-ttu-id="27e29-467">İstemci ve orta katman arasında taşıma HTTP olduğunda WF4 kalıcı bir geliştirme 2.6 kaç kez gösterir.</span><span class="sxs-lookup"><span data-stu-id="27e29-467">When the transport between client and middle tier is HTTP, persistence in WF4 shows an improvement of 2.6 times.</span></span>  <span data-ttu-id="27e29-468">TCP aktarımı yalıtılması için 3.0 sürelerini artırır.</span><span class="sxs-lookup"><span data-stu-id="27e29-468">The TCP transport increases that factor to 3.0 times.</span></span>  <span data-ttu-id="27e29-469">Her durumda, CPU kullanımı orta katman %98 olduğu veya üzeri.</span><span class="sxs-lookup"><span data-stu-id="27e29-469">In all cases, CPU utilization on the middle tier is 98% or higher.</span></span>  <span data-ttu-id="27e29-470">WF4 aktarım hızını büyük olduğunu nedeni daha hızlı iş akışı çalışma zamanı nedeniyle olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-470">The reason that WF4 throughput is greater is due to the faster workflow runtime.</span></span>  <span data-ttu-id="27e29-471">Seri hale getirilmiş örnek boyutu için her iki durumda düşüktür ve önemli bir katkıda bulunan öğesi böyle bir durumda değil.</span><span class="sxs-lookup"><span data-stu-id="27e29-471">The size of the serialized instance is low for both cases and is not a major contributing element in this situation.</span></span>

 <span data-ttu-id="27e29-472">Bu test WF3 hem WF4 akışlarında bir etkinliğin ne zaman Kalıcılık gerçekleşmesi gerektiğini açıkça belirtmek için kullanın.</span><span class="sxs-lookup"><span data-stu-id="27e29-472">Both the WF3 and WF4 workflows in this test use an activity to explicitly indicate when persistence should occur.</span></span>  <span data-ttu-id="27e29-473">Bu eklentiyi olmadan iş akışını sürdürmek avantajına sahiptir.</span><span class="sxs-lookup"><span data-stu-id="27e29-473">This has the benefit of persisting the workflow without unloading it.</span></span>  <span data-ttu-id="27e29-474">WF3 içinde da kullanarak kalıcı hale getirmek mümkündür <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> özellik, ancak bu bellek iş akışı örneğinden kaldırır.</span><span class="sxs-lookup"><span data-stu-id="27e29-474">In WF3, it is also possible to persist using the <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> feature, but this unloads the workflow instance from memory.</span></span>  <span data-ttu-id="27e29-475">Bir geliştirici WF3 kullanarak bir iş akışı devam ederse bazı noktalarda emin olmak isterse, ya da iş akışı tanımını veya iş akışı örneği yeniden yükleme ve kaldırma için maliyet ödeme sahiptirler.</span><span class="sxs-lookup"><span data-stu-id="27e29-475">If a developer using WF3 wants to make sure a workflow persists at certain points, they either have to alter the workflow definition or pay the cost for unloading and re-loading the workflow instance.</span></span>  <span data-ttu-id="27e29-476">Yeni bir özellik WF4 kaldırmadan kalıcı hale getirmek mümkün kılar: <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A>.</span><span class="sxs-lookup"><span data-stu-id="27e29-476">A new feature in WF4 makes it possible to persist without unloading: <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A>.</span></span>  <span data-ttu-id="27e29-477">Bu özellik, iş akışı örneği kadar bellekte kalır ancak üzerinde kalıcı olmasını sağlar. <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> eşiği karşılanıyorsa veya yürütme sürdürüldü.</span><span class="sxs-lookup"><span data-stu-id="27e29-477">This feature allows the workflow instance to be persisted on idle but stay in memory until the <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> threshold is met or execution is resumed.</span></span>

 <span data-ttu-id="27e29-478">WF4 SQL kalıcı bir sağlayıcı veritabanı katmanında daha fazla iş gerçekleştireceğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="27e29-478">Note that the WF4 SQL persistence provider performs more work in the database tier.</span></span>  <span data-ttu-id="27e29-479">SQL veritabanı, burada CPU ve disk kullanımını izlemek önemlidir bir performans sorunu haline gelebilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-479">The SQL database can become a bottleneck so it is important to monitor the CPU and disk usage there.</span></span>  <span data-ttu-id="27e29-480">Aşağıdaki eklediğinizden emin olun performans sayaçlarını SQL veritabanı performans testi iş akışı uygulamaları:</span><span class="sxs-lookup"><span data-stu-id="27e29-480">Be sure to include the following performance counters from the SQL database when performance testing workflow applications:</span></span>

-   <span data-ttu-id="27e29-481">PhysicalDisk\\% Disk Zamanı okuma</span><span class="sxs-lookup"><span data-stu-id="27e29-481">PhysicalDisk\\%Disk Read Time</span></span>

-   <span data-ttu-id="27e29-482">PhysicalDisk\\% Disk Zamanı</span><span class="sxs-lookup"><span data-stu-id="27e29-482">PhysicalDisk\\% Disk Time</span></span>

-   <span data-ttu-id="27e29-483">PhysicalDisk\\% Disk yazma saati</span><span class="sxs-lookup"><span data-stu-id="27e29-483">PhysicalDisk\\% Disk Write Time</span></span>

-   <span data-ttu-id="27e29-484">PhysicalDisk\\% ortalama Disk kuyruğu uzunluğu</span><span class="sxs-lookup"><span data-stu-id="27e29-484">PhysicalDisk\\% Avg. Disk Queue Length</span></span>

-   <span data-ttu-id="27e29-485">PhysicalDisk\Avg. Disk okuma kuyruğu uzunluğu</span><span class="sxs-lookup"><span data-stu-id="27e29-485">PhysicalDisk\Avg. Disk Read Queue Length</span></span>

-   <span data-ttu-id="27e29-486">PhysicalDisk\Avg. Disk yazma kuyruğu uzunluğu</span><span class="sxs-lookup"><span data-stu-id="27e29-486">PhysicalDisk\Avg. Disk Write Queue Length</span></span>

-   <span data-ttu-id="27e29-487">PhysicalDisk\Current Disk kuyruğu uzunluğu</span><span class="sxs-lookup"><span data-stu-id="27e29-487">PhysicalDisk\Current Disk Queue Length</span></span>

-   <span data-ttu-id="27e29-488">İşlemci bilgileri\\% işlemci zamanı</span><span class="sxs-lookup"><span data-stu-id="27e29-488">Processor Information\\% Processor Time</span></span>

-   <span data-ttu-id="27e29-489">SQLServer:Latches\Average Mandal bekleme süresi (ms)</span><span class="sxs-lookup"><span data-stu-id="27e29-489">SQLServer:Latches\Average Latch Wait Time (ms)</span></span>

-   <span data-ttu-id="27e29-490">SQLServer:Latches\Latch bekler/sn</span><span class="sxs-lookup"><span data-stu-id="27e29-490">SQLServer:Latches\Latch Waits/sec</span></span>

### <a name="tracking"></a><span data-ttu-id="27e29-491">İzleme</span><span class="sxs-lookup"><span data-stu-id="27e29-491">Tracking</span></span>
 <span data-ttu-id="27e29-492">İş akışı izleme, bir iş akışı ilerlemesini izlemek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-492">Workflow tracking can be used to track the progress of a workflow.</span></span>  <span data-ttu-id="27e29-493">İzleme olayları dahil edilmiş bilgileri bir izleme profili tarafından belirlenir.</span><span class="sxs-lookup"><span data-stu-id="27e29-493">The information that is included in the tracking events is determined by a tracking profile.</span></span>  <span data-ttu-id="27e29-494">Daha karmaşık izleme profili, izleme daha pahalı olur.</span><span class="sxs-lookup"><span data-stu-id="27e29-494">The more complex the tracking profile, the more expensive tracking becomes.</span></span>

 <span data-ttu-id="27e29-495">WF3 SQL tabanlı izleme hizmeti ile birlikte gelir.</span><span class="sxs-lookup"><span data-stu-id="27e29-495">WF3 shipped with a SQL-based tracking service.</span></span>  <span data-ttu-id="27e29-496">Bu hizmet, toplu ve toplu olmayan modda çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-496">This service could work in batched and non-batched modes.</span></span>  <span data-ttu-id="27e29-497">Toplu olmayan modda, izleme olayları doğrudan veritabanına yazılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-497">In non-batched mode, tracking events are written directly to the database.</span></span>  <span data-ttu-id="27e29-498">Toplu iş modunda izleme olaylarını, iş akışı örneği durumu olarak aynı toplu iş içine toplanır.</span><span class="sxs-lookup"><span data-stu-id="27e29-498">In batched mode, tracking events are collected into the same batch as the workflow instance state.</span></span>  <span data-ttu-id="27e29-499">Toplu iş modu iş akışı tasarım yelpazedeki en iyi performansı vardır.</span><span class="sxs-lookup"><span data-stu-id="27e29-499">The batched mode has the best performance for the widest range of workflow designs.</span></span>  <span data-ttu-id="27e29-500">Ancak, toplu işleme olumsuz bir etkisi olmadan kalıcı birçok etkinlik iş akışı çalıştırır ve bu etkinlikler izlenir olabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-500">However, batching can have a negative performance impact if the workflow runs many activities without persisting and those activities are tracked.</span></span>  <span data-ttu-id="27e29-501">Bu genellikle Döngülerde olacağını ve bu senaryonun olmaması için en iyi bir Kalıcılık noktası içerecek şekilde büyük döngüler tasarlamak için yoludur.</span><span class="sxs-lookup"><span data-stu-id="27e29-501">This would commonly happen in loops and the best way to avoid this scenario is to design large loops to contain a persistence point.</span></span>  <span data-ttu-id="27e29-502">Her maliyetleri ve bir bakiye ile gündeme önemlidir bir döngüye Kalıcılık noktası ile tanışın de performansı olumsuz yönde etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-502">Introducing a persistence point into a loop can negatively affect performance as well so it is important to measure the costs of each and come up with a balance.</span></span>

 <span data-ttu-id="27e29-503">WF4 hizmet İzleme SQL ile birlikte gönderilmeyen.</span><span class="sxs-lookup"><span data-stu-id="27e29-503">WF4 is not shipped with a SQL tracking service.</span></span>  <span data-ttu-id="27e29-504">İzleme bilgilerini bir SQL veritabanı'na kayıt daha iyi bir uygulama sunucusundan işlenen yerine yerleşik [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="27e29-504">Recording tracking information to a SQL database can be handled better from an application server rather than built into the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span></span> <span data-ttu-id="27e29-505">Bu nedenle SQL izleme artık AppFabric tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="27e29-505">Therefore SQL tracking is now handled by AppFabric.</span></span>  <span data-ttu-id="27e29-506">Kullanıma hazır izleme sağlayıcısı WF4 olay izleme için Windows (ETW üzerinde) temel alır.</span><span class="sxs-lookup"><span data-stu-id="27e29-506">The out-of-the-box tracking provider in WF4 is based on Event Tracing for Windows (ETW).</span></span>

 <span data-ttu-id="27e29-507">ETW, Windows içinde oluşturulmuş bir çekirdek düzeyinde ve düşük gecikmeli olay sistemidir.</span><span class="sxs-lookup"><span data-stu-id="27e29-507">ETW is a kernel-level, low-latency event system built into Windows.</span></span>  <span data-ttu-id="27e29-508">Bu, aslında bir tüketici olduğunda yalnızca için olay izleme cezası uygulanmaya mümkün kılan bir sağlayıcı/tüketici modeli kullanır.</span><span class="sxs-lookup"><span data-stu-id="27e29-508">It uses a provider/consumer model that makes it possible to only incur the penalty for event tracing when there is actually a consumer.</span></span>  <span data-ttu-id="27e29-509">İşlemci, disk, bellek ve ağ kullanımı gibi çekirdek olayları yanı sıra birçok uygulama ETW de yararlanın.</span><span class="sxs-lookup"><span data-stu-id="27e29-509">In addition to kernel events such as processor, disk, memory, and network usage, many applications leverage ETW as well.</span></span>  <span data-ttu-id="27e29-510">Olayları, uygulama için özelleştirilebilir, ETW olayları, performans sayaçları daha güçlü.</span><span class="sxs-lookup"><span data-stu-id="27e29-510">ETW events are more powerful than performance counters in that events can be customized to the application.</span></span>  <span data-ttu-id="27e29-511">Bir olay iş akışı kimliği ya da bir bilgi iletisidir gibi metin içerebilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-511">An event can contain text such as a workflow ID or an informational message.</span></span>  <span data-ttu-id="27e29-512">Ayrıca, belirli bir alt olayların kullanan tüm olayları yakalamak daha az performans etkisine sahip olur, böylece olayları bit maskesi ile ayrılır.</span><span class="sxs-lookup"><span data-stu-id="27e29-512">Also, events are categorized with bitmasks so that consuming a certain subset of events will have less performance impact than capturing all events.</span></span>

 <span data-ttu-id="27e29-513">ETW İzleme SQL yerine kullanmanın yaklaşımın avantajları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="27e29-513">Benefits to the approach of using ETW for tracking instead of SQL include:</span></span>

-   <span data-ttu-id="27e29-514">Olayları izleme koleksiyonu başka bir işlem için ayrılabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-514">Collection of tracking events can be separated to another process.</span></span>  <span data-ttu-id="27e29-515">Bu, olayların nasıl kaydedileceğini daha fazla esneklik sağlar.</span><span class="sxs-lookup"><span data-stu-id="27e29-515">This gives greater flexibility in how the events are recorded.</span></span>

-   <span data-ttu-id="27e29-516">ETW İzleme olayları kolayca WCF ETW olayları veya bir SQL Server veya çekirdek sağlayıcısı gibi diğer ETW sağlayıcıları ile birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-516">ETW tracking events are easily combined with the WCF ETW events or other ETW providers such as a SQL Server or kernel provider.</span></span>

-   <span data-ttu-id="27e29-517">İş akışı yazarları WF3 SQL izleme hizmetin toplu iş modu gibi belirli izleme yer alan bir uygulama daha iyi çalışması için bir iş akışı alter gerek yoktur.</span><span class="sxs-lookup"><span data-stu-id="27e29-517">Workflow authors do not need to alter a workflow to work better with a particular tracking implementation, such as the WF3 SQL tracking service’s batch mode.</span></span>

-   <span data-ttu-id="27e29-518">Yönetici izleme üzerinde veya ana bilgisayar işlemi geri dönüştürme olmadan kapatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27e29-518">An administrator can turn tracking on or off without recycling the host process.</span></span>

 <span data-ttu-id="27e29-519">ETW İzleme için performans avantajlarının bir dezavantajı ile gelir.</span><span class="sxs-lookup"><span data-stu-id="27e29-519">The performance benefits to ETW tracking come with a drawback.</span></span>  <span data-ttu-id="27e29-520">Sistemin yoğun kaynak baskısı altında ise ETW olayları kaybolabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-520">ETW events can be lost if the system is under intense resource pressure.</span></span>  <span data-ttu-id="27e29-521">Olayların işlenmesini normal program yürütme engelleyecek şekilde tasarlanmamıştır ve bu nedenle, tüm ETW olayları abonelerini için yayın garanti edilmez.</span><span class="sxs-lookup"><span data-stu-id="27e29-521">The processing of events is not meant to block normal program execution and therefore it is not guaranteed that all ETW events will be broadcast to their subscribers.</span></span>  <span data-ttu-id="27e29-522">Bu sistem durumu izleme harika ancak denetim için uygun ETW İzleme sağlar.</span><span class="sxs-lookup"><span data-stu-id="27e29-522">This makes ETW tracking great for health monitoring but not suitable for auditing.</span></span>

 <span data-ttu-id="27e29-523">WF4 SQL izleme sağlayıcısı yokken, AppFabric yapar.</span><span class="sxs-lookup"><span data-stu-id="27e29-523">While WF4 does not have a SQL tracking provider, AppFabric does.</span></span>  <span data-ttu-id="27e29-524">AppFabric'ın SQL izleme olayları binlik toplu işlem ve bunları hızlı eklemeleri için tasarlanmış bir SQL tablosunu yazan bir Windows hizmeti ile ETW olayları abone olmak için bir yaklaşımdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-524">AppFabric’s SQL tracking approach is to subscribe to ETW events with a Windows Service that batches the events and writes them to a SQL table designed for quick inserts.</span></span>  <span data-ttu-id="27e29-525">Ayrı bir iş, bu tablodaki verileri boşaltır ve AppFabric Panoda görüntülenebilir tabloları raporlamasına reforms.</span><span class="sxs-lookup"><span data-stu-id="27e29-525">A separate job drains the data from this table and reforms it into reporting tables that can be viewed on the AppFabric dashboard.</span></span>  <span data-ttu-id="27e29-526">Başka bir deyişle, bir batch olayları izleme geldiği ve bu nedenle bir Kalıcılık noktası için kaydedilen önce beklenecek sahip iş akışı bağımsız olarak işlenir.</span><span class="sxs-lookup"><span data-stu-id="27e29-526">This means that a batch of tracking events is handled independent of the workflow it came from and therefore does not have to wait for a persistence point before being recorded.</span></span>

 <span data-ttu-id="27e29-527">ETW olayları logman veya xperf gibi araçlarla kaydedilebilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-527">ETW events can be recorded with tools such as logman or xperf.</span></span>  <span data-ttu-id="27e29-528">Compact ETL dosyası xperfview gibi bir araçla görüntülenebilir veya daha okunabilir bir biçimde, XML gibi tracerpt ile dönüştürülür.</span><span class="sxs-lookup"><span data-stu-id="27e29-528">The compact ETL file can be viewed with a tool like xperfview or converted to a more readable format, such as XML, with tracerpt.</span></span>  <span data-ttu-id="27e29-529">WF3 içinde bir SQL veritabanı olmadan olayları izleme almak için tek seçenek özel izleme hizmeti oluşturmaktır.</span><span class="sxs-lookup"><span data-stu-id="27e29-529">In WF3, the only option for getting tracking events without a SQL database is to create a custom tracking service.</span></span> <span data-ttu-id="27e29-530">ETW hakkında daha fazla bilgi için bkz: [WCF hizmetleri ve olay izleme için Windows](../../../docs/framework/wcf/samples/wcf-services-and-event-tracing-for-windows.md) ve [olay izleme - Windows uygulamalarını](/windows/desktop/etw/event-tracing-portal).</span><span class="sxs-lookup"><span data-stu-id="27e29-530">For more information about ETW, see [WCF Services and Event Tracing for Windows](../../../docs/framework/wcf/samples/wcf-services-and-event-tracing-for-windows.md) and [Event Tracing - Windows applications](/windows/desktop/etw/event-tracing-portal).</span></span>

 <span data-ttu-id="27e29-531">Etkinleştirme iş akışı izleme değişen derece cinsinden performansını etkiler.</span><span class="sxs-lookup"><span data-stu-id="27e29-531">Enabling workflow tracking will impact performance in varying degrees.</span></span>  <span data-ttu-id="27e29-532">Aşağıdaki Kıyaslama ETW olayları izleme kullanmak ve bunları bir ETL dosyası olarak kaydetmek için logman Aracı'nı kullanır.</span><span class="sxs-lookup"><span data-stu-id="27e29-532">The benchmark below uses the logman tool to consume the ETW tracking events and record them to an ETL file.</span></span>  <span data-ttu-id="27e29-533">AppFabric içinde İzleme SQL maliyeti, bu makale kapsamında değil.</span><span class="sxs-lookup"><span data-stu-id="27e29-533">The cost of the SQL tracking in AppFabric is not in the scope of this article.</span></span>  <span data-ttu-id="27e29-534">Ayrıca AppFabric içinde kullanılan temel izleme profili, bu karşılaştırmalı gösterilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-534">The basic tracking profile, also used in AppFabric, is shown in this benchmark.</span></span>  <span data-ttu-id="27e29-535">De dahil, yalnızca sistem durumu izleme olaylarını izleme maliyetidir.</span><span class="sxs-lookup"><span data-stu-id="27e29-535">Also included is the cost of tracking only health monitoring events.</span></span>  <span data-ttu-id="27e29-536">Bu olaylar ile ilgili sorunları giderme ve ortalama sistemin aktarım hızının belirlemek için yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="27e29-536">These events are useful for troubleshooting problems and determining the average throughput of the system.</span></span>

### <a name="environment-setup"></a><span data-ttu-id="27e29-537">Ortam Kurulumu</span><span class="sxs-lookup"><span data-stu-id="27e29-537">Environment Setup</span></span>
 <span data-ttu-id="27e29-538">![İş akışı performans sınama ortamı](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span><span class="sxs-lookup"><span data-stu-id="27e29-538">![Workflow Performance Test Environment](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span></span>

### <a name="test-results"></a><span data-ttu-id="27e29-539">Test Sonuçları</span><span class="sxs-lookup"><span data-stu-id="27e29-539">Test Results</span></span>
 <span data-ttu-id="27e29-540">![İş akışı izleme maliyeti](../../../docs/framework/windows-workflow-foundation/media/workflowtracingcost.gif "WorkflowTracingCost")</span><span class="sxs-lookup"><span data-stu-id="27e29-540">![Workflow Tracing Cost](../../../docs/framework/windows-workflow-foundation/media/workflowtracingcost.gif "WorkflowTracingCost")</span></span>

 <span data-ttu-id="27e29-541">Sistem durumu izleme kabaca bir %3 aktarım hızını etkiler.</span><span class="sxs-lookup"><span data-stu-id="27e29-541">Health monitoring has roughly a 3% impact on throughput.</span></span>  <span data-ttu-id="27e29-542">Temel profilin maliyet yaklaşık % 8'dir.</span><span class="sxs-lookup"><span data-stu-id="27e29-542">The basic profile’s cost is around 8%.</span></span>

## <a name="interop"></a><span data-ttu-id="27e29-543">Birlikte çalışma</span><span class="sxs-lookup"><span data-stu-id="27e29-543">Interop</span></span>
 <span data-ttu-id="27e29-544">WF4 olan neredeyse tamamını yeniden yazmak [!INCLUDE[wf1](../../../includes/wf1-md.md)] ve bu nedenle WF3 iş akışları ve etkinlikler doğrudan WF4 ile uyumlu değildir.</span><span class="sxs-lookup"><span data-stu-id="27e29-544">WF4 is almost a complete rewrite of [!INCLUDE[wf1](../../../includes/wf1-md.md)] and therefore WF3 workflows and activities are not directly compatible with WF4.</span></span>  <span data-ttu-id="27e29-545">Windows Workflow Foundation erken benimsenen birçok müşteri, şirket içi veya üçüncü taraf iş akışı tanımları ve özel etkinlikler için WF3 olacaktır.</span><span class="sxs-lookup"><span data-stu-id="27e29-545">Many customers that adopted Windows Workflow Foundation early will have in-house or third-party workflow definitions and custom activities for WF3.</span></span>  <span data-ttu-id="27e29-546">WF4 geçişi kolaylaştırmak için bir yol, bir iş akışındaki WF4 WF3 etkinlikten yürütebilir birlikte çalışma etkinliği kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="27e29-546">One way to ease the transition to WF4 is to use the Interop activity, which can execute WF3 activities from within a WF4 workflow.</span></span>  <span data-ttu-id="27e29-547">Önerilir <xref:System.Activities.Statements.Interop> etkinliği yalnızca kullanılabilir gerektiğinde.</span><span class="sxs-lookup"><span data-stu-id="27e29-547">It is recommended that the <xref:System.Activities.Statements.Interop> activity only be used when necessary.</span></span> <span data-ttu-id="27e29-548">İçin WF4 geçirme hakkında daha fazla bilgi için kullanıma [WF4 geçiş kılavuzuna](https://go.microsoft.com/fwlink/?LinkID=153313).</span><span class="sxs-lookup"><span data-stu-id="27e29-548">For more information about migrating to WF4 check out the [WF4 Migration Guidance](https://go.microsoft.com/fwlink/?LinkID=153313).</span></span>

### <a name="environment-setup"></a><span data-ttu-id="27e29-549">Ortam Kurulumu</span><span class="sxs-lookup"><span data-stu-id="27e29-549">Environment Setup</span></span>
 <span data-ttu-id="27e29-550">![İş akışı performans sınama ortamı](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span><span class="sxs-lookup"><span data-stu-id="27e29-550">![Workflow Performance Test Environment](../../../docs/framework/windows-workflow-foundation/media/wfperfenvironment.gif "WFPerfEnvironment")</span></span>

### <a name="test-results"></a><span data-ttu-id="27e29-551">Test Sonuçları</span><span class="sxs-lookup"><span data-stu-id="27e29-551">Test Results</span></span>
 <span data-ttu-id="27e29-552">Aşağıdaki tabloda, çeşitli yapılandırmalarda dizisindeki beş etkinlik içeren bir iş akışı çalıştırma sonuçları gösterir.</span><span class="sxs-lookup"><span data-stu-id="27e29-552">The table below shows the results of running a workflow containing five activities in a sequence in various configurations.</span></span>

|<span data-ttu-id="27e29-553">Test</span><span class="sxs-lookup"><span data-stu-id="27e29-553">Test</span></span>|<span data-ttu-id="27e29-554">Aktarım hızı (iş akışları/sn)</span><span class="sxs-lookup"><span data-stu-id="27e29-554">Throughput (workflows/sec)</span></span>|
|----------|-----------------------------------|
|<span data-ttu-id="27e29-555">WF3 sırayla WF3 çalışma zamanı</span><span class="sxs-lookup"><span data-stu-id="27e29-555">WF3 Sequence in WF3 runtime</span></span>|<span data-ttu-id="27e29-556">1,576</span><span class="sxs-lookup"><span data-stu-id="27e29-556">1,576</span></span>|
|<span data-ttu-id="27e29-557">WF3 sırayla WF4 çalışma zamanı birlikte çalışabilirliği kullanma</span><span class="sxs-lookup"><span data-stu-id="27e29-557">WF3 Sequence in WF4 runtime using Interop</span></span>|<span data-ttu-id="27e29-558">2,745</span><span class="sxs-lookup"><span data-stu-id="27e29-558">2,745</span></span>|
|<span data-ttu-id="27e29-559">WF4 dizisi</span><span class="sxs-lookup"><span data-stu-id="27e29-559">WF4 Sequence</span></span>|<span data-ttu-id="27e29-560">153,582</span><span class="sxs-lookup"><span data-stu-id="27e29-560">153,582</span></span>|

 <span data-ttu-id="27e29-561">Düz WF3 birlikte çalışması kullanarak için önemli performans artışı yoktur.</span><span class="sxs-lookup"><span data-stu-id="27e29-561">There is a notable performance increase to using Interop over straight WF3.</span></span>  <span data-ttu-id="27e29-562">Ancak, WF4 etkinlikleri karşılaştırıldığında göz ardı edilebilir artıştır.</span><span class="sxs-lookup"><span data-stu-id="27e29-562">However, when compared against WF4 activities, the increase is negligible.</span></span>

## <a name="summary"></a><span data-ttu-id="27e29-563">Özet</span><span class="sxs-lookup"><span data-stu-id="27e29-563">Summary</span></span>
 <span data-ttu-id="27e29-564">Performans WF4 için ağır Yatırımlar birçok önemli alanda ödemesi devre dışı.</span><span class="sxs-lookup"><span data-stu-id="27e29-564">Heavy investments in performance for WF4 have paid off in many crucial areas.</span></span>  <span data-ttu-id="27e29-565">Tek bir iş akışı bileşen performansı, bazı durumlarda yüzlerce kez WF4 WF3 için karşılaştırılması nedeniyle bir daha yalın, daha hızlı [!INCLUDE[wf1](../../../includes/wf1-md.md)] çalışma zamanı.</span><span class="sxs-lookup"><span data-stu-id="27e29-565">Individual workflow component performance is in some cases hundreds of times faster in WF4 compared to WF3 due to a leaner [!INCLUDE[wf1](../../../includes/wf1-md.md)] runtime.</span></span>  <span data-ttu-id="27e29-566">Gecikme rakamları de önemli ölçüde daha uygundur.</span><span class="sxs-lookup"><span data-stu-id="27e29-566">Latency numbers are significantly better as well.</span></span>  <span data-ttu-id="27e29-567">Performans cezası kullanmak için başka bir deyişle [!INCLUDE[wf1](../../../includes/wf1-md.md)] el kodlama WCF düzenleme aksine Hizmetleri eklenen kullanmanın avantajları dikkate çok küçük [!INCLUDE[wf1](../../../includes/wf1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="27e29-567">This means the performance penalty for using [!INCLUDE[wf1](../../../includes/wf1-md.md)] as opposed to hand-coding WCF orchestration services is very small considering the added benefits of using [!INCLUDE[wf1](../../../includes/wf1-md.md)].</span></span>  <span data-ttu-id="27e29-568">Kalıcılık performans 2.5 3.0 faktörüyle arttı.</span><span class="sxs-lookup"><span data-stu-id="27e29-568">Persistence performance has increased by a factor of 2.5 - 3.0.</span></span>  <span data-ttu-id="27e29-569">İş akışı izleme yoluyla artık sistem durumu izleme, çok az yüke sahiptir.</span><span class="sxs-lookup"><span data-stu-id="27e29-569">Health monitoring by means of workflow tracking now has very little overhead.</span></span>  <span data-ttu-id="27e29-570">Geçiş kılavuzlarını kapsamlı bir dizi WF3 WF4 için taşıma dikkate olanlar için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="27e29-570">A comprehensive set of migration guides are available for those that are considering moving from WF3 to WF4.</span></span>  <span data-ttu-id="27e29-571">Tüm bu karmaşık uygulamalar yazmak için çekici bir seçenek WF4 olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="27e29-571">All of this should make WF4 an attractive option for writing complex applications.</span></span>

## <a name="acknowledgements"></a><span data-ttu-id="27e29-572">Bildirimler</span><span class="sxs-lookup"><span data-stu-id="27e29-572">Acknowledgements</span></span>
 <span data-ttu-id="27e29-573">Çoğu aşağıdaki Katkıda Bulunanlar ve çalışmalarını için gözden geçirenler sayesinde:</span><span class="sxs-lookup"><span data-stu-id="27e29-573">Many thanks to the following contributors and reviewers for their efforts:</span></span>

-   <span data-ttu-id="27e29-574">Leon Welicki, Microsoft Corporation</span><span class="sxs-lookup"><span data-stu-id="27e29-574">Leon Welicki, Microsoft Corporation</span></span>

-   <span data-ttu-id="27e29-575">Ryszard Kwiecinski, Microsoft Corporation</span><span class="sxs-lookup"><span data-stu-id="27e29-575">Ryszard Kwiecinski, Microsoft Corporation</span></span>

-   <span data-ttu-id="27e29-576">Emil Velinov, Microsoft Corporation</span><span class="sxs-lookup"><span data-stu-id="27e29-576">Emil Velinov, Microsoft Corporation</span></span>

-   <span data-ttu-id="27e29-577">Nate Talbert, Microsoft Corporation</span><span class="sxs-lookup"><span data-stu-id="27e29-577">Nate Talbert, Microsoft Corporation</span></span>

-   <span data-ttu-id="27e29-578">Bob Etikan, Microsoft Corporation</span><span class="sxs-lookup"><span data-stu-id="27e29-578">Bob Schmidt, Microsoft Corporation</span></span>

-   <span data-ttu-id="27e29-579">Stefan Batres, Microsoft Corporation</span><span class="sxs-lookup"><span data-stu-id="27e29-579">Stefan Batres, Microsoft Corporation</span></span>
