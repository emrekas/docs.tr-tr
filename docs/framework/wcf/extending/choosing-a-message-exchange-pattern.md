---
title: Bir İleti Değişim Deseni seçin
ms.date: 03/30/2017
ms.assetid: 0f502ca1-6a8e-4607-ba15-59198c0e6146
ms.openlocfilehash: 98788fb89fc68dc1220d9bf8d9ad89df5ca69e6e
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61922869"
---
# <a name="choosing-a-message-exchange-pattern"></a><span data-ttu-id="aed8e-102">Bir İleti Değişim Deseni seçin</span><span class="sxs-lookup"><span data-stu-id="aed8e-102">Choosing a Message Exchange Pattern</span></span>
<span data-ttu-id="aed8e-103">Özel bir taşıma yazma ilk adımı, karar vermektir *ileti exchange desenleri* (veya MEPs) geliştirdiğiniz kanal için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-103">The first step in writing a custom transport is to decide which *message exchange patterns* (or MEPs) are required for the channel you are developing.</span></span> <span data-ttu-id="aed8e-104">Bu konu, kullanılabilir seçenekleri açıklar ve çeşitli anlatılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-104">This topic describes the options available and discusses the various requirements.</span></span> <span data-ttu-id="aed8e-105">Bu kanal geliştirme görev listesinde açıklanan ilk görevdir [geliştirme kanalları](../../../../docs/framework/wcf/extending/developing-channels.md).</span><span class="sxs-lookup"><span data-stu-id="aed8e-105">This is the first task in the channel development task list described in [Developing Channels](../../../../docs/framework/wcf/extending/developing-channels.md).</span></span>  
  
## <a name="six-message-exchange-patterns"></a><span data-ttu-id="aed8e-106">Altı ileti Exchange desenleri</span><span class="sxs-lookup"><span data-stu-id="aed8e-106">Six Message Exchange Patterns</span></span>  
 <span data-ttu-id="aed8e-107">Aralarından seçim yapabileceğiniz üç MEPs vardır:</span><span class="sxs-lookup"><span data-stu-id="aed8e-107">There are three MEPs to choose from:</span></span>  
  
- <span data-ttu-id="aed8e-108">Veri birimi (<xref:System.ServiceModel.Channels.IInputChannel> ve <xref:System.ServiceModel.Channels.IOutputChannel>)</span><span class="sxs-lookup"><span data-stu-id="aed8e-108">Datagram (<xref:System.ServiceModel.Channels.IInputChannel> and <xref:System.ServiceModel.Channels.IOutputChannel>)</span></span>  
  
     <span data-ttu-id="aed8e-109">Bir veri birimi MEP kullanırken, bir istemci kullanarak bir ileti gönderen bir *Başlat ve unut* exchange.</span><span class="sxs-lookup"><span data-stu-id="aed8e-109">When using a datagram MEP, a client sends a message using a *fire and forget* exchange.</span></span> <span data-ttu-id="aed8e-110">Bir Başlat ve unut değişimi, başarılı bir teslimat bant dışı onay gerektiren bir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-110">A fire and forget exchange is one that requires out-of-band confirmation of successful delivery.</span></span> <span data-ttu-id="aed8e-111">İleti, geçiş sırasında kaybolur ve hiçbir zaman hizmet ulaşın.</span><span class="sxs-lookup"><span data-stu-id="aed8e-111">The message might be lost in transit and never reach the service.</span></span> <span data-ttu-id="aed8e-112">İstemci sonunda gönderme işlemi başarıyla tamamlarsa, uzak uç noktada bir ileti aldı garanti etmez.</span><span class="sxs-lookup"><span data-stu-id="aed8e-112">If the send operation completes successfully at the client end, it does not guarantee that the remote endpoint has received the message.</span></span> <span data-ttu-id="aed8e-113">Bunun üstünde kurallarınızı oluştururken veri birimi Mesajlaşma için temel yapı taşı olan — güvenilir protokolleri ve güvenli protokolleri dahil.</span><span class="sxs-lookup"><span data-stu-id="aed8e-113">The datagram is a fundamental building block for messaging, as you can build your own protocols on top of it—including reliable protocols and secure protocols.</span></span> <span data-ttu-id="aed8e-114">İstemci veri birimi kanalları uygulamak <xref:System.ServiceModel.Channels.IOutputChannel> arabirimi ve hizmet veri birimi kanalları uygulamak <xref:System.ServiceModel.Channels.IInputChannel> arabirimi.</span><span class="sxs-lookup"><span data-stu-id="aed8e-114">Client datagram channels implement the <xref:System.ServiceModel.Channels.IOutputChannel> interface and service datagram channels implement the <xref:System.ServiceModel.Channels.IInputChannel> interface.</span></span>  
  
- <span data-ttu-id="aed8e-115">İstek-yanıt (<xref:System.ServiceModel.Channels.IRequestChannel> ve <xref:System.ServiceModel.Channels.IReplyChannel>)</span><span class="sxs-lookup"><span data-stu-id="aed8e-115">Request-Response (<xref:System.ServiceModel.Channels.IRequestChannel> and <xref:System.ServiceModel.Channels.IReplyChannel>)</span></span>  
  
     <span data-ttu-id="aed8e-116">Bu MEP bir ileti gönderilir ve bir yanıt aldı.</span><span class="sxs-lookup"><span data-stu-id="aed8e-116">In this MEP, a message is sent, and a reply is received.</span></span> <span data-ttu-id="aed8e-117">Desen, istek-yanıt çiftlerinden oluşur.</span><span class="sxs-lookup"><span data-stu-id="aed8e-117">The pattern consists of request-response pairs.</span></span> <span data-ttu-id="aed8e-118">İstek-yanıt çağrıları örnekleri: uzaktan yordam çağrısı (RPC) ve tarayıcı GET istekleri.</span><span class="sxs-lookup"><span data-stu-id="aed8e-118">Examples of request-response calls are remote procedure calls (RPC) and browser GET requests.</span></span> <span data-ttu-id="aed8e-119">Bu düzen, yarı çift yönlü da bilinir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-119">This pattern is also known as half-duplex.</span></span> <span data-ttu-id="aed8e-120">Bu MEP içinde istemci kanalları uygulamak <xref:System.ServiceModel.Channels.IRequestChannel> ve hizmet kanalları uygulamak <xref:System.ServiceModel.Channels.IReplyChannel>.</span><span class="sxs-lookup"><span data-stu-id="aed8e-120">In this MEP, client channels implement <xref:System.ServiceModel.Channels.IRequestChannel> and service channels implement <xref:System.ServiceModel.Channels.IReplyChannel>.</span></span>  
  
- <span data-ttu-id="aed8e-121">Çift yönlü (<xref:System.ServiceModel.Channels.IDuplexChannel>)</span><span class="sxs-lookup"><span data-stu-id="aed8e-121">Duplex (<xref:System.ServiceModel.Channels.IDuplexChannel>)</span></span>  
  
     <span data-ttu-id="aed8e-122">Çift yönlü MEP tercihe bağlı sayıda istemci tarafından gönderilen ve alınan herhangi bir sırada iletileri sağlar.</span><span class="sxs-lookup"><span data-stu-id="aed8e-122">The duplex MEP allows an arbitrary number of messages to be sent by a client and received in any order.</span></span> <span data-ttu-id="aed8e-123">Çift yönlü MEP bir telefon konuşması gibi burada konuşulan her bir sözcüğün bir ileti numarasıdır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-123">The duplex MEP is like a phone conversation, where each word being spoken is a message.</span></span> <span data-ttu-id="aed8e-124">Her iki tarafında da gönderebilir ve alabilir bu MEP, istemci ve hizmet kanalları tarafından uygulanan arabirimi çünkü <xref:System.ServiceModel.Channels.IDuplexChannel>.</span><span class="sxs-lookup"><span data-stu-id="aed8e-124">Because both sides can send and receive in this MEP, the interface implemented by the client and service channels is <xref:System.ServiceModel.Channels.IDuplexChannel>.</span></span>  
  
 <span data-ttu-id="aed8e-125">![Bir ileti değişim deseni seçme](../../../../docs/framework/wcf/extending/media/wcfc-basicthreemepsc.gif "wcfc_BasicThreeMEPsc")</span><span class="sxs-lookup"><span data-stu-id="aed8e-125">![Choosing a message exchange pattern](../../../../docs/framework/wcf/extending/media/wcfc-basicthreemepsc.gif "wcfc_BasicThreeMEPsc")</span></span>  
<span data-ttu-id="aed8e-126">Üç temel ileti exchange desenleri.</span><span class="sxs-lookup"><span data-stu-id="aed8e-126">The three basic message exchange patterns.</span></span> <span data-ttu-id="aed8e-127">Yukarıdan aşağıya doğru: veri birimi, çift yönlü ve istek-yanıt.</span><span class="sxs-lookup"><span data-stu-id="aed8e-127">Top to bottom: datagram, request-response, and duplex.</span></span>  
  
 <span data-ttu-id="aed8e-128">Her biri bu MEPs de destekleyebilir *oturumları*.</span><span class="sxs-lookup"><span data-stu-id="aed8e-128">Each of these MEPs can also support *sessions*.</span></span> <span data-ttu-id="aed8e-129">Bir oturum (ve uygulaması <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> türü <xref:System.ServiceModel.Channels.ISession?displayProperty=nameWithType>) bir kanalı üzerinden alınan ve gönderilen tüm iletilerin ilişkilendirir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-129">A session (and implementation of <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> of type <xref:System.ServiceModel.Channels.ISession?displayProperty=nameWithType>) correlates all messages sent and received on a channel.</span></span> <span data-ttu-id="aed8e-130">İstek-yanıt desen istek ve yanıt bağıntılı olan bir tek başına iki ileti oturumu aynıdır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-130">The request-response pattern is a stand-alone two-message session, as the request and reply are correlated.</span></span> <span data-ttu-id="aed8e-131">Buna karşılık, bu kanal üzerindeki tüm istek/yanıt çifti birbiriyle ilişkilendirilir oturumları destekleyen istek-yanıt deseni gösterir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-131">In contrast, the request-response pattern that supports sessions implies that all request/response pairs on that channel are correlated with each other.</span></span> <span data-ttu-id="aed8e-132">Bu, aralarından seçim yapabileceğiniz altı MEPs toplam sağlar:</span><span class="sxs-lookup"><span data-stu-id="aed8e-132">This gives you a total of six MEPs to choose from:</span></span>  
  
- <span data-ttu-id="aed8e-133">Veri birimi</span><span class="sxs-lookup"><span data-stu-id="aed8e-133">Datagram</span></span>  
  
- <span data-ttu-id="aed8e-134">İstek-yanıt</span><span class="sxs-lookup"><span data-stu-id="aed8e-134">Request-response</span></span>  
  
- <span data-ttu-id="aed8e-135">Çift Yönlü</span><span class="sxs-lookup"><span data-stu-id="aed8e-135">Duplex</span></span>  
  
- <span data-ttu-id="aed8e-136">Veri birimi ile oturumları</span><span class="sxs-lookup"><span data-stu-id="aed8e-136">Datagram with sessions</span></span>  
  
- <span data-ttu-id="aed8e-137">İstek-yanıt oturumları içeren</span><span class="sxs-lookup"><span data-stu-id="aed8e-137">Request-response with sessions</span></span>  
  
- <span data-ttu-id="aed8e-138">Oturumlarının ile çift yönlü</span><span class="sxs-lookup"><span data-stu-id="aed8e-138">Duplex with sessions</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="aed8e-139">UDP kendiliğinden yangın olduğu ve unut protokolü UDP taşıma için desteklenen tek MEP veri birimi, olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-139">For the UDP transport, the only MEP that is supported is datagram, because UDP is inherently a fire and forget protocol.</span></span>  
  
## <a name="sessions-and-sessionful-channels"></a><span data-ttu-id="aed8e-140">Oturumlarının ve Sessionful kanallar</span><span class="sxs-lookup"><span data-stu-id="aed8e-140">Sessions and Sessionful Channels</span></span>  
 <span data-ttu-id="aed8e-141">Ağ dünyasında, bağlantıya dayalı protokolleri (örneğin, TCP) ve bağlantı olmayan protokolleri (örneğin, UDP) vardır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-141">In the networking world, there are connection-oriented protocols (for example, TCP) and connection-less protocols (for example, UDP).</span></span> <span data-ttu-id="aed8e-142">WCF bağlantı benzeri mantıksal soyutlama auto'yu terimi oturumu kullanır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-142">WCF uses the term session to mean a connection-like logical abstraction.</span></span> <span data-ttu-id="aed8e-143">Kapatamaması WCF protokolleri bağlantıya dayalı ağ protokolleri için benzer ve oturumsuz WCF protokoller, bağlantı daha az ağ protokolleri için benzerdir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-143">Sessionful WCF protocols are similar to connection-oriented network protocols and sessionless WCF protocols are similar to connection-less network protocols.</span></span>  
  
 <span data-ttu-id="aed8e-144">Kanal nesne modelinde bir oturum kanalı bir örneği olarak her bir mantıksal oturum bildirimleri.</span><span class="sxs-lookup"><span data-stu-id="aed8e-144">In the channel object model, each logical session manifests as an instance of a sessionful channel.</span></span> <span data-ttu-id="aed8e-145">Bu nedenle istemci tarafından oluşturulmuş ve hizmette kabul her yeni oturumu yeni bir oturum kanalı her iki taraftaki karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-145">Therefore every new session created by the client, and accepted on the service, corresponds to a new sessionful channel on each side.</span></span> <span data-ttu-id="aed8e-146">Aşağıdaki diyagramda gösterildiği, oturumsuz kanalları yapısını üst ve alt oturumdaki kanallar yapısı.</span><span class="sxs-lookup"><span data-stu-id="aed8e-146">The following diagram shows, on the top, the structure of sessionless channels, and on the bottom, the structure of sessionful channels.</span></span>  
  
 <span data-ttu-id="aed8e-147">![Bir ileti değişim deseni seçme](../../../../docs/framework/wcf/extending/media/wcfc-sessionandsessionlesschannelsc.gif "wcfc_SessionAndSessionlessChannelsc")</span><span class="sxs-lookup"><span data-stu-id="aed8e-147">![Choosing a message exchange pattern](../../../../docs/framework/wcf/extending/media/wcfc-sessionandsessionlesschannelsc.gif "wcfc_SessionAndSessionlessChannelsc")</span></span>  
  
 <span data-ttu-id="aed8e-148">Bir istemci, yeni bir oturum kanalı oluşturur ve bir ileti gönderir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-148">A client creates a new sessionful channel and sends a message.</span></span> <span data-ttu-id="aed8e-149">Hizmet tarafında, kanal dinleyicisi şu iletiyi alıyor ve yeni bir oturum kanalı oluşturur ve uygulamaya (yanıtta AcceptChannel kanal dinleyicisi üzerinde arama uygulaması) uygulamalı şekilde yeni bir oturuma ait olduğunu algılar.</span><span class="sxs-lookup"><span data-stu-id="aed8e-149">On the service side, the channel listener receives this message and detects that it belongs to a new session so it creates a new sessionful channel and hands it to the application (in response to the application calling AcceptChannel on the channel listener).</span></span> <span data-ttu-id="aed8e-150">Uygulama daha sonra bu iletiyi ve aynı oturumda aynı oturum kanalı üzerinden gönderilen tüm sonraki iletiler alır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-150">The application then receives this message and all subsequent messages sent in the same session through the same sessionful channel.</span></span>  
  
 <span data-ttu-id="aed8e-151">Başka bir istemci (veya aynı istemci) yeni sessionful oluşturur ve bir ileti gönderir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-151">Another client (or the same client) creates a new sessionful and sends a message.</span></span> <span data-ttu-id="aed8e-152">Kanal dinleyicisi bu iletiyi yeni bir oturumda ve yeni bir oturum kanalı oluşturur ve işlem yinelenir algılar.</span><span class="sxs-lookup"><span data-stu-id="aed8e-152">The channel listener detects this message is in a new session and creates a new sessionful channel and the process repeats.</span></span>  
  
 <span data-ttu-id="aed8e-153">Oturumlarının Kanallar ve oturumları arasında ile hiçbir bağıntısı yoktur.</span><span class="sxs-lookup"><span data-stu-id="aed8e-153">Without sessions, there is no correlation between channels and sessions.</span></span> <span data-ttu-id="aed8e-154">Bu nedenle kanal dinleyicisi alınan iletilerin tümünü uygulamaya teslim edilir yalnızca bir kanal oluşturur.</span><span class="sxs-lookup"><span data-stu-id="aed8e-154">Therefore a channel listener creates only one channel through which all received messages are delivered to the application.</span></span> <span data-ttu-id="aed8e-155">İleti, ileti sırası korumak hiçbir oturumunda olduğundan sıralama yoktur.</span><span class="sxs-lookup"><span data-stu-id="aed8e-155">There is also no message ordering because there is no session within which to maintain message order.</span></span> <span data-ttu-id="aed8e-156">Önceki grafiğin üst kısmını oturumsuz ileti değişimi gösterir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-156">The top portion of the preceding graphic illustrates a sessionless message exchange.</span></span>  
  
## <a name="starting-and-terminating-sessions"></a><span data-ttu-id="aed8e-157">Başlangıç ve oturumları sonlandırma</span><span class="sxs-lookup"><span data-stu-id="aed8e-157">Starting and Terminating Sessions</span></span>  
 <span data-ttu-id="aed8e-158">Oturumları, istemci üzerinde yeni bir oturum kanalı oluşturarak başlatılır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-158">Sessions are started on the client by simply creating a new sessionful channel.</span></span> <span data-ttu-id="aed8e-159">Hizmet, yeni bir oturumda gönderildiği bir ileti aldığında, hizmette başlatılır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-159">They are started on the service when the service receives a message that was sent in a new session.</span></span> <span data-ttu-id="aed8e-160">Benzer şekilde, oturum kapatma veya bir oturum kanalı durduruluyor sonlandırılır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-160">Likewise, sessions are terminated by closing or aborting a sessionful channel.</span></span>  
  
 <span data-ttu-id="aed8e-161">Özel durum <xref:System.ServiceModel.Channels.IDuplexSessionChannel> hem ileti alma ve gönderme bir çift yönlü, kapatamaması iletişim deseni için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-161">The exception to this is <xref:System.ServiceModel.Channels.IDuplexSessionChannel> which is used for both sending and receiving messages in a duplex, sessionful communication pattern.</span></span> <span data-ttu-id="aed8e-162">Gönderme durdurur ancak kullanırken, bu nedenle iletileri alacak şekilde devam etmek bir tarafı isteyeceksiniz mümkündür <xref:System.ServiceModel.Channels.IDuplexSessionChannel> daha fazla ileti göndermez ancak giriş oturumu tutmak belirten çıkış Oturumu Kapat olanak sağlayan bir mekanizma yoktur. açılan ileti almak devam etmenize imkan sağlar.</span><span class="sxs-lookup"><span data-stu-id="aed8e-162">It is possible that one side will want to stop sending messages but continue to receive messages therefore when using <xref:System.ServiceModel.Channels.IDuplexSessionChannel> there is a mechanism that lets you close the output session indicating you will not send any more messages but keep the input session opened allowing you to continue to receive messages.</span></span>  
  
 <span data-ttu-id="aed8e-163">Genel olarak, giden tarafında ve gelen tarafında değil oturumları kapatılır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-163">In general, sessions are closed on the outgoing side and not on the incoming side.</span></span> <span data-ttu-id="aed8e-164">Diğer bir deyişle, böylece düzgün bir şekilde oturumunu sona erdirme kapatamaması çıkış kanalları kapatılabilir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-164">That is, sessionful output channels can be closed, thereby cleanly terminating the session.</span></span> <span data-ttu-id="aed8e-165">Neden olan uygulama arama için null döndürmek karşılık gelen oturum Giriş kanalı kapatamaması çıkış kanal kapatma <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> üzerinde <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="aed8e-165">Closing a sessionful output channel causes the corresponding sessionful input channel to return null to the application calling <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span></span>  
  
 <span data-ttu-id="aed8e-166">Bununla birlikte giriş oturumdaki kanallar sürece kapatılmalıdır değil <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> üzerinde <xref:System.ServiceModel.Channels.IDuplexSessionChannel> oturumu zaten kapatıldı gösteren null döndürür.</span><span class="sxs-lookup"><span data-stu-id="aed8e-166">However sessionful input channels should not be closed unless <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> returns null, indicating that the session is already closed.</span></span> <span data-ttu-id="aed8e-167">Varsa <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> üzerinde <xref:System.ServiceModel.Channels.IDuplexSessionChannel> sahip kapatılırken beklenmeyen iletileri alabilirsiniz çünkü null döndürdü değil, bir oturum Giriş kanalı kapatma bir özel durum oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-167">If <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> has not returned null, closing a sessionful input channel may throw an exception because it may receive unexpected messages while closing.</span></span> <span data-ttu-id="aed8e-168">Gönderen önce oturumu sonlandırmak bir alıcı isterse çağırmalıdır <xref:System.ServiceModel.ICommunicationObject.Abort%2A> Giriş kanalı aniden sonlandıran oturumu.</span><span class="sxs-lookup"><span data-stu-id="aed8e-168">If a receiver wishes to terminate a session before the sender does, it should call <xref:System.ServiceModel.ICommunicationObject.Abort%2A> on the input channel, which abruptly terminates the session.</span></span>  
  
## <a name="writing-sessionful-channels"></a><span data-ttu-id="aed8e-169">Yazma Sessionful kanallar</span><span class="sxs-lookup"><span data-stu-id="aed8e-169">Writing Sessionful Channels</span></span>  
 <span data-ttu-id="aed8e-170">Bir oturum kanalı yazarı kanalınızı oturumları sağlamak için yapmanız gereken birkaç nokta vardır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-170">As a sessionful channel author, there are a few things your channel must do to provide sessions.</span></span> <span data-ttu-id="aed8e-171">Gönderme tarafında kanalınızı gerekir:</span><span class="sxs-lookup"><span data-stu-id="aed8e-171">On the send side, your channel needs to:</span></span>  
  
- <span data-ttu-id="aed8e-172">Her yeni bir kanal için yeni bir oturum oluşturun ve benzersiz bir dize olan yeni bir oturum kimliğiyle ilişkilendirin.</span><span class="sxs-lookup"><span data-stu-id="aed8e-172">For each new channel, create a new session and associate it with a new session id which is a unique string.</span></span> <span data-ttu-id="aed8e-173">Veya yeni bir oturum aşağıdaki oturum kanalı yığınında almak.</span><span class="sxs-lookup"><span data-stu-id="aed8e-173">Or obtain a new session from the sessionful channel below you in the stack.</span></span>  
  
- <span data-ttu-id="aed8e-174">Bu kanalı kullanılarak gönderilen her ileti için kanalınızı (aksine, aşağıdaki katman almakla), oturum oluşturduysanız ileti oturumla ilişkilendirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-174">For each message sent using this channel, if your channel created the session (as opposed to obtaining it from the layer below you), you need to associate the message with the session.</span></span> <span data-ttu-id="aed8e-175">Protokol kanallar için bu genellikle bir SOAP üst bilgisi ekleyerek gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-175">For protocol channels, this is typically done by adding a SOAP header.</span></span> <span data-ttu-id="aed8e-176">Aktarım kanallar için bu genellikle yeni bir aktarım bağlantısı oluşturma veya oturum bilgilerini çerçeveleme protokole ekleyerek gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-176">For transport channels, this is typically done by creating a new transport connection or adding session information to the framing protocol.</span></span>  
  
- <span data-ttu-id="aed8e-177">Bu kanalı kullanılarak gönderilen her ileti için yukarıda belirtilen teslimat garantileriyle sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-177">For each message sent using this channel, you need to provide the delivery guarantees mentioned above.</span></span> <span data-ttu-id="aed8e-178">Kanal altına oturumu vermenizi bağlı, bu kanal ayrıca teslimat garantileriyle sağlar.</span><span class="sxs-lookup"><span data-stu-id="aed8e-178">If you are relying on the channel below you to provide the session, that channel will also provide the delivery guarantees.</span></span> <span data-ttu-id="aed8e-179">Oturumu kendiniz sağlıyorsanız protokolünüzü kapsamında bu garanti uygulamak gerekir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-179">If you’re providing the session yourself, you need to implement those guarantees as part of your protocol.</span></span> <span data-ttu-id="aed8e-180">Genel olarak, her iki kenarı da WCF varsayar bir protokolü kanalı yazıyorsanız TCP taşıma ya da güvenilir bir Mesajlaşma kanalı gerektirir ve bir oturumu sağlamak için bunlardan birini kullanan olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aed8e-180">In general, if you are writing a protocol channel that assumes WCF on both sides you may require the TCP transport or the Reliable Messaging channel and rely on either one to provide a session.</span></span>  
  
- <span data-ttu-id="aed8e-181">Zaman <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> olduğundan, kanalınızda adlı, belirtilen zaman aşımı veya varsayılan kullanarak oturumu kapatmak için gerekli iş gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="aed8e-181">When <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> is called on your channel, perform the necessary work to close the session using either the specified timeout or the default one.</span></span> <span data-ttu-id="aed8e-182">Bu arama olarak basit olabilir <xref:System.ServiceModel.ICommunicationObject.Close%2A> aşağıda (yalnızca oturum buradan elde ettiğiniz isteyip) veya özel bir SOAP ileti gönderme veya bir aktarım bağlantısı kapatma kanal.</span><span class="sxs-lookup"><span data-stu-id="aed8e-182">This can be as simple as calling <xref:System.ServiceModel.ICommunicationObject.Close%2A> on the channel below you (if you just obtained the session from it) or sending a special SOAP message or closing a transport connection.</span></span>  
  
- <span data-ttu-id="aed8e-183">Zaman <xref:System.ServiceModel.ICommunicationObject.Abort%2A> olduğundan, kanalda çağrıldı, oturumu aniden g/ç işlemi yapmadan sonlandır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-183">When <xref:System.ServiceModel.ICommunicationObject.Abort%2A> is called on your channel, terminate the session abruptly without performing I/O.</span></span> <span data-ttu-id="aed8e-184">Bu, hiçbir şey yapmadan anlamına gelebilir veya bir ağ bağlantısı veya başka bir kaynak durduruluyor gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-184">This may mean doing nothing or may involve aborting a network connection or some other resource.</span></span>  
  
 <span data-ttu-id="aed8e-185">Alma tarafında kanalınızı gerekir:</span><span class="sxs-lookup"><span data-stu-id="aed8e-185">On the receive side, your channel needs to:</span></span>  
  
- <span data-ttu-id="aed8e-186">Gelen her ileti için kanal dinleyicisi ait oturum algılaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-186">For each incoming message, the channel listener must detect the session it belongs to.</span></span> <span data-ttu-id="aed8e-187">Bu oturumdaki ilk iletiyi ise, kanal dinleyicisi gereken yeni bir kanal oluşturmak ve çağrıdan dönüş <xref:System.ServiceModel.Channels.IChannelListener%601.AcceptChannel%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="aed8e-187">If this is the first message in the session, the channel listener must create a new channel and return it from the call to <xref:System.ServiceModel.Channels.IChannelListener%601.AcceptChannel%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="aed8e-188">Aksi takdirde kanal dinleyicisi oturuma karşılık gelir ve kanal üzerinden ileti teslim varolan kanalın bulmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-188">Otherwise the channel listener must find the existing channel that corresponds to the session and deliver the message through that channel.</span></span>  
  
- <span data-ttu-id="aed8e-189">Kanalınızı (birlikte gerekli teslimat garantileriyle) oturumu sağlıyorsa sıralamasını iletileri gibi bazı eylemleri veya bildirimleri göndermek için alma tarafında gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-189">If your channel is providing the session (along with the required delivery guarantees) the receive side may be required to perform some actions such as re-order messages or send acknowledgements.</span></span>  
  
- <span data-ttu-id="aed8e-190">Zaman <xref:System.ServiceModel.ICommunicationObject.Close%2A> olduğundan, kanalda çağrıldı, oturumu kapatmak için gerekli iş belirtilen zaman aşımı veya varsayılan gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="aed8e-190">When <xref:System.ServiceModel.ICommunicationObject.Close%2A> is called on your channel, perform the necessary work to close the session either the specified timeout or the default one.</span></span> <span data-ttu-id="aed8e-191">Süresi dolacak şekilde Kapat zaman aşımı için beklenirken bir ileti kanalı alırsa, bu özel durumların neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-191">This could result in exceptions if the channel receives a message while waiting for the close timeout to expire.</span></span> <span data-ttu-id="aed8e-192">Throw için ileti aldığında kanal kapatma durumda olacaktır olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-192">That’s because the channel will be in the Closing state when it receives a message so it would throw.</span></span>  
  
- <span data-ttu-id="aed8e-193">Zaman <xref:System.ServiceModel.ICommunicationObject.Abort%2A> olduğundan, kanalda çağrıldı, oturumu aniden g/ç işlemi yapmadan sonlandır.</span><span class="sxs-lookup"><span data-stu-id="aed8e-193">When <xref:System.ServiceModel.ICommunicationObject.Abort%2A> is called on your channel, terminate the session abruptly without performing I/O.</span></span> <span data-ttu-id="aed8e-194">Yeniden birşey anlamına gelebilir veya bir ağ bağlantısı veya başka bir kaynak durduruluyor gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="aed8e-194">Again, this may mean doing nothing or may involve aborting a network connection or some other resource.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aed8e-195">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="aed8e-195">See also</span></span>

- [<span data-ttu-id="aed8e-196">Kanal Modeline Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="aed8e-196">Channel Model Overview</span></span>](../../../../docs/framework/wcf/extending/channel-model-overview.md)
