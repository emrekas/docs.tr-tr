---
title: Özel Kodlayıcılar
ms.date: 03/30/2017
ms.assetid: fa0e1d7f-af36-4bf4-aac9-cd4eab95bc4f
ms.openlocfilehash: 7602e18a03f73f66dfd028d810c003db0b6653bb
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61996911"
---
# <a name="custom-encoders"></a><span data-ttu-id="c09e6-102">Özel Kodlayıcılar</span><span class="sxs-lookup"><span data-stu-id="c09e6-102">Custom Encoders</span></span>
<span data-ttu-id="c09e6-103">Bu konu, özel kodlayıcılar oluşturulacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="c09e6-103">This topic discusses how to create custom encoders.</span></span>  
  
 <span data-ttu-id="c09e6-104">Windows Communication Foundation (WCF) kullandığınız bir *bağlama* uç noktaları arasında bir ağ üzerinden veri aktarımı nasıl belirlemek için.</span><span class="sxs-lookup"><span data-stu-id="c09e6-104">In Windows Communication Foundation (WCF), you use a *binding* to specify how to transfer data across a network between endpoints.</span></span> <span data-ttu-id="c09e6-105">Bağlama bir dizi yapılır *bağlama öğelerinin*.</span><span class="sxs-lookup"><span data-stu-id="c09e6-105">A binding is made up of a sequence of *binding elements*.</span></span> <span data-ttu-id="c09e6-106">Bir bağlama güvenlik, gerekli bir'gibi isteğe bağlı Protokolü bağlama öğeleri içeren *ileti Kodlayıcı* bağlama öğesi ve gerekli aktarım bağlama öğesi.</span><span class="sxs-lookup"><span data-stu-id="c09e6-106">A binding includes optional protocol binding elements such as security, a required *Message Encoder* binding element, and a required transport binding element.</span></span> <span data-ttu-id="c09e6-107">İleti Kodlayıcı, bir ileti kodlama bağlama öğesi tarafından temsil edilir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-107">A message encoder is represented by a message encoding binding element.</span></span> <span data-ttu-id="c09e6-108">WCF'de ileti kodlayıcılar üç dahildir: İkili, ileti aktarım en iyi duruma getirme mekanizması (MTOM) ve metin.</span><span class="sxs-lookup"><span data-stu-id="c09e6-108">Three message encoders are included in WCF: Binary, Message Transmission Optimization Mechanism (MTOM), and Text.</span></span>  
  
 <span data-ttu-id="c09e6-109">Kodlama bağlama öğesi serileştiren bir giden ileti <xref:System.ServiceModel.Channels.Message> ve aktarım için geçirir veya aktarımdan serileştirilmiş biçiminde bir ileti alır ve protokol katmanında varsa veya uygulamaya geçirir, mevcut değilse.</span><span class="sxs-lookup"><span data-stu-id="c09e6-109">A message encoding binding element serializes an outgoing <xref:System.ServiceModel.Channels.Message> and passes it to the transport, or receives the serialized form of a message from the transport and passes it to the protocol layer if present, or to the application, if not present.</span></span>  
  
 <span data-ttu-id="c09e6-110">İleti Kodlayıcı dönüştürme <xref:System.ServiceModel.Channels.Message> örnekleri hat gösterimine gelen ve giden.</span><span class="sxs-lookup"><span data-stu-id="c09e6-110">Message encoders transform <xref:System.ServiceModel.Channels.Message> instances to and from a wire representation.</span></span> <span data-ttu-id="c09e6-111">Kodlayıcıları oluşturmaması nedeniyle kanal yığınındaki taşıma katmanının olarak açıklanan olsa da, Aktarım katmanı içinde yer alır.</span><span class="sxs-lookup"><span data-stu-id="c09e6-111">Although encoders are described as sitting above the transport layer in the channel stack, they reside inside the transport layer.</span></span> <span data-ttu-id="c09e6-112">Aktarımları (örneğin, HTTP) ileti aktarma standart gereksinimlerine göre biçimlendirin.</span><span class="sxs-lookup"><span data-stu-id="c09e6-112">Transports (for example HTTP) format the message according to the requirements of the transport standard.</span></span> <span data-ttu-id="c09e6-113">Kodlayıcıları (örneğin, metin Xml), yalnızca iletisine kodlayın.</span><span class="sxs-lookup"><span data-stu-id="c09e6-113">Encoders (for example Text Xml) just encode the message.</span></span>  
  
 <span data-ttu-id="c09e6-114">Bir önceden var olan bir istemci veya sunucu bağlanırken bir özel ileti kodlama kullanma hakkında bir seçim olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-114">When connecting to a preexisting client or server, you may not have a choice about using a particular message encoding.</span></span> <span data-ttu-id="c09e6-115">Ancak, WCF hizmetleri birden fazla uç noktası, her biri farklı bir ileti Kodlayıcı üzerinden erişilebilir hale getirilebilir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-115">However, WCF services can be made accessible through multiple endpoints, each with a different message encoder.</span></span> <span data-ttu-id="c09e6-116">Tek bir kodlayıcı, hizmetiniz için kitle kapsamaz, birden fazla uç nokta hizmetinize gösterme göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="c09e6-116">When a single encoder does not cover the entire audience for your service, consider exposing your service over multiple endpoints.</span></span> <span data-ttu-id="c09e6-117">İstemci uygulamaları, daha sonra bunlar için en iyi uç noktayı seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c09e6-117">Client applications can then choose the endpoint that is best for them.</span></span> <span data-ttu-id="c09e6-118">Birden çok uç noktalarını kullanarak diğer bağlama öğeleri farklı bir ileti kodlayıcılar avantajları birleştirmek sağlar.</span><span class="sxs-lookup"><span data-stu-id="c09e6-118">Using multiple endpoints allows you to combine the advantages of different message encoders with other binding elements.</span></span>  
  
## <a name="system-provided-encoders"></a><span data-ttu-id="c09e6-119">Sistem tarafından sağlanan kodlayıcılar</span><span class="sxs-lookup"><span data-stu-id="c09e6-119">System-Provided Encoders</span></span>  
 <span data-ttu-id="c09e6-120">WCF en yaygın uygulama senaryolarını kapsayan üzere tasarlanmış birçok sistem tarafından sağlanan bağlamalar sağlar.</span><span class="sxs-lookup"><span data-stu-id="c09e6-120">WCF provides several system-provided bindings that are designed to cover the most common application scenarios.</span></span> <span data-ttu-id="c09e6-121">Bu bağlamalar, her bir aktarım ileti Kodlayıcısı ve diğer seçenekleri (örneğin, güvenlik) birleştirin.</span><span class="sxs-lookup"><span data-stu-id="c09e6-121">Each of these bindings combine a transport, message encoder, and other options (security, for example).</span></span> <span data-ttu-id="c09e6-122">Bu konu nasıl genişletileceğini açıklar `Text`, `Binary`, ve `MTOM` ileti WCF'de içerdiği ya da kendi özel bir kodlayıcı oluşturma kodlayıcılar.</span><span class="sxs-lookup"><span data-stu-id="c09e6-122">This topic describes how to extend the `Text`, `Binary`, and `MTOM` message encoders that are included in WCF, or create your own custom encoder.</span></span> <span data-ttu-id="c09e6-123">Metin ileti Kodlayıcı hem bir düz XML kodlama yanı sıra SOAP kodlamaları destekler.</span><span class="sxs-lookup"><span data-stu-id="c09e6-123">The text message encoder supports both a plain XML encoding as well as SOAP encodings.</span></span> <span data-ttu-id="c09e6-124">Metin ileti Kodlayıcı düz XML kodlama modunu, metin tabanlı SOAP kodlamadan ayırt etmek için ("düz eski XML") POX kodlayıcı olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="c09e6-124">The plain XML encoding mode of the text message encoder is called the POX ("Plain Old XML") encoder to distinguish it from the text-based SOAP encoding.</span></span>  
  
 <span data-ttu-id="c09e6-125">Sistem tarafından sağlanan bağlamalar tarafından sağlanan bağlama öğeleri birleşimlerini hakkında daha fazla bilgi için karşılık gelen bölümünde bakın [taşıma seçme](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="c09e6-125">For more information about the combinations of binding elements provided by the system-provided bindings, see the corresponding section in [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
## <a name="how-to-work-with-system-provided-encoders"></a><span data-ttu-id="c09e6-126">Sistem tarafından sağlanan kodlayıcılar ile çalışma</span><span class="sxs-lookup"><span data-stu-id="c09e6-126">How to Work with System-Provided Encoders</span></span>  
 <span data-ttu-id="c09e6-127">Türetilen bir sınıf kullanarak bir bağlama için bir kodlama eklenir <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="c09e6-127">An encoding is added to a binding using a class derived from <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>.</span></span>  
  
 <span data-ttu-id="c09e6-128">WCF sağlayan aşağıdaki bağlama öğeleri türetilen türde <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> metin, ikili ve ileti aktarım en iyi duruma getirme mekanizması (MTOM) kodlama sağlayabilen sınıf:</span><span class="sxs-lookup"><span data-stu-id="c09e6-128">WCF provides the following types of binding elements derived from the <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> class that can provide for text, binary and Message Transmission Optimization Mechanism (MTOM) encoding:</span></span>  
  
- <span data-ttu-id="c09e6-129"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>: En birlikte çalışabilir, ancak XML iletileri için en az verimli Kodlayıcı.</span><span class="sxs-lookup"><span data-stu-id="c09e6-129"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>: The most interoperable, but the least efficient encoder for XML messages.</span></span> <span data-ttu-id="c09e6-130">Genellikle bir Web hizmeti veya Web hizmeti istemcisi metinsel XML anlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c09e6-130">A Web service or Web service client can generally understand textual XML.</span></span> <span data-ttu-id="c09e6-131">Ancak, büyük ikili veri olarak metin blokları iletme verimli değildir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-131">However, transmitting large blocks of binary data as text is not efficient.</span></span>  
  
- <span data-ttu-id="c09e6-132"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>: Karakter kodlamasını belirtir. bağlama öğesi ve ileti sürüm oluşturmayı ikili tabanlı XML iletileri için kullanılan temsil eder.</span><span class="sxs-lookup"><span data-stu-id="c09e6-132"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>: Represents the binding element that specifies the character encoding and message versioning used for binary-based XML messages.</span></span> <span data-ttu-id="c09e6-133">Bu kodlama seçenekleri, ancak en az çalışabilen en etkili yöntemdir çünkü yalnızca WCF uç noktaları tarafından desteklenir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-133">This is most efficient of the encoding options, but the least interoperable, because it is only supported by WCF endpoints.</span></span>  
  
- <span data-ttu-id="c09e6-134"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>: Bir ileti aktarım en iyi duruma getirme mekanizması (MTOM) kodlama kullanılarak bir ileti için kullanılan ileti sürüm oluşturmayı ve karakter kodlamasını belirtir. bağlama öğesi temsil eder.</span><span class="sxs-lookup"><span data-stu-id="c09e6-134"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>: Represents the binding element that specifies the character encoding and message versioning used for a message using a Message Transmission Optimization Mechanism (MTOM) encoding.</span></span> <span data-ttu-id="c09e6-135">MTOM WCF iletilerinde ikili veri aktarımı için verimli bir teknolojidir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-135">MTOM is an efficient technology for transmitting binary data in WCF messages.</span></span> <span data-ttu-id="c09e6-136">MTOM Kodlayıcısı, verimlilik ve birlikte çalışabilirlik arasında dengeleme dener.</span><span class="sxs-lookup"><span data-stu-id="c09e6-136">The MTOM encoder attempts to balance between efficiency and interoperability.</span></span> <span data-ttu-id="c09e6-137">MTOM kodlama çoğu XML metin biçiminde aktarır, ancak büyük ikili veri blokları olarak ileterek iyileştirir-olan metin dönüştürme olmadan.</span><span class="sxs-lookup"><span data-stu-id="c09e6-137">The MTOM encoding transmits most XML in textual form, but optimizes large blocks of binary data by transmitting them as-is, without conversion to text.</span></span>  
  
 <span data-ttu-id="c09e6-138">Bir ikili, MTOM ya da metin bağlama öğesi oluşturur <xref:System.ServiceModel.Channels.MessageEncoderFactory>.</span><span class="sxs-lookup"><span data-stu-id="c09e6-138">The binding element creates a binary, MTOM, or text <xref:System.ServiceModel.Channels.MessageEncoderFactory>.</span></span> <span data-ttu-id="c09e6-139">Bir ikili, MTOM ya da metin üreteci oluşturur <xref:System.ServiceModel.Channels.MessageEncoderFactory> örneği.</span><span class="sxs-lookup"><span data-stu-id="c09e6-139">The factory creates a binary, MTOM, or text <xref:System.ServiceModel.Channels.MessageEncoderFactory> instance.</span></span> <span data-ttu-id="c09e6-140">Genellikle, yalnızca tek bir örneği yok.</span><span class="sxs-lookup"><span data-stu-id="c09e6-140">Typically, there is only a single instance.</span></span> <span data-ttu-id="c09e6-141">Ancak farklı bir kodlayıcı oturumları kullanılıyorsa, her oturum için sağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-141">However if sessions are used, a different encoder may be provided to each session.</span></span> <span data-ttu-id="c09e6-142">İkili Kodlayıcı sağlar (bkz. XML altyapı) dinamik sözlükleri koordine etmek için bunu kullanın.</span><span class="sxs-lookup"><span data-stu-id="c09e6-142">The Binary encoder makes use of this to coordinate dynamic dictionaries (see XML Infrastructure).</span></span>  
  
 <span data-ttu-id="c09e6-143"><xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A> Ve <xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> kodlayıcılarda setinin yöntemlerdir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-143">The <xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A> and <xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> methods are the core of the encoders.</span></span> <span data-ttu-id="c09e6-144">Bir akış ya da bir ileti okumak için yöntemler sağlar. bir <xref:System.Byte> dizi.</span><span class="sxs-lookup"><span data-stu-id="c09e6-144">The methods provide for reading a message from a stream or from a <xref:System.Byte> array.</span></span> <span data-ttu-id="c09e6-145">Bayt dizileri taşıma arabelleğe alınan modda çalışırken kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c09e6-145">Byte arrays are used when the transport is operating in buffered mode.</span></span> <span data-ttu-id="c09e6-146">İleti akışları için her zaman yazılır.</span><span class="sxs-lookup"><span data-stu-id="c09e6-146">Messages are always written to streams.</span></span> <span data-ttu-id="c09e6-147">Aktarım iletisi arabellek gerekir, arabelleğe alma işlemini destekleyen bir akışa sağlar.</span><span class="sxs-lookup"><span data-stu-id="c09e6-147">If the transport must buffer the message, it provides a stream that does the buffering.</span></span>  
  
 <span data-ttu-id="c09e6-148">Kalan üyeler destek içerik, medya türleriyle çalışır ve <xref:System.ServiceModel.Channels.MessageEncoder.MessageVersion%2A>.</span><span class="sxs-lookup"><span data-stu-id="c09e6-148">The rest of the members work with support content, media types, and <xref:System.ServiceModel.Channels.MessageEncoder.MessageVersion%2A>.</span></span> <span data-ttu-id="c09e6-149">Taşıma tarafından gelen ileti çözülebilir olup olmadığını test etmek için ya da giden ileti bu Kodlayıcı için geçerli olup olmadığını belirlemek için bu Kodlayıcı yöntemleri çağırır.</span><span class="sxs-lookup"><span data-stu-id="c09e6-149">The transport calls these encoder methods to test whether the incoming message can be decoded by it, or to determine if the outgoing message is valid for this encoder.</span></span>  
  
 <span data-ttu-id="c09e6-150">Üç Kodlayıcı uygulamaların her biri belirli kodlamaları için uygun olan özellikleri ekler ve tam olarak yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-150">Each of the three encoder implementations adds properties that are relevant to the specific encodings and is fully configurable.</span></span> <span data-ttu-id="c09e6-151">Kodlayıcıları güvenli varsayılanlara sahiptir okuyucu kotalar da kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="c09e6-151">The encoders also expose reader quotas that have secure defaults.</span></span> <span data-ttu-id="c09e6-152">XML altyapı kotaları hakkında ayrıntılı bilgi için bkz.</span><span class="sxs-lookup"><span data-stu-id="c09e6-152">See XML Infrastructure for a discussion of the quotas.</span></span>  
  
## <a name="features-of-system-provided-encoders"></a><span data-ttu-id="c09e6-153">Sistem tarafından sağlanan kodlayıcılar özellikleri</span><span class="sxs-lookup"><span data-stu-id="c09e6-153">Features of System-Provided Encoders</span></span>  
 <span data-ttu-id="c09e6-154">Sistem tarafından sağlanan kodlayıcılarda tarafından sağlanan özellikleri vardır.</span><span class="sxs-lookup"><span data-stu-id="c09e6-154">There are a number of features provided by the system-provided encoders.</span></span>  
  
### <a name="pooling"></a><span data-ttu-id="c09e6-155">Biriktirme</span><span class="sxs-lookup"><span data-stu-id="c09e6-155">Pooling</span></span>  
 <span data-ttu-id="c09e6-156">Kodlayıcı uygulamaların her biri, mümkün olduğunca havuzu çalışır.</span><span class="sxs-lookup"><span data-stu-id="c09e6-156">Each of the encoder implementations tries to pool as much as possible.</span></span> <span data-ttu-id="c09e6-157">Ayırmaları azaltma yönetilen kod performansını artırmak için önemli bir yoludur.</span><span class="sxs-lookup"><span data-stu-id="c09e6-157">Reducing allocations is a key way to improve the performance of managed code.</span></span> <span data-ttu-id="c09e6-158">Bu havuzu gerçekleştirmek için uygulamaları kullanın. `SynchronizedPool` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="c09e6-158">To accomplish this pooling, the implementations use the `SynchronizedPool` class.</span></span> <span data-ttu-id="c09e6-159">C# Dosyası bu sınıf tarafından kullanılan ek iyileştirmeler açıklamasını içerir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-159">The C# file contains a description of the additional optimizations used by this class.</span></span>  
  
 <span data-ttu-id="c09e6-160"><xref:System.Xml.XmlDictionaryReader> ve <xref:System.Xml.XmlDictionaryWriter> örnekleri havuza ve yenilerini her ileti için ayırma önlemek için yeniden başlatıldı.</span><span class="sxs-lookup"><span data-stu-id="c09e6-160"><xref:System.Xml.XmlDictionaryReader> and <xref:System.Xml.XmlDictionaryWriter> instances are pooled and reinitialized to prevent allocating new ones for each message.</span></span> <span data-ttu-id="c09e6-161">Okuyucular için bir `OnClose` geri çağırma geri kazanır, okuyucu olduğunda `Close()` çağrılır.</span><span class="sxs-lookup"><span data-stu-id="c09e6-161">For the readers, an `OnClose` callback reclaims the reader when `Close()` is called.</span></span> <span data-ttu-id="c09e6-162">Kodlayıcı Ayrıca iletileri oluştururken kullanılan bazı ileti durumu nesneleri geri dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="c09e6-162">The encoder also recycles some message state objects used when constructing messages.</span></span> <span data-ttu-id="c09e6-163">Bu havuzları tarafından yapılandırılabilir boyutlarda `MaxReadPoolSize` ve `MaxWritePoolSize` her üç sınıfın özelliklerini türetilen <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="c09e6-163">The sizes of these pools are configurable by the `MaxReadPoolSize` and `MaxWritePoolSize` properties on each of the three classes derived from <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>.</span></span>  
  
### <a name="binary-encoding"></a><span data-ttu-id="c09e6-164">İkili kodlama</span><span class="sxs-lookup"><span data-stu-id="c09e6-164">Binary Encoding</span></span>  
 <span data-ttu-id="c09e6-165">Dinamik sözlük dizesinde ikili zaman kullandığı oturumları kodlama, ileti alıcısı için bildirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-165">When binary encoding uses sessions, the dynamic dictionary string must be communicated to the receiver of the message.</span></span> <span data-ttu-id="c09e6-166">Bu, dinamik sözlük dizeleri içeren bir ileti ekleyerek gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-166">This is done by prefixing the message with the dynamic dictionary strings.</span></span> <span data-ttu-id="c09e6-167">Alıcı dizeleri kaldırır, bunları oturumuna ekler ve iletiyi işler.</span><span class="sxs-lookup"><span data-stu-id="c09e6-167">The receiver strips off the strings, adds them to the session, and processes the message.</span></span> <span data-ttu-id="c09e6-168">Doğru sözlük dizeleri taşıma arabelleğe alınıp gerektirir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-168">Correctly passing dictionary strings requires that the transport be buffered.</span></span>  
  
 <span data-ttu-id="c09e6-169">Dizeleri iletiye bir iç tarafından eklenen `AddSessionInformationToMessage` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c09e6-169">The strings are appended to the message by an internal `AddSessionInformationToMessage` method.</span></span> <span data-ttu-id="c09e6-170">Dizeleri, ön eki uzunlukları ile ileti önüne UTF-8 ekler.</span><span class="sxs-lookup"><span data-stu-id="c09e6-170">It adds the strings as UTF-8 to the front of the message prefixed with their length.</span></span> <span data-ttu-id="c09e6-171">Tüm sözlük üst bilgisi, ardından kendi veri uzunluğu ile önekidir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-171">The entire dictionary header is then prefixed with the length of its data.</span></span> <span data-ttu-id="c09e6-172">Tersine çevirme işlemi bir iç tarafından gerçekleştirilen `ExtractSessionInformationFromMessage` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c09e6-172">The reverse operation is performed by an internal `ExtractSessionInformationFromMessage` method.</span></span>  
  
 <span data-ttu-id="c09e6-173">Dinamik sözlük anahtarlarını işleme ek olarak, benzersiz bir yolla kapatamaması arabelleğe alma iletilerinin alınır.</span><span class="sxs-lookup"><span data-stu-id="c09e6-173">In addition to processing dynamic dictionary keys, buffered sessionful messages are received in a unique way.</span></span> <span data-ttu-id="c09e6-174">Belge üzerinde bir okuyucu oluşturma ve işlemekte yerine ikili Kodlayıcı dahili kullanım `MessagePatterns` ikili akışı ayrıştırma için sınıf.</span><span class="sxs-lookup"><span data-stu-id="c09e6-174">Instead of creating a reader over the document and processing it, the binary encoder uses the internal `MessagePatterns` class to deconstruct the binary stream.</span></span> <span data-ttu-id="c09e6-175">İletilerin çoğu belirli bir dizi WCF tarafından oluşturulmuş bir düzende görünmesini üstbilgileri sahip olur.</span><span class="sxs-lookup"><span data-stu-id="c09e6-175">The idea is that most messages have a certain set of headers that show up in a certain order when generated by WCF.</span></span> <span data-ttu-id="c09e6-176">Düzen sistemi ayırmak, bekliyor üzerinde temel ileti keser.</span><span class="sxs-lookup"><span data-stu-id="c09e6-176">The pattern system breaks the message apart based on what it expects.</span></span> <span data-ttu-id="c09e6-177">Başarılı olursa, onu başlatır bir <xref:System.ServiceModel.Channels.MessageHeaders> XML Ayrıştırma olmadan nesne.</span><span class="sxs-lookup"><span data-stu-id="c09e6-177">If it is successful, it initializes a <xref:System.ServiceModel.Channels.MessageHeaders> object without parsing the XML.</span></span> <span data-ttu-id="c09e6-178">Aksi durumda, standart yöntemin geri döner.</span><span class="sxs-lookup"><span data-stu-id="c09e6-178">If not, it falls back to the standard method.</span></span>  
  
### <a name="mtom-encoding"></a><span data-ttu-id="c09e6-179">MTOM Kodlama</span><span class="sxs-lookup"><span data-stu-id="c09e6-179">MTOM Encoding</span></span>  
 <span data-ttu-id="c09e6-180"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> Sınıfında adlı bir ek yapılandırma özelliği <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement.MaxBufferSize%2A>.</span><span class="sxs-lookup"><span data-stu-id="c09e6-180">The <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> class has an additional configuration property called <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement.MaxBufferSize%2A>.</span></span> <span data-ttu-id="c09e6-181">Bu, bir üst sınır ne kadar veri bir ileti okuma işlemi sırasında arabelleğe almak için izin veriliyorsa üzerinde yerleştirir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-181">This places an upper bound on how much data it is allowed to buffer during the process of reading a message.</span></span> <span data-ttu-id="c09e6-182">XML bilgi kümesi (bilgi kümesi) veya diğer MIME bölümü, tüm MIME bölümleri tek bir iletiye yeniden birleştirmek için arabelleğe alınan gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-182">The XML Information Set (Infoset), or other MIME parts, may need to be buffered to reassemble all the MIME parts into a single message.</span></span>  
  
 <span data-ttu-id="c09e6-183">HTTP ile düzgün çalışmak için bazı iç API'ler için iç MTOM ileti Kodlayıcı sınıfı sağlar `GetContentType` (olduğu da iç) ve `WriteMessage`, genel ve geçersiz kılınabilir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-183">To work correctly with HTTP, the internal MTOM message encoder class provides some internal APIs for `GetContentType` (which is also internal) and `WriteMessage`, which is public and can be overridden.</span></span> <span data-ttu-id="c09e6-184">Daha fazla iletişim MIME üstbilgi değerleri ile HTTP üstbilgileri değerleri kabul emin olmak için gerçekleşmelidir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-184">More communication must occur to ensure values in the HTTP headers agree with values in the MIME headers.</span></span>  
  
 <span data-ttu-id="c09e6-185">Dahili olarak MTOM ileti Kodlayıcı WCF'ın metin okuyucular kullanır ve metin Kodlayıcı için benzer.</span><span class="sxs-lookup"><span data-stu-id="c09e6-185">Internally, the MTOM message encoder uses WCF's text readers, and is similar to the Text encoder.</span></span> <span data-ttu-id="c09e6-186">İkisi arasındaki temel fark büyük ikili veya "Büyük ikili nesneler" (BLOB) parçalarını iyileştirir bunları ileti baytlarının katıştırılmış önce 64 tabanlı kodlama değil dönüştürmektir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-186">The main difference is that it optimizes large chunks of binary, or "Binary Large Objects" (BLOBs), by not converting them to Base-64 encoding prior to being embedded into the message bytes.</span></span> <span data-ttu-id="c09e6-187">Bunun yerine, bu Bloblarda ayıklanan ve başvurulan MIME ek olarak tutulur.</span><span class="sxs-lookup"><span data-stu-id="c09e6-187">Instead, these BLOBs are kept extracted, and referenced as the MIME attachments.</span></span>  
  
## <a name="writing-your-own-encoder"></a><span data-ttu-id="c09e6-188">Kendi Kodlayıcı yazma</span><span class="sxs-lookup"><span data-stu-id="c09e6-188">Writing your own Encoder</span></span>  
 <span data-ttu-id="c09e6-189">Kendi özel ileti Kodlayıcı uygulamak için aşağıdaki soyut temel sınıflar, özel uygulamalar sağlamalıdır:</span><span class="sxs-lookup"><span data-stu-id="c09e6-189">To implement your own custom message encoder, you must provide custom implementations of the following abstract base classes:</span></span>  
  
- <xref:System.ServiceModel.Channels.MessageEncoder>  
  
- <xref:System.ServiceModel.Channels.MessageEncoderFactory>  
  
- <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>  
  
 <span data-ttu-id="c09e6-190">Bir iletinin bellek içi gösteriminden bir akışa yazılabilir bir temsili dönüştürme saklanmış olduğu içinde <xref:System.ServiceModel.Channels.MessageEncoder> XML okuyucular ve belirli türlerdeki XML kodlamaları destekleyen XML yazıcılar için bir üreteci hizmet veren sınıf.</span><span class="sxs-lookup"><span data-stu-id="c09e6-190">Converting from the in-memory representation of a message to a representation that can be written to a stream is encapsulated within the <xref:System.ServiceModel.Channels.MessageEncoder> class, which serves as a factory for XML readers and XML writers that support specific types of XML encodings.</span></span>  
  
- <span data-ttu-id="c09e6-191">Geçersiz kılmanız gerekir, bu sınıfın temel yöntemler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="c09e6-191">The key methods of this class that you must override are:</span></span>  
  
- <span data-ttu-id="c09e6-192"><xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> hangi alır bir <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> nesne ve içine Yazar bir <xref:System.IO.Stream> nesne.</span><span class="sxs-lookup"><span data-stu-id="c09e6-192"><xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> which takes a <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> object and writes it into a <xref:System.IO.Stream> object.</span></span>  
  
- <span data-ttu-id="c09e6-193"><xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A> hangi alır bir <xref:System.IO.Stream> nesne ve en fazla üstbilgi boyutu ve döndürür bir <xref:System.ServiceModel.Channels.Message> nesne.</span><span class="sxs-lookup"><span data-stu-id="c09e6-193"><xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A> which takes a <xref:System.IO.Stream> object and a maximum header size and returns a <xref:System.ServiceModel.Channels.Message> object.</span></span>  
  
 <span data-ttu-id="c09e6-194">Buna standart aktarım protokolünü ve özelleştirilmiş kodlama arasında dönüştürme işleyen bu yöntemleri yazdığınız kodu var.</span><span class="sxs-lookup"><span data-stu-id="c09e6-194">It is the code you write in these methods that handles conversion between the standard transport protocol, and your customized encoding.</span></span>  
  
 <span data-ttu-id="c09e6-195">Ardından, özel bir kodlayıcı oluşturan bir Üreteç sınıfını kod gerekir.</span><span class="sxs-lookup"><span data-stu-id="c09e6-195">Next you need to code a factory class that creates your custom encoder.</span></span> <span data-ttu-id="c09e6-196">Geçersiz kılma <xref:System.ServiceModel.Channels.MessageEncoderFactory.Encoder%2A> özel örneğini döndürülecek <xref:System.ServiceModel.Channels.MessageEncoder>.</span><span class="sxs-lookup"><span data-stu-id="c09e6-196">Override the <xref:System.ServiceModel.Channels.MessageEncoderFactory.Encoder%2A> to return an instance of your custom <xref:System.ServiceModel.Channels.MessageEncoder>.</span></span>  
  
 <span data-ttu-id="c09e6-197">Ardından özel bağlanma <xref:System.ServiceModel.Channels.MessageEncoderFactory> geçersiz kılarak, hizmet veya istemcinin yapılandırmak için kullanılan bağlama öğesi yığınına <xref:System.ServiceModel.Channels.MessageEncodingBindingElement.CreateMessageEncoderFactory%2A> yöntemi bu üretecin bir örneğini döndürür.</span><span class="sxs-lookup"><span data-stu-id="c09e6-197">Then connect your custom <xref:System.ServiceModel.Channels.MessageEncoderFactory> to the binding element stack used to configure the service or client by overriding the <xref:System.ServiceModel.Channels.MessageEncodingBindingElement.CreateMessageEncoderFactory%2A> method to return an instance of this factory.</span></span>  
  
 <span data-ttu-id="c09e6-198">Örnek kod ile bu işlemi canlandırmak adına WCF ile sağlanan iki örnekleri vardır: [Özel ileti Kodlayıcı: Özel metin Kodlayıcı](../../../../docs/framework/wcf/samples/custom-message-encoder-custom-text-encoder.md) ve [özel ileti Kodlayıcı: Sıkıştırma Kodlayıcısı](../../../../docs/framework/wcf/samples/custom-message-encoder-compression-encoder.md).</span><span class="sxs-lookup"><span data-stu-id="c09e6-198">There are two samples provided with WCF that illustrate this process with sample code: [Custom Message Encoder: Custom Text Encoder](../../../../docs/framework/wcf/samples/custom-message-encoder-custom-text-encoder.md) and [Custom Message Encoder: Compression Encoder](../../../../docs/framework/wcf/samples/custom-message-encoder-compression-encoder.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c09e6-199">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="c09e6-199">See also</span></span>

- <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>
- <xref:System.ServiceModel.Channels.MessageEncoderFactory>
- <xref:System.ServiceModel.Channels.MessageEncoder>
- [<span data-ttu-id="c09e6-200">Veri Aktarımı Mimarisi Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="c09e6-200">Data Transfer Architectural Overview</span></span>](../../../../docs/framework/wcf/feature-details/data-transfer-architectural-overview.md)
- [<span data-ttu-id="c09e6-201">İleti Kodlayıcı Seçme</span><span class="sxs-lookup"><span data-stu-id="c09e6-201">Choosing a Message Encoder</span></span>](../../../../docs/framework/wcf/feature-details/choosing-a-message-encoder.md)
- [<span data-ttu-id="c09e6-202">Taşıma Seçme</span><span class="sxs-lookup"><span data-stu-id="c09e6-202">Choosing a Transport</span></span>](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md)
