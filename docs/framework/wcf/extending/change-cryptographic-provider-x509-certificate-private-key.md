---
title: 'Nasıl yapılır: Bir X.509 sertifikasının şifreleme sağlayıcısını değiştirme'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- cryptographic provider [WCF], changing
- cryptographic provider [WCF]
ms.assetid: b4254406-272e-4774-bd61-27e39bbb6c12
ms.openlocfilehash: ce2ce082f41700b1b86786abfa2dfe4a673fd6e0
ms.sourcegitcommit: 14355b4b2fe5bcf874cac96d0a9e6376b567e4c7
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/30/2019
ms.locfileid: "55265954"
---
# <a name="how-to-change-the-cryptographic-provider-for-an-x509-certificates-private-key"></a><span data-ttu-id="30d8b-102">Nasıl yapılır: Bir X.509 sertifikasının şifreleme sağlayıcısını değiştirme</span><span class="sxs-lookup"><span data-stu-id="30d8b-102">How to: Change the Cryptographic Provider for an X.509 Certificate's Private Key</span></span>
<span data-ttu-id="30d8b-103">Bu konu nasıl bir X.509 sertifikasının özel anahtar sağlamak için kullanılan şifreleme sağlayıcısını değiştirme ve Windows Communication Foundation (WCF) güvenlik altyapısına sağlayıcı tümleştirmek nasıl gösterir.</span><span class="sxs-lookup"><span data-stu-id="30d8b-103">This topic shows how to change the cryptographic provider used to provide an X.509 certificate's private key and how to integrate the provider into the Windows Communication Foundation (WCF) security framework.</span></span> <span data-ttu-id="30d8b-104">Sertifikaları kullanma hakkında daha fazla bilgi için bkz. [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span><span class="sxs-lookup"><span data-stu-id="30d8b-104">For more information about using certificates, see [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span></span>  
  
 <span data-ttu-id="30d8b-105">WCF güvenlik çerçevesi açıklandığı gibi yeni güvenlik belirteç türleri tanıtmak için bir yol sağlar [nasıl yapılır: Özel belirteç oluşturma](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md).</span><span class="sxs-lookup"><span data-stu-id="30d8b-105">The WCF security framework provides a way to introduce new security token types as described in [How to: Create a Custom Token](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md).</span></span> <span data-ttu-id="30d8b-106">Var olan sistem tarafından sağlanan belirteç türleri değiştirmek için özel bir belirteç kullanmak da mümkündür.</span><span class="sxs-lookup"><span data-stu-id="30d8b-106">It is also possible to use a custom token to replace existing system-provided token types.</span></span>  
  
 <span data-ttu-id="30d8b-107">Bu konu başlığında, sistem tarafından sağlanan X.509 güvenlik belirteci, sertifika özel anahtar için farklı bir uygulama sağlayan özel bir X.509 belirteç değiştirilir.</span><span class="sxs-lookup"><span data-stu-id="30d8b-107">In this topic, the system-provided X.509 security token is replaced by a custom X.509 token that provides a different implementation for the certificate private key.</span></span> <span data-ttu-id="30d8b-108">Bu, burada gerçek özel anahtarı varsayılan Windows şifreleme sağlayıcısı değerinden farklı bir şifreleme sağlayıcısı tarafından sağlanan senaryolarda kullanışlıdır.</span><span class="sxs-lookup"><span data-stu-id="30d8b-108">This is useful in scenarios where the actual private key is provided by a different cryptographic provider than the default Windows cryptographic provider.</span></span> <span data-ttu-id="30d8b-109">Bir alternatif bir şifreleme sağlayıcısı, tüm özel anahtarı ilgili şifreleme işlemlerini gerçekleştirir ve özel anahtarlar, böylece sistem güvenliğini artırma bellekte depolamaz bir donanım güvenlik modülüne örneğidir.</span><span class="sxs-lookup"><span data-stu-id="30d8b-109">One example of an alternative cryptographic provider is a hardware security module that performs all private key related cryptographic operations, and does not store the private keys in memory, thus improving security of the system.</span></span>  
  
 <span data-ttu-id="30d8b-110">Aşağıdaki örnek yalnızca gösterim amaçlıdır.</span><span class="sxs-lookup"><span data-stu-id="30d8b-110">The following example is for demonstration purposes only.</span></span> <span data-ttu-id="30d8b-111">Windows şifreleme sağlayıcısı varsayılan yerini almaz ancak böyle bir sağlayıcı burada tümleşik gösterir.</span><span class="sxs-lookup"><span data-stu-id="30d8b-111">It does not replace the default Windows cryptographic provider, but it shows where such a provider could be integrated.</span></span>  
  
## <a name="procedures"></a><span data-ttu-id="30d8b-112">Yordamlar</span><span class="sxs-lookup"><span data-stu-id="30d8b-112">Procedures</span></span>  
 <span data-ttu-id="30d8b-113">İlişkili güvenlik anahtarı veya anahtarlarının her güvenlik belirteci uygulamalıdır <xref:System.IdentityModel.Tokens.SecurityToken.SecurityKeys%2A> özelliği güvenlik belirteci örneğinden anahtarların bir koleksiyonunu döndürür.</span><span class="sxs-lookup"><span data-stu-id="30d8b-113">Every security token that has an associated security key or keys must implement the <xref:System.IdentityModel.Tokens.SecurityToken.SecurityKeys%2A> property, which returns a collection of keys from the security token instance.</span></span> <span data-ttu-id="30d8b-114">Belirteç bir X.509 güvenlik belirteci ise, koleksiyonun tek bir örneğini içerir <xref:System.IdentityModel.Tokens.X509AsymmetricSecurityKey> sertifikayla ilişkili ortak ve özel anahtarları temsil eden sınıf.</span><span class="sxs-lookup"><span data-stu-id="30d8b-114">If the token is an X.509 security token, the collection contains a single instance of the <xref:System.IdentityModel.Tokens.X509AsymmetricSecurityKey> class that represents both public and private keys associated with the certificate.</span></span> <span data-ttu-id="30d8b-115">Sertifikanın anahtar sağlamak için kullanılan varsayılan şifreleme sağlayıcısı değiştirmek için bu sınıfın yeni bir uygulama oluşturun.</span><span class="sxs-lookup"><span data-stu-id="30d8b-115">To replace the default cryptographic provider used to provide the certificate's keys, create a new implementation of this class.</span></span>  
  
#### <a name="to-create-a-custom-x509-asymmetric-key"></a><span data-ttu-id="30d8b-116">Özel X.509 asimetrik anahtar oluşturmak için</span><span class="sxs-lookup"><span data-stu-id="30d8b-116">To create a custom X.509 asymmetric key</span></span>  
  
1.  <span data-ttu-id="30d8b-117">Türetilmiş yeni bir sınıf tanımlama <xref:System.IdentityModel.Tokens.X509AsymmetricSecurityKey> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="30d8b-117">Define a new class derived from the <xref:System.IdentityModel.Tokens.X509AsymmetricSecurityKey> class.</span></span>  
  
2.  <span data-ttu-id="30d8b-118">Geçersiz kılma <xref:System.IdentityModel.Tokens.SecurityKey.KeySize%2A> salt okunur özelliği.</span><span class="sxs-lookup"><span data-stu-id="30d8b-118">Override the <xref:System.IdentityModel.Tokens.SecurityKey.KeySize%2A> read-only property.</span></span> <span data-ttu-id="30d8b-119">Bu özellik, sertifikanın ortak/özel anahtar çifti gerçek anahtar boyutunu döndürür.</span><span class="sxs-lookup"><span data-stu-id="30d8b-119">This property returns the actual key size of the certificate's public/private key pair.</span></span>  
  
3.  <span data-ttu-id="30d8b-120">Geçersiz kılma <xref:System.IdentityModel.Tokens.SecurityKey.DecryptKey%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="30d8b-120">Override the <xref:System.IdentityModel.Tokens.SecurityKey.DecryptKey%2A> method.</span></span> <span data-ttu-id="30d8b-121">Bu yöntem, sertifikanın özel anahtara sahip bir simetrik anahtarın şifresini çözmek için WCF güvenlik çerçevesi tarafından çağrılır.</span><span class="sxs-lookup"><span data-stu-id="30d8b-121">This method is called by the WCF security framework to decrypt a symmetric key with the certificate's private key.</span></span> <span data-ttu-id="30d8b-122">(Anahtarı daha önce sertifikanın ortak anahtar ile şifrelenmiş.)</span><span class="sxs-lookup"><span data-stu-id="30d8b-122">(The key was previously encrypted with the certificate's public key.)</span></span>  
  
4.  <span data-ttu-id="30d8b-123">Geçersiz kılma <xref:System.IdentityModel.Tokens.AsymmetricSecurityKey.GetAsymmetricAlgorithm%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="30d8b-123">Override the <xref:System.IdentityModel.Tokens.AsymmetricSecurityKey.GetAsymmetricAlgorithm%2A> method.</span></span> <span data-ttu-id="30d8b-124">Bu yöntem bir örneği elde etmek için WCF güvenlik çerçevesi tarafından çağrılır <xref:System.Security.Cryptography.AsymmetricAlgorithm> geçirilen yönteme parametreleri bağlı olarak sertifikanın özel veya ortak anahtar şifreleme sağlayıcısını temsil eden sınıf.</span><span class="sxs-lookup"><span data-stu-id="30d8b-124">This method is called by the WCF security framework to obtain an instance of the <xref:System.Security.Cryptography.AsymmetricAlgorithm> class that represents the cryptographic provider for either the certificate's private or public key, depending on the parameters passed to the method.</span></span>  
  
5.  <span data-ttu-id="30d8b-125">İsteğe bağlı.</span><span class="sxs-lookup"><span data-stu-id="30d8b-125">Optional.</span></span> <span data-ttu-id="30d8b-126">Geçersiz kılma <xref:System.IdentityModel.Tokens.AsymmetricSecurityKey.GetHashAlgorithmForSignature%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="30d8b-126">Override the <xref:System.IdentityModel.Tokens.AsymmetricSecurityKey.GetHashAlgorithmForSignature%2A> method.</span></span> <span data-ttu-id="30d8b-127">Farklı bir uygulaması, bu yöntemi yok sayın <xref:System.Security.Cryptography.HashAlgorithm> sınıfı gereklidir.</span><span class="sxs-lookup"><span data-stu-id="30d8b-127">Override this method if a different implementation of the <xref:System.Security.Cryptography.HashAlgorithm> class is required.</span></span>  
  
6.  <span data-ttu-id="30d8b-128">Geçersiz kılma <xref:System.IdentityModel.Tokens.AsymmetricSecurityKey.GetSignatureFormatter%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="30d8b-128">Override the <xref:System.IdentityModel.Tokens.AsymmetricSecurityKey.GetSignatureFormatter%2A> method.</span></span> <span data-ttu-id="30d8b-129">Bu yöntem bir örneğini döndürür <xref:System.Security.Cryptography.AsymmetricSignatureFormatter> sertifikanın özel anahtarı ile ilişkili sınıf.</span><span class="sxs-lookup"><span data-stu-id="30d8b-129">This method returns an instance of the <xref:System.Security.Cryptography.AsymmetricSignatureFormatter> class that is associated with the certificate's private key.</span></span>  
  
7.  <span data-ttu-id="30d8b-130">Geçersiz kılma <xref:System.IdentityModel.Tokens.SecurityKey.IsSupportedAlgorithm%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="30d8b-130">Override the <xref:System.IdentityModel.Tokens.SecurityKey.IsSupportedAlgorithm%2A> method.</span></span> <span data-ttu-id="30d8b-131">Bu yöntem, belirli bir şifreleme algoritması güvenlik anahtar uygulama tarafından desteklenip desteklenmediğini belirtmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="30d8b-131">This method is used to indicate whether a particular cryptographic algorithm is supported by the security key implementation.</span></span>  
  
     [!code-csharp[c_CustomX509Token#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customx509token/cs/source.cs#1)]
     [!code-vb[c_CustomX509Token#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customx509token/vb/source.vb#1)]  
  
 <span data-ttu-id="30d8b-132">Aşağıdaki yordam, sistem tarafından sağlanan X.509 güvenlik değiştirmek için önceki yordamda WCF güvenlik çerçevesi ile oluşturulan özel X.509 asimetrik güvenlik anahtar tümleştirmenize nasıl belirteci gösterir.</span><span class="sxs-lookup"><span data-stu-id="30d8b-132">The following procedure shows how to integrate the custom X.509 asymmetric security key implementation created in the preceding procedure with the WCF security framework in order to replace the system-provided X.509 security token.</span></span>  
  
#### <a name="to-replace-the-system-provided-x509-security-token-with-a-custom-x509-asymmetric-security-key-token"></a><span data-ttu-id="30d8b-133">Sistem tarafından sağlanan X.509 güvenlik belirteci özel X.509 asimetrik güvenlik anahtar belirteciyle değiştirilecek</span><span class="sxs-lookup"><span data-stu-id="30d8b-133">To replace the system-provided X.509 security token with a custom X.509 asymmetric security key token</span></span>  
  
1.  <span data-ttu-id="30d8b-134">Özel X.509 asimetrik güvenlik anahtarı yerine sistem tarafından sağlanan güvenlik anahtarı döndüren özel bir X.509 güvenlik belirteci, aşağıdaki örnekte gösterildiği gibi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="30d8b-134">Create a custom X.509 security token that returns the custom X.509 asymmetric security key instead of the system-provided security key, as shown in the following example.</span></span> <span data-ttu-id="30d8b-135">Özel güvenlik belirteçleri hakkında daha fazla bilgi için bkz: [nasıl yapılır: Özel belirteç oluşturma](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md).</span><span class="sxs-lookup"><span data-stu-id="30d8b-135">For more information about custom security tokens, see [How to: Create a Custom Token](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md).</span></span>  
  
     [!code-csharp[c_CustomX509Token#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customx509token/cs/source.cs#2)]
     [!code-vb[c_CustomX509Token#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customx509token/vb/source.vb#2)]  
  
2.  <span data-ttu-id="30d8b-136">Örnekte gösterildiği gibi özel bir X.509 güvenlik belirteci döndüren bir özel güvenlik belirteci sağlayıcı oluşturma.</span><span class="sxs-lookup"><span data-stu-id="30d8b-136">Create a custom security token provider that returns a custom X.509 security token, as shown in the example.</span></span> <span data-ttu-id="30d8b-137">Özel güvenlik belirteci sağlayıcıları hakkında daha fazla bilgi için bkz. [nasıl yapılır: Özel güvenlik belirteci sağlayıcı oluşturma](../../../../docs/framework/wcf/extending/how-to-create-a-custom-security-token-provider.md).</span><span class="sxs-lookup"><span data-stu-id="30d8b-137">For more information about custom security token providers, see [How to: Create a Custom Security Token Provider](../../../../docs/framework/wcf/extending/how-to-create-a-custom-security-token-provider.md).</span></span>  
  
     [!code-csharp[c_CustomX509Token#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customx509token/cs/source.cs#3)]
     [!code-vb[c_CustomX509Token#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customx509token/vb/source.vb#3)]  
  
3.  <span data-ttu-id="30d8b-138">Özel güvenlik anahtarı Başlatıcı tarafında kullanılacak gerekiyorsa özel bir istemci güvenlik belirteci yöneticisi ve özel istemci kimlik bilgileri sınıfları, aşağıdaki örnekte gösterildiği gibi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="30d8b-138">If the custom security key needs to be used on the initiator side, create a custom client security token manager and custom client credentials classes, as shown in the following example.</span></span> <span data-ttu-id="30d8b-139">Özel istemci kimlik bilgileri ve istemci güvenlik belirteci yöneticileri hakkında daha fazla bilgi için bkz. [izlenecek yol: Özel istemci ve hizmet kimlik bilgilerini oluşturma](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md).</span><span class="sxs-lookup"><span data-stu-id="30d8b-139">For more information about custom client credentials and client security token managers, see [Walkthrough: Creating Custom Client and Service Credentials](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md).</span></span>  
  
     [!code-csharp[c_CustomX509Token#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customx509token/cs/source.cs#4)]
     [!code-vb[c_CustomX509Token#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customx509token/vb/source.vb#4)]  
  
     [!code-csharp[c_CustomX509Token#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customx509token/cs/source.cs#6)]
     [!code-vb[c_CustomX509Token#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customx509token/vb/source.vb#6)]  
  
4.  <span data-ttu-id="30d8b-140">Alıcı tarafında kullanılacak özel güvenlik anahtarı gerekiyorsa, bir özel hizmet güvenlik belirteci yöneticisi ve özel hizmet kimlik bilgilerini, aşağıdaki örnekte gösterildiği gibi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="30d8b-140">If the custom security key needs to be used on the recipient side, create a custom service security token manager and custom service credentials, as shown in the following example.</span></span> <span data-ttu-id="30d8b-141">Özel hizmet kimlik bilgilerini ve hizmeti güvenlik belirteci yöneticileri hakkında daha fazla bilgi için bkz. [izlenecek yol: Özel istemci ve hizmet kimlik bilgilerini oluşturma](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md).</span><span class="sxs-lookup"><span data-stu-id="30d8b-141">For more information about custom service credentials and service security token managers, see [Walkthrough: Creating Custom Client and Service Credentials](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md).</span></span>  
  
     [!code-csharp[c_CustomX509Token#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customx509token/cs/source.cs#5)]
     [!code-vb[c_CustomX509Token#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customx509token/vb/source.vb#5)]  
  
     [!code-csharp[c_CustomX509Token#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customx509token/cs/source.cs#7)]
     [!code-vb[c_CustomX509Token#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customx509token/vb/source.vb#7)]  
  
## <a name="see-also"></a><span data-ttu-id="30d8b-142">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="30d8b-142">See also</span></span>
- <xref:System.IdentityModel.Tokens.X509AsymmetricSecurityKey>
- <xref:System.IdentityModel.Tokens.AsymmetricSecurityKey>
- <xref:System.IdentityModel.Tokens.SecurityKey>
- <xref:System.Security.Cryptography.AsymmetricAlgorithm>
- <xref:System.Security.Cryptography.HashAlgorithm>
- <xref:System.Security.Cryptography.AsymmetricSignatureFormatter>
- [<span data-ttu-id="30d8b-143">İzlenecek yol: Özel istemci ve hizmet kimlik bilgilerini oluşturma</span><span class="sxs-lookup"><span data-stu-id="30d8b-143">Walkthrough: Creating Custom Client and Service Credentials</span></span>](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md)
- [<span data-ttu-id="30d8b-144">Nasıl yapılır: Özel güvenlik belirteci kimlik doğrulayıcı oluşturma</span><span class="sxs-lookup"><span data-stu-id="30d8b-144">How to: Create a Custom Security Token Authenticator</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-security-token-authenticator.md)
- [<span data-ttu-id="30d8b-145">Nasıl yapılır: Özel güvenlik belirteci sağlayıcı oluşturma</span><span class="sxs-lookup"><span data-stu-id="30d8b-145">How to: Create a Custom Security Token Provider</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-security-token-provider.md)
- [<span data-ttu-id="30d8b-146">Nasıl yapılır: Özel belirteç oluşturma</span><span class="sxs-lookup"><span data-stu-id="30d8b-146">How to: Create a Custom Token</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md)
- [<span data-ttu-id="30d8b-147">Güvenlik mimarisi</span><span class="sxs-lookup"><span data-stu-id="30d8b-147">Security Architecture</span></span>](https://msdn.microsoft.com/library/16593476-d36a-408d-808c-ae6fd483e28f)
