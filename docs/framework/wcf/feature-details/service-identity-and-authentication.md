---
title: Kimlik Doğrulama ile Hizmet Kimliği
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- authentication [WCF], specifying the identity of a service
ms.assetid: a4c8f52c-5b30-45c4-a545-63244aba82be
ms.openlocfilehash: f9ed2a7c284588a0fb481d41dca61e663fd090b1
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/22/2019
ms.locfileid: "69969242"
---
# <a name="service-identity-and-authentication"></a><span data-ttu-id="a93b4-102">Kimlik Doğrulama ile Hizmet Kimliği</span><span class="sxs-lookup"><span data-stu-id="a93b4-102">Service Identity and Authentication</span></span>
<span data-ttu-id="a93b4-103">Hizmetin *uç nokta kimliği* , hizmet Web Hizmetleri Açıklama DILI (wsdl) tarafından oluşturulan bir değerdir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-103">A service's *endpoint identity* is a value generated from the service Web Services Description Language (WSDL).</span></span> <span data-ttu-id="a93b4-104">Bu değer, herhangi bir istemciye yayılan, hizmetin kimliğini doğrulamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-104">This value, propagated to any client, is used to authenticate the service.</span></span> <span data-ttu-id="a93b4-105">İstemci bir uç noktaya iletişim başlattıktan ve hizmet istemcinin kimliğini doğruladıktan sonra, uç nokta kimlik değerini, uç nokta kimlik doğrulama işleminin döndürdüğü gerçek değer ile karşılaştırır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-105">After the client initiates a communication to an endpoint and the service authenticates itself to the client, the client compares the endpoint identity value with the actual value the endpoint authentication process returned.</span></span> <span data-ttu-id="a93b4-106">Eşleşiyorlarsa, istemci beklenen hizmet uç noktasıyla iletişim kurduysa emin olur.</span><span class="sxs-lookup"><span data-stu-id="a93b4-106">If they match, the client is assured it has contacted the expected service endpoint.</span></span> <span data-ttu-id="a93b4-107">Bu, bir istemcinin kötü amaçlı bir hizmet tarafından barındırılan bir uç noktaya yeniden yönlendirilmesini önlemek yoluyla *kimlik avına* karşı koruma olarak çalışır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-107">This functions as a protection against *phishing* by preventing a client from being redirected to an endpoint hosted by a malicious service.</span></span>  
  
 <span data-ttu-id="a93b4-108">Kimlik ayarını gösteren örnek bir uygulama için bkz. [hizmet kimliği örneği](../../../../docs/framework/wcf/samples/service-identity-sample.md).</span><span class="sxs-lookup"><span data-stu-id="a93b4-108">For a sample application that demonstrates identity setting, see [Service Identity Sample](../../../../docs/framework/wcf/samples/service-identity-sample.md).</span></span> <span data-ttu-id="a93b4-109">Uç noktalar ve uç nokta adresleri hakkında daha fazla bilgi için bkz. [adresler](../../../../docs/framework/wcf/feature-details/endpoint-addresses.md).</span><span class="sxs-lookup"><span data-stu-id="a93b4-109">For more information about endpoints and endpoint addresses, see [Addresses](../../../../docs/framework/wcf/feature-details/endpoint-addresses.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a93b4-110">Kimlik doğrulaması için NT LanMan (NTLM) kullandığınızda, NTLM altında istemci sunucunun kimliğini doğrulayamadığından hizmet kimliği denetlenmez.</span><span class="sxs-lookup"><span data-stu-id="a93b4-110">When you use NT LanMan (NTLM) for authentication, the service identity is not checked because, under NTLM, the client is unable to authenticate the server.</span></span> <span data-ttu-id="a93b4-111">Bilgisayarlar bir Windows çalışma grubunun parçası olduğunda veya Kerberos kimlik doğrulamasını desteklemeyen eski bir Windows sürümü çalıştırıldığında NTLM kullanılır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-111">NTLM is used when computers are part of a Windows workgroup, or when running an older version of Windows that does not support Kerberos authentication.</span></span>  
  
 <span data-ttu-id="a93b4-112">İstemci, üzerinden bir hizmete ileti göndermek için güvenli bir kanal başlattığında, Windows Communication Foundation (WCF) altyapısı hizmetin kimliğini doğrular ve yalnızca hizmet kimliği uç noktada belirtilen kimlikle eşleşiyorsa iletiyi gönderir istemcinin kullandığı adres.</span><span class="sxs-lookup"><span data-stu-id="a93b4-112">When the client initiates a secure channel to send a message to a service over it, the Windows Communication Foundation (WCF) infrastructure authenticates the service, and only sends the message if the service identity matches the identity specified in the endpoint address the client uses.</span></span>  
  
 <span data-ttu-id="a93b4-113">Kimlik işleme aşağıdaki aşamalardan oluşur:</span><span class="sxs-lookup"><span data-stu-id="a93b4-113">Identity processing consists of the following stages:</span></span>  
  
- <span data-ttu-id="a93b4-114">Tasarım zamanında, istemci geliştiricisi uç noktanın meta verilerindeki hizmetin kimliğini (WSDL aracılığıyla gösterilir) belirler.</span><span class="sxs-lookup"><span data-stu-id="a93b4-114">At design time, the client developer determines the service's identity from the endpoint's metadata (exposed through WSDL).</span></span>  
  
- <span data-ttu-id="a93b4-115">Çalışma zamanında istemci uygulaması, hizmete herhangi bir ileti göndermeden önce hizmetin güvenlik kimlik bilgileri taleplerini kontrol eder.</span><span class="sxs-lookup"><span data-stu-id="a93b4-115">At runtime, the client application checks the claims of the service's security credentials before sending any messages to the service.</span></span>  
  
 <span data-ttu-id="a93b4-116">İstemci üzerindeki kimlik işleme, hizmette istemci kimlik doğrulamasına benzer.</span><span class="sxs-lookup"><span data-stu-id="a93b4-116">Identity processing on the client is analogous to client authentication on the service.</span></span> <span data-ttu-id="a93b4-117">Güvenli bir hizmet, istemci kimlik bilgilerinin kimliği doğrulanana kadar kodu çalıştırmaz.</span><span class="sxs-lookup"><span data-stu-id="a93b4-117">A secure service does not execute code until the client's credentials have been authenticated.</span></span> <span data-ttu-id="a93b4-118">Benzer şekilde, istemci, hizmet kimlik bilgilerinin kimliği, hizmetin meta verilerinden öncelikli olarak bilinene kadar hizmetine ileti göndermez.</span><span class="sxs-lookup"><span data-stu-id="a93b4-118">Likewise, the client does not send messages to the service until the service's credentials have been authenticated based on what is known in advance from the service's metadata.</span></span>  
  
 <span data-ttu-id="a93b4-119"><xref:System.ServiceModel.EndpointAddress> Sınıfının özelliği, istemci tarafından çağrılan hizmetin kimliğini temsil eder. <xref:System.ServiceModel.EndpointAddress.Identity%2A></span><span class="sxs-lookup"><span data-stu-id="a93b4-119">The <xref:System.ServiceModel.EndpointAddress.Identity%2A> property of the <xref:System.ServiceModel.EndpointAddress> class represents the identity of the service called by the client.</span></span> <span data-ttu-id="a93b4-120">Hizmeti meta verilerinde yayımlar <xref:System.ServiceModel.EndpointAddress.Identity%2A> .</span><span class="sxs-lookup"><span data-stu-id="a93b4-120">The service publishes the <xref:System.ServiceModel.EndpointAddress.Identity%2A> in its metadata.</span></span> <span data-ttu-id="a93b4-121">İstemci geliştiricisi, hizmet uç noktasında [ServiceModel meta veri yardımcı programı aracı 'nı (Svcutil. exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) çalıştırdığında, oluşturulan yapılandırma hizmetin <xref:System.ServiceModel.EndpointAddress.Identity%2A> özelliğinin değerini içerir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-121">When the client developer runs the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against the service endpoint, the generated configuration contains the value of the service's <xref:System.ServiceModel.EndpointAddress.Identity%2A> property.</span></span> <span data-ttu-id="a93b4-122">WCF altyapısı (güvenlikle yapılandırıldıysa), hizmetin belirtilen kimliğe sahip olduğunu doğrular.</span><span class="sxs-lookup"><span data-stu-id="a93b4-122">The WCF infrastructure (if configured with security) verifies that the service possesses the identity specified.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="a93b4-123">Meta veriler hizmetin beklenen kimliğini içerir, bu nedenle hizmet meta verilerini güvenli yollarla kullanıma sunabilmeniz önerilir, örneğin, hizmet için bir HTTPS uç noktası oluşturarak.</span><span class="sxs-lookup"><span data-stu-id="a93b4-123">The metadata contains the expected identity of the service, so it is recommended that you expose the service metadata through secure means, for example, by creating an HTTPS endpoint for the service.</span></span> <span data-ttu-id="a93b4-124">Daha fazla bilgi için [nasıl yapılır: Güvenli meta veri](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md)uç noktaları.</span><span class="sxs-lookup"><span data-stu-id="a93b4-124">For more information, see [How to: Secure Metadata Endpoints](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span></span>  
  
## <a name="identity-types"></a><span data-ttu-id="a93b4-125">Kimlik türleri</span><span class="sxs-lookup"><span data-stu-id="a93b4-125">Identity Types</span></span>  
 <span data-ttu-id="a93b4-126">Bir hizmet, altı tür kimlik sağlayabilir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-126">A service can provide six types of identities.</span></span> <span data-ttu-id="a93b4-127">Her kimlik türü, `<identity>` yapılandırmada öğesinin içinde yer alan bir öğeye karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-127">Each identity type corresponds to an element that can be contained inside the `<identity>` element in configuration.</span></span> <span data-ttu-id="a93b4-128">Kullanılan tür senaryoya ve hizmetin güvenlik gereksinimlerine bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-128">The type used depends on the scenario and the service's security requirements.</span></span> <span data-ttu-id="a93b4-129">Aşağıdaki tabloda her kimlik türü açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-129">The following table describes each identity type.</span></span>  
  
|<span data-ttu-id="a93b4-130">Kimlik türü</span><span class="sxs-lookup"><span data-stu-id="a93b4-130">Identity type</span></span>|<span data-ttu-id="a93b4-131">Açıklama</span><span class="sxs-lookup"><span data-stu-id="a93b4-131">Description</span></span>|<span data-ttu-id="a93b4-132">Tipik senaryo</span><span class="sxs-lookup"><span data-stu-id="a93b4-132">Typical scenario</span></span>|  
|-------------------|-----------------|----------------------|  
|<span data-ttu-id="a93b4-133">Etki Alanı Adı Sistemi (DNS)</span><span class="sxs-lookup"><span data-stu-id="a93b4-133">Domain Name System (DNS)</span></span>|<span data-ttu-id="a93b4-134">Bu öğeyi X. 509.440 sertifikaları veya Windows hesaplarıyla kullanın.</span><span class="sxs-lookup"><span data-stu-id="a93b4-134">Use this element with X.509 certificates or Windows accounts.</span></span> <span data-ttu-id="a93b4-135">Kimlik bilgilerinde belirtilen DNS adını bu öğede belirtilen değerle karşılaştırır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-135">It compares the DNS name specified in the credential with the value specified in this element.</span></span>|<span data-ttu-id="a93b4-136">DNS denetimi, sertifikaları DNS veya konu adlarıyla kullanmanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-136">A DNS check enables you to use certificates with DNS or subject names.</span></span> <span data-ttu-id="a93b4-137">Bir sertifika aynı DNS veya konu adıyla yeniden kullanılıyorsa, kimlik denetimi hala geçerli olur.</span><span class="sxs-lookup"><span data-stu-id="a93b4-137">If a certificate is reissued with the same DNS or subject name, then the identity check is still valid.</span></span> <span data-ttu-id="a93b4-138">Bir sertifika yeniden yayımlandığında, yeni bir RSA anahtarı alır, ancak aynı DNS veya konu adını korur.</span><span class="sxs-lookup"><span data-stu-id="a93b4-138">When a certificate is reissued, it gets a new RSA key but retains the same DNS or subject name.</span></span> <span data-ttu-id="a93b4-139">Bu, istemcilerin hizmet hakkındaki kimlik bilgilerini güncelleştirmesi gerekmediği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-139">This means that clients do not have to update their identity information about the service.</span></span>|  
|<span data-ttu-id="a93b4-140">Sertifika.</span><span class="sxs-lookup"><span data-stu-id="a93b4-140">Certificate.</span></span> <span data-ttu-id="a93b4-141">Varsayılan `ClientCredentialType` olarak, sertifika olarak ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-141">The default when `ClientCredentialType` is set to Certificate.</span></span>|<span data-ttu-id="a93b4-142">Bu öğe, istemcisiyle karşılaştırmak için Base64 kodlamalı bir X. 509.440 sertifika değeri belirtir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-142">This element specifies a Base64-encoded X.509 certificate value to compare with the client.</span></span><br /><br /> <span data-ttu-id="a93b4-143">Ayrıca, hizmet kimliğini doğrulamak için bir CardSpace kimlik bilgisi olarak kullanılırken bu öğeyi kullanın.</span><span class="sxs-lookup"><span data-stu-id="a93b4-143">Also use this element when using a CardSpace as a credential to authenticate the service.</span></span>|<span data-ttu-id="a93b4-144">Bu öğe, kimlik doğrulamasını parmak izi değerine göre tek bir sertifikayla kısıtlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-144">This element restricts authentication to a single certificate based upon its thumbprint value.</span></span> <span data-ttu-id="a93b4-145">Bu, parmak izi değerleri benzersiz olduğundan daha sıkı kimlik doğrulama imkanı sunar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-145">This enables stricter authentication because thumbprint values are unique.</span></span> <span data-ttu-id="a93b4-146">Bu bir desteklenmediği uyarısıyla ile birlikte gelir: Sertifika aynı konu adıyla yeniden bırakılırsa, yeni bir parmak Izi de vardır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-146">This comes with one caveat: If the certificate is reissued with the same Subject name, it also has a new Thumbprint.</span></span> <span data-ttu-id="a93b4-147">Bu nedenle, yeni parmak izi tanınmadığı takdirde istemciler hizmeti doğrulayamayabilir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-147">Therefore, clients are not able to validate the service unless the new thumbprint is known.</span></span> <span data-ttu-id="a93b4-148">Bir sertifikanın parmak izini bulma hakkında daha fazla bilgi için bkz [. nasıl yapılır: Bir sertifikanın](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md)parmak izini alın.</span><span class="sxs-lookup"><span data-stu-id="a93b4-148">For more information about finding a certificate's thumbprint, see [How to: Retrieve the Thumbprint of a Certificate](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md).</span></span>|  
|<span data-ttu-id="a93b4-149">Sertifika başvurusu</span><span class="sxs-lookup"><span data-stu-id="a93b4-149">Certificate Reference</span></span>|<span data-ttu-id="a93b4-150">Daha önce açıklanan sertifika seçeneğiyle aynı.</span><span class="sxs-lookup"><span data-stu-id="a93b4-150">Identical to the Certificate option described previously.</span></span> <span data-ttu-id="a93b4-151">Ancak, bu öğe, sertifikanın alınacağı bir sertifika adı ve depolama konumu belirtmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-151">However, this element enables you to specify a certificate name and store location from which to retrieve the certificate.</span></span>|<span data-ttu-id="a93b4-152">Daha önce açıklanan sertifika senaryosuna benzer.</span><span class="sxs-lookup"><span data-stu-id="a93b4-152">Same as the Certificate scenario described previously.</span></span><br /><br /> <span data-ttu-id="a93b4-153">Avantaj, sertifika depolama konumunun değişebilir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-153">The benefit is that the certificate store location can change.</span></span>|  
|<span data-ttu-id="a93b4-154">RSA</span><span class="sxs-lookup"><span data-stu-id="a93b4-154">RSA</span></span>|<span data-ttu-id="a93b4-155">Bu öğe, istemcisiyle Karşılaştırılacak bir RSA anahtar değeri belirtir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-155">This element specifies an RSA key value to compare with the client.</span></span> <span data-ttu-id="a93b4-156">Bu, sertifika seçeneğine benzer, ancak sertifikanın parmak izini kullanmak yerine sertifikanın RSA anahtarı kullanılır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-156">This is similar to the certificate option but rather than using the certificate's thumbprint, the certificate's RSA key is used instead.</span></span>|<span data-ttu-id="a93b4-157">Bir RSA denetimi, kimlik doğrulamasını, RSA anahtarına bağlı olarak tek bir sertifika ile kısıtlamanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-157">An RSA check enables you to specifically restrict authentication to a single certificate based upon its RSA key.</span></span> <span data-ttu-id="a93b4-158">Bu, hizmet masrafına belirli bir RSA anahtarının daha sıkı şekilde doğrulanmasını sağladığından, RSA anahtar değeri değişirse artık mevcut istemcilerle birlikte çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="a93b4-158">This enables stricter authentication of a specific RSA key at the expense of the service, which no longer works with existing clients if the RSA key value changes.</span></span>|  
|<span data-ttu-id="a93b4-159">Kullanıcı asıl adı (UPN).</span><span class="sxs-lookup"><span data-stu-id="a93b4-159">User principal name (UPN).</span></span> <span data-ttu-id="a93b4-160">Varsayılan değer Windows olarak `ClientCredentialType` ayarlandığında ve hizmet işlemi sistem hesaplarından biri altında çalışmadığı zaman varsayılandır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-160">The default when the `ClientCredentialType` is set to Windows and the service process is not running under one of the system accounts.</span></span>|<span data-ttu-id="a93b4-161">Bu öğe, hizmetin altında çalıştığı UPN 'yi belirtir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-161">This element specifies the UPN that the service is running under.</span></span> <span data-ttu-id="a93b4-162">[Kimlik doğrulaması için bir hizmetin kimliğini geçersiz kılan](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md)Kerberos protokolü ve kimlik bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="a93b4-162">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="a93b4-163">Bu, hizmetin belirli bir Windows Kullanıcı hesabı altında çalıştığından emin olmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-163">This ensures that the service is running under a specific Windows user account.</span></span> <span data-ttu-id="a93b4-164">Kullanıcı hesabı, geçerli oturum açmış kullanıcı veya belirli bir kullanıcı hesabı altında çalışan hizmet olabilir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-164">The user account can be either the current logged-on user or the service running under a particular user account.</span></span><br /><br /> <span data-ttu-id="a93b4-165">Bu ayar, hizmet Active Directory ortamında bir etki alanı hesabı altında çalışıyorsa Windows Kerberos güvenliğinin avantajlarından yararlanır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-165">This setting takes advantage of Windows Kerberos security if the service is running under a domain account within an Active Directory environment.</span></span>|  
|<span data-ttu-id="a93b4-166">Hizmet asıl adı (SPN).</span><span class="sxs-lookup"><span data-stu-id="a93b4-166">Service principal name (SPN).</span></span> <span data-ttu-id="a93b4-167">Varsayılan değer Windows olarak `ClientCredentialType` ayarlandığında ve hizmet işlemi sistem hesaplarından biri (LocalService, LocalSystem veya NetworkService) altında çalışıyorsa varsayılandır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-167">The default when the `ClientCredentialType` is set to Windows and the service process is running under one of the system accounts—LocalService, LocalSystem, or NetworkService.</span></span>|<span data-ttu-id="a93b4-168">Bu öğe, hizmetin hesabıyla ilişkili SPN 'YI belirtir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-168">This element specifies the SPN associated with the service's account.</span></span> <span data-ttu-id="a93b4-169">[Kimlik doğrulaması için bir hizmetin kimliğini geçersiz kılan](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md)Kerberos protokolü ve kimlik bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="a93b4-169">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="a93b4-170">Bu, SPN 'nin ve SPN ile ilişkili belirli Windows hesabının hizmeti belirlemesine de sağlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-170">This ensures that the SPN and the specific Windows account associated with the SPN identify the service.</span></span><br /><br /> <span data-ttu-id="a93b4-171">Setspn. exe aracını kullanarak hizmetin Kullanıcı hesabı için bir makine hesabını ilişkilendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a93b4-171">You can use the Setspn.exe tool to associate a machine account for the service's user account.</span></span><br /><br /> <span data-ttu-id="a93b4-172">Bu ayar, hizmet sistem hesaplarından biri altında veya bununla ilişkili bir SPN adına sahip bir etki alanı hesabı altında çalışıyorsa ve bilgisayar Active Directory ortamındaki bir etki alanının üyesiyse Windows Kerberos güvenliğinin avantajlarından yararlanır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-172">This setting takes advantage of Windows Kerberos security if the service is running under one of the system accounts or under a domain account that has an associated SPN name with it and the computer is a member of a domain within an Active Directory environment.</span></span>|  
  
## <a name="specifying-identity-at-the-service"></a><span data-ttu-id="a93b4-173">Hizmette kimlik belirtme</span><span class="sxs-lookup"><span data-stu-id="a93b4-173">Specifying Identity at the Service</span></span>  
 <span data-ttu-id="a93b4-174">Genellikle, bir hizmetin kimliğini ayarlamanız gerekmez, çünkü bir istemci kimlik bilgisi türü seçimi, hizmet meta verilerinde sunulan kimlik türünü belirler.</span><span class="sxs-lookup"><span data-stu-id="a93b4-174">Typically, you do not have to set the identity on a service because the selection of a client credential type dictates the type of identity exposed in the service metadata.</span></span> <span data-ttu-id="a93b4-175">Hizmet kimliğini geçersiz kılma veya belirtme hakkında daha fazla bilgi için bkz. [kimlik doğrulaması için bir hizmetin kimliğini geçersiz kılma](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="a93b4-175">For more information about how to override or specify service identity, see [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>  
  
## <a name="using-the-identity-element-in-configuration"></a><span data-ttu-id="a93b4-176">\<Yapılandırmada kimlik > öğesi kullanma</span><span class="sxs-lookup"><span data-stu-id="a93b4-176">Using the \<identity> Element in Configuration</span></span>  
 <span data-ttu-id="a93b4-177">Daha önce gösterilen `Certificate,` bağlamadaki istemci kimlik bilgisi türünü değiştirirseniz oluşturulan wsdl, kimlik değeri için aşağıdaki kodda gösterildiği gibi Base64 serileştirilmiş X. 509.440 sertifikası içerir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-177">If you change the client credential type in the binding previously shown to `Certificate,` then the generated WSDL contains a Base64 serialized X.509 certificate for the identity value as shown in the following code.</span></span> <span data-ttu-id="a93b4-178">Bu, Windows dışındaki tüm istemci kimlik bilgisi türleri için varsayılandır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-178">This is the default for all client credential types other than Windows.</span></span>  

 <span data-ttu-id="a93b4-179">Yapılandırma içindeki `<identity>` öğeyi kullanarak veya koddaki kimliği ayarlayarak, varsayılan hizmet kimliğinin değerini değiştirebilir veya kimliğin türünü değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a93b4-179">You can change the value of the default service identity or change the type of the identity by using the `<identity>` element in configuration or by setting the identity in code.</span></span> <span data-ttu-id="a93b4-180">Aşağıdaki yapılandırma kodu, bir etki alanı adı sistemi (DNS) kimliğini değeriyle `contoso.com`ayarlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-180">The following configuration code sets a domain name system (DNS) identity with the value `contoso.com`.</span></span>  

## <a name="setting-identity-programmatically"></a><span data-ttu-id="a93b4-181">Kimliği programlı olarak ayarlama</span><span class="sxs-lookup"><span data-stu-id="a93b4-181">Setting Identity Programmatically</span></span>  
 <span data-ttu-id="a93b4-182">WCF tarafından otomatik olarak belirlediği için hizmetiniz bir kimlik belirtmek zorunda değildir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-182">Your service does not have to explicitly specify an identity, because WCF automatically determines it.</span></span> <span data-ttu-id="a93b4-183">Ancak, WCF, gerekirse bir uç nokta üzerinde kimlik belirtmenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-183">However, WCF allows you to specify an identity on an endpoint, if required.</span></span> <span data-ttu-id="a93b4-184">Aşağıdaki kod, belirli bir DNS kimliğine sahip yeni bir hizmet uç noktası ekler.</span><span class="sxs-lookup"><span data-stu-id="a93b4-184">The following code adds a new service endpoint with a specific DNS identity.</span></span>  
  
 [!code-csharp[C_Identity#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#5)]
 [!code-vb[C_Identity#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#5)]  
  
## <a name="specifying-identity-at-the-client"></a><span data-ttu-id="a93b4-185">Istemcide kimlik belirtme</span><span class="sxs-lookup"><span data-stu-id="a93b4-185">Specifying Identity at the Client</span></span>  
 <span data-ttu-id="a93b4-186">Tasarım zamanında, istemci geliştiricisi istemci yapılandırması oluşturmak için genellikle [ServiceModel meta veri yardımcı programı aracını (Svcutil. exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) kullanır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-186">At design time, a client developer typically uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate client configuration.</span></span> <span data-ttu-id="a93b4-187">Oluşturulan yapılandırma dosyası (istemci tarafından kullanılmak üzere tasarlanmıştır) sunucunun kimliğini içerir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-187">The generated configuration file (intended for use by the client) contains the server's identity.</span></span> <span data-ttu-id="a93b4-188">Örneğin, aşağıdaki kod, önceki örnekte gösterildiği gibi bir DNS kimliğini belirten bir hizmetten oluşturulmuştur.</span><span class="sxs-lookup"><span data-stu-id="a93b4-188">For example, the following code is generated from a service that specifies a DNS identity, as shown in the preceding example.</span></span> <span data-ttu-id="a93b4-189">İstemcinin uç nokta kimliği değerinin, hizmetin ile eşleştiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="a93b4-189">Note that the client's endpoint identity value matches that of the service.</span></span> <span data-ttu-id="a93b4-190">Bu durumda, istemci hizmetin Windows (Kerberos) kimlik bilgilerini aldığında değerin olmasını `contoso.com`bekler.</span><span class="sxs-lookup"><span data-stu-id="a93b4-190">In this case, when the client receives the Windows (Kerberos) credentials for the service, it expects the value to be `contoso.com`.</span></span>  

 <span data-ttu-id="a93b4-191">Windows yerine hizmet, istemci kimlik bilgileri türü olarak bir sertifika belirtiyorsa, sertifikanın DNS özelliğinin değeri `contoso.com`olması beklenir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-191">If, instead of Windows, the service specifies a certificate as the client credential type, then the certificate's DNS property is expected to be the value `contoso.com`.</span></span> <span data-ttu-id="a93b4-192">(Veya DNS özelliği ise `null`, sertifikanın konu adı `contoso.com`olmalıdır.)</span><span class="sxs-lookup"><span data-stu-id="a93b4-192">(Or if the DNS property is `null`, the certificate's subject name must be `contoso.com`.)</span></span>  
  
#### <a name="using-a-specific-value-for-identity"></a><span data-ttu-id="a93b4-193">Kimlik için belirli bir değer kullanma</span><span class="sxs-lookup"><span data-stu-id="a93b4-193">Using a Specific Value for Identity</span></span>  
 <span data-ttu-id="a93b4-194">Aşağıdaki istemci yapılandırma dosyasında hizmetin kimliğinin belirli bir değer olması beklenildiği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-194">The following client configuration file shows how the service's identity is expected to be a specific value.</span></span> <span data-ttu-id="a93b4-195">Aşağıdaki örnekte, istemci iki uç nokta ile iletişim kurabilir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-195">In the following example, the client can communicate with two endpoints.</span></span> <span data-ttu-id="a93b4-196">Birincisi bir sertifika parmak iziyle ve ikincisi bir sertifika RSA anahtarıyla tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-196">The first is identified with a certificate thumbprint and the second with a certificate RSA key.</span></span> <span data-ttu-id="a93b4-197">Diğer bir deyişle, yalnızca ortak anahtar/özel anahtar çifti içeren, ancak güvenilen bir yetkili tarafından verilmemiş bir sertifikadır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-197">That is, a certificate that contains only a public key/private key pair, but is not issued by a trusted authority.</span></span>  

## <a name="identity-checking-at-run-time"></a><span data-ttu-id="a93b4-198">Çalışma zamanında kimlik denetimi</span><span class="sxs-lookup"><span data-stu-id="a93b4-198">Identity Checking at Run Time</span></span>  
 <span data-ttu-id="a93b4-199">Tasarım zamanında, bir istemci geliştiricisi sunucunun meta verilerini kullanarak kimliğini belirler.</span><span class="sxs-lookup"><span data-stu-id="a93b4-199">At design time, a client developer determines the server's identity through its metadata.</span></span> <span data-ttu-id="a93b4-200">Çalışma zamanında, kimlik denetimi, hizmette herhangi bir uç nokta çağrılmadan önce gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-200">At runtime, the identity check is performed before calling any endpoints on the service.</span></span>  
  
 <span data-ttu-id="a93b4-201">Kimlik değeri meta veriler tarafından belirtilen kimlik doğrulaması türüne bağlıdır; diğer bir deyişle, hizmet için kullanılan kimlik bilgilerinin türü.</span><span class="sxs-lookup"><span data-stu-id="a93b4-201">The identity value is tied to the type of authentication specified by metadata; in other words, the type of credentials used for the service.</span></span>  
  
 <span data-ttu-id="a93b4-202">Kanal, kimlik doğrulaması için X. 509.440 sertifikaları ile ileti veya aktarım düzeyi Güvenli Yuva Katmanı (SSL) kullanarak kimlik doğrulaması yapacak şekilde yapılandırıldıysa, aşağıdaki kimlik değerleri geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="a93b4-202">If the channel is configured to authenticate using message- or transport-level Secure Sockets Layer (SSL) with X.509 certificates for authentication, the following identity values are valid:</span></span>  
  
- <span data-ttu-id="a93b4-203">BKZ.</span><span class="sxs-lookup"><span data-stu-id="a93b4-203">DNS.</span></span> <span data-ttu-id="a93b4-204">WCF, SSL el sıkışması sırasında sağlanmış sertifikanın, istemcideki DNS kimliğinde belirtilen değere `CommonName` eşit bir DNS veya (CN) özniteliği içerdiğinden emin olmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-204">WCF ensures that the certificate provided during the SSL handshake contains a DNS or `CommonName` (CN) attribute equal to the value specified in the DNS identity on the client.</span></span> <span data-ttu-id="a93b4-205">Bu denetimlerin, sunucu sertifikasının geçerliliğini belirlemeye ek olarak yapıldığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="a93b4-205">Note that these checks are done in addition to determining the validity of the server certificate.</span></span> <span data-ttu-id="a93b4-206">Varsayılan olarak, WCF, sunucu sertifikasının güvenilen bir kök yetkili tarafından verildiğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="a93b4-206">By default, WCF validates that the server certificate is issued by a trusted root authority.</span></span>  
  
- <span data-ttu-id="a93b4-207">Sertifika.</span><span class="sxs-lookup"><span data-stu-id="a93b4-207">Certificate.</span></span> <span data-ttu-id="a93b4-208">SSL el sıkışması sırasında, WCF, uzak uç noktanın kimlik içinde belirtilen tam sertifika değerini sağladığından emin olmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-208">During the SSL handshake, WCF ensures that the remote endpoint provides the exact certificate value specified in the identity.</span></span>  
  
- <span data-ttu-id="a93b4-209">Sertifika başvurusu.</span><span class="sxs-lookup"><span data-stu-id="a93b4-209">Certificate Reference.</span></span> <span data-ttu-id="a93b4-210">Sertifikayla aynı.</span><span class="sxs-lookup"><span data-stu-id="a93b4-210">Same as Certificate.</span></span>  
  
- <span data-ttu-id="a93b4-211">RSA.</span><span class="sxs-lookup"><span data-stu-id="a93b4-211">RSA.</span></span> <span data-ttu-id="a93b4-212">SSL el sıkışması sırasında, WCF, uzak uç noktanın kimlik içinde belirtilen tam RSA anahtarını sağladığından emin olmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-212">During the SSL handshake, WCF ensures that the remote endpoint provides the exact RSA key specified in the identity.</span></span>  
  
 <span data-ttu-id="a93b4-213">Hizmet kimlik doğrulaması için bir Windows kimlik bilgisi ile ileti veya aktarım düzeyi SSL kullanarak kimlik doğrulaması gerçekleştiriyorsa ve kimlik bilgisini görüşür, aşağıdaki kimlik değerleri geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="a93b4-213">If the service authenticates using message- or transport-level SSL with a Windows credential for authentication, and negotiates the credential, the following identity values are valid:</span></span>  
  
- <span data-ttu-id="a93b4-214">BKZ.</span><span class="sxs-lookup"><span data-stu-id="a93b4-214">DNS.</span></span> <span data-ttu-id="a93b4-215">Bu anlaşma, DNS adının denetlenebilmesi için hizmetin SPN 'sini geçirir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-215">The negotiation passes the service's SPN so that the DNS name can be checked.</span></span> <span data-ttu-id="a93b4-216">SPN, formundadır `host/<dns name>`.</span><span class="sxs-lookup"><span data-stu-id="a93b4-216">The SPN is in the form `host/<dns name>`.</span></span>  
  
- <span data-ttu-id="a93b4-217">SPN.</span><span class="sxs-lookup"><span data-stu-id="a93b4-217">SPN.</span></span> <span data-ttu-id="a93b4-218">Örneğin, `host/myservice`açık bir Service SPN döndürülür.</span><span class="sxs-lookup"><span data-stu-id="a93b4-218">An explicit service SPN is returned, for example, `host/myservice`.</span></span>  
  
- <span data-ttu-id="a93b4-219">'LE.</span><span class="sxs-lookup"><span data-stu-id="a93b4-219">UPN.</span></span> <span data-ttu-id="a93b4-220">Hizmet hesabının UPN 'si.</span><span class="sxs-lookup"><span data-stu-id="a93b4-220">The UPN of the service account.</span></span> <span data-ttu-id="a93b4-221">UPN, formundadır `username`. @ `domain`</span><span class="sxs-lookup"><span data-stu-id="a93b4-221">The UPN is in the form `username`@`domain`.</span></span> <span data-ttu-id="a93b4-222">Örneğin, hizmet bir kullanıcı hesabında çalışırken, bu `username@contoso.com`olabilir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-222">For example, when the service is running in a user account, it may be `username@contoso.com`.</span></span>  
  
 <span data-ttu-id="a93b4-223">Kimliği programlı olarak belirtme ( <xref:System.ServiceModel.EndpointAddress.Identity%2A> özelliği kullanılarak) isteğe bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-223">Specifying the identity programmatically (using the <xref:System.ServiceModel.EndpointAddress.Identity%2A> property) is optional.</span></span> <span data-ttu-id="a93b4-224">Kimlik belirtilmemişse ve istemci kimlik bilgisi türü Windows ise, varsayılan olarak SPN, "Host/" değişmez değeri ön eki olan hizmet uç noktası adresinin konak adı bölümüne ayarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="a93b4-224">If no identity is specified, and the client credential type is Windows, the default is SPN with the value set to the hostname part of the service endpoint address prefixed with the "host/" literal.</span></span> <span data-ttu-id="a93b4-225">Kimlik belirtilmezse ve istemci kimlik bilgisi türü bir sertifikadır, varsayılan olarak olur `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="a93b4-225">If no identity is specified, and the client credential type is a certificate, the default is `Certificate`.</span></span> <span data-ttu-id="a93b4-226">Bu hem ileti hem de aktarım düzeyi güvenlik için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="a93b4-226">This applies to both message- and transport-level security.</span></span>  
  
## <a name="identity-and-custom-bindings"></a><span data-ttu-id="a93b4-227">Kimlik ve özel bağlamalar</span><span class="sxs-lookup"><span data-stu-id="a93b4-227">Identity and Custom Bindings</span></span>  
 <span data-ttu-id="a93b4-228">Bir hizmetin kimliği kullanılan bağlama türüne bağlı olduğundan, özel bağlama oluştururken uygun bir kimliğin sunulduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="a93b4-228">Because the identity of a service depends on the binding type used, ensure that an appropriate identity is exposed when creating a custom binding.</span></span> <span data-ttu-id="a93b4-229">Örneğin, aşağıdaki kod örneğinde, sunulan kimlik güvenlik türüyle uyumlu değildir, çünkü güvenli konuşma önyükleme bağlamasının kimliği, uç noktasındaki bağlamanın kimliğiyle eşleşmez.</span><span class="sxs-lookup"><span data-stu-id="a93b4-229">For example, in the following code example, the identity exposed is not compatible with the security type, because the identity for the secure conversation bootstrap binding does not match the identity for the binding on the endpoint.</span></span> <span data-ttu-id="a93b4-230">Güvenli konuşma bağlaması DNS kimliğini ayarlar, ancak <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> UPN veya SPN kimliğini ayarlar.</span><span class="sxs-lookup"><span data-stu-id="a93b4-230">The secure conversation binding sets the DNS identity, while the <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> sets the UPN or SPN identity.</span></span>  
  
 [!code-csharp[C_Identity#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#8)]
 [!code-vb[C_Identity#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#8)]  
  
 <span data-ttu-id="a93b4-231">Özel bir bağlama için bağlama öğelerinin doğru bir şekilde nasıl yığılabilecek hakkında daha fazla bilgi için bkz. [Kullanıcı Tanımlı Bağlamalar Oluşturma](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="a93b4-231">For more information about how to stack binding elements correctly for a custom binding, see [Creating User-Defined Bindings](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md).</span></span> <span data-ttu-id="a93b4-232">İle <xref:System.ServiceModel.Channels.SecurityBindingElement>özel bir bağlama oluşturma hakkında daha fazla bilgi için bkz [. nasıl yapılır: Belirtilen kimlik doğrulama modu](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)için bir SecurityBindingElement oluşturun.</span><span class="sxs-lookup"><span data-stu-id="a93b4-232">For more information about creating a custom binding with the <xref:System.ServiceModel.Channels.SecurityBindingElement>, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a93b4-233">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="a93b4-233">See also</span></span>

- [<span data-ttu-id="a93b4-234">Nasıl yapılır: SecurityBindingElement kullanarak özel bağlama oluşturma</span><span class="sxs-lookup"><span data-stu-id="a93b4-234">How to: Create a Custom Binding Using the SecurityBindingElement</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)
- [<span data-ttu-id="a93b4-235">Nasıl yapılır: Belirtilen kimlik doğrulama modu için bir SecurityBindingElement oluşturma</span><span class="sxs-lookup"><span data-stu-id="a93b4-235">How to: Create a SecurityBindingElement for a Specified Authentication Mode</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)
- [<span data-ttu-id="a93b4-236">Nasıl yapılır: Özel bir Istemci Kimliği Doğrulayıcısı oluşturma</span><span class="sxs-lookup"><span data-stu-id="a93b4-236">How to: Create a Custom Client Identity Verifier</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-client-identity-verifier.md)
- [<span data-ttu-id="a93b4-237">Kimlik Bilgisi Türü Seçme</span><span class="sxs-lookup"><span data-stu-id="a93b4-237">Selecting a Credential Type</span></span>](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md)
- [<span data-ttu-id="a93b4-238">Sertifikalarla Çalışma</span><span class="sxs-lookup"><span data-stu-id="a93b4-238">Working with Certificates</span></span>](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)
- [<span data-ttu-id="a93b4-239">ServiceModel Meta Veri Yardımcı Programı Aracı (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="a93b4-239">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)
- [<span data-ttu-id="a93b4-240">Kullanıcı Tanımlı Bağlamalar Oluşturma</span><span class="sxs-lookup"><span data-stu-id="a93b4-240">Creating User-Defined Bindings</span></span>](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)
- [<span data-ttu-id="a93b4-241">Nasıl yapılır: Bir sertifikanın parmak Izini alma</span><span class="sxs-lookup"><span data-stu-id="a93b4-241">How to: Retrieve the Thumbprint of a Certificate</span></span>](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md)
