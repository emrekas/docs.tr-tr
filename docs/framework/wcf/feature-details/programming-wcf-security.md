---
title: WCF Güvenliğini Programlama
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- message security [WCF], programming overview
ms.assetid: 739ec222-4eda-4cc9-a470-67e64a7a3f10
ms.openlocfilehash: 2b49031b0001ddba01a888806206360c1cbdbacb
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/23/2019
ms.locfileid: "54699473"
---
# <a name="programming-wcf-security"></a><span data-ttu-id="1b5c9-102">WCF Güvenliğini Programlama</span><span class="sxs-lookup"><span data-stu-id="1b5c9-102">Programming WCF Security</span></span>
<span data-ttu-id="1b5c9-103">Bu konu, güvenli bir Windows Communication Foundation (WCF) uygulaması oluşturmak için kullanılan temel programlama görevlerini açıklar.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-103">This topic describes the fundamental programming tasks used to create a secure Windows Communication Foundation (WCF) application.</span></span> <span data-ttu-id="1b5c9-104">Bu konu, yalnızca kimlik doğrulaması, gizliliği ve bütünlük, toplu olarak bilinen içermektedir *aktarım güvenliği*.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-104">This topic covers only authentication, confidentiality, and integrity, collectively known as *transfer security*.</span></span> <span data-ttu-id="1b5c9-105">Bu konuda, yetkilendirme (kaynaklarına veya hizmetlerine erişim denetimi); içermez Yetkilendirme hakkında daha fazla bilgi için bkz: [yetkilendirme](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="1b5c9-105">This topic does not cover authorization (the control of access to resources or services); for information on authorization, see [Authorization](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1b5c9-106">Değerli bir WCF, özellikle in regard to güvenlik kavramlarına giriş için MSDN'de desenler ve uygulamalar öğreticiler kümesini görmek [senaryoları, desenleri ve Uygulama Kılavuzu Web Services Enhancements (WSE) 3.0](https://go.microsoft.com/fwlink/?LinkID=88250).</span><span class="sxs-lookup"><span data-stu-id="1b5c9-106">For a valuable introduction to security concepts, especially in regard to WCF, see the set of patterns and practices tutorials on MSDN at [Scenarios, Patterns, and Implementation Guidance for Web Services Enhancements (WSE) 3.0](https://go.microsoft.com/fwlink/?LinkID=88250).</span></span>  
  
 <span data-ttu-id="1b5c9-107">WCF güvenliğini programlama aşağıdaki üç adımı üzerinde temel: güvenlik modu, bir istemci kimlik bilgileri türünü ve kimlik bilgisi değerleri.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-107">Programming WCF security is based on three steps setting the following: the security mode, a client credential type, and the credential values.</span></span> <span data-ttu-id="1b5c9-108">Kod veya yapılandırma adımları gerçekleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-108">You can perform these steps either through code or configuration.</span></span>  
  
## <a name="setting-the-security-mode"></a><span data-ttu-id="1b5c9-109">Güvenlik modunu ayarlama</span><span class="sxs-lookup"><span data-stu-id="1b5c9-109">Setting the Security Mode</span></span>  
 <span data-ttu-id="1b5c9-110">Wcf'de güvenlik modu'yla programlama için uygulamanız gereken genel adımlar açıklanmaktadır:</span><span class="sxs-lookup"><span data-stu-id="1b5c9-110">The following explains the general steps for programming with the security mode in WCF:</span></span>  
  
1.  <span data-ttu-id="1b5c9-111">Uygulama gereksinimlerinize uygun önceden tanımlanmış bağlamaları birini seçin.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-111">Select one of the predefined bindings appropriate to your application requirements.</span></span> <span data-ttu-id="1b5c9-112">Bağlama seçeneklerin bir listesi için bkz. [System-Provided bağlamaları](../../../../docs/framework/wcf/system-provided-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="1b5c9-112">For a list of the binding choices, see [System-Provided Bindings](../../../../docs/framework/wcf/system-provided-bindings.md).</span></span> <span data-ttu-id="1b5c9-113">Varsayılan olarak, güvenliği etkinleştirilmiş neredeyse her bağlama yok.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-113">By default, nearly every binding has security enabled.</span></span> <span data-ttu-id="1b5c9-114">Bir özel durum <xref:System.ServiceModel.BasicHttpBinding> sınıfı (yapılandırmayı kullanarak [ \<basicHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md)).</span><span class="sxs-lookup"><span data-stu-id="1b5c9-114">The one exception is the <xref:System.ServiceModel.BasicHttpBinding> class (using configuration, the [\<basicHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md)).</span></span>  
  
     <span data-ttu-id="1b5c9-115">Seçtiğiniz bağlama taşıma belirler.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-115">The binding you select determines the transport.</span></span> <span data-ttu-id="1b5c9-116">Örneğin, <xref:System.ServiceModel.WSHttpBinding> aktarım olarak; HTTP kullanır <xref:System.ServiceModel.NetTcpBinding> TCP kullanır.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-116">For example, <xref:System.ServiceModel.WSHttpBinding> uses HTTP as the transport; <xref:System.ServiceModel.NetTcpBinding> uses TCP.</span></span>  
  
2.  <span data-ttu-id="1b5c9-117">Bağlama için olan güvenlik modlarından birini seçin.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-117">Select one of the security modes for the binding.</span></span> <span data-ttu-id="1b5c9-118">Seçtiğiniz bağlama kullanılabilir modu seçenekleri belirler unutmayın.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-118">Note that the binding you select determines the available mode choices.</span></span> <span data-ttu-id="1b5c9-119">Örneğin, <xref:System.ServiceModel.WSDualHttpBinding> (Bu bir seçenek değil) aktarım güvenliği izin vermiyor.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-119">For example, the <xref:System.ServiceModel.WSDualHttpBinding> does not allow transport security (it is not an option).</span></span> <span data-ttu-id="1b5c9-120">Benzer şekilde, hiçbiri <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> ya da <xref:System.ServiceModel.NetNamedPipeBinding> ileti güvenliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-120">Similarly, neither the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> nor the <xref:System.ServiceModel.NetNamedPipeBinding> allows message security.</span></span>  
  
     <span data-ttu-id="1b5c9-121">Üç seçeneğiniz vardır:</span><span class="sxs-lookup"><span data-stu-id="1b5c9-121">You have three choices:</span></span>  
  
    1.  `Transport`  
  
         <span data-ttu-id="1b5c9-122">Aktarım güvenliği seçtiğiniz bağlama kullanan mekanizmasını bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-122">Transport security depends on the mechanism that the binding you have selected uses.</span></span> <span data-ttu-id="1b5c9-123">Örneğin, kullanıyorsanız `WSHttpBinding` güvenlik mekanizması Güvenli Yuva Katmanı (SSL) (aynı zamanda HTTPS protokolü için mekanizma) kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-123">For example, if you are using `WSHttpBinding` then the security mechanism is Secure Sockets Layer (SSL) (also the mechanism for the HTTPS protocol).</span></span> <span data-ttu-id="1b5c9-124">Genel olarak bakıldığında, aktarım güvenliği ana avantajı, hangi aktarım ne olursa olsun, kullandığınız iyi aktarım hızı sunan olmanızdır.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-124">Generally speaking, the main advantage of transport security is that it delivers good throughput no matter which transport you are using.</span></span> <span data-ttu-id="1b5c9-125">Ancak, iki sınırlamalara sahiptir: İlk aktarım mekanizması bir kullanıcının kimliğini doğrulamak için kullanılan kimlik bilgisi türünü belirleyen ' dir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-125">However, it does have two limitations: The first is that the transport mechanism dictates the credential type used to authenticate a user.</span></span> <span data-ttu-id="1b5c9-126">Yalnızca hizmet kimlik bilgilerini farklı türde talep diğer hizmetleriyle gerekiyorsa bir dezavantajı budur.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-126">This is a drawback only if a service needs to interoperate with other services that demand different types of credentials.</span></span> <span data-ttu-id="1b5c9-127">İkinci güvenlik ileti düzeyinde uygulanmadığından güvenlik bir atlama atlamalı şekilde uçtan uca yerine, uygulanmasıdır.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-127">The second is that, because the security is not applied at the message level, security is implemented in a hop-by-hop manner rather than end-to-end.</span></span> <span data-ttu-id="1b5c9-128">Yalnızca istemci ile hizmet arasında ileti yolu aracılar içeriyorsa bu ikinci sınırlama bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-128">This latter limitation is an issue only if the message path between client and service includes intermediaries.</span></span> <span data-ttu-id="1b5c9-129">Hangi aktarım kullanılacak hakkında daha fazla bilgi için bkz: [taşıma seçme](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="1b5c9-129">For more information about which transport to use, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span> <span data-ttu-id="1b5c9-130">Aktarım güvenliği kullanma hakkında daha fazla bilgi için bkz. [aktarım güvenliğine genel bakış](../../../../docs/framework/wcf/feature-details/transport-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1b5c9-130">For more information about using transport security, see [Transport Security Overview](../../../../docs/framework/wcf/feature-details/transport-security-overview.md).</span></span>  
  
    2.  `Message`  
  
         <span data-ttu-id="1b5c9-131">İleti güvenliği her ileti gerekli üst bilgileri içerir ve ileti tutmak için verileri güvenli anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-131">Message security means that every message includes the necessary headers and data to keep the message secure.</span></span> <span data-ttu-id="1b5c9-132">Üstbilgileri olarak değiştiğinden, herhangi bir sayıda kimlik bilgileri içerebilir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-132">Because the composition of the headers varies, you can include any number of credentials.</span></span> <span data-ttu-id="1b5c9-133">Bu, diğer hizmetlerle aktarım mekanizması sağlayamazsınız bir belirli kimlik bilgisi türü bu talebi birlikte veya iletinin her bir hizmet farklı bir kimlik bilgisi türü burada talepleri birden fazla hizmeti ile kullanılmalıdır bir etmen haline gelir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-133">This becomes a factor if you are interoperating with other services that demand a specific credential type that a transport mechanism can't supply, or if the message must be used with more than one service, where each service demands a different credential type.</span></span>  
  
         <span data-ttu-id="1b5c9-134">Daha fazla bilgi için [ileti güvenliği](../../../../docs/framework/wcf/feature-details/message-security-in-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="1b5c9-134">For more information, see [Message Security](../../../../docs/framework/wcf/feature-details/message-security-in-wcf.md).</span></span>  
  
    3.  `TransportWithMessageCredential`  
  
         <span data-ttu-id="1b5c9-135">Bu seçenek, güvenli ileti aktarım için Aktarım katmanı kullanır, her ileti Zengin kimlik bilgilerini içerirken diğer hizmetleri gerekir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-135">This choice uses the transport layer to secure the message transfer, while every message includes the rich credentials other services need.</span></span> <span data-ttu-id="1b5c9-136">Bu performans avantajı aktarım güvenliği ile ileti güvenliği zengin kimlik bilgilerinin avantajlarından birleştirir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-136">This combines the performance advantage of transport security with the rich credentials advantage of message security.</span></span> <span data-ttu-id="1b5c9-137">Bu aşağıdaki bağlamalarla kullanılabilir: <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.WSFederationHttpBinding>, <xref:System.ServiceModel.NetPeerTcpBinding>, ve <xref:System.ServiceModel.WSHttpBinding>.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-137">This is available with the following bindings: <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.WSFederationHttpBinding>, <xref:System.ServiceModel.NetPeerTcpBinding>, and <xref:System.ServiceModel.WSHttpBinding>.</span></span>  
  
3.  <span data-ttu-id="1b5c9-138">Aktarım güvenliği için HTTP (diğer bir deyişle, HTTPS) kullanmaya karar verirseniz, ayrıca bir SSL sertifikası ile ana bilgisayar yapılandırma ve SSL bağlantı noktası etkinleştirme gerekir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-138">If you decide to use transport security for HTTP (in other words, HTTPS), you must also configure the host with an SSL certificate and enable SSL on a port.</span></span> <span data-ttu-id="1b5c9-139">Daha fazla bilgi için [HTTP aktarım güvenliği](../../../../docs/framework/wcf/feature-details/http-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="1b5c9-139">For more information, see [HTTP Transport Security](../../../../docs/framework/wcf/feature-details/http-transport-security.md).</span></span>  
  
4.  <span data-ttu-id="1b5c9-140">Kullanıyorsanız <xref:System.ServiceModel.WSHttpBinding> gerekmez güvenli bir oturumu ayarlamak <xref:System.ServiceModel.NonDualMessageSecurityOverHttp.EstablishSecurityContext%2A> özelliğini `false`.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-140">If you are using the <xref:System.ServiceModel.WSHttpBinding> and do not need to establish a secure session, set the <xref:System.ServiceModel.NonDualMessageSecurityOverHttp.EstablishSecurityContext%2A> property to `false`.</span></span>  
  
     <span data-ttu-id="1b5c9-141">Hizmet ve istemci bir simetrik anahtar (istemci ve sunucu iletişim kapatılana kadar bir konuşma uzunluğu için aynı anahtar kullanılır) kullanarak bir kanal oluşturduğunuzda, güvenli bir oturum gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-141">A secure session occurs when a client and service create a channel using a symmetric key (both client and server use the same key for the length of a conversation, until the dialog is closed).</span></span>  
  
## <a name="setting-the-client-credential-type"></a><span data-ttu-id="1b5c9-142">İstemci kimlik bilgileri türünü ayarlama</span><span class="sxs-lookup"><span data-stu-id="1b5c9-142">Setting the Client Credential Type</span></span>  
 <span data-ttu-id="1b5c9-143">Bir istemci kimlik bilgileri türünü gerektiği gibi seçin.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-143">Select a client credential type as appropriate.</span></span> <span data-ttu-id="1b5c9-144">Daha fazla bilgi için [kimlik bilgisi türü seçme](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).</span><span class="sxs-lookup"><span data-stu-id="1b5c9-144">For more information, see [Selecting a Credential Type](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).</span></span> <span data-ttu-id="1b5c9-145">Aşağıdaki istemci kimlik bilgisi türleri kullanılabilir:</span><span class="sxs-lookup"><span data-stu-id="1b5c9-145">The following client credential types are available:</span></span>  
  
-   `Windows`  
  
-   `Certificate`  
  
-   `Digest`  
  
-   `Basic`  
  
-   `UserName`  
  
-   `NTLM`  
  
-   `IssuedToken`  
  
 <span data-ttu-id="1b5c9-146">Modu nasıl ayarladığına bağlı olarak, kimlik bilgisi türü ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-146">Depending on how you set the mode, you must set the credential type.</span></span> <span data-ttu-id="1b5c9-147">Örneğin, seçtiğiniz `wsHttpBinding`ve ayrıca daha sonra "İleti" moduna `clientCredentialType` aşağıdaki değerlerden biri olarak ileti öğenin özniteliği: `None`, `Windows`, `UserName`, `Certificate` , ve `IssuedToken`yapılandırmasını aşağıda gösterildiği gibi.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-147">For example, if you have selected the `wsHttpBinding`, and have set the mode to "Message," then you can also set the `clientCredentialType` attribute of the Message element to one of the following values: `None`, `Windows`, `UserName`, `Certificate`, and `IssuedToken`, as shown in the following configuration example.</span></span>  
  
```xml  
<system.serviceModel>  
<bindings>  
  <wsHttpBinding>  
    <binding name="myBinding">  
      <security mode="Message"/>  
      <message clientCredentialType="Windows"/>  
    </binding>  
</bindings>  
</system.serviceModel>  
```  
  
 <span data-ttu-id="1b5c9-148">Kod:</span><span class="sxs-lookup"><span data-stu-id="1b5c9-148">Or in code:</span></span>  
  
 [!code-csharp[c_WsHttpService#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wshttpservice/cs/source.cs#1)]
 [!code-vb[c_WsHttpService#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wshttpservice/vb/source.vb#1)]  
  
## <a name="setting-service-credential-values"></a><span data-ttu-id="1b5c9-149">Hizmet kimlik bilgisi değerleri ayarlama</span><span class="sxs-lookup"><span data-stu-id="1b5c9-149">Setting Service Credential Values</span></span>  
 <span data-ttu-id="1b5c9-150">Bir istemci kimlik bilgileri türünü seçtikten sonra gerçek kimlik bilgilerini kullanmak için istemci ve hizmet için ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-150">Once you select a client credential type, you must set the actual credentials for the service and client to use.</span></span> <span data-ttu-id="1b5c9-151">Hizmette kimlik bilgileri kullanılarak ayarlanan <xref:System.ServiceModel.Description.ServiceCredentials> sınıfı ve tarafından döndürülen <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> özelliği <xref:System.ServiceModel.ServiceHostBase> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-151">On the service, credentials are set using the <xref:System.ServiceModel.Description.ServiceCredentials> class and returned by the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property of the <xref:System.ServiceModel.ServiceHostBase> class.</span></span> <span data-ttu-id="1b5c9-152">Kullanımdaki bağlama hizmeti kimlik bilgisi türü, seçilen güvenlik modu ve istemci kimlik bilgisi türünü gösterir.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-152">The binding in use implies the service credential type, the security mode chosen, and the type of the client credential.</span></span> <span data-ttu-id="1b5c9-153">Aşağıdaki kod, bir hizmeti kimlik bilgileri için bir sertifika ayarlar.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-153">The following code sets a certificate for a service credential.</span></span>  
  
 [!code-csharp[c_tcpService#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_tcpservice/cs/source.cs#3)]
 [!code-vb[c_tcpService#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_tcpservice/vb/source.vb#3)]  
  
## <a name="setting-client-credential-values"></a><span data-ttu-id="1b5c9-154">İstemci kimlik bilgileri değerlerini ayarlama</span><span class="sxs-lookup"><span data-stu-id="1b5c9-154">Setting Client Credential Values</span></span>  
 <span data-ttu-id="1b5c9-155">İstemci kimlik bilgileri değerlerini kullanarak istemci üzerinde ayarlanmış <xref:System.ServiceModel.Description.ClientCredentials> sınıfı ve tarafından döndürülen <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> özelliği <xref:System.ServiceModel.ClientBase%601> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-155">On the client, set client credential values using the <xref:System.ServiceModel.Description.ClientCredentials> class and returned by the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property of the <xref:System.ServiceModel.ClientBase%601> class.</span></span> <span data-ttu-id="1b5c9-156">Aşağıdaki kod, TCP protokolünü kullanarak bir istemcide bir kimlik bilgisi olarak bir sertifika ayarlar.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-156">The following code sets a certificate as a credential on a client using the TCP protocol.</span></span>  
  
 [!code-csharp[c_TcpClient#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_tcpclient/cs/source.cs#1)]
 [!code-vb[c_TcpClient#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_tcpclient/vb/source.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="1b5c9-157">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="1b5c9-157">See also</span></span>
- [<span data-ttu-id="1b5c9-158">Temel WCF Programlama</span><span class="sxs-lookup"><span data-stu-id="1b5c9-158">Basic WCF Programming</span></span>](../../../../docs/framework/wcf/basic-wcf-programming.md)
- [<span data-ttu-id="1b5c9-159">Ortak Güvenlik Senaryoları</span><span class="sxs-lookup"><span data-stu-id="1b5c9-159">Common Security Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/common-security-scenarios.md)
