---
title: Federasyon ve Güven
ms.date: 03/30/2017
helpviewer_keywords:
- federation [WCF], and trust
ms.assetid: 4bdec4f2-f8a2-4512-bdcf-14ef54b5877a
ms.openlocfilehash: 4e1529db6cc52b6b8cc8881d2b2a35a754b4b311
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59225345"
---
# <a name="federation-and-trust"></a><span data-ttu-id="d3a65-102">Federasyon ve Güven</span><span class="sxs-lookup"><span data-stu-id="d3a65-102">Federation and Trust</span></span>
<span data-ttu-id="d3a65-103">Bu konu, Federasyon uygulamalarına, güven sınırları ve yapılandırma ve verilen belirteçler Windows Communication Foundation (WCF) kullanımı ile ilgili çeşitli yönlerini kapsar.</span><span class="sxs-lookup"><span data-stu-id="d3a65-103">This topic covers various aspects related to federated applications, trust boundaries and configuration, and use of issued tokens in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="services-security-token-services-and-trust"></a><span data-ttu-id="d3a65-104">Hizmetleri, güvenlik belirteci hizmetlerine ve güven</span><span class="sxs-lookup"><span data-stu-id="d3a65-104">Services, Security Token Services, and Trust</span></span>  
 <span data-ttu-id="d3a65-105">İstemcilerin belirli bir veren tarafından sağlanan bir belirteci kullanarak kimlik doğrulaması için Federasyon uç noktaları genellikle açığa çıkaran hizmetler bekler.</span><span class="sxs-lookup"><span data-stu-id="d3a65-105">Services that expose federated endpoints typically expect clients to authenticate using a token provided by a specific issuer.</span></span> <span data-ttu-id="d3a65-106">Hizmet veren için doğru kimlik bilgileriyle yapılandırılmış önemlidir; Aksi takdirde, verilen belirteçler imzaları doğrulamak mümkün olmayacaktır ve istemci hizmetiyle iletişim kuramadı.</span><span class="sxs-lookup"><span data-stu-id="d3a65-106">It is important that the service is configured with the correct credentials for the issuer; otherwise, it will not be able to verify signatures over the issued tokens, and the client will be unable to communicate with the service.</span></span> <span data-ttu-id="d3a65-107">Verici kimlik bilgileri hizmetini yapılandırma hakkında daha fazla bilgi için bkz. [nasıl yapılır: Federe bir hizmette kimlik bilgilerini yapılandırma](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md).</span><span class="sxs-lookup"><span data-stu-id="d3a65-107">For more information about configuring issuer credentials on the service, see [How to: Configure Credentials on a Federation Service](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md).</span></span>  
  
 <span data-ttu-id="d3a65-108">Hedef hizmet için doğru kimlik bilgileriyle güvenlik belirteci hizmeti yapılandırmak için benzer şekilde, simetrik anahtarlar kullanılırken anahtarları hedef hizmet için şifrelenir; Aksi takdirde, hedef hizmet anahtarı şifrelemek mümkün olmayacaktır ve yeniden istemci hizmetiyle iletişim kurmak mümkün olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="d3a65-108">Similarly, when using symmetric keys, the keys are encrypted for the target service, so you must configure the security token service with the correct credentials for the target service; otherwise, it will be unable to encrypt the key for the target service, and again, the client will be unable to communicate with the service.</span></span>  
  
 <span data-ttu-id="d3a65-109">WCF hizmetleri kullanma değerini <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxClockSkew%2A> özelliği [SecurityBindingElement](../../../../docs/framework/wcf/diagnostics/wmi/securitybindingelement.md) saati istemci ve hizmet arasında eğriltme izin vermek için.</span><span class="sxs-lookup"><span data-stu-id="d3a65-109">WCF services use the value of the <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxClockSkew%2A> property on the [SecurityBindingElement](../../../../docs/framework/wcf/diagnostics/wmi/securitybindingelement.md) to allow for clock skew between the client and service.</span></span> <span data-ttu-id="d3a65-110">Federasyon içinde `MaxClockSkew` ayarı uygulanır saat Eğer hem istemci hem de burada verilen belirteç istemci elde gelen güvenlik belirteci hizmeti arasında.</span><span class="sxs-lookup"><span data-stu-id="d3a65-110">In federation, the `MaxClockSkew` setting applies to clock skews between both the client and the security token service from where the client obtained the issued token.</span></span> <span data-ttu-id="d3a65-111">Bu nedenle, güvenlik belirteci hizmetlerine saat eğriltme izinler verilen belirtecin geçerlilik tarihi ve bitiş zamanları ayarlarken yapmamanız.</span><span class="sxs-lookup"><span data-stu-id="d3a65-111">Therefore, security token services need not make clock-skew allowances when setting the issued token's effective and expiration times.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d3a65-112">Verilen belirteç ömrünü kısaltır saat eğriltme önemini artar.</span><span class="sxs-lookup"><span data-stu-id="d3a65-112">The importance of clock skew increases as the lifetime of the issued token shortens.</span></span> <span data-ttu-id="d3a65-113">Belirteç süresini 30 dakika veya daha fazla olduğunda, çoğu durumda, saat eğriltme önemli bir sorun değildir.</span><span class="sxs-lookup"><span data-stu-id="d3a65-113">In most cases, clock skew is not a significant issue if the token lifetime is 30 minutes or more.</span></span> <span data-ttu-id="d3a65-114">Daha kısa veya belirtecin tam geçerlilik süresinin önemli olduğu senaryolar saat eğriltme dikkate şekilde tasarlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d3a65-114">Scenarios with shorter lifetimes or where the exact validity time of the token is important should be designed to take clock skew into account.</span></span>  
  
## <a name="federated-endpoints-and-time-outs"></a><span data-ttu-id="d3a65-115">Federasyon uç noktaları ve zaman aşımları</span><span class="sxs-lookup"><span data-stu-id="d3a65-115">Federated Endpoints and Time-Outs</span></span>  
 <span data-ttu-id="d3a65-116">Bir istemci bir Federasyon uç noktası ile iletişim kurduğunda, öncelikle uygun bir güvenlik belirteci hizmeti belirtecinden edinmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d3a65-116">When a client communicates with a federated endpoint, it must first acquire an appropriate token from a security token service.</span></span> <span data-ttu-id="d3a65-117">Güvenlik belirteci hizmeti bir Federasyon uç noktası sunarsa, istemci için bu endpoint verenden önce bir belirteç almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d3a65-117">If the security token service exposes a federated endpoint, the client must first obtain a token from the issuer for that endpoint.</span></span> <span data-ttu-id="d3a65-118">Her belirteç edinme işlemi zaman alır ve bu süre, son uç noktaya gerçek ileti göndermek için genel zaman aşımı tabidir.</span><span class="sxs-lookup"><span data-stu-id="d3a65-118">Each token acquisition takes time, and that time is subject to the overall time-out for sending the actual message to the final endpoint.</span></span>  
  
 <span data-ttu-id="d3a65-119">Örneğin, istemci tarafı kanalı zaman aşımı süresini 30 saniye olarak ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="d3a65-119">For example, the time-out on the client-side channel is set to 30 seconds.</span></span> <span data-ttu-id="d3a65-120">Her bir belirteç vermek üzere 15 saniye sürer ve son uç noktaya iletiyi göndermeden önce belirteçlerini almak için çağrılacak iki belirteç verenler gerekir.</span><span class="sxs-lookup"><span data-stu-id="d3a65-120">Two token issuers need to be called to retrieve tokens before sending the message to the final endpoint, and each takes 15 seconds to issue a token.</span></span> <span data-ttu-id="d3a65-121">Bu durumda, denemesi başarısız olur ve bir <xref:System.TimeoutException> oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="d3a65-121">In this case, the attempt will fail and a <xref:System.TimeoutException> is thrown.</span></span> <span data-ttu-id="d3a65-122">Bu nedenle, ayarlanacak ihtiyacınız <xref:System.ServiceModel.IContextChannel.OperationTimeout%2A> değeri almak için geçen süre dahil etmek için büyük bir değere istemci kanalındaki tüm verilen belirteçleri.</span><span class="sxs-lookup"><span data-stu-id="d3a65-122">Thus, you need to set the <xref:System.ServiceModel.IContextChannel.OperationTimeout%2A> value on the client channel to a value large enough to include the time taken to retrieve all issued tokens.</span></span> <span data-ttu-id="d3a65-123">Burada bir değer belirtilmemişse için durumda <xref:System.ServiceModel.IContextChannel.OperationTimeout%2A> özelliği <xref:System.ServiceModel.Channels.Binding.OpenTimeout%2A> özelliği veya <xref:System.ServiceModel.Channels.Binding.SendTimeout%2A> özelliği (veya her ikisi) tüm verilen belirteçleri almak için geçen süre dahil etmek için büyük bir değere ayarlanmış olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d3a65-123">In the case where a value is not specified for the <xref:System.ServiceModel.IContextChannel.OperationTimeout%2A> property, the <xref:System.ServiceModel.Channels.Binding.OpenTimeout%2A> property or the <xref:System.ServiceModel.Channels.Binding.SendTimeout%2A> property (or both) need to be set to a value large enough to include the time taken to retrieve all issued tokens.</span></span>  
  
## <a name="token-lifetime-and-renewal"></a><span data-ttu-id="d3a65-124">Belirteç ömrü ve yenileme</span><span class="sxs-lookup"><span data-stu-id="d3a65-124">Token Lifetime and Renewal</span></span>  
 <span data-ttu-id="d3a65-125">WCF istemcileri, hizmet için bir ilk isteği yaparken, verilen belirteç denetlemez.</span><span class="sxs-lookup"><span data-stu-id="d3a65-125">WCF clients do not check the issued token when making an initial request to a service.</span></span>  <span data-ttu-id="d3a65-126">Bunun yerine, WCF uygun başlangıç ve bitiş zamanları ile bir belirteç vermek için güvenlik belirteci hizmeti güvenir.</span><span class="sxs-lookup"><span data-stu-id="d3a65-126">Rather, WCF trusts the security token service to issue a token with appropriate effective and expiration times.</span></span> <span data-ttu-id="d3a65-127">Belirteç istemci tarafından önbelleğe alınan ve yeniden, belirteç ömrü sonraki isteklerde authenticateasync denetlenir ve istemci otomatik olarak gerekirse belirtecini yeniler.</span><span class="sxs-lookup"><span data-stu-id="d3a65-127">If the token is cached by the client and reused, the token lifetime is checked on subsequent requests and the client automatically renews the token if necessary.</span></span> <span data-ttu-id="d3a65-128">Belirteç önbelleğe alma hakkında daha fazla bilgi için bkz. [nasıl yapılır: Federe istemci oluşturma](../../../../docs/framework/wcf/feature-details/how-to-create-a-federated-client.md).</span><span class="sxs-lookup"><span data-stu-id="d3a65-128">For more information about token caching, see [How to: Create a Federated Client](../../../../docs/framework/wcf/feature-details/how-to-create-a-federated-client.md).</span></span>  
  
 <span data-ttu-id="d3a65-129">Belirteçleri veya güvenlik bağlamı belirteçler veren, anlaşması zaman aşımı veya diğer özel durumlar isteme verilen belirteçler, WCF istemcileri tarafından oluşturulan neden olabilir veya anlaşması veya güvenlik yenileme kısa ömre, 30 saniye bazında ya da daha az belirleme bağlam belirteci.</span><span class="sxs-lookup"><span data-stu-id="d3a65-129">Specifying short lifetimes, on the order of 30 seconds or less for issued tokens or security context tokens, may result in negotiation time-outs or other exceptions being thrown by WCF clients when requesting issued tokens or when negotiating or renewing security context tokens.</span></span>  
  
## <a name="issued-tokens-and-inclusionmode"></a><span data-ttu-id="d3a65-130">Verilen belirteçler ve InclusionMode</span><span class="sxs-lookup"><span data-stu-id="d3a65-130">Issued Tokens and InclusionMode</span></span>  
 <span data-ttu-id="d3a65-131">Verilen bir belirteç bir istemciden bir Federasyon uç noktası için gönderilen bir iletinin serileştirildiği veya ayarı denetlenen <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.InclusionMode%2A> özelliği <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="d3a65-131">Whether an issued token is serialized in a message sent from a client to a federated endpoint or not is controlled by setting the <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.InclusionMode%2A> property of the <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters> class.</span></span> <span data-ttu-id="d3a65-132">Bu özellik, birine ayarlanabilir <xref:System.ServiceModel.Security.Tokens.SecurityTokenInclusionMode> numaralandırma değerlerinin, ancak en federe senaryolarda yararlı değildir.</span><span class="sxs-lookup"><span data-stu-id="d3a65-132">This property can be set to one of the <xref:System.ServiceModel.Security.Tokens.SecurityTokenInclusionMode> enumeration values, but it is not useful in most federated scenarios.</span></span> <span data-ttu-id="d3a65-133">`SecurityTokenInclusionMode.Never` Ve `SecurityTokenInclusionMode.AlwaysToInitiator` değerler için bağlı olan taraf güvenlik belirteci hizmeti tarafından verilen belirtecin bir başvuru göndermek istemci neden olur.</span><span class="sxs-lookup"><span data-stu-id="d3a65-133">The `SecurityTokenInclusionMode.Never` and `SecurityTokenInclusionMode.AlwaysToInitiator` values cause the client to send a reference to the token issued by the security token service to the relying party.</span></span> <span data-ttu-id="d3a65-134">Bağlı olan taraf verilen belirteç kimlik doğrulaması bir kopyasını sahip olduğu sürece, belirteç başvurusu çözümlenebilir olmadığı için başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="d3a65-134">Unless the relying party possesses a copy of the issued token, authentication will fail because the token reference is not resolvable.</span></span> <span data-ttu-id="d3a65-135">WCF işler `SecurityTokenInclusionMode.Once` eşdeğer olarak `SecurityTokenInclusionMode.AlwaysToRecipient`.</span><span class="sxs-lookup"><span data-stu-id="d3a65-135">WCF treats `SecurityTokenInclusionMode.Once` as equivalent to `SecurityTokenInclusionMode.AlwaysToRecipient`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d3a65-136">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="d3a65-136">See also</span></span>

- <xref:System.ServiceModel.Security.Tokens.SecurityTokenInclusionMode>
- [<span data-ttu-id="d3a65-137">Nasıl yapılır: Federe istemci oluşturma</span><span class="sxs-lookup"><span data-stu-id="d3a65-137">How to: Create a Federated Client</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-federated-client.md)
- [<span data-ttu-id="d3a65-138">Nasıl yapılır: Federe bir hizmette kimlik bilgilerini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="d3a65-138">How to: Configure Credentials on a Federation Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md)
- [<span data-ttu-id="d3a65-139">Nasıl yapılır: WSFederationHttpBinding oluşturma</span><span class="sxs-lookup"><span data-stu-id="d3a65-139">How to: Create a WSFederationHttpBinding</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-wsfederationhttpbinding.md)
