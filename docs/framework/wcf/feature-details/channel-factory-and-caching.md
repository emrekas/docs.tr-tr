---
title: Kanal Fabrikası ve Önbelleğe Alma
ms.date: 03/30/2017
ms.assetid: 954f030e-091c-4c0e-a7a2-10f9a6b1f529
ms.openlocfilehash: 98b77071204e2c2f98609e6c5bb1ca84a896dd58
ms.sourcegitcommit: 581ab03291e91983459e56e40ea8d97b5189227e
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/27/2019
ms.locfileid: "70040209"
---
# <a name="channel-factory-and-caching"></a>Kanal Fabrikası ve Önbelleğe Alma

WCF istemci uygulamaları, <xref:System.ServiceModel.ChannelFactory%601> bir WCF hizmeti ile iletişim kanalı oluşturmak için sınıfını kullanır.  Aşağıdaki <xref:System.ServiceModel.ChannelFactory%601> işlemleri içerdiğinden örnek oluşturma bazı ek yük doğurur:

- <xref:System.ServiceModel.Description.ContractDescription> Ağacı oluşturma

- Tüm gerekli CLR türlerini yansıtma

- Kanal yığınını oluşturma

- Kaynakları elden atma

Bu ek yükü en aza indirmenize yardımcı olmak için WCF istemci ara sunucusu kullanırken WCF kanal fabrikalarını önbelleğe alabilir.

> [!TIP]
> <xref:System.ServiceModel.ChannelFactory%601> Sınıfını doğrudan kullandığınızda kanal fabrikası oluşturma üzerinde doğrudan denetiminiz vardır.

[ServiceModel meta veri yardımcı programı Aracı (Svcutil. exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) Ile oluşturulan WCF istemci proxy 'leri <xref:System.ServiceModel.ClientBase%601>, öğesinden türetilir. <xref:System.ServiceModel.ClientBase%601>Kanal fabrikası önbelleğe <xref:System.ServiceModel.ClientBase%601.CacheSetting%2A> alma davranışını tanımlayan bir statik özelliği tanımlar. Belirli bir tür için önbellek ayarları yapılır. Örneğin, aşağıda tanımlanan `ClientBase<ITest>.CacheSettings` değerlerden birine ayarlandığında yalnızca türünün `ITest`proxy/ClientBase değeri etkilenir. İlk proxy/ClientBase örneği <xref:System.ServiceModel.ClientBase%601> oluşturulduktan hemen sonra, belirli bir için önbellek ayarı sabittir.

## <a name="specifying-caching-behavior"></a>Önbelleğe alma davranışını belirtme

Önbelleğe alma davranışı, <xref:System.ServiceModel.ClientBase%601.CacheSetting> özelliği aşağıdaki değerlerden birine ayarlanarak belirtilir.

|Önbellek ayarı değeri|Açıklama|
|-------------------------|-----------------|
|<xref:System.ServiceModel.CacheSetting.AlwaysOn>|Uygulama etki alanı <xref:System.ServiceModel.ClientBase%601> içindeki tüm örnekleri önbelleğe alma işlemine katılabilir. Geliştirici, önbelleğe alma işleminin olumsuz güvenlik etkilerine sahip olmadığını belirledi. "Güvenliğe duyarlı" özelliklere <xref:System.ServiceModel.ClientBase%601> erişilmesi durumunda bile önbelleğe alma devre dışı bırakılır. ' Nin <xref:System.ServiceModel.ClientBase%601> "güvenlik duyarlı" özellikleri ve <xref:System.ServiceModel.ClientBase%601.ChannelFactory%2A>' <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> <xref:System.ServiceModel.ClientBase%601.Endpoint%2A> dir.|
|<xref:System.ServiceModel.CacheSetting.Default>|Yalnızca yapılandırma dosyalarında <xref:System.ServiceModel.ClientBase%601> tanımlanan bitiş noktalarından oluşturulan örnekleri, uygulama etki alanı içinde önbelleğe almaya katılır. Bu uygulama etki <xref:System.ServiceModel.ClientBase%601> alanı içinde programlı olarak oluşturulan tüm örnekleri, önbelleğe alma işlemine katılmaz. Ayrıca, "güvenliğe duyarlı" özelliklerden birine erişildiğinde bir <xref:System.ServiceModel.ClientBase%601> örneği için önbelleğe alma devre dışı bırakılır.|
|<xref:System.ServiceModel.CacheSetting.AlwaysOff>|Bu, söz konusu App-Domain içindeki <xref:System.ServiceModel.ClientBase%601> belirli bir türün tüm örnekleri için önbelleğe alma kapalıdır.|

Aşağıdaki kod parçacıkları, <xref:System.ServiceModel.ClientBase%601.CacheSetting%2A> özelliğinin nasıl kullanılacağını gösterir.

```csharp
class Program
{
   static void Main(string[] args)
   {
      ClientBase<ITest>.CacheSettings = CacheSettings.AlwaysOn;
      foreach (string msg in messages)
      {
         using (TestClient proxy = new TestClient (new BasicHttpBinding(), new EndpointAddress(address)))
         {
            // ...
            proxy.Test(msg);
            // ...
         }
      }
   }
}
// Generated by SvcUtil.exe
public partial class TestClient : System.ServiceModel.ClientBase, ITest { }
```

Yukarıdaki kodda, tüm örnekleri `TestClient` aynı kanal fabrikasını kullanır.

```csharp
class Program
{
   static void Main(string[] args)
   {
      ClientBase.CacheSettings = CacheSettings.Default;
      int i = 1;
      foreach (string msg in messages)
      {
         using (TestClient proxy = new TestClient ("MyEndpoint", new EndpointAddress(address)))
         {
            if (i == 4)
            {
               ServiceEndpoint endpoint = proxy.Endpoint;
               ... // use endpoint in some way
            }
            proxy.Test(msg);
         }
         i++;
   }
}

// Generated by SvcUtil.exe
public partial class TestClient : System.ServiceModel.ClientBase, ITest {}
```

Yukarıdaki örnekte, öğesinin `TestClient` tüm örnekleri, örnek #4 dışında aynı kanal fabrikası kullanır. Örnek #4, kullanımı için özel olarak oluşturulan bir kanal fabrikası kullanacaktır. Bu ayar, belirli bir uç noktanın aynı kanal fabrikası türünün diğer uç noktalarından farklı güvenlik ayarlarına ihtiyacı olan senaryolarda (Bu durumda `ITest`) çalışır.

```csharp
class Program
{
   static void Main(string[] args)
   {
      ClientBase.CacheSettings = CacheSettings.AlwaysOff;
      foreach (string msg in messages)
      {
         using (TestClient proxy = new TestClient ("MyEndpoint", new EndpointAddress(address)))
         {
            proxy.Test(msg);
         }
      }
   }
}

// Generated by SvcUtil.exe
public partial class TestClient : System.ServiceModel.ClientBase, ITest {}
```

Yukarıdaki örnekte, öğesinin `TestClient` tüm örnekleri farklı kanal fabrikaları kullanır. Bu, her bir uç nokta farklı güvenlik gereksinimlerine sahip olduğunda ve önbelleğe alma mantıklı olmadığında yararlıdır.

## <a name="see-also"></a>Ayrıca bkz.

- <xref:System.ServiceModel.ClientBase%601>
- [İstemci Derleme](../../../../docs/framework/wcf/building-clients.md)
- [İstemciler](../../../../docs/framework/wcf/feature-details/clients.md)
- [WCF İstemcisi Kullanarak Hizmetlere Erişme](../../../../docs/framework/wcf/accessing-services-using-a-wcf-client.md)
- [Nasıl yapılır: ChannelFactory kullanma](../../../../docs/framework/wcf/feature-details/how-to-use-the-channelfactory.md)
