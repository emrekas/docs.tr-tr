---
title: Kanal Fabrikası ve Önbelleğe Alma
ms.date: 03/30/2017
ms.assetid: 954f030e-091c-4c0e-a7a2-10f9a6b1f529
ms.openlocfilehash: 3914ba74337bd959558348c191a897c79a32da52
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61784312"
---
# <a name="channel-factory-and-caching"></a>Kanal Fabrikası ve Önbelleğe Alma
WCF istemci uygulamalarının kullanın <xref:System.ServiceModel.ChannelFactory%601> bir WCF Hizmeti ile bir iletişim kanalı oluşturmak için sınıf.  Oluşturma <xref:System.ServiceModel.ChannelFactory%601> örnekleri aşağıdaki işlemleri içerdiğinden bazı ek yük doğurur:  
  
- Oluşturma <xref:System.ServiceModel.Description.ContractDescription> ağacı  
  
- Tüm gerekli CLR Türleri yansıtma  
  
- Kanal yığını oluşturma  
  
- Kaynaklarını atma  
  
 WCF bu ek yükü en aza indirmek için bir WCF istemci proxy kullanırken kanal fabrikaları önbelleğe alabilir.  
  
> [!TIP]
>  Kullanırken kanal fabrikası oluşturma doğrudan denetime sahip <xref:System.ServiceModel.ChannelFactory%601> doğrudan sınıf.  
  
 Oluşturulan WCF istemci proxy'leri [ServiceModel meta veri yardımcı Programracı (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) türetilmiştir <xref:System.ServiceModel.ClientBase%601>. <xref:System.ServiceModel.ClientBase%601> statik tanımlar <xref:System.ServiceModel.ClientBase%601.CacheSetting%2A> kanal fabrikası önbelleğe alma davranışını tanımlayan özellik. Belirli bir türü için önbellek ayarları yapılır. Örneğin, ayarlamak `ClientBase<ITest>.CacheSettings` aşağıda tanımlanan değerlerden biri olarak yalnızca bu proxy/ClientBase türü etkiler `ITest`. Belirli bir önbellek ayarını <xref:System.ServiceModel.ClientBase%601> ilk proxy/ClientBase örneği oluşturulduktan hemen sonra sabittir.  
  
## <a name="specifying-caching-behavior"></a>Önbelleğe alma davranışını belirtme  
 Önbelleğe alma davranışını belirtilen ayarlayarak <xref:System.ServiceModel.ClientBase%601.CacheSetting> özelliğini şu değerlerden biri.  
  
|Önbellek ayar değeri|Açıklama|  
|-------------------------|-----------------|  
|<xref:System.ServiceModel.CacheSetting.AlwaysOn>|Tüm örneklerini <xref:System.ServiceModel.ClientBase%601> uygulama etki alanında önbelleğe katılabilir. Geliştirici, önbelleğe alma için hiçbir olumsuz güvenlikle ilgili etkileri olduğunu belirledi. Önbelleğe alma açık devre dışı bile "güvenlik açısından hassas" özellikleri <xref:System.ServiceModel.ClientBase%601> erişilir. "Güvenlik açısından hassas" özelliklerini <xref:System.ServiceModel.ClientBase%601> olan <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A>, <xref:System.ServiceModel.ClientBase%601.Endpoint%2A> ve <xref:System.ServiceModel.ClientBase%601.ChannelFactory%2A>.|  
|<xref:System.ServiceModel.CacheSetting.Default>|Yalnızca örneklerini <xref:System.ServiceModel.ClientBase%601> dosyaları katılmak uygulama etki alanında önbelleğe yapılandırmasında tanımlı uç noktalarından oluşturulur. Tüm örneklerini <xref:System.ServiceModel.ClientBase%601> içinde program aracılığıyla oluşturulan bu uygulama etki alanı önbelleğe alırken katılmayacaktır. Ayrıca, önbelleğe alma bir örneği için devre dışı bırakılacak <xref:System.ServiceModel.ClientBase%601> "güvenlik açısından hassas" özelliklerinden birini erişilen sonra.|  
|<xref:System.ServiceModel.CacheSetting.AlwaysOff>|Önbelleğe alma devre dışı olduğundan tüm örnekleri için <xref:System.ServiceModel.ClientBase%601> belli bir türdeki app-etki alanı içinde söz konusu.|  
  
 Aşağıdaki kod parçacıkları nasıl kullanılacağını örneklendiren <xref:System.ServiceModel.ClientBase%601.CacheSetting%2A> özelliği.  
  
```csharp  
class Program   
{   
   static void Main(string[] args)   
   {   
      ClientBase<ITest>.CacheSettings = CacheSettings.AlwaysOn;   
      foreach (string msg in messages)   
      {   
         using (TestClient proxy = new TestClient (new BasicHttpBinding(), new EndpointAddress(address)))   
         {   
            // ...  
            proxy.Test(msg);   
            // ...  
         }   
      }   
   }   
}  
// Generated by SvcUtil.exe     
public partial class TestClient : System.ServiceModel.ClientBase, ITest { }  
```  
  
 Yukarıdaki kodda, tüm örneklerini `TestClient` aynı kanal fabrikası kullanır.  
  
```csharp  
class Program   
{   
   static void Main(string[] args)   
   {   
      ClientBase.CacheSettings = CacheSettings.Default;   
      int i = 1;   
      foreach (string msg in messages)   
      {   
         using (TestClient proxy = new TestClient ("MyEndpoint", new EndpointAddress(address)))   
         {   
            if (i == 4)   
            {   
               ServiceEndpoint endpoint = proxy.Endpoint;   
               ... // use endpoint in some way   
            }   
            proxy.Test(msg);   
         }   
         i++;   
   }   
}   
  
// Generated by SvcUtil.exe     
public partial class TestClient : System.ServiceModel.ClientBase, ITest {}  
```  
  
 Tüm örneklerini yukarıdaki örnekte `TestClient` örneği #4 dışında aynı kanal fabrikası kullanırsınız. #4 örneği oluşturulan kanal fabrikası kullanımına özellikle kullanmanız gerekir. Bu ayar, belirli bir uç noktası diğer uç noktalar aynı kanal fabrikası türde farklı güvenlik ayarlarından gereken yere senaryoları için işe yarar (Bu durumda `ITest`).  
  
```csharp  
class Program   
{   
   static void Main(string[] args)   
   {   
      ClientBase.CacheSettings = CacheSettings.AlwaysOff;   
      foreach (string msg in messages)   
      {   
         using (TestClient proxy = new TestClient ("MyEndpoint", new EndpointAddress(address)))   
         {   
            proxy.Test(msg);   
         }           
      }   
   }  
}  
  
// Generated by SvcUtil.exe   
public partial class TestClient : System.ServiceModel.ClientBase, ITest {}  
```  
  
 Tüm örneklerini yukarıdaki örnekte `TestClient` farklı kanal fabrikaları kullanırsınız. Bu, her bir uç nokta farklı güvenlik gereksinimlerine sahip olduğunda ve önbellek için hiçbir mantıklı kullanışlıdır.  
  
## <a name="see-also"></a>Ayrıca bkz.

- <xref:System.ServiceModel.ClientBase%601>
- [İstemci Derleme](../../../../docs/framework/wcf/building-clients.md)
- [İstemciler](../../../../docs/framework/wcf/feature-details/clients.md)
- [WCF İstemcisi Kullanarak Hizmetlere Erişme](../../../../docs/framework/wcf/accessing-services-using-a-wcf-client.md)
- [Nasıl yapılır: ChannelFactory kullanma](../../../../docs/framework/wcf/feature-details/how-to-use-the-channelfactory.md)
