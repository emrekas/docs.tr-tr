---
title: İleti Sınıfını Kullanma
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: d1d62bfb-2aa3-4170-b6f8-c93d3afdbbed
ms.openlocfilehash: d9b1c1242fe2686a66e41b777f904a71898159ea
ms.sourcegitcommit: 3630c2515809e6f4b7dbb697a3354efec105a5cd
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/25/2019
ms.locfileid: "58409607"
---
# <a name="using-the-message-class"></a><span data-ttu-id="fe206-102">İleti Sınıfını Kullanma</span><span class="sxs-lookup"><span data-stu-id="fe206-102">Using the Message Class</span></span>
<span data-ttu-id="fe206-103"><xref:System.ServiceModel.Channels.Message> Sınıfı, temel Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="fe206-103">The <xref:System.ServiceModel.Channels.Message> class is fundamental to Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="fe206-104">İstemciler ve hizmetler arasındaki tüm iletişim sonuçta sonuçlanır <xref:System.ServiceModel.Channels.Message> örnekleri için gönderilen ve alınan.</span><span class="sxs-lookup"><span data-stu-id="fe206-104">All communication between clients and services ultimately results in <xref:System.ServiceModel.Channels.Message> instances being sent and received.</span></span>  
  
 <span data-ttu-id="fe206-105">Genellikle ile etkileşime değil <xref:System.ServiceModel.Channels.Message> doğrudan sınıf.</span><span class="sxs-lookup"><span data-stu-id="fe206-105">You would not usually interact with the <xref:System.ServiceModel.Channels.Message> class directly.</span></span> <span data-ttu-id="fe206-106">Bunun yerine, veri sözleşmeleri, ileti sözleşmeleri ve işlem sözleşmeleri gibi WCF service model yapıları, gelen ve giden iletileri tanımlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="fe206-106">Instead, WCF service model constructs, such as data contracts, message contracts, and operation contracts, are used to describe incoming and outgoing messages.</span></span> <span data-ttu-id="fe206-107">Ancak, bazı Gelişmiş senaryolar program kullanarak <xref:System.ServiceModel.Channels.Message> doğrudan sınıf.</span><span class="sxs-lookup"><span data-stu-id="fe206-107">However, in some advanced scenarios you can program using the <xref:System.ServiceModel.Channels.Message> class directly.</span></span> <span data-ttu-id="fe206-108">Örneğin, kullanmak isteyebilirsiniz <xref:System.ServiceModel.Channels.Message> sınıfı:</span><span class="sxs-lookup"><span data-stu-id="fe206-108">For example, you might want to use the <xref:System.ServiceModel.Channels.Message> class:</span></span>  
  
-   <span data-ttu-id="fe206-109">Seri hale getirme yerine (örneğin, bir dosyanın disk üzerinde doğrudan bir ileti oluşturma) giden ileti içeriği oluşturma alternatif bir yolu gerektiğinde [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] nesneleri.</span><span class="sxs-lookup"><span data-stu-id="fe206-109">When you need an alternative way of creating outgoing message contents (for example, creating a message directly from a file on disk) instead of serializing [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] objects.</span></span>  
  
-   <span data-ttu-id="fe206-110">Bir alternatif bir yolu içine seri durumdan çıkarılırken yerine (örneğin, ham XML içeriği XSLT dönüştürmesi uygulamak istediğinizde) gelen ileti içeriği kullanma gerektiğinde [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] nesneleri.</span><span class="sxs-lookup"><span data-stu-id="fe206-110">When you need an alternative way of using incoming message contents (for example, when you want to apply an XSLT transformation to the raw XML contents) instead of deserializing into [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] objects.</span></span>  
  
-   <span data-ttu-id="fe206-111">İleti içeriği ne olursa olsun genel bir şekilde iletilerle dağıtılacak gerektiğinde (örneğin, yönlendirme veya yönlendirici, yük dengeleyici veya bir yayımlama oluştururken iletirken-sistem abone).</span><span class="sxs-lookup"><span data-stu-id="fe206-111">When you need to deal with messages in a general way regardless of message contents (for example, when routing or forwarding messages when building a router, load-balancer, or a publish-subscribe system).</span></span>  
  
 <span data-ttu-id="fe206-112">Kullanmadan önce <xref:System.ServiceModel.Channels.Message> sınıfı, WCF veri aktarımı mimaride planladığınızdan [veri aktarımı mimarisine genel bakış](../../../../docs/framework/wcf/feature-details/data-transfer-architectural-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fe206-112">Before using the <xref:System.ServiceModel.Channels.Message> class, familiarize yourself with the WCF data transfer architecture in [Data Transfer Architectural Overview](../../../../docs/framework/wcf/feature-details/data-transfer-architectural-overview.md).</span></span>  
  
 <span data-ttu-id="fe206-113">A <xref:System.ServiceModel.Channels.Message> veri için genel amaçlı bir kapsayıcı, ancak tasarımı, SOAP protokolü iletisinde tasarımını yakından takip eder.</span><span class="sxs-lookup"><span data-stu-id="fe206-113">A <xref:System.ServiceModel.Channels.Message> is a general-purpose container for data, but its design closely follows the design of a message in the SOAP protocol.</span></span> <span data-ttu-id="fe206-114">SOAP içinde olduğu gibi bir ileti hem bir ileti gövdesi hem de üst bilgileri içerir.</span><span class="sxs-lookup"><span data-stu-id="fe206-114">Just like in SOAP, a message has both a message body and headers.</span></span> <span data-ttu-id="fe206-115">Ek adlandırılmış veri kapsayıcı üstbilgileri içerirken ileti gövdesi gerçek yükü verileri içerir.</span><span class="sxs-lookup"><span data-stu-id="fe206-115">The message body contains the actual payload data, while the headers contain additional named data containers.</span></span> <span data-ttu-id="fe206-116">Kural gövdesi ve üst bilgileri okumak ve yazmak için farklıdır, örneğin, üst bilgileri her zaman bellekte arabelleğe alınır ve içinde erişilebilir zaman, herhangi bir sayıda sipariş gövdesi yalnızca bir kez okunabilir ve akışla.</span><span class="sxs-lookup"><span data-stu-id="fe206-116">The rules for reading and writing the body and the headers are different, for example, the headers are always buffered in memory and may be accessed in any order any number of times, while the body may be read only once and may be streamed.</span></span> <span data-ttu-id="fe206-117">Normalde, SOAP kullanırken, ileti gövdesi SOAP gövdesi için eşlenir ve ileti üstbilgilerini SOAP üstbilgileri eşleştirilir.</span><span class="sxs-lookup"><span data-stu-id="fe206-117">Normally, when using SOAP, the message body is mapped to the SOAP body and the message headers are mapped to the SOAP headers.</span></span>  
  
## <a name="using-the-message-class-in-operations"></a><span data-ttu-id="fe206-118">İşlemlerinde ileti sınıfını kullanma</span><span class="sxs-lookup"><span data-stu-id="fe206-118">Using the Message Class in Operations</span></span>  
 <span data-ttu-id="fe206-119">Kullanabileceğiniz <xref:System.ServiceModel.Channels.Message> sınıfının giriş parametresi olarak bir işlem, bir işlem veya her ikisi de dönüş değeri.</span><span class="sxs-lookup"><span data-stu-id="fe206-119">You can use the <xref:System.ServiceModel.Channels.Message> class as an input parameter of an operation, the return value of an operation, or both.</span></span> <span data-ttu-id="fe206-120">Varsa <xref:System.ServiceModel.Channels.Message> kullanılan herhangi bir işlem, aşağıdaki kısıtlamalar uygulanır:</span><span class="sxs-lookup"><span data-stu-id="fe206-120">If <xref:System.ServiceModel.Channels.Message> is used anywhere in an operation, the following restrictions apply:</span></span>  
  
-   <span data-ttu-id="fe206-121">İşlemi içeremez `out` veya `ref` parametreleri.</span><span class="sxs-lookup"><span data-stu-id="fe206-121">The operation cannot have any `out` or `ref` parameters.</span></span>  
  
-   <span data-ttu-id="fe206-122">Olamaz birden fazla `input` parametresi.</span><span class="sxs-lookup"><span data-stu-id="fe206-122">There cannot be more than one `input` parameter.</span></span> <span data-ttu-id="fe206-123">Parametre varsa, ileti ya da ileti anlaşması türü olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="fe206-123">If the parameter is present, it must be either Message or a message contract type.</span></span>  
  
-   <span data-ttu-id="fe206-124">Dönüş türü olmalıdır `void`, `Message`, ya da sözleşme türü bir ileti.</span><span class="sxs-lookup"><span data-stu-id="fe206-124">The return type must be either `void`, `Message`, or a message contract type.</span></span>  
  
 <span data-ttu-id="fe206-125">Aşağıdaki kod örneği, geçerli işlem anlaşması içeriyor.</span><span class="sxs-lookup"><span data-stu-id="fe206-125">The following code example contains a valid operation contract.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#1)]
 [!code-vb[C_UsingTheMessageClass#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#1)]  
  
## <a name="creating-basic-messages"></a><span data-ttu-id="fe206-126">Temel iletileri oluşturuluyor</span><span class="sxs-lookup"><span data-stu-id="fe206-126">Creating Basic Messages</span></span>  
 <span data-ttu-id="fe206-127"><xref:System.ServiceModel.Channels.Message> SAX statik `CreateMessage` temel iletileri oluşturmak için kullanabileceğiniz Fabrika yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="fe206-127">The <xref:System.ServiceModel.Channels.Message> class provides static `CreateMessage` factory methods that you can use to create basic messages.</span></span>  
  
 <span data-ttu-id="fe206-128">Tüm `CreateMessage` aşırı ele türünde bir sürüm parametresi <xref:System.ServiceModel.Channels.MessageVersion> ileti için kullanılacak SOAP ve WS-Addressing sürümlerini gösterir.</span><span class="sxs-lookup"><span data-stu-id="fe206-128">All `CreateMessage` overloads take a version parameter of type <xref:System.ServiceModel.Channels.MessageVersion> that indicates the SOAP and WS-Addressing versions to use for the message.</span></span> <span data-ttu-id="fe206-129">Gelen ileti aynı protokol sürümleri kullanmak istiyorsanız, kullanabileceğiniz <xref:System.ServiceModel.OperationContext.IncomingMessageVersion%2A> özelliği <xref:System.ServiceModel.OperationContext> örneği öğesinden alınan <xref:System.ServiceModel.OperationContext.Current%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="fe206-129">If you want to use the same protocol versions as the incoming message, you can use the <xref:System.ServiceModel.OperationContext.IncomingMessageVersion%2A> property on the <xref:System.ServiceModel.OperationContext> instance obtained from the <xref:System.ServiceModel.OperationContext.Current%2A> property.</span></span> <span data-ttu-id="fe206-130">Çoğu `CreateMessage` aşırı yüklemeleri, ileti için kullanılacak SOAP eylemi belirten bir dize parametresi de vardır.</span><span class="sxs-lookup"><span data-stu-id="fe206-130">Most `CreateMessage` overloads also have a string parameter that indicates the SOAP action to use for the message.</span></span> <span data-ttu-id="fe206-131">Sürüm ayarlanabilir `None` SOAP Zarfı oluşturma;'devre dışı bırakmak için ileti gövdesi yalnızca oluşur.</span><span class="sxs-lookup"><span data-stu-id="fe206-131">Version can be set to `None` to disable SOAP envelope generation; the message consists of only the body.</span></span>  
  
## <a name="creating-messages-from-objects"></a><span data-ttu-id="fe206-132">Nesnelerden iletileri oluşturuluyor</span><span class="sxs-lookup"><span data-stu-id="fe206-132">Creating Messages from Objects</span></span>  
 <span data-ttu-id="fe206-133">En temel `CreateMessage` yalnızca bir sürümü ve bir eylem alan aşırı yüklemesini boş gövdesi bir ileti oluşturur.</span><span class="sxs-lookup"><span data-stu-id="fe206-133">The most basic `CreateMessage` overload that takes only a version and an action creates a message with an empty body.</span></span> <span data-ttu-id="fe206-134">Başka bir aşırı ek bir alan <xref:System.Object> parametresi yok; Bu, gövde verilen nesne seri hale getirilmiş temsili bir ileti oluşturur.</span><span class="sxs-lookup"><span data-stu-id="fe206-134">Another overload takes an additional <xref:System.Object> parameter; this creates a message whose body is the serialized representation of the given object.</span></span> <span data-ttu-id="fe206-135">Kullanım <xref:System.Runtime.Serialization.DataContractSerializer> Serileştirmenin varsayılan ayarlarla.</span><span class="sxs-lookup"><span data-stu-id="fe206-135">Use the <xref:System.Runtime.Serialization.DataContractSerializer> with default settings for serialization.</span></span> <span data-ttu-id="fe206-136">Farklı bir serileştirici kullanmak istediğiniz veya istemediğiniz `DataContractSerializer` farklı şekilde yapılandırılmış, kullanın `CreateMessage` ayrıca alan aşırı yüklemesini bir `XmlObjectSerializer` parametresi.</span><span class="sxs-lookup"><span data-stu-id="fe206-136">If you want to use a different serializer, or you want the `DataContractSerializer` configured differently, use the `CreateMessage` overload that also takes an `XmlObjectSerializer` parameter.</span></span>  
  
 <span data-ttu-id="fe206-137">Örneğin, bir ileti nesneyi döndürmek için aşağıdaki kodu kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fe206-137">For example, to return an object in a message, you can use the following code.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#2)]
 [!code-vb[C_UsingTheMessageClass#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#2)]  
  
## <a name="creating-messages-from-xml-readers"></a><span data-ttu-id="fe206-138">XML okuyucular iletileri oluşturuluyor</span><span class="sxs-lookup"><span data-stu-id="fe206-138">Creating Messages from XML Readers</span></span>  
 <span data-ttu-id="fe206-139">Vardır `CreateMessage` aşırı süren bir <xref:System.Xml.XmlReader> veya <xref:System.Xml.XmlDictionaryReader> bir nesne yerine gövdesi için.</span><span class="sxs-lookup"><span data-stu-id="fe206-139">There are `CreateMessage` overloads that take an <xref:System.Xml.XmlReader> or an <xref:System.Xml.XmlDictionaryReader> for the body instead of an object.</span></span> <span data-ttu-id="fe206-140">Bu durumda, ileti gövdesi dosyasından okurken geçirilen XML okuyucusundan sonuçları XML içeriyor.</span><span class="sxs-lookup"><span data-stu-id="fe206-140">In this case, the body of the message contains the XML that results from reading from the passed XML reader.</span></span> <span data-ttu-id="fe206-141">Örneğin, aşağıdaki kod içeriği bir XML dosyasından okuma gövdesini içeren bir ileti döndürür.</span><span class="sxs-lookup"><span data-stu-id="fe206-141">For example, the following code returns a message with body contents read from an XML file.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#3)]
 [!code-vb[C_UsingTheMessageClass#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#3)]  
  
 <span data-ttu-id="fe206-142">Ayrıca, vardır `CreateMessage` aşırı süren bir <xref:System.Xml.XmlReader> veya bir <xref:System.Xml.XmlDictionaryReader> temsil eden tüm ileti ve yalnızca gövdesi.</span><span class="sxs-lookup"><span data-stu-id="fe206-142">Additionally, there are `CreateMessage` overloads that take an <xref:System.Xml.XmlReader> or an <xref:System.Xml.XmlDictionaryReader> that represents the entire message and not just the body.</span></span> <span data-ttu-id="fe206-143">Bu aşırı yüklemeler ayrıca bir tamsayı olması `maxSizeOfHeaders` parametresi.</span><span class="sxs-lookup"><span data-stu-id="fe206-143">These overloads also take an integer `maxSizeOfHeaders` parameter.</span></span> <span data-ttu-id="fe206-144">Üst bilgileri, her zaman yer alan bir ileti oluşturulur ve bu parametre, arabelleğe alma miktarını sınırlar sürede belleğe arabelleğe alınır.</span><span class="sxs-lookup"><span data-stu-id="fe206-144">Headers are always buffered into memory as soon as the message is created, and this parameter limits the amount of buffering that takes place.</span></span> <span data-ttu-id="fe206-145">XML bir hizmet reddi saldırısı olasılığını azaltmak için güvenilmeyen bir kaynaktan geliyorsa, bu parametre için güvenli bir değer ayarlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="fe206-145">It is important to set this parameter to a safe value if the XML is coming from an untrusted source to mitigate the possibility of a denial of service attack.</span></span> <span data-ttu-id="fe206-146">XML okuyucuyu temsil eder iletinin SOAP ve WS-Addressing sürümleri, sürüm parametresi kullanılarak belirtilen sürümleri eşleşmelidir.</span><span class="sxs-lookup"><span data-stu-id="fe206-146">The SOAP and WS-Addressing versions of the message the XML reader represents must match the versions indicated using the version parameter.</span></span>  
  
## <a name="creating-messages-with-bodywriter"></a><span data-ttu-id="fe206-147">İletileri ile BodyWriter oluşturuluyor</span><span class="sxs-lookup"><span data-stu-id="fe206-147">Creating Messages with BodyWriter</span></span>  
 <span data-ttu-id="fe206-148">Bir `CreateMessage` alır aşırı bir `BodyWriter` iletisinin gövdesini açıklamak için örneği.</span><span class="sxs-lookup"><span data-stu-id="fe206-148">One `CreateMessage` overload takes a `BodyWriter` instance to describe the body of the message.</span></span> <span data-ttu-id="fe206-149">A `BodyWriter` İleti gövdeleri nasıl oluşturulduğunu özelleştirmek için türetilmiş bir soyut sınıftır.</span><span class="sxs-lookup"><span data-stu-id="fe206-149">A `BodyWriter` is an abstract class that can be derived to customize how message bodies are created.</span></span> <span data-ttu-id="fe206-150">Kendi oluşturabilirsiniz `BodyWriter` türetilmiş sınıf İleti gövdeleri özel bir şekilde tanımlamak için.</span><span class="sxs-lookup"><span data-stu-id="fe206-150">You can create your own `BodyWriter` derived class to describe message bodies in a custom way.</span></span> <span data-ttu-id="fe206-151">Geçersiz kılmanız gerekir `BodyWriter.OnWriteBodyContents` gereken yöntemini bir <xref:System.Xml.XmlDictionaryWriter>; bu yöntem gövdesi yazmaktan sorumludur.</span><span class="sxs-lookup"><span data-stu-id="fe206-151">You must override the `BodyWriter.OnWriteBodyContents` method that takes an <xref:System.Xml.XmlDictionaryWriter>; this method is responsible for writing out the body.</span></span>  
  
 <span data-ttu-id="fe206-152">Gövde yazıcılar arabelleğe veya (akışı arabelleğe olmayan).</span><span class="sxs-lookup"><span data-stu-id="fe206-152">Body writers can be buffered or non-buffered (streamed).</span></span> <span data-ttu-id="fe206-153">Akış olanları, içeriği yalnızca bir kez yazabilirsiniz sırasında arabelleğe alınan gövdesi yazıcıları zaman, herhangi bir sayıda içeriklerini yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fe206-153">Buffered body writers can write out their contents any number of times, while streamed ones can write out their contents only once.</span></span> <span data-ttu-id="fe206-154">`IsBuffered` Özelliği bir Gövde yazıcısı veya arabelleğe alınıp alınmayacağını belirtir.</span><span class="sxs-lookup"><span data-stu-id="fe206-154">The `IsBuffered` property indicates whether a body writer is buffered or not.</span></span> <span data-ttu-id="fe206-155">Bu, Gövde yazıcısı için korumalı çağırarak ayarlayabileceğiniz `BodyWriter` alan oluşturucu bir `isBuffered` Boole parametresi.</span><span class="sxs-lookup"><span data-stu-id="fe206-155">You can set this for your body writer by calling the protected `BodyWriter` constructor that takes an `isBuffered` boolean parameter.</span></span> <span data-ttu-id="fe206-156">Gövde yazarları, arabelleğe gövdesi yazıcıdan arabelleğe alınan Gövde yazıcısı oluşturmayı destekler.</span><span class="sxs-lookup"><span data-stu-id="fe206-156">Body writers support creating a buffered body writer from a non-buffered body writer.</span></span> <span data-ttu-id="fe206-157">Geçersiz kılabilirsiniz `OnCreateBufferedCopy` bu işlemi özelleştirmek için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="fe206-157">You can override the `OnCreateBufferedCopy` method to customize this process.</span></span> <span data-ttu-id="fe206-158">Varsayılan olarak, XML içeren bir bellek içi arabellek tarafından döndürülen `OnWriteBodyContents` kullanılır.</span><span class="sxs-lookup"><span data-stu-id="fe206-158">By default, an in-memory buffer that contains the XML returned by `OnWriteBodyContents` is used.</span></span> <span data-ttu-id="fe206-159">`OnCreateBufferedCopy` alan bir `maxBufferSize` tam sayı parametresi; bu yöntemi geçersiz kılarsanız, arabellekler bu maksimum boyutu daha büyük oluşturmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="fe206-159">`OnCreateBufferedCopy` takes a `maxBufferSize` integer parameter; if you override this method, you must not create buffers larger than this maximum size.</span></span>  
  
 <span data-ttu-id="fe206-160">`BodyWriter` Sağlar sınıfını `WriteBodyContents` ve `CreateBufferedCopy` temelde olan yöntemler, ince çevresinde sarmalayıcılar `OnWriteBodyContents` ve `OnCreateBufferedCopy` yöntemleri, sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="fe206-160">The `BodyWriter` class provides the `WriteBodyContents` and `CreateBufferedCopy` methods, which are essentially thin wrappers around `OnWriteBodyContents` and `OnCreateBufferedCopy` methods, respectively.</span></span> <span data-ttu-id="fe206-161">Bu yöntemler bir arabelleğe Gövde yazıcısı birden çok kez erişmediğinden emin olmak için durum denetimi gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="fe206-161">These methods perform state checking to ensure that a non-buffered body writer is not accessed more than once.</span></span> <span data-ttu-id="fe206-162">Yalnızca özel oluştururken, bu yöntemleri doğrudan çağrılır `Message` türetilmiş sınıflar temel `BodyWriters`.</span><span class="sxs-lookup"><span data-stu-id="fe206-162">These methods are called directly only when creating custom `Message` derived classes based on `BodyWriters`.</span></span>  
  
## <a name="creating-fault-messages"></a><span data-ttu-id="fe206-163">Hata iletileri oluşturuluyor</span><span class="sxs-lookup"><span data-stu-id="fe206-163">Creating Fault Messages</span></span>  
 <span data-ttu-id="fe206-164">Belirli kullanabileceğiniz `CreateMessage` SOAP oluşturmak için aşırı yüklemeleri hata iletileri.</span><span class="sxs-lookup"><span data-stu-id="fe206-164">You can use certain `CreateMessage` overloads to create SOAP fault messages.</span></span> <span data-ttu-id="fe206-165">En temel bu alır, bir <xref:System.ServiceModel.Channels.MessageFault> hata tanımlayan nesne.</span><span class="sxs-lookup"><span data-stu-id="fe206-165">The most basic of these takes a <xref:System.ServiceModel.Channels.MessageFault> object that describes the fault.</span></span> <span data-ttu-id="fe206-166">Diğer aşırı yüklemeler, kolaylık olması için sağlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="fe206-166">Other overloads are provided for convenience.</span></span> <span data-ttu-id="fe206-167">İlk aşırı yükleme gibi alır bir `FaultCode` ve neden dize ve oluşturan bir `MessageFault` kullanarak `MessageFault.CreateFault` bu bilgileri kullanarak.</span><span class="sxs-lookup"><span data-stu-id="fe206-167">The first such overload takes a `FaultCode` and a reason string and creates a `MessageFault` using `MessageFault.CreateFault` using this information.</span></span> <span data-ttu-id="fe206-168">Diğer aşırı bir ayrıntı nesnesini alır ve ayrıca geçirir `CreateFault` hata kodu ve nedeni.</span><span class="sxs-lookup"><span data-stu-id="fe206-168">The other overload takes a detail object and also passes it to `CreateFault` together with the fault code and the reason.</span></span> <span data-ttu-id="fe206-169">Örneğin, aşağıdaki işlemi bir hata döndürür.</span><span class="sxs-lookup"><span data-stu-id="fe206-169">For example, the following operation returns a fault.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#4)]
 [!code-vb[C_UsingTheMessageClass#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#4)]  
  
## <a name="extracting-message-body-data"></a><span data-ttu-id="fe206-170">İleti gövde verilerini ayıklama</span><span class="sxs-lookup"><span data-stu-id="fe206-170">Extracting Message Body Data</span></span>  
 <span data-ttu-id="fe206-171">`Message` Sınıfı, kendi gövdesinden bilgilerini ayıklama birçok yolu destekler.</span><span class="sxs-lookup"><span data-stu-id="fe206-171">The `Message` class supports multiple ways of extracting information from its body.</span></span> <span data-ttu-id="fe206-172">Bunlar aşağıdaki kategoride sınıflandırılabilir:</span><span class="sxs-lookup"><span data-stu-id="fe206-172">These can be classified into the following categories:</span></span>  
  
-   <span data-ttu-id="fe206-173">Tek seferde bir XML yazıcısı için yazılan tüm ileti gövdesi alınıyor.</span><span class="sxs-lookup"><span data-stu-id="fe206-173">Getting the entire message body written out at once to an XML writer.</span></span> <span data-ttu-id="fe206-174">Bu olarak adlandırılır *bir iletiyi yazmanın*.</span><span class="sxs-lookup"><span data-stu-id="fe206-174">This is referred to as *writing a message*.</span></span>  
  
-   <span data-ttu-id="fe206-175">Bir XML okuyucusu ileti gövdesi alınıyor.</span><span class="sxs-lookup"><span data-stu-id="fe206-175">Getting an XML reader over the message body.</span></span> <span data-ttu-id="fe206-176">Bu, gerektiği gibi ileti gövdesi parça--parça daha sonra erişimi sağlar.</span><span class="sxs-lookup"><span data-stu-id="fe206-176">This enables you to later access the message body piece-by-piece as required.</span></span> <span data-ttu-id="fe206-177">Bu olarak adlandırılır *bir ileti okuma*.</span><span class="sxs-lookup"><span data-stu-id="fe206-177">This is referred to as *reading a message*.</span></span>  
  
-   <span data-ttu-id="fe206-178">Bir bellek içi arabellek için kendi gövdesi de dahil olmak üzere tüm ileti kopyalanabilir <xref:System.ServiceModel.Channels.MessageBuffer> türü.</span><span class="sxs-lookup"><span data-stu-id="fe206-178">The entire message, including its body, can be copied to an in-memory buffer of the <xref:System.ServiceModel.Channels.MessageBuffer> type.</span></span> <span data-ttu-id="fe206-179">Bu olarak adlandırılır *bir ileti kopyalama*.</span><span class="sxs-lookup"><span data-stu-id="fe206-179">This is referred to as *copying a message*.</span></span>  
  
 <span data-ttu-id="fe206-180">Gövdesi erişebileceğiniz bir `Message` erişilme bağımsız olarak yalnızca bir kez,.</span><span class="sxs-lookup"><span data-stu-id="fe206-180">You can access the body of a `Message` only once, regardless of how it is accessed.</span></span> <span data-ttu-id="fe206-181">İleti nesnesi olan bir `State` özelliği başlangıçta oluşturuldu olarak ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="fe206-181">A message object has a `State` property, which is initially set to Created.</span></span> <span data-ttu-id="fe206-182">Önceki listede açıklanan üç erişim yöntemlerine durumu yazılan, okuma ve kopyalanan, sırasıyla ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="fe206-182">The three access methods described in the preceding list set the state to Written, Read, and Copied, respectively.</span></span> <span data-ttu-id="fe206-183">Ayrıca, bir `Close` yöntemi ayarlayabilirsiniz durumunu Kapalı olarak iletinin gövde içeriği artık gerekli olduğunda.</span><span class="sxs-lookup"><span data-stu-id="fe206-183">Additionally, a `Close` method can set the state to Closed when the message body contents are no longer required.</span></span> <span data-ttu-id="fe206-184">İleti gövdesi, yalnızca Created durumunda erişilebilir ve durumu değiştikten sonra oluşturulan duruma geri dönmek için bir yolu yoktur.</span><span class="sxs-lookup"><span data-stu-id="fe206-184">The message body can be accessed only in the Created state, and there is no way to go back to the Created state after the state has changed.</span></span>  
  
## <a name="writing-messages"></a><span data-ttu-id="fe206-185">İletiler</span><span class="sxs-lookup"><span data-stu-id="fe206-185">Writing Messages</span></span>  
 <span data-ttu-id="fe206-186"><xref:System.ServiceModel.Channels.Message.WriteBodyContents%28System.Xml.XmlDictionaryWriter%29> Yöntemi Yazar gövde içeriğini bir verilen `Message` örneği için belirli bir XML yazıcısı.</span><span class="sxs-lookup"><span data-stu-id="fe206-186">The <xref:System.ServiceModel.Channels.Message.WriteBodyContents%28System.Xml.XmlDictionaryWriter%29> method writes out the body contents of a given `Message` instance to a given XML writer.</span></span> <span data-ttu-id="fe206-187"><xref:System.ServiceModel.Channels.Message.WriteBody%2A> Yöntemi yapar, aynı şekilde, uygun kapsayıcı öğe içinde gövde içeriğini kapsayan dışında (örneğin, <`soap:body`>).</span><span class="sxs-lookup"><span data-stu-id="fe206-187">The <xref:System.ServiceModel.Channels.Message.WriteBody%2A> method does the same, except that it encloses the body contents in the appropriate wrapper element (for example, <`soap:body`>).</span></span> <span data-ttu-id="fe206-188">Son olarak, <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> kaydırma da dahil olmak üzere tüm ileti yazar SOAP zarfını ve üst bilgileri.</span><span class="sxs-lookup"><span data-stu-id="fe206-188">Finally, <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> writes out the entire message, including the wrapping SOAP envelope and the headers.</span></span> <span data-ttu-id="fe206-189">SOAP kapatılırsa (<xref:System.ServiceModel.Channels.Message.Version> olan <xref:System.ServiceModel.Channels.MessageVersion.None?displayProperty=nameWithType>), her üç yöntemi aynı şeyi yapmak: Bunlar ileti gövdesi içeriği yazma.</span><span class="sxs-lookup"><span data-stu-id="fe206-189">If SOAP is turned off (<xref:System.ServiceModel.Channels.Message.Version> is <xref:System.ServiceModel.Channels.MessageVersion.None?displayProperty=nameWithType>), all three methods do the same thing: they write out the message body contents.</span></span>  
  
 <span data-ttu-id="fe206-190">Örneğin, bir dosyaya gelen ileti gövdesinin çıkış aşağıdaki kod yazar.</span><span class="sxs-lookup"><span data-stu-id="fe206-190">For example, the following code writes out the body of an incoming message to a file.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#5)]
 [!code-vb[C_UsingTheMessageClass#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#5)]  
  
 <span data-ttu-id="fe206-191">İki ek yardımcı yöntemler belirli SOAP başlangıç öğesi etiketleri yazın.</span><span class="sxs-lookup"><span data-stu-id="fe206-191">Two additional helper methods write out certain SOAP start element tags.</span></span> <span data-ttu-id="fe206-192">Bu yöntemler, ileti gövdesi erişim sağlanır ve bunların kadar ileti durumu değişmez.</span><span class="sxs-lookup"><span data-stu-id="fe206-192">These methods do not access the message body and so they do not change the message state.</span></span> <span data-ttu-id="fe206-193">Bu güncelleştirmeler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="fe206-193">These include:</span></span>  
  
-   <span data-ttu-id="fe206-194"><xref:System.ServiceModel.Channels.Message.WriteStartBody%2A> Örneğin, başlangıç body öğesi Yazar `<soap:Body>`.</span><span class="sxs-lookup"><span data-stu-id="fe206-194"><xref:System.ServiceModel.Channels.Message.WriteStartBody%2A> writes the start body element, for example, `<soap:Body>`.</span></span>  
  
-   <span data-ttu-id="fe206-195"><xref:System.ServiceModel.Channels.Message.WriteStartEnvelope%2A> Örneğin, başlangıç Zarf öğesine Yazar `<soap:Envelope>`.</span><span class="sxs-lookup"><span data-stu-id="fe206-195"><xref:System.ServiceModel.Channels.Message.WriteStartEnvelope%2A> writes the start envelope element, for example, `<soap:Envelope>`.</span></span>  
  
 <span data-ttu-id="fe206-196">Karşılık gelen son öğe etiketlerini yazmak için çağrı `WriteEndElement` karşılık gelen XML yazıcısı.</span><span class="sxs-lookup"><span data-stu-id="fe206-196">To write the corresponding end element tags, call `WriteEndElement` on the corresponding XML writer.</span></span> <span data-ttu-id="fe206-197">Bu yöntemleri doğrudan nadiren çağrılır.</span><span class="sxs-lookup"><span data-stu-id="fe206-197">These methods are rarely called directly.</span></span>  
  
## <a name="reading-messages"></a><span data-ttu-id="fe206-198">İletileri okuma</span><span class="sxs-lookup"><span data-stu-id="fe206-198">Reading Messages</span></span>  
 <span data-ttu-id="fe206-199">İleti gövdesini okumak için birincil yolu <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A>.</span><span class="sxs-lookup"><span data-stu-id="fe206-199">The primary way to read a message body is to call <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A>.</span></span> <span data-ttu-id="fe206-200">Geri alma bir <xref:System.Xml.XmlDictionaryReader> ileti gövdesini okumak için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fe206-200">You get back an <xref:System.Xml.XmlDictionaryReader> that you can use to read the message body.</span></span> <span data-ttu-id="fe206-201">Unutmayın <xref:System.ServiceModel.Channels.Message> okuma durumu geçişleri hemen sonra <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> denir ve değil kullandığınızda döndürülen XML okuyucusu.</span><span class="sxs-lookup"><span data-stu-id="fe206-201">Note that the <xref:System.ServiceModel.Channels.Message> transitions to the Read state as soon as <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> is called, and not when you use the returned XML reader.</span></span>  
  
 <span data-ttu-id="fe206-202"><xref:System.ServiceModel.Channels.Message.GetBody%2A> Yöntemi de ileti gövdesi olarak yazılmış bir nesne erişmesine olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="fe206-202">The <xref:System.ServiceModel.Channels.Message.GetBody%2A> method also enables you to access the message body as a typed object.</span></span> <span data-ttu-id="fe206-203">Dahili olarak, bu yöntemde `GetReaderAtBodyContents`, ve ayrıca ileti durumuna geçiş <xref:System.ServiceModel.Channels.MessageState.Read> durumu (bkz <xref:System.ServiceModel.Channels.Message.State%2A> özelliği).</span><span class="sxs-lookup"><span data-stu-id="fe206-203">Internally, this method uses `GetReaderAtBodyContents`, and so it also transitions the message state to the <xref:System.ServiceModel.Channels.MessageState.Read> state (see the <xref:System.ServiceModel.Channels.Message.State%2A> property).</span></span>  
  
 <span data-ttu-id="fe206-204">Denetlemek için iyi bir uygulamadır <xref:System.ServiceModel.Channels.Message.IsEmpty%2A> özelliği, içinde olduğu bu durum ileti gövdesi boş ve <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> oluşturur bir <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="fe206-204">It is good practice to check the <xref:System.ServiceModel.Channels.Message.IsEmpty%2A> property, in which case the message body is empty and <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> throws an <xref:System.InvalidOperationException>.</span></span> <span data-ttu-id="fe206-205">Bir alınan ileti (örneğin, yanıt) ise, ayrıca, siz de denetlemek isteyebilirsiniz <xref:System.ServiceModel.Channels.Message.IsFault%2A>, iletinin bir arıza içerip içermediğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="fe206-205">Also, if it is a received message (for example, the reply), you may also want to check <xref:System.ServiceModel.Channels.Message.IsFault%2A>, which indicates whether the message contains a fault.</span></span>  
  
 <span data-ttu-id="fe206-206">En temel aşırı yüklemesini <xref:System.ServiceModel.Channels.Message.GetBody%2A> türü (genel parametre olarak belirtilir) kullanarak bir örneğine ileti gövdesi seri durumdan çıkarır bir <xref:System.Runtime.Serialization.DataContractSerializer> varsayılan ayarlarla ve yapılandırılmış <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A> kota devre dışı.</span><span class="sxs-lookup"><span data-stu-id="fe206-206">The most basic overload of <xref:System.ServiceModel.Channels.Message.GetBody%2A> deserializes the message body into an instance of a type (indicated by the generic parameter) using a <xref:System.Runtime.Serialization.DataContractSerializer> configured with the default settings and with the <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A> quota disabled.</span></span> <span data-ttu-id="fe206-207">Farklı serileştirme motoruna kullanın ya da yapılandırmak istiyorsanız `DataContractSerializer` varsayılan olmayan bir şekilde kullanma <xref:System.ServiceModel.Channels.Message.GetBody%2A> alan aşırı yüklemesini bir <xref:System.Runtime.Serialization.XmlObjectSerializer>.</span><span class="sxs-lookup"><span data-stu-id="fe206-207">If you want to use a different serialization engine, or configure the `DataContractSerializer` in a non-default way, use the <xref:System.ServiceModel.Channels.Message.GetBody%2A> overload that takes an <xref:System.Runtime.Serialization.XmlObjectSerializer>.</span></span>  
  
 <span data-ttu-id="fe206-208">Örneğin, aşağıdaki kod verileri seri hale getirilmiş bir içeren bir ileti gövdesi ayıklayan `Person` nesne ve kişinin adı yazdırır.</span><span class="sxs-lookup"><span data-stu-id="fe206-208">For example, the following code extracts data from a message body that contains a serialized `Person` object and prints out the person’s name.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#6)]
 [!code-vb[C_UsingTheMessageClass#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#6)]  
  
## <a name="copying-a-message-into-a-buffer"></a><span data-ttu-id="fe206-209">Bir iletiyi arabelleğe kopyalama</span><span class="sxs-lookup"><span data-stu-id="fe206-209">Copying a Message into a Buffer</span></span>  
 <span data-ttu-id="fe206-210">Bazen birden çok kez, ileti gövdesi örneğin erişmek için bir yayımcı abone sisteminin bir parçası olarak aynı iletiyi birden çok hedefe iletmek için gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="fe206-210">Sometimes it is necessary to access the message body more than once, for example, to forward the same message to multiple destinations as part of a publisher-subscriber system.</span></span> <span data-ttu-id="fe206-211">Bu durumda, bellekte (gövde dahil) tüm ileti arabellek gereklidir.</span><span class="sxs-lookup"><span data-stu-id="fe206-211">In this case, it is necessary to buffer the entire message (including the body) in memory.</span></span> <span data-ttu-id="fe206-212">Bunu çağırarak yapmak <xref:System.ServiceModel.Channels.Message.CreateBufferedCopy%28System.Int32%29>.</span><span class="sxs-lookup"><span data-stu-id="fe206-212">You can do this by calling <xref:System.ServiceModel.Channels.Message.CreateBufferedCopy%28System.Int32%29>.</span></span> <span data-ttu-id="fe206-213">Bu yöntem, arabellek boyutu temsil eder ve bu boyuttan daha büyük bir arabellek oluşturur, bir tam sayı parametresi alır.</span><span class="sxs-lookup"><span data-stu-id="fe206-213">This method takes an integer parameter that represents the maximum buffer size, and creates a buffer not larger than this size.</span></span> <span data-ttu-id="fe206-214">İleti güvenilmeyen bir kaynaktan geliyorsa, bu güvenli bir değere ayarlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="fe206-214">It is important to set this to a safe value if the message is coming from an untrusted source.</span></span>  
  
 <span data-ttu-id="fe206-215">Arabellek olarak döndürülen bir <xref:System.ServiceModel.Channels.MessageBuffer> örneği.</span><span class="sxs-lookup"><span data-stu-id="fe206-215">The buffer is returned as a <xref:System.ServiceModel.Channels.MessageBuffer> instance.</span></span> <span data-ttu-id="fe206-216">Çeşitli şekillerde arabellekteki verilere erişebilir.</span><span class="sxs-lookup"><span data-stu-id="fe206-216">You can access data in the buffer in several ways.</span></span> <span data-ttu-id="fe206-217">Çağırmak için birincil yoludur <xref:System.ServiceModel.Channels.Message.CreateMessage%2A> oluşturmak için `Message` arabellekteki örnekleri.</span><span class="sxs-lookup"><span data-stu-id="fe206-217">The primary way is to call <xref:System.ServiceModel.Channels.Message.CreateMessage%2A> to create `Message` instances from the buffer.</span></span>  
  
 <span data-ttu-id="fe206-218">Arabellekteki verilere erişmek için başka bir şekilde uygulamaktır <xref:System.Xml.XPath.IXPathNavigable> arabirim <xref:System.ServiceModel.Channels.MessageBuffer> sınıfının temel alınan XML doğrudan erişmek için uygular.</span><span class="sxs-lookup"><span data-stu-id="fe206-218">Another way to access the data in the buffer is to implement the <xref:System.Xml.XPath.IXPathNavigable> interface that the <xref:System.ServiceModel.Channels.MessageBuffer> class implements to access the underlying XML directly.</span></span> <span data-ttu-id="fe206-219">Bazı <xref:System.ServiceModel.Channels.MessageBuffer.CreateNavigator%2A> aşırı oluşturmanıza izin <xref:System.Xml.XPath> bir düğüm kota tarafından korunan gezginlerini ziyaret edilebilir XML düğüm sayısını sınırlama.</span><span class="sxs-lookup"><span data-stu-id="fe206-219">Some <xref:System.ServiceModel.Channels.MessageBuffer.CreateNavigator%2A> overloads allow you to create <xref:System.Xml.XPath> navigators protected by a node quota, limiting the number of XML nodes that can be visited.</span></span> <span data-ttu-id="fe206-220">Bu, uzun işleme zamana dayalı hizmet reddi saldırılarını önlemeye yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="fe206-220">This helps prevent denial of service attacks based on lengthy processing time.</span></span> <span data-ttu-id="fe206-221">Bu teklif, varsayılan olarak devre dışıdır.</span><span class="sxs-lookup"><span data-stu-id="fe206-221">This quote is disabled by default.</span></span> <span data-ttu-id="fe206-222">Bazı `CreateNavigator` aşırı boşluk XML'de nasıl işlenmesi gerektiğini belirtmenize olanak tanır kullanarak <xref:System.Xml.XmlSpace> olan varsayılan ile numaralandırma `XmlSpace.None`.</span><span class="sxs-lookup"><span data-stu-id="fe206-222">Some `CreateNavigator` overloads allow you to specify how white space should be handled in the XML using the <xref:System.Xml.XmlSpace> enumeration, with the default being `XmlSpace.None`.</span></span>  
  
 <span data-ttu-id="fe206-223">İleti arabelleği içeriğine erişmek için bir son yolu kullanarak bir akış içeriğini çıkış yazmaktır <xref:System.ServiceModel.Channels.Message.WriteMessage%2A>.</span><span class="sxs-lookup"><span data-stu-id="fe206-223">A final way to access the contents of a message buffer is to write out its contents to a stream using <xref:System.ServiceModel.Channels.Message.WriteMessage%2A>.</span></span>  
  
 <span data-ttu-id="fe206-224">Aşağıdaki örnek, birlikte çalışma işlemini gösterir. bir `MessageBuffer`: gelen ileti birden çok alıcıya iletilen ve ardından bir dosyaya oturum.</span><span class="sxs-lookup"><span data-stu-id="fe206-224">The following example demonstrates the process of working with a `MessageBuffer`: an incoming message is forwarded to multiple recipients, and then logged to a file.</span></span> <span data-ttu-id="fe206-225">İleti gövdesi yalnızca bir kez ardından erişilebilir olduğu arabelleğe alma olmadan bu mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="fe206-225">Without buffering, this is not possible, because the message body can then be accessed only once.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#7)]
 [!code-vb[C_UsingTheMessageClass#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#7)]  
  
 <span data-ttu-id="fe206-226">`MessageBuffer` Sınıfı önemli diğer üyelere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="fe206-226">The `MessageBuffer` class has other members worth noting.</span></span> <span data-ttu-id="fe206-227"><xref:System.ServiceModel.Channels.MessageBuffer.Close%2A> Yöntemi arabellek içeriği artık gerekli olduğunda kaynakları serbest bırakmak için çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="fe206-227">The <xref:System.ServiceModel.Channels.MessageBuffer.Close%2A> method can be called to free resources when the buffer contents are no longer required.</span></span> <span data-ttu-id="fe206-228"><xref:System.ServiceModel.Channels.MessageBuffer.BufferSize%2A> Özelliği ayrılan arabelleğin boyutunu döndürür.</span><span class="sxs-lookup"><span data-stu-id="fe206-228">The <xref:System.ServiceModel.Channels.MessageBuffer.BufferSize%2A> property returns the size of the allocated buffer.</span></span> <span data-ttu-id="fe206-229"><xref:System.ServiceModel.Channels.MessageBuffer.MessageContentType%2A> Özellik, iletinin MIME içerik türünü döndürür.</span><span class="sxs-lookup"><span data-stu-id="fe206-229">The <xref:System.ServiceModel.Channels.MessageBuffer.MessageContentType%2A> property returns the MIME content type of the message.</span></span>  
  
## <a name="accessing-the-message-body-for-debugging"></a><span data-ttu-id="fe206-230">Hata ayıklama ileti gövdesi erişme</span><span class="sxs-lookup"><span data-stu-id="fe206-230">Accessing the Message Body for Debugging</span></span>  
 <span data-ttu-id="fe206-231">Hata ayıklama amacıyla çağırabilirsiniz <xref:System.ServiceModel.Channels.Message.ToString%2A> iletinin gösterimini bir dize olarak almak için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="fe206-231">For debugging purposes, you can call the <xref:System.ServiceModel.Channels.Message.ToString%2A> method to get a representation of the message as a string.</span></span> <span data-ttu-id="fe206-232">Bu gösterim, genellikle, metin Kodlayıcı ile kodlanmış, XML daha iyi okunabilirlik için biçimlendirilir dışında bir ileti kablo görüneceği şekilde eşleşir.</span><span class="sxs-lookup"><span data-stu-id="fe206-232">This representation generally matches the way a message would look on the wire if it were encoded with the text encoder, except that the XML would be better formatted for human readability.</span></span> <span data-ttu-id="fe206-233">Bunun tek istisnası, ileti gövdesi ' dir.</span><span class="sxs-lookup"><span data-stu-id="fe206-233">The one exception to this is the message body.</span></span> <span data-ttu-id="fe206-234">Gövdesi yalnızca bir kez okuyabilir ve `ToString` ileti durumu değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="fe206-234">The body can be read only once, and `ToString` does not change the message state.</span></span> <span data-ttu-id="fe206-235">Bu nedenle, `ToString` yöntem gövdesi erişmek mümkün olmayabilir ve bir yer tutucu (örneğin, "..." yerine ya da üç nokta) yerine ileti gövdesi.</span><span class="sxs-lookup"><span data-stu-id="fe206-235">Therefore, the `ToString` method might not be able to access the body and might substitute a placeholder (for example, "…" or three dots) instead of the message body.</span></span> <span data-ttu-id="fe206-236">Bu nedenle, kullanmayın `ToString` ileti gövdesi içeriğini önemliyse iletilerini günlüğe kaydetmek için.</span><span class="sxs-lookup"><span data-stu-id="fe206-236">Therefore, do not use `ToString` to log messages if the body content of the messages is important.</span></span>  
  
## <a name="accessing-other-message-parts"></a><span data-ttu-id="fe206-237">Diğer ileti bölümlerini erişme</span><span class="sxs-lookup"><span data-stu-id="fe206-237">Accessing Other Message Parts</span></span>  
 <span data-ttu-id="fe206-238">İleti gövdesi içeriğini dışında hakkında bilgilere erişmek için çeşitli özellikler sağlanır.</span><span class="sxs-lookup"><span data-stu-id="fe206-238">Various properties are provided to access information about the message other than its body contents.</span></span> <span data-ttu-id="fe206-239">Ancak, ileti kapatıldıktan sonra bu çağrılamaz:</span><span class="sxs-lookup"><span data-stu-id="fe206-239">However, these cannot be called once the message has been closed:</span></span>  
  
-   <span data-ttu-id="fe206-240"><xref:System.ServiceModel.Channels.Message.Headers%2A> Özelliğini ileti üstbilgilerini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="fe206-240">The <xref:System.ServiceModel.Channels.Message.Headers%2A> property represents the message headers.</span></span> <span data-ttu-id="fe206-241">Bu konunun ilerleyen bölümlerindeki "Başlıklarında ile çalışma" bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="fe206-241">See the section on "Working with Headers" later in this topic.</span></span>  
  
-   <span data-ttu-id="fe206-242"><xref:System.ServiceModel.Channels.Message.Properties%2A> Özelliğini iletiye eklenmiş adlandırılmış veri ileti gönderildiğinde genellikle yayılan değil parçalarıdır ileti özelliklerini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="fe206-242">The <xref:System.ServiceModel.Channels.Message.Properties%2A> property represents the message properties, which are pieces of named data attached to the message that do not generally get emitted when the message is sent.</span></span> <span data-ttu-id="fe206-243">Bu konunun ilerleyen bölümlerindeki "Özellikler ile çalışma" bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="fe206-243">See the section on "Working with Properties" later in this topic.</span></span>  
  
-   <span data-ttu-id="fe206-244"><xref:System.ServiceModel.Channels.Message.Version%2A> Özelliği belirten iletiyle ilişkili SOAP ve WS-Addressing sürümü veya `None` SOAP devre dışı.</span><span class="sxs-lookup"><span data-stu-id="fe206-244">The <xref:System.ServiceModel.Channels.Message.Version%2A> property indicates the SOAP and WS-Addressing version associated with the message, or `None` if SOAP is disabled.</span></span>  
  
-   <span data-ttu-id="fe206-245"><xref:System.ServiceModel.Channels.Message.IsFault%2A> Özelliği döndürür `true` ileti bir SOAP hatası iletisi ise.</span><span class="sxs-lookup"><span data-stu-id="fe206-245">The <xref:System.ServiceModel.Channels.Message.IsFault%2A> property returns `true` if the message is a SOAP fault message.</span></span>  
  
-   <span data-ttu-id="fe206-246"><xref:System.ServiceModel.Channels.Message.IsEmpty%2A> Özelliği döndürür `true` ileti boşsa.</span><span class="sxs-lookup"><span data-stu-id="fe206-246">The <xref:System.ServiceModel.Channels.Message.IsEmpty%2A> property returns `true` if the message is empty.</span></span>  
  
 <span data-ttu-id="fe206-247">Kullanabileceğiniz <xref:System.ServiceModel.Channels.Message.GetBodyAttribute%28System.String%2CSystem.String%29> gövdesi sarmalayıcı öğe üzerinde belirli bir özniteliği erişim yöntemi (örneğin, `<soap:Body>`) belirli bir ad ve ad alanı tarafından tanımlanan.</span><span class="sxs-lookup"><span data-stu-id="fe206-247">You can use the <xref:System.ServiceModel.Channels.Message.GetBodyAttribute%28System.String%2CSystem.String%29> method to access a particular attribute on the body wrapper element (for example, `<soap:Body>`) identified by a particular name and namespace.</span></span> <span data-ttu-id="fe206-248">Böyle bir öznitelik bulunamazsa `null` döndürülür.</span><span class="sxs-lookup"><span data-stu-id="fe206-248">If such an attribute is not found, `null` is returned.</span></span> <span data-ttu-id="fe206-249">Bu yöntem yalnızca çağrılabilir `Message` (ileti gövdesi yok henüz eriştiğini olduğunda) Created durumunda olmadığı.</span><span class="sxs-lookup"><span data-stu-id="fe206-249">This method can be called only when the `Message` is in the Created state (when the message body has not yet been accessed).</span></span>  
  
## <a name="working-with-headers"></a><span data-ttu-id="fe206-250">Üst bilgileri ile çalışma</span><span class="sxs-lookup"><span data-stu-id="fe206-250">Working with Headers</span></span>  
 <span data-ttu-id="fe206-251">A `Message` adlı adlandırılmış XML parçalarının herhangi bir sayıda içerebilir *üstbilgileri*.</span><span class="sxs-lookup"><span data-stu-id="fe206-251">A `Message` can contain any number of named XML fragments, called *headers*.</span></span> <span data-ttu-id="fe206-252">Her parça, normalde bir SOAP üst bilgisi için eşler.</span><span class="sxs-lookup"><span data-stu-id="fe206-252">Each fragment normally maps to a SOAP header.</span></span> <span data-ttu-id="fe206-253">Üst bilgiler aracılığıyla erişilir `Headers` türünün özelliği <xref:System.ServiceModel.Channels.MessageHeaders>.</span><span class="sxs-lookup"><span data-stu-id="fe206-253">Headers are accessed through the `Headers` property of type <xref:System.ServiceModel.Channels.MessageHeaders>.</span></span> <span data-ttu-id="fe206-254"><xref:System.ServiceModel.Channels.MessageHeaders> oluşan bir koleksiyondur <xref:System.ServiceModel.Channels.MessageHeaderInfo> üzerinden nesneleri ve ayrı üstbilgi erişilebilir kendi <xref:System.Collections.IEnumerable> arabirimi ya da kendi ındexer'dan.</span><span class="sxs-lookup"><span data-stu-id="fe206-254"><xref:System.ServiceModel.Channels.MessageHeaders> is a collection of <xref:System.ServiceModel.Channels.MessageHeaderInfo> objects, and individual headers can be accessed through its <xref:System.Collections.IEnumerable> interface or through its indexer.</span></span> <span data-ttu-id="fe206-255">Örneğin, aşağıdaki kod tüm üst bilgilerinde adlarını listeler bir `Message`.</span><span class="sxs-lookup"><span data-stu-id="fe206-255">For example, the following code lists the names of all the headers in a `Message`.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#8)]
 [!code-vb[C_UsingTheMessageClass#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#8)]  
  
#### <a name="adding-removing-finding-headers"></a><span data-ttu-id="fe206-256">Ekleme, kaldırma, üst bilgileri bulma</span><span class="sxs-lookup"><span data-stu-id="fe206-256">Adding, Removing, Finding Headers</span></span>  
 <span data-ttu-id="fe206-257">Kullanarak tüm mevcut üst sonunda yeni üst bilgi ekleyebileceğiniz <xref:System.ServiceModel.Channels.MessageHeaders.Add%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="fe206-257">You can add a new header at the end of all existing headers using the <xref:System.ServiceModel.Channels.MessageHeaders.Add%2A> method.</span></span> <span data-ttu-id="fe206-258">Kullanabileceğiniz <xref:System.ServiceModel.Channels.MessageHeaders.Insert%2A> belirli bir dizinden bir başlık eklemek için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="fe206-258">You can use the <xref:System.ServiceModel.Channels.MessageHeaders.Insert%2A> method to insert a header at a particular index.</span></span> <span data-ttu-id="fe206-259">Mevcut üst bilgileri için eklenen öğe kaydırılan.</span><span class="sxs-lookup"><span data-stu-id="fe206-259">Existing headers are shifted for the inserted item.</span></span> <span data-ttu-id="fe206-260">Üst bilgileri kendi dizini göre sıralanır ve ilk kullanılabilir dizini 0'dır.</span><span class="sxs-lookup"><span data-stu-id="fe206-260">Headers are ordered according to their index, and the first available index is 0.</span></span> <span data-ttu-id="fe206-261">Çeşitli kullanabileceğiniz <xref:System.ServiceModel.Channels.MessageHeaders.CopyHeadersFrom%2A> farklı bir üst bilgilerini eklemek için yöntem aşırı yüklemeleri `Message` veya `MessageHeaders` örneği.</span><span class="sxs-lookup"><span data-stu-id="fe206-261">You can use the various <xref:System.ServiceModel.Channels.MessageHeaders.CopyHeadersFrom%2A> method overloads to add headers from a different `Message` or `MessageHeaders` instance.</span></span> <span data-ttu-id="fe206-262">Başkalarının tümünün kopyalarken bazı aşırı yüklemeler tek bir üstbilgi kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="fe206-262">Some overloads copy one individual header, while others copy all of them.</span></span> <span data-ttu-id="fe206-263"><xref:System.ServiceModel.Channels.MessageHeaders.Clear%2A> Yöntemi, tüm üst bilgilerini kaldırır.</span><span class="sxs-lookup"><span data-stu-id="fe206-263">The <xref:System.ServiceModel.Channels.MessageHeaders.Clear%2A> method removes all headers.</span></span> <span data-ttu-id="fe206-264"><xref:System.ServiceModel.Channels.MessageHeaders.RemoveAt%2A> Yöntemi, bir üst bilgisi (tüm üstbilgileri sonra kaydırma) belirli bir dizinden kaldırır.</span><span class="sxs-lookup"><span data-stu-id="fe206-264">The <xref:System.ServiceModel.Channels.MessageHeaders.RemoveAt%2A> method removes a header at a particular index (shifting all headers after it).</span></span> <span data-ttu-id="fe206-265"><xref:System.ServiceModel.Channels.MessageHeaders.RemoveAll%2A> Yöntemi, belirli bir ad ve ad alanına sahip tüm başlıkları kaldırır.</span><span class="sxs-lookup"><span data-stu-id="fe206-265">The <xref:System.ServiceModel.Channels.MessageHeaders.RemoveAll%2A> method removes all headers with a particular name and namespace.</span></span>  
  
 <span data-ttu-id="fe206-266">Kullanarak bir özel üst bilgi alma <xref:System.ServiceModel.Channels.MessageHeaders.FindHeader%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="fe206-266">Retrieve a particular header using the <xref:System.ServiceModel.Channels.MessageHeaders.FindHeader%2A> method.</span></span> <span data-ttu-id="fe206-267">Bu yöntem bulmak için üst bilgi ad alanı ve adını alır ve dizinini döndürür.</span><span class="sxs-lookup"><span data-stu-id="fe206-267">This method takes the name and namespace of the header to find, and returns its index.</span></span> <span data-ttu-id="fe206-268">Üst bilgi birden çok kez oluşursa bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="fe206-268">If the header occurs more than once, an exception is thrown.</span></span> <span data-ttu-id="fe206-269">Üst bilgi bulunamadı -1 döndürür.</span><span class="sxs-lookup"><span data-stu-id="fe206-269">If the header is not found, it returns -1.</span></span>  
  
 <span data-ttu-id="fe206-270">SOAP üstbilgisi modelinde, üst bilgiler olabilir bir `Actor` hedeflenen alıcı üst bilgisi belirten bir değer.</span><span class="sxs-lookup"><span data-stu-id="fe206-270">In the SOAP header model, headers can have an `Actor` value that specifies the intended recipient of the header.</span></span> <span data-ttu-id="fe206-271">En temel `FindHeader` aşırı yükleme yalnızca ileti için ultimate alıcı yönelik üst bilgileri arar.</span><span class="sxs-lookup"><span data-stu-id="fe206-271">The most basic `FindHeader` overload searches only headers intended for the ultimate receiver of the message.</span></span> <span data-ttu-id="fe206-272">Başka bir aşırı ancak hangi belirtmenize olanak tanıyan `Actor` değerleri aramaya dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="fe206-272">However, another overload enables you to specify which `Actor` values are included in the search.</span></span> <span data-ttu-id="fe206-273">Daha fazla bilgi için SOAP belirtimine bakın.</span><span class="sxs-lookup"><span data-stu-id="fe206-273">For more information, see the SOAP specification.</span></span>  
  
 <span data-ttu-id="fe206-274">A <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> yöntemi üst bilgiler kopyalamak için sağlanan bir <xref:System.ServiceModel.Channels.MessageHeaders> bir dizi koleksiyon <xref:System.ServiceModel.Channels.MessageHeaderInfo> nesneleri.</span><span class="sxs-lookup"><span data-stu-id="fe206-274">A <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> method is provided to copy headers from a <xref:System.ServiceModel.Channels.MessageHeaders> collection to an array of <xref:System.ServiceModel.Channels.MessageHeaderInfo> objects.</span></span>  
  
 <span data-ttu-id="fe206-275">Bir üst bilgisindeki XML verilerine erişmek için çağırabilirsiniz <xref:System.ServiceModel.Channels.MessageHeaders.GetReaderAtHeader%2A> ve özel üstbilgi dizini için bir XML okuyucusu döndürür.</span><span class="sxs-lookup"><span data-stu-id="fe206-275">To access the XML data in a header, you can call <xref:System.ServiceModel.Channels.MessageHeaders.GetReaderAtHeader%2A> and return an XML reader for the specific header index.</span></span> <span data-ttu-id="fe206-276">Üst bilgi içeriği bir nesnede seri durumdan çıkarılacak istiyorsanız kullanın <xref:System.ServiceModel.Channels.MessageHeaders.GetHeader%60%601%28System.Int32%29> veya diğer aşırı yüklemeleri.</span><span class="sxs-lookup"><span data-stu-id="fe206-276">If you want to deserialize the header contents into an object, use <xref:System.ServiceModel.Channels.MessageHeaders.GetHeader%60%601%28System.Int32%29> or one of the other overloads.</span></span> <span data-ttu-id="fe206-277">En temel aşırı üst bilgileri kullanarak seri durumdan <xref:System.Runtime.Serialization.DataContractSerializer> yapılandırılmış varsayılan yolu.</span><span class="sxs-lookup"><span data-stu-id="fe206-277">The most basic overloads deserialize headers using the <xref:System.Runtime.Serialization.DataContractSerializer> configured in the default way.</span></span> <span data-ttu-id="fe206-278">Farklı bir serileştirici veya farklı bir yapılandırma kullanmak istiyorsanız `DataContractSerializer`, aşırı birini bir `XmlObjectSerializer`.</span><span class="sxs-lookup"><span data-stu-id="fe206-278">If you want to use a different serializer or a different configuration of the `DataContractSerializer`, use one of the overloads that take an `XmlObjectSerializer`.</span></span> <span data-ttu-id="fe206-279">Üst bilgi adı, ad ve isteğe bağlı olarak bir listesini alan aşırı yükleme yapılmıştır `Actor` değerler yerine bir dizin; bu bir birleşimidir `FindHeader` ve `GetHeader`.</span><span class="sxs-lookup"><span data-stu-id="fe206-279">There are also overloads that take the header name, namespace, and optionally a list of `Actor` values instead of an index; this is a combination of `FindHeader` and `GetHeader`.</span></span>  
  
## <a name="working-with-properties"></a><span data-ttu-id="fe206-280">Özellikleriyle çalışma</span><span class="sxs-lookup"><span data-stu-id="fe206-280">Working with Properties</span></span>  
 <span data-ttu-id="fe206-281">A `Message` örnek, rastgele bir sayıdan rasgele türden adlandırılmış nesnelerin içerebilir.</span><span class="sxs-lookup"><span data-stu-id="fe206-281">A `Message` instance can contain an arbitrary number of named objects of arbitrary types.</span></span> <span data-ttu-id="fe206-282">Bu koleksiyonu üzerinden erişilen `Properties` türünün özelliği `MessageProperties`.</span><span class="sxs-lookup"><span data-stu-id="fe206-282">This collection is accessed through the `Properties` property of type `MessageProperties`.</span></span> <span data-ttu-id="fe206-283">Koleksiyon uygular <xref:System.Collections.Generic.IDictionary%602> arabirim ve eşleme görevi gören <xref:System.String> için <xref:System.Object>.</span><span class="sxs-lookup"><span data-stu-id="fe206-283">The collection implements the <xref:System.Collections.Generic.IDictionary%602> interface and acts as a mapping from <xref:System.String> to <xref:System.Object>.</span></span> <span data-ttu-id="fe206-284">Normalde, özellik değerlerini doğrudan ileti herhangi bir bölümü için eşlemeyin, ancak bunun yerine çeşitli ileti işleme ipuçları WCF kanalı yığını veya çok çeşitli kanallara sağlar <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> hizmet çerçevesi.</span><span class="sxs-lookup"><span data-stu-id="fe206-284">Normally, property values do not map directly to any part of the message on the wire, but rather provide various message processing hints to the various channels in the WCF channel stack or to the <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> service framework.</span></span> <span data-ttu-id="fe206-285">Bir örnek için bkz. [aktarım veri mimarisine genel bakış](../../../../docs/framework/wcf/feature-details/data-transfer-architectural-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fe206-285">For an example, see [Data Transfer Architectural Overview](../../../../docs/framework/wcf/feature-details/data-transfer-architectural-overview.md).</span></span>  
  
## <a name="inheriting-from-the-message-class"></a><span data-ttu-id="fe206-286">İleti sınıfından devralma</span><span class="sxs-lookup"><span data-stu-id="fe206-286">Inheriting from the Message Class</span></span>  
 <span data-ttu-id="fe206-287">Yerleşik türleri kullanılarak oluşturulan olursa `CreateMessage` değil gereksinimlerinizi karşılayacak, türetilen bir sınıf oluşturmanız `Message` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="fe206-287">If the built-in message types created using `CreateMessage` do not meet your requirements, create a class that derives from the `Message` class.</span></span>  
  
### <a name="defining-the-message-body-contents"></a><span data-ttu-id="fe206-288">İleti gövde içeriğini tanımlama</span><span class="sxs-lookup"><span data-stu-id="fe206-288">Defining the Message Body Contents</span></span>  
 <span data-ttu-id="fe206-289">Üç birincil teknikleri mevcut bir ileti gövdesi içindeki verilere erişmek için: bir arabelleğe kopyalayarak yazma ve okuma.</span><span class="sxs-lookup"><span data-stu-id="fe206-289">Three primary techniques exist for accessing data within a message body: writing, reading, and copying it to a buffer.</span></span> <span data-ttu-id="fe206-290">Bu işlemler, sonuçta neden <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A>, <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents%2A>, ve <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> , sırasıyla, türetilmiş sınıfınızın çağrılan yöntemler `Message`.</span><span class="sxs-lookup"><span data-stu-id="fe206-290">These operations ultimately result in the <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A>, <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents%2A>, and <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> methods being called, respectively, on your derived class of `Message`.</span></span> <span data-ttu-id="fe206-291">Temel `Message` sınıfı garanti eder Bu yöntemlerden yalnızca biri her biri için çağrılır `Message` örneği ve onu birden çok kez çağrıldığını değil.</span><span class="sxs-lookup"><span data-stu-id="fe206-291">The base `Message` class guarantees that only one of these methods is called for each `Message` instance, and that it is not called more than once.</span></span> <span data-ttu-id="fe206-292">Temel sınıf yöntemleri bir kapatılmış iletisinde çağırılır değil olduğunu da sağlar.</span><span class="sxs-lookup"><span data-stu-id="fe206-292">The base class also ensures that the methods are not called on a closed message.</span></span> <span data-ttu-id="fe206-293">Uygulamanızda ileti durumu izlemek için gerek yoktur.</span><span class="sxs-lookup"><span data-stu-id="fe206-293">There is no need to track the message state in your implementation.</span></span>  
  
 <span data-ttu-id="fe206-294"><xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A> bir soyut metottur ve uygulanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="fe206-294"><xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A> is an abstract method and must be implemented.</span></span> <span data-ttu-id="fe206-295">İleti gövdesi içeriğini tanımlamanın en basit yolu, bu yöntemi kullanarak yazmaktır.</span><span class="sxs-lookup"><span data-stu-id="fe206-295">The most basic way to define the body contents of your message is to write using this method.</span></span> <span data-ttu-id="fe206-296">Örneğin, aşağıdaki ileti 1 ila 20 100.000 rastgele sayılar içerir.</span><span class="sxs-lookup"><span data-stu-id="fe206-296">For example, the following message contains 100,000 random numbers from 1 to 20.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#9)]
 [!code-vb[C_UsingTheMessageClass#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#9)]  
  
 <span data-ttu-id="fe206-297"><xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents> Ve <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> yöntemi çoğu durumda işe varsayılan uygulamaları vardır.</span><span class="sxs-lookup"><span data-stu-id="fe206-297">The <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents> and <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> methods have default implementations that work for most cases.</span></span> <span data-ttu-id="fe206-298">Varsayılan uygulamaları çağrı <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A>, sonuçları arabelleğe ve elde edilen arabellek ile çalışabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fe206-298">The default implementations call <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A>, buffer the results, and work with the resulting buffer.</span></span> <span data-ttu-id="fe206-299">Ancak, bazı durumlarda bu yeterli olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="fe206-299">However, in some cases this may not be enough.</span></span> <span data-ttu-id="fe206-300">Önceki örnekte, arzu olmayabilir arabelleğe alınan 100.000 XML öğeleri ileti sonuçları okunuyor.</span><span class="sxs-lookup"><span data-stu-id="fe206-300">In the preceding example, reading the message results in 100,000 XML elements being buffered, which might not be desirable.</span></span> <span data-ttu-id="fe206-301">Geçersiz kılmak isteyebilirsiniz <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents> özel döndürülecek <xref:System.Xml.XmlDictionaryReader> türetilmiş rastgele sayıları yukarı hizmet veren sınıf.</span><span class="sxs-lookup"><span data-stu-id="fe206-301">You might want to override <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents> to return a custom <xref:System.Xml.XmlDictionaryReader> derived class that serves up random numbers.</span></span> <span data-ttu-id="fe206-302">Ardından kılabilirsiniz <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A> okuyucu kullanmak için <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents> aşağıdaki örnekte gösterilen şekilde yöntemi döndürür.</span><span class="sxs-lookup"><span data-stu-id="fe206-302">You can then override <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A> to use the reader that the <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents> method returns, as shown in the following example.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#10)]
 [!code-vb[C_UsingTheMessageClass#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#10)]  
  
 <span data-ttu-id="fe206-303">Benzer şekilde, geçersiz kılmak isteyebilirsiniz `OnCreateBufferedCopy` kendi döndürülecek `MessageBuffer` türetilmiş sınıf.</span><span class="sxs-lookup"><span data-stu-id="fe206-303">Similarly, you might want to override `OnCreateBufferedCopy` to return your own `MessageBuffer` derived class.</span></span>  
  
 <span data-ttu-id="fe206-304">İleti gövdesi içeriğini sağlamanın yanı sıra ileti türetilmiş sınıfınızın ayrıca kılmalı `Version`, `Headers`, ve `Properties` özellikleri.</span><span class="sxs-lookup"><span data-stu-id="fe206-304">In addition to providing message body contents, your message derived class must also override the `Version`, `Headers`, and `Properties` properties.</span></span>  
  
 <span data-ttu-id="fe206-305">Bir iletinin bir kopyasını oluşturma, kopyalama ait ileti üstbilgilerini orijinal kullandığına dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="fe206-305">Note that if you create a copy of a message, the copy uses the message headers from the original.</span></span>  
  
### <a name="other-members-that-can-be-overridden"></a><span data-ttu-id="fe206-306">Geçersiz kılınabilir diğer üyeleri</span><span class="sxs-lookup"><span data-stu-id="fe206-306">Other Members that Can Be Overridden</span></span>  
 <span data-ttu-id="fe206-307">Geçersiz kılabilirsiniz <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A>, <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A>, ve <xref:System.ServiceModel.Channels.Message.OnWriteStartBody%2A> yöntemleri nasıl SOAP Zarfı, SOAP üstbilgileri ve SOAP gövdesi öğe başlangıç etiketleri belirtmek için yazılır. Bu normalde karşılık `<soap:Envelope>`, `<soap:Header>`, ve `<soap:Body>`.</span><span class="sxs-lookup"><span data-stu-id="fe206-307">You can override the <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A>, <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A>, and <xref:System.ServiceModel.Channels.Message.OnWriteStartBody%2A> methods to specify how the SOAP envelope, SOAP headers, and SOAP body element start tags are written out. These normally correspond to `<soap:Envelope>`, `<soap:Header>`, and `<soap:Body>`.</span></span> <span data-ttu-id="fe206-308">Bu yöntemlerin herhangi bir şey IF yazmalısınız normalde <xref:System.ServiceModel.Channels.Message.Version> özelliği döndürür <xref:System.ServiceModel.Channels.MessageVersion.None>.</span><span class="sxs-lookup"><span data-stu-id="fe206-308">These methods should normally not write anything out if the <xref:System.ServiceModel.Channels.Message.Version> property returns <xref:System.ServiceModel.Channels.MessageVersion.None>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="fe206-309">Varsayılan uygulaması `OnGetReaderAtBodyContents` çağrıları `OnWriteStartEnvelope` ve `OnWriteStartBody` çağırmadan önce `OnWriteBodyContents` ve sonuçları arabelleğe alma.</span><span class="sxs-lookup"><span data-stu-id="fe206-309">The default implementation of `OnGetReaderAtBodyContents` calls `OnWriteStartEnvelope` and `OnWriteStartBody` before calling `OnWriteBodyContents` and buffering the results.</span></span> <span data-ttu-id="fe206-310">Üstbilgileri dışarı değil.</span><span class="sxs-lookup"><span data-stu-id="fe206-310">Headers are not written out.</span></span>  
  
 <span data-ttu-id="fe206-311">Geçersiz kılma <xref:System.ServiceModel.Channels.Message.OnWriteMessage%2A> , yapıları tüm ileti yapılandırılmıştır şeklini değiştirmek için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="fe206-311">Override the <xref:System.ServiceModel.Channels.Message.OnWriteMessage%2A> method to change the way the entire message is constructed from its various pieces.</span></span> <span data-ttu-id="fe206-312">`OnWriteMessage` Yöntemi çağrılır <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> ve varsayılan <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> uygulaması.</span><span class="sxs-lookup"><span data-stu-id="fe206-312">The `OnWriteMessage` method is called from <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> and from the default <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> implementation.</span></span> <span data-ttu-id="fe206-313">Bu geçersiz kılma Not <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> en iyi yöntem değildir.</span><span class="sxs-lookup"><span data-stu-id="fe206-313">Note that overriding <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> is not a best practice.</span></span> <span data-ttu-id="fe206-314">Uygun geçersiz kılma daha iyidir `On` yöntemleri (örneğin, <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A>, <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A>, ve <xref:System.ServiceModel.Channels.BodyWriter.OnWriteBodyContents%2A>.</span><span class="sxs-lookup"><span data-stu-id="fe206-314">It is better to override the appropriate `On` methods (for example, <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A>, <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A>, and <xref:System.ServiceModel.Channels.BodyWriter.OnWriteBodyContents%2A>.</span></span>  
  
 <span data-ttu-id="fe206-315">Geçersiz kılma <xref:System.ServiceModel.Channels.Message.OnBodyToString%2A> , ileti gövdesi hata ayıklama sırasında nasıl temsil edildiğini geçersiz kılmak için.</span><span class="sxs-lookup"><span data-stu-id="fe206-315">Override <xref:System.ServiceModel.Channels.Message.OnBodyToString%2A> to override how your message body is represented during debugging.</span></span> <span data-ttu-id="fe206-316">Üç nokta göstermek için ("...") varsayılandır.</span><span class="sxs-lookup"><span data-stu-id="fe206-316">The default is to represent it as three dots ("…").</span></span> <span data-ttu-id="fe206-317">İleti durumu kapalı dışındaki herhangi bir şey olduğunda bu yöntem birden çok kez çağrılabilir dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="fe206-317">Note that this method can be called multiple times when the message state is anything other than Closed.</span></span> <span data-ttu-id="fe206-318">Bu yöntemin bir uygulaması, hiçbir zaman (örneğin, yalnızca iletme akışından okuma) yalnızca bir kez gerçekleştirilmesi gereken herhangi bir işlem neden olmaz.</span><span class="sxs-lookup"><span data-stu-id="fe206-318">An implementation of this method should never cause any action that must be performed only once (such as reading from a forward-only stream).</span></span>  
  
 <span data-ttu-id="fe206-319">Geçersiz kılma <xref:System.ServiceModel.Channels.Message.OnGetBodyAttribute%2A> SOAP gövdesi öğede öznitelikleri erişime izin vermek için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="fe206-319">Override the <xref:System.ServiceModel.Channels.Message.OnGetBodyAttribute%2A> method to allow access to attributes on the SOAP body element.</span></span> <span data-ttu-id="fe206-320">Bu yöntem herhangi bir sayıda kez çağrılabilir ancak `Message` temel tür ileti Created durumunda olduğunda, yalnızca çağrıldığını güvence altına alır.</span><span class="sxs-lookup"><span data-stu-id="fe206-320">This method can be called any number of times, but the `Message` base type guarantees that it is only called when the message is in the Created state.</span></span> <span data-ttu-id="fe206-321">Bir uygulamada durumunu denetlemek için gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="fe206-321">It is not required to check the state in an implementation.</span></span> <span data-ttu-id="fe206-322">Her zaman varsayılan uygulamasını döndürür `null`, body öğesi üzerinde hiçbir öznitelik olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="fe206-322">The default implementation always returns `null`, which indicates that there are no attributes on the body element.</span></span>  
  
 <span data-ttu-id="fe206-323">Varsa, `Message` ileti gövdesi artık gerekli olmadığında, nesne herhangi özel bir temizleme işlemi yapması gerekir, geçersiz kılabilirsiniz <xref:System.ServiceModel.Channels.Message.OnClose%2A>.</span><span class="sxs-lookup"><span data-stu-id="fe206-323">If your `Message` object must do any special cleanup when the message body is no longer required, you can override <xref:System.ServiceModel.Channels.Message.OnClose%2A>.</span></span> <span data-ttu-id="fe206-324">Varsayılan uygulama, hiçbir şey yapmaz.</span><span class="sxs-lookup"><span data-stu-id="fe206-324">The default implementation does nothing.</span></span>  
  
 <span data-ttu-id="fe206-325">`IsEmpty` Ve `IsFault` özellikleri geçersiz kılınabilir.</span><span class="sxs-lookup"><span data-stu-id="fe206-325">The `IsEmpty` and `IsFault` properties can be overridden.</span></span> <span data-ttu-id="fe206-326">Varsayılan olarak, her ikisi de döndürür `false`.</span><span class="sxs-lookup"><span data-stu-id="fe206-326">By default, both return `false`.</span></span>
