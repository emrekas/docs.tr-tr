---
title: Dağıtılmış İşlemler
ms.date: 03/30/2017
ms.assetid: 718b257c-bcb2-408e-b004-a7b0adb1c176
ms.openlocfilehash: 89d94e94ea74c73a7f68f6052291c95a7c96f0d6
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59150208"
---
# <a name="distributed-transactions"></a><span data-ttu-id="686d1-102">Dağıtılmış İşlemler</span><span class="sxs-lookup"><span data-stu-id="686d1-102">Distributed Transactions</span></span>
<span data-ttu-id="686d1-103">Bir işlem (kaydetme) başarılı ya da başka şeylerin yanında bir birim olarak başarısız oluyor (iptal için) ilgili görevleri kümesidir.</span><span class="sxs-lookup"><span data-stu-id="686d1-103">A transaction is a set of related tasks that either succeeds (commit) or fails (abort) as a unit, among other things.</span></span> <span data-ttu-id="686d1-104">A *dağıtılmış işlem* çeşitli kaynaklar etkileyen bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="686d1-104">A *distributed transaction* is a transaction that affects several resources.</span></span> <span data-ttu-id="686d1-105">İşlemek dağıtılmış işlem için tüm katılımcıları veri herhangi bir değişiklik kalıcı olmasını garanti gerekir.</span><span class="sxs-lookup"><span data-stu-id="686d1-105">For a distributed transaction to commit, all participants must guarantee that any change to data will be permanent.</span></span> <span data-ttu-id="686d1-106">Sistem kilitlenme veya diğer öngörülemeyen olayları rağmen değişiklikleri kalıcı gerekir.</span><span class="sxs-lookup"><span data-stu-id="686d1-106">Changes must persist despite system crashes or other unforeseen events.</span></span> <span data-ttu-id="686d1-107">Bu garanti yapmak tek bir katılımcı başarısız olursa, tüm işlemi başarısız olur ve işlem kapsamında değişiklikler geri alınır.</span><span class="sxs-lookup"><span data-stu-id="686d1-107">If even a single participant fails to make this guarantee, the entire transaction fails, and any changes to data within the scope of the transaction are rolled back.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="686d1-108">Tamamlama veya işlem durumunda geri denerseniz, bir özel durum bir `DataReader` işlem etkinken başlatılır.</span><span class="sxs-lookup"><span data-stu-id="686d1-108">An exception will be thrown if you attempt to commit or roll back a transaction if a `DataReader` is started while the transaction is active.</span></span>  
  
## <a name="working-with-systemtransactions"></a><span data-ttu-id="686d1-109">System.Transactions ile çalışma</span><span class="sxs-lookup"><span data-stu-id="686d1-109">Working with System.Transactions</span></span>  
 <span data-ttu-id="686d1-110">.NET Framework, dağıtılmış işlemler API üzerinden yönetilen <xref:System.Transactions> ad alanı.</span><span class="sxs-lookup"><span data-stu-id="686d1-110">In the .NET Framework, distributed transactions are managed through the API in the <xref:System.Transactions> namespace.</span></span> <span data-ttu-id="686d1-111"><xref:System.Transactions> API temsilci seçme dağıtılmış işlem birden çok kalıcı kaynak yöneticileri dahil olduğunda Microsoft Dağıtılmış İşlem Düzenleyicisi (MS DTC) gibi bir işlem İzleyicisi işleme.</span><span class="sxs-lookup"><span data-stu-id="686d1-111">The <xref:System.Transactions> API will delegate distributed transaction handling to a transaction monitor such as the Microsoft Distributed Transaction Coordinator (MS DTC) when multiple persistent resource managers are involved.</span></span> <span data-ttu-id="686d1-112">Daha fazla bilgi için [işlem Temelleri](../../../../docs/framework/data/transactions/transaction-fundamentals.md).</span><span class="sxs-lookup"><span data-stu-id="686d1-112">For more information, see [Transaction Fundamentals](../../../../docs/framework/data/transactions/transaction-fundamentals.md).</span></span>  
  
 <span data-ttu-id="686d1-113">ADO.NET 2.0 kullanarak bir dağıtılmış işlem kaydetme desteği sunmuştur `EnlistTransaction` bağlantı kaydeder yöntemi, bir <xref:System.Transactions.Transaction> örneği.</span><span class="sxs-lookup"><span data-stu-id="686d1-113">ADO.NET 2.0 introduced support for enlisting in a distributed transaction using the `EnlistTransaction` method, which enlists a connection in a <xref:System.Transactions.Transaction> instance.</span></span> <span data-ttu-id="686d1-114">ADO.NET önceki sürümlerini kullanarak dağıtılmış işlemler de açık kaydı gerçekleştirilmedi `EnlistDistributedTransaction` bağlantısının bağlantı listeleme yöntemi bir <xref:System.EnterpriseServices.ITransaction> örnek, hangi için geriye dönük uyumluluk desteklenir.</span><span class="sxs-lookup"><span data-stu-id="686d1-114">In previous versions of ADO.NET, explicit enlistment in distributed transactions was performed using the `EnlistDistributedTransaction` method of a connection to enlist a connection in a <xref:System.EnterpriseServices.ITransaction> instance, which is supported for backwards compatibility.</span></span> <span data-ttu-id="686d1-115">Kurumsal Hizmetler işlemi hakkında daha fazla bilgi için bkz. [Kurumsal Hizmetler ve COM + işlemleri ile birlikte çalışabilirlik](../../../../docs/framework/data/transactions/interoperability-with-enterprise-services-and-com-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="686d1-115">For more information on Enterprise Services transactions, see [Interoperability with Enterprise Services and COM+ Transactions](../../../../docs/framework/data/transactions/interoperability-with-enterprise-services-and-com-transactions.md).</span></span>  
  
 <span data-ttu-id="686d1-116">Kullanırken bir <xref:System.Transactions> işlem .NET Framework sağlayıcısı ile SQL Server için basit bir SQL Server veritabanında <xref:System.Transactions.Transaction> otomatik olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="686d1-116">When using a <xref:System.Transactions> transaction with the .NET Framework Provider for SQL Server against a SQL Server database, a lightweight <xref:System.Transactions.Transaction> will automatically be used.</span></span> <span data-ttu-id="686d1-117">İşlem, bir tam dağıtılmış işlem gerektiğinde olarak sonra yükseltilebilir.</span><span class="sxs-lookup"><span data-stu-id="686d1-117">The transaction can then be promoted to a full distributed transaction on an as-needed basis.</span></span> <span data-ttu-id="686d1-118">Daha fazla bilgi için [SQL Server ile System.Transactions tümleştirmesi](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="686d1-118">For more information, see [System.Transactions Integration with SQL Server](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="686d1-119">Bir Oracle veritabanına aynı anda katılabilir dağıtılmış işlemlerin sayısı, varsayılan olarak 10'a ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="686d1-119">The maximum number of distributed transactions that an Oracle database can participate in at one time is set to 10 by default.</span></span> <span data-ttu-id="686d1-120">10 işlem bir Oracle veritabanına bağlı bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="686d1-120">After the 10th transaction when connected to an Oracle database, an exception is thrown.</span></span> <span data-ttu-id="686d1-121">Oracle desteklemiyor `DDL` dağıtılmış bir işlem içinde.</span><span class="sxs-lookup"><span data-stu-id="686d1-121">Oracle does not support `DDL` inside of a distributed transaction.</span></span>  
  
## <a name="automatically-enlisting-in-a-distributed-transaction"></a><span data-ttu-id="686d1-122">Dağıtılmış bir işlem içinde otomatik olarak kaydetme</span><span class="sxs-lookup"><span data-stu-id="686d1-122">Automatically Enlisting in a Distributed Transaction</span></span>  
 <span data-ttu-id="686d1-123">Otomatik kaydı, varsayılan (ve tercih edilen) ADO.NET bağlantıları ile tümleştirme yolu `System.Transactions`.</span><span class="sxs-lookup"><span data-stu-id="686d1-123">Automatic enlistment is the default (and preferred) way of integrating ADO.NET connections with `System.Transactions`.</span></span> <span data-ttu-id="686d1-124">Bir işlem etkin olduğunu belirlerse, bir bağlantı nesnesi otomatik olarak varolan bir dağıtılmış işlemde listeleme, içinde `System.Transaction` koşulları, yani `Transaction.Current` null değil.</span><span class="sxs-lookup"><span data-stu-id="686d1-124">A connection object will automatically enlist in an existing distributed transaction if it determines that a transaction is active, which, in `System.Transaction` terms, means that `Transaction.Current` is not null.</span></span> <span data-ttu-id="686d1-125">Bağlantı açıldığında otomatik bir işlem kaydı gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="686d1-125">Automatic transaction enlistment occurs when the connection is opened.</span></span> <span data-ttu-id="686d1-126">İşlem kapsamı içinde çalıştırılan bir komut olsa bile, daha sonra yapılmaz.</span><span class="sxs-lookup"><span data-stu-id="686d1-126">It will not happen after that even if a command is executed inside of a transaction scope.</span></span> <span data-ttu-id="686d1-127">Belirterek mevcut işlemlerde otomatik kayıt devre dışı bırakabilirsiniz `Enlist=false` için bir bağlantı dizesi parametresi olarak bir <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A?displayProperty=nameWithType>, veya `OLE DB Services=-7` için bir bağlantı dizesi parametresi olarak bir <xref:System.Data.OleDb.OleDbConnection.ConnectionString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="686d1-127">You can disable auto-enlistment in existing transactions by specifying `Enlist=false` as a connection string parameter for a <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A?displayProperty=nameWithType>, or `OLE DB Services=-7` as a connection string parameter for an <xref:System.Data.OleDb.OleDbConnection.ConnectionString%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="686d1-128">Oracle ve ODBC bağlantı dizesi parametreleri hakkında daha fazla bilgi için bkz. <xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A?displayProperty=nameWithType> ve <xref:System.Data.Odbc.OdbcConnection.ConnectionString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="686d1-128">For more information on Oracle and ODBC connection string parameters, see <xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A?displayProperty=nameWithType> and <xref:System.Data.Odbc.OdbcConnection.ConnectionString%2A?displayProperty=nameWithType>.</span></span>  
  
## <a name="manually-enlisting-in-a-distributed-transaction"></a><span data-ttu-id="686d1-129">El ile bir dağıtılmış işlemde kaydetme</span><span class="sxs-lookup"><span data-stu-id="686d1-129">Manually Enlisting in a Distributed Transaction</span></span>  
 <span data-ttu-id="686d1-130">Otomatik kayıt devre dışı bırakıldı veya bağlantı açıldıktan sonra başlatıldığı bir işleme kaydolunamadı ihtiyacınız varsa mevcut bir kullanarak dağıtılmış işlem listeleme `EnlistTransaction` yöntemi <xref:System.Data.Common.DbConnection> çalıştığınız sağlayıcısı nesnesi ile.</span><span class="sxs-lookup"><span data-stu-id="686d1-130">If auto-enlistment is disabled or you need to enlist a transaction that was started after the connection was opened, you can enlist in an existing distributed transaction using the `EnlistTransaction` method of the <xref:System.Data.Common.DbConnection> object for the provider you are working with.</span></span> <span data-ttu-id="686d1-131">Varolan bir dağıtılmış işlemde kaydetme hareket kaydedilmiş veya geri alınmış, veri kaynağındaki kod tarafından yapılan değişiklikleri kaydedilmiş veya geri yanı, sağlar.</span><span class="sxs-lookup"><span data-stu-id="686d1-131">Enlisting in an existing distributed transaction ensures that, if the transaction is committed or rolled back, modifications made by the code at the data source will be committed or rolled back as well.</span></span>  
  
 <span data-ttu-id="686d1-132">Dağıtılmış işlemlerinde kaydetme iş nesneleri havuzu olduğunda özellikle geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="686d1-132">Enlisting in distributed transactions is particularly applicable when pooling business objects.</span></span> <span data-ttu-id="686d1-133">Bir iş nesnesi açık bir bağlantı ile bir havuzda toplanır, bu bağlantı açıldığında otomatik bir işlem kaydı yalnızca gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="686d1-133">If a business object is pooled with an open connection, automatic transaction enlistment only occurs when that connection is opened.</span></span> <span data-ttu-id="686d1-134">Birden çok işlem kullanarak havuza alınmış bir iş nesnesi gerçekleştirdiyseniz, bu nesne için açık bağlantı otomatik olarak yeni başlatılan işlemleri listeleme değil.</span><span class="sxs-lookup"><span data-stu-id="686d1-134">If multiple transactions are performed using the pooled business object, the open connection for that object will not automatically enlist in newly initiated transactions.</span></span> <span data-ttu-id="686d1-135">Bu durumda, bağlantı için otomatik işlem kaydı devre dışı bırak ve bağlantı kullanarak işlem listeleme `EnlistTransaction`.</span><span class="sxs-lookup"><span data-stu-id="686d1-135">In this case, you can disable automatic transaction enlistment for the connection and enlist the connection in transactions using `EnlistTransaction`.</span></span>  
  
 <span data-ttu-id="686d1-136">`EnlistTransaction` türünde tek bir bağımsız değişken <xref:System.Transactions.Transaction> mevcut işlem diğer bir deyişle bir başvuru.</span><span class="sxs-lookup"><span data-stu-id="686d1-136">`EnlistTransaction` takes a single argument of type <xref:System.Transactions.Transaction> that is a reference to the existing transaction.</span></span> <span data-ttu-id="686d1-137">Bağlantının çağrıldıktan sonra `EnlistTransaction` yöntemi, veri kaynağı bağlantı işlemde dahil kullanarak yapılan tüm değişiklikleri.</span><span class="sxs-lookup"><span data-stu-id="686d1-137">After calling the connection's `EnlistTransaction` method, all modifications made at the data source using the connection are included in the transaction.</span></span> <span data-ttu-id="686d1-138">Bir null değeri geçirdiğini, geçerli bir dağıtılmış işlem kaydı bağlantısından unenlists.</span><span class="sxs-lookup"><span data-stu-id="686d1-138">Passing a null value unenlists the connection from its current distributed transaction enlistment.</span></span> <span data-ttu-id="686d1-139">Çağırmadan önce bağlantıyı açılması gerektiğini unutmayın `EnlistTransaction`.</span><span class="sxs-lookup"><span data-stu-id="686d1-139">Note that the connection must be opened before calling `EnlistTransaction`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="686d1-140">Bir bağlantı açıkça bir işlemde kayıtlı sonra ilk işlem bitene kadar kayıtlı olmayan ya da başka bir işlemde kayıtlı olamaz.</span><span class="sxs-lookup"><span data-stu-id="686d1-140">Once a connection is explicitly enlisted on a transaction, it cannot be un-enlisted or enlisted in another transaction until the first transaction finishes.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="686d1-141">`EnlistTransaction` bağlantı bağlantı kullanarak bir işlem zaten başlamış bir özel durum oluşturur <xref:System.Data.Common.DbConnection.BeginTransaction%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="686d1-141">`EnlistTransaction` throws an exception if the connection has already begun a transaction using the connection's <xref:System.Data.Common.DbConnection.BeginTransaction%2A> method.</span></span> <span data-ttu-id="686d1-142">Ancak işlem veri kaynağında başlatılan yerel bir işlem olup olmadığını (örneğin, açıkça kullanarak BEGIN TRANSACTION deyimi yürütülürken bir <xref:System.Data.SqlClient.SqlCommand>), `EnlistTransaction` yerel işlem geri alma ve dağıtılmış mevcut listeleme İstenen işlem.</span><span class="sxs-lookup"><span data-stu-id="686d1-142">However, if the transaction is a local transaction started at the data source (for example, executing the BEGIN TRANSACTION statement explicitly using a <xref:System.Data.SqlClient.SqlCommand>), `EnlistTransaction` will roll back the local transaction and enlist in the existing distributed transaction as requested.</span></span> <span data-ttu-id="686d1-143">Yerel işlem geri alındı ihbar almazsınız ve kullanmaya değil yerel işlemler yönetmelidir <xref:System.Data.Common.DbConnection.BeginTransaction%2A>.</span><span class="sxs-lookup"><span data-stu-id="686d1-143">You will not receive notice that the local transaction was rolled back, and must manage any local transactions not started using <xref:System.Data.Common.DbConnection.BeginTransaction%2A>.</span></span> <span data-ttu-id="686d1-144">SQL Server için .NET Framework veri sağlayıcısı kullanıyorsanız (`SqlClient`) SQL Server ile listeleme girişimi bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="686d1-144">If you are using the .NET Framework Data Provider for SQL Server (`SqlClient`) with SQL Server, an attempt to enlist will throw an exception.</span></span> <span data-ttu-id="686d1-145">Diğer tüm durumlarda algılanmayan geçer.</span><span class="sxs-lookup"><span data-stu-id="686d1-145">All other cases will go undetected.</span></span>  
  
## <a name="promotable-transactions-in-sql-server"></a><span data-ttu-id="686d1-146">SQL Server'da promotable işlemleri</span><span class="sxs-lookup"><span data-stu-id="686d1-146">Promotable Transactions in SQL Server</span></span>  
 <span data-ttu-id="686d1-147">SQL Server, yalnızca gerekli olduğunda, yerel bir basit işlem otomatik olarak dağıtılmış bir işlem için yükseltilebilir promotable işlemleri destekler.</span><span class="sxs-lookup"><span data-stu-id="686d1-147">SQL Server supports promotable transactions in which a local lightweight transaction can be automatically promoted to a distributed transaction only if it is required.</span></span> <span data-ttu-id="686d1-148">Bir promotable işlem eklenen çağırmadığı işlemlerinin ek yükü dağıtılmış işlem ek yükü gerekli olmadığı sürece.</span><span class="sxs-lookup"><span data-stu-id="686d1-148">A promotable transaction does not invoke the added overhead of a distributed transaction unless the added overhead is required.</span></span> <span data-ttu-id="686d1-149">Daha fazla bilgi ve bir kod örneği için bkz: [SQL Server ile System.Transactions tümleştirmesi](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="686d1-149">For more information and a code sample, see [System.Transactions Integration with SQL Server](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md).</span></span>  
  
## <a name="configuring-distributed-transactions"></a><span data-ttu-id="686d1-150">Dağıtılmış işlemler yapılandırma</span><span class="sxs-lookup"><span data-stu-id="686d1-150">Configuring Distributed Transactions</span></span>  
 <span data-ttu-id="686d1-151">Dağıtılmış işlemler kullanmak için ağ üzerinden MS DTC etkinleştirmeniz gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="686d1-151">You may need to enable the MS DTC over the network in order to use distributed transactions.</span></span> <span data-ttu-id="686d1-152">Windows varsa Güvenlik Duvarı etkin, ağ veya MS DTC bağlantı noktasını açmak MS DTC hizmetinin izin vermeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="686d1-152">If have the Windows Firewall enabled, you must allow the MS DTC service to use the network or open the MS DTC port.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="686d1-153">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="686d1-153">See also</span></span>

- [<span data-ttu-id="686d1-154">İşlemler ve Eşzamanlılık</span><span class="sxs-lookup"><span data-stu-id="686d1-154">Transactions and Concurrency</span></span>](../../../../docs/framework/data/adonet/transactions-and-concurrency.md)
- [<span data-ttu-id="686d1-155">SQL Server ile System.Transactions Tümleştirmesi</span><span class="sxs-lookup"><span data-stu-id="686d1-155">System.Transactions Integration with SQL Server</span></span>](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md)
- [<span data-ttu-id="686d1-156">ADO.NET yönetilen sağlayıcıları ve DataSet Geliştirici Merkezi</span><span class="sxs-lookup"><span data-stu-id="686d1-156">ADO.NET Managed Providers and DataSet Developer Center</span></span>](https://go.microsoft.com/fwlink/?LinkId=217917)
