---
title: SQL Server Express Kullanıcı Örnekleri
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 00c12376-cb26-4317-86ad-e6e9c089be57
ms.openlocfilehash: eb9b61f0c0b787a2de0a39a0d47c5767acad9cc5
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64645890"
---
# <a name="sql-server-express-user-instances"></a><span data-ttu-id="b087a-102">SQL Server Express Kullanıcı Örnekleri</span><span class="sxs-lookup"><span data-stu-id="b087a-102">SQL Server Express User Instances</span></span>
<span data-ttu-id="b087a-103">Microsoft SQL Server Express Edition (SQL Server Express) .NET Framework veri sağlayıcısı için SQL Server kullanırken yalnızca kullanılabilir kullanıcı örneği özelliğini destekler (`SqlClient`).</span><span class="sxs-lookup"><span data-stu-id="b087a-103">Microsoft SQL Server Express Edition (SQL Server Express) supports the user instance feature, which is only available when using the .NET Framework Data Provider for SQL Server (`SqlClient`).</span></span> <span data-ttu-id="b087a-104">Bir kullanıcı örneği, SQL Server Express Veritabanı Altyapısı'nın üst örneği tarafından oluşturulan ayrı bir örneğidir.</span><span class="sxs-lookup"><span data-stu-id="b087a-104">A user instance is a separate instance of the SQL Server Express Database Engine that is generated by a parent instance.</span></span> <span data-ttu-id="b087a-105">Kullanıcı örnekleri eklemek ve SQL Server Express veritabanlarına bağlanmak için kendi yerel bilgisayarlarında yönetici olmayan kullanıcılar izin verin.</span><span class="sxs-lookup"><span data-stu-id="b087a-105">User instances allow users who are not administrators on their local computers to attach and connect to SQL Server Express databases.</span></span> <span data-ttu-id="b087a-106">Her örneği, tek kullanıcı, kullanıcı başına tek örnek güvenlik bağlamı altında çalışır.</span><span class="sxs-lookup"><span data-stu-id="b087a-106">Each instance runs under the security context of the individual user, on a one-instance-per-user basis.</span></span>  
  
## <a name="user-instance-capabilities"></a><span data-ttu-id="b087a-107">Kullanıcı örneği özellikleri</span><span class="sxs-lookup"><span data-stu-id="b087a-107">User Instance Capabilities</span></span>  
 <span data-ttu-id="b087a-108">Kullanıcı örnekleri her bir kullanıcı SQL Server Sistem Yöneticisi olduğundan Windows (LUA) en az ayrıcalıklı kullanıcı hesabı altında çalışan kullanıcılar için kullanışlıdır (`sysadmin`) bir Windows çalıştırmak zorunda kalmadan her bilgisayar üzerinde çalışan örnek üzerindeki ayrıcalıkları yönetici de.</span><span class="sxs-lookup"><span data-stu-id="b087a-108">User instances are useful for users who are running Windows under a least-privilege user account (LUA) because each user has SQL Server system administrator (`sysadmin`) privileges over the instance running on her computer without needing to run as a Windows administrator as well.</span></span> <span data-ttu-id="b087a-109">SQL Server Express örneği bir hizmet olarak değil bir kullanıcının yönetici olmayan Windows hesabı altında çalıştığı için yazılım sınırlı izinlere sahip bir kullanıcı örneği üzerinde yürütülen sistem genelinde değişiklik yapamaz.</span><span class="sxs-lookup"><span data-stu-id="b087a-109">Software executing on a user instance with limited permissions cannot make system-wide changes because the instance of SQL Server Express is running under the non-administrator Windows account of the user, not as a service.</span></span> <span data-ttu-id="b087a-110">Her bir kullanıcı örneği, kendi üst örneğini ve aynı bilgisayarda çalışan diğer kullanıcı örnekleri yalıtılır.</span><span class="sxs-lookup"><span data-stu-id="b087a-110">Each user instance is isolated from its parent instance and from any other user instances running on the same computer.</span></span> <span data-ttu-id="b087a-111">Bir kullanıcı örneği üzerinde çalışan veritabanları yalnızca tek kullanıcı modunda açılır ve bir kullanıcı örneği üzerinde çalışan veritabanlarına bağlanmak birden çok kullanıcı için mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="b087a-111">Databases running on a user instance are opened in single-user mode only, and it is not possible for multiple users to connect to databases running on a user instance.</span></span> <span data-ttu-id="b087a-112">Çoğaltma ve dağıtılmış sorgular, ayrıca kullanıcı örnekleri için devre dışıdır.</span><span class="sxs-lookup"><span data-stu-id="b087a-112">Replication and distributed queries are also disabled for user instances.</span></span>  
  
 <span data-ttu-id="b087a-113">Daha fazla bilgi için SQL Server Books Online'da "kullanıcı örnekleri" konusuna bakın.</span><span class="sxs-lookup"><span data-stu-id="b087a-113">For more information, see "User Instances" in SQL Server Books Online.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b087a-114">Kullanıcı örnekleri kendi bilgisayarlarında yönetici olan kullanıcılar için veya birden çok veritabanı kullanıcıları içeren senaryolar için gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="b087a-114">User instances are not needed for users who are already administrators on their own computers, or for scenarios involving multiple database users.</span></span>  
  
## <a name="enabling-user-instances"></a><span data-ttu-id="b087a-115">Kullanıcı örnekleri etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="b087a-115">Enabling User Instances</span></span>  
 <span data-ttu-id="b087a-116">Kullanıcı örnekleri oluşturmak için bir üst SQL Server Express örneğini çalıştırılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b087a-116">To generate user instances, a parent instance of SQL Server Express must be running.</span></span> <span data-ttu-id="b087a-117">Kullanıcı örnekleri, varsayılan olarak etkinleştirilir, SQL Server Express yüklenir ve bunlar açıkça etkinleştirilebilir veya yürütülürken bir sistem yöneticisi tarafından devre dışı olduğunda **sp_configure** üst örneğinde sistem saklı yordamı.</span><span class="sxs-lookup"><span data-stu-id="b087a-117">User instances are enabled by default when SQL Server Express is installed, and they can be explicitly enabled or disabled by a system administrator executing the **sp_configure** system stored procedure on the parent instance.</span></span>  
  
```  
-- Enable user instances.  
sp_configure 'user instances enabled','1'   
  
-- Disable user instances.  
sp_configure 'user instances enabled','0'  
```  
  
 <span data-ttu-id="b087a-118">Ağ Protokolü kullanıcı örnekleri için adlandırılmış kanallar yerel olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b087a-118">The network protocol for user instances must be local Named Pipes.</span></span> <span data-ttu-id="b087a-119">Bir kullanıcı örneği bir SQL Server'ın uzak örneğinde başlatılamıyor ve SQL Server oturumları izin verilmez.</span><span class="sxs-lookup"><span data-stu-id="b087a-119">A user instance cannot be started on a remote instance of SQL Server, and SQL Server logins are not allowed.</span></span>  
  
## <a name="connecting-to-a-user-instance"></a><span data-ttu-id="b087a-120">Bir kullanıcı örneğine bağlanma</span><span class="sxs-lookup"><span data-stu-id="b087a-120">Connecting to a User Instance</span></span>  
 <span data-ttu-id="b087a-121">`User Instance` Ve `AttachDBFilename` <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> anahtar sözcüklere izin bir <xref:System.Data.SqlClient.SqlConnection> bir kullanıcı örneğine bağlanmak için.</span><span class="sxs-lookup"><span data-stu-id="b087a-121">The `User Instance` and `AttachDBFilename`<xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> keywords allow a <xref:System.Data.SqlClient.SqlConnection> to connect to a user instance.</span></span> <span data-ttu-id="b087a-122">Kullanıcı örnekleri tarafından da desteklenir <xref:System.Data.SqlClient.SqlConnectionStringBuilder> `UserInstance` ve `AttachDBFilename` özellikleri.</span><span class="sxs-lookup"><span data-stu-id="b087a-122">User instances are also supported by the <xref:System.Data.SqlClient.SqlConnectionStringBuilder>`UserInstance` and `AttachDBFilename` properties.</span></span>  
  
 <span data-ttu-id="b087a-123">Aşağıda gösterilen örnek bağlantı dizesi hakkında aşağıdakileri unutmayın:</span><span class="sxs-lookup"><span data-stu-id="b087a-123">Note the following about the sample connection string shown below:</span></span>  
  
- <span data-ttu-id="b087a-124">`Data Source` Anahtar sözcüğü üst SQL Server'ın kullanıcı örneği oluşturan Express örneğine başvurur.</span><span class="sxs-lookup"><span data-stu-id="b087a-124">The `Data Source` keyword refers to the parent instance of SQL Server Express that is generating the user instance.</span></span> <span data-ttu-id="b087a-125">The default instance is .\sqlexpress.</span><span class="sxs-lookup"><span data-stu-id="b087a-125">The default instance is .\sqlexpress.</span></span>  
  
- <span data-ttu-id="b087a-126">`Integrated Security` ayarlanır `true`.</span><span class="sxs-lookup"><span data-stu-id="b087a-126">`Integrated Security` is set to `true`.</span></span> <span data-ttu-id="b087a-127">Bir kullanıcı örneğine bağlanmak için Windows kimlik doğrulaması gereklidir; SQL Server oturumları desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="b087a-127">To connect to a user instance, Windows Authentication is required; SQL Server logins are not supported.</span></span>  
  
- <span data-ttu-id="b087a-128">`User Instance` Ayarlanır `true`, bir kullanıcı örneği başlatır.</span><span class="sxs-lookup"><span data-stu-id="b087a-128">The `User Instance` is set to `true`, which invokes a user instance.</span></span> <span data-ttu-id="b087a-129">(Varsayılan değer `false`.)</span><span class="sxs-lookup"><span data-stu-id="b087a-129">(The default is `false`.)</span></span>  
  
- <span data-ttu-id="b087a-130">`AttachDbFileName` Bağlantı dizesi anahtar kelimesi, tam yol adını içermelidir birincil veritabanı dosyasını (.mdf) eklemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="b087a-130">The `AttachDbFileName` connection string keyword is used to attach the primary database file (.mdf), which must include the full path name.</span></span> <span data-ttu-id="b087a-131">`AttachDbFileName` Ayrıca, "genişletilmiş özellikler" ve "başlangıç dosyası adı" anahtarları içinde karşılık gelen bir <xref:System.Data.SqlClient.SqlConnection> bağlantı dizesi.</span><span class="sxs-lookup"><span data-stu-id="b087a-131">`AttachDbFileName` also corresponds to the "extended properties" and "initial file name" keys within a <xref:System.Data.SqlClient.SqlConnection> connection string.</span></span>  
  
- <span data-ttu-id="b087a-132">`|DataDirectory|` Kanal sembolleri içine değiştirme dizesi bağlantısı açılıyor uygulamanın veri dizini gösterir ve .mdf ve .ldf veritabanı ve günlük dosyalarının konumunu belirten göreli bir yol sağlar.</span><span class="sxs-lookup"><span data-stu-id="b087a-132">The `|DataDirectory|` substitution string enclosed in the pipe symbols refers to the data directory of the application opening the connection and provides a relative path indicating the location of the .mdf and .ldf database and log files.</span></span> <span data-ttu-id="b087a-133">Bu dosyaları başka bir yerde bulmak isterseniz, dosyaların tam yolunu sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="b087a-133">If you want to locate these files elsewhere, you must provide the full path to the files.</span></span>  
  
```  
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;AttachDBFilename=|DataDirectory|\InstanceDB.mdf;  
Initial Catalog=InstanceDB;  
```  
  
> [!NOTE]
>  <span data-ttu-id="b087a-134">Ayrıca <xref:System.Data.SqlClient.SqlConnectionStringBuilder> <xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> ve <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> özellikler zamanında bağlantı dizenizi oluşturmak için çalışma zamanında.</span><span class="sxs-lookup"><span data-stu-id="b087a-134">You can also use the <xref:System.Data.SqlClient.SqlConnectionStringBuilder><xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> and <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> properties to build a connection string at run time.</span></span>  
  
### <a name="using-the-124datadirectory124-substitution-string"></a><span data-ttu-id="b087a-135">Kullanarak &#124;DataDirectory&#124; değiştirme dizesi</span><span class="sxs-lookup"><span data-stu-id="b087a-135">Using the &#124;DataDirectory&#124; Substitution String</span></span>  
 <span data-ttu-id="b087a-136">`AttachDbFileName` ADO.NET 2. 0'sunulmasıyla birlikte genişletilmişse `|DataDirectory|` (kanal sembolleri alınmış) değiştirme dizesi.</span><span class="sxs-lookup"><span data-stu-id="b087a-136">`AttachDbFileName` was extended in ADO.NET 2.0 with the introduction of the `|DataDirectory|` (enclosed in pipe symbols) substitution string.</span></span> <span data-ttu-id="b087a-137">`DataDirectory` ile birlikte kullanılan `AttachDbFileName` bir veri dosyası için göreli bir yol belirtmek için göreli bir yol olan yerine veri kaynağına dayalı bağlantı dizesi oluşturmak, geliştiricilerin tam yolunu belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="b087a-137">`DataDirectory` is used in conjunction with `AttachDbFileName` to indicate a relative path to a data file, allowing developers to create connection strings that are based on a relative path to the data source instead of being required to specify a full path.</span></span>  
  
 <span data-ttu-id="b087a-138">Fiziksel konum, `DataDirectory` bağlı olan uygulama türüne işaret eder.</span><span class="sxs-lookup"><span data-stu-id="b087a-138">The physical location that `DataDirectory` points to depends on the type of application.</span></span> <span data-ttu-id="b087a-139">Bu örnekte, eklenmiş Northwind.mdf dosya uygulamanın \app_data klasöründe bulunur.</span><span class="sxs-lookup"><span data-stu-id="b087a-139">In this example, the Northwind.mdf file to be attached is located in the application's \app_data folder.</span></span>  
  
```  
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;  
AttachDBFilename=|DataDirectory|\app_data\Northwind.mdf;  
Initial Catalog=Northwind;  
```  
  
 <span data-ttu-id="b087a-140">Zaman `DataDirectory` olan kullanıldığında, sonuçta elde edilen dosya yolu dizin yapısında değiştirme dizesi tarafından belirtilen dizin daha yüksek olamaz.</span><span class="sxs-lookup"><span data-stu-id="b087a-140">When `DataDirectory` is used, the resulting file path cannot be higher in the directory structure than the directory pointed to by the substitution string.</span></span> <span data-ttu-id="b087a-141">Örneğin, tam olarak Genişletilmiş `DataDirectory` C:\AppDirectory\app_data sonra c:\AppDirectory olduğundan works gösterilen örnek bağlantı dizesi.</span><span class="sxs-lookup"><span data-stu-id="b087a-141">For example, if the fully expanded `DataDirectory` is C:\AppDirectory\app_data, then the sample connection string shown above works because it is below c:\AppDirectory.</span></span> <span data-ttu-id="b087a-142">Ancak, denemek `DataDirectory` olarak `|DataDirectory|\..\data` \data \AppDirectory dizininin bir alt olmadığından bir hataya neden olur.</span><span class="sxs-lookup"><span data-stu-id="b087a-142">However, attempting to specify `DataDirectory` as `|DataDirectory|\..\data` will result in an error because \data is not a subdirectory of \AppDirectory.</span></span>  
  
 <span data-ttu-id="b087a-143">Bağlantı dizesi bir Düzensiz biçimlendirilmiş bir değiştirme dizesi varsa bir <xref:System.ArgumentException> oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="b087a-143">If the connection string has an improperly formatted substitution string, an <xref:System.ArgumentException> will be thrown.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b087a-144"><xref:System.Data.SqlClient> Yerel bilgisayar dosya sistemine karşı tam yollarını içine değiştirme dizelerini çözümler.</span><span class="sxs-lookup"><span data-stu-id="b087a-144"><xref:System.Data.SqlClient> resolves the substitution strings into full paths against the local computer file system.</span></span> <span data-ttu-id="b087a-145">Bu nedenle, uzak sunucu, HTTP ve UNC yolu adları desteklenmemektedir.</span><span class="sxs-lookup"><span data-stu-id="b087a-145">Therefore, remote server, HTTP, and UNC path names are not supported.</span></span> <span data-ttu-id="b087a-146">Bağlantı açıldığında sunucunun yerel bilgisayarda bulunmuyorsa, bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="b087a-146">An exception is thrown when the connection is opened if the server is not located on the local computer.</span></span>  
  
 <span data-ttu-id="b087a-147">Zaman <xref:System.Data.SqlClient.SqlConnection> olan açıldı, onu varsayılan SQL Server Express örneğinden çağıranın hesabı altında çalıştırma başlatılan örneği çalışan bir yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="b087a-147">When the <xref:System.Data.SqlClient.SqlConnection> is opened, it is redirected from the default SQL Server Express instance to a run-time initiated instance running under the caller's account.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b087a-148">Artırmak gerekli olabilir <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> kullanıcı örnekleri, normal örneklerden yüklenmesi daha uzun sürebilir değeri.</span><span class="sxs-lookup"><span data-stu-id="b087a-148">It may be necessary to increase the <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> value since user instances may take longer to load than regular instances.</span></span>  
  
 <span data-ttu-id="b087a-149">Aşağıdaki kod parçası, yeni bir açılır `SqlConnection`, bağlantı dizesini konsol penceresinde görüntüler ve ardından çıkarken bağlantıyı kapatır `using` kod bloğu.</span><span class="sxs-lookup"><span data-stu-id="b087a-149">The following code fragment opens a new `SqlConnection`, displays the connection string in the console window, and then closes the connection when exiting the `using` code block.</span></span>  
  
```vb  
Private Sub OpenSqlConnection()  
    ' Retrieve the connection string.  
    Dim connectionString As String = GetConnectionString()  
  
    Using connection As New SqlConnection(connectionString)  
        connection.Open()  
        Console.WriteLine("ConnectionString: {0}", _  
           connection.ConnectionString)  
    End Using  
End Sub  
```  
  
```csharp  
private static void OpenSqlConnection()  
{  
    // Retrieve the connection string.  
    string connectionString = GetConnectionString();  
  
    using (SqlConnection connection =   
        new SqlConnection(connectionString))  
    {  
        connection.Open();  
        Console.WriteLine("ConnectionString: {0}",   
             connection.ConnectionString);  
    }  
}  
```  
  
> [!NOTE]
>  <span data-ttu-id="b087a-150">Kullanıcı örnekleri içinde SQL Server çalıştıran ortak dil çalışma zamanı (CLR) kodu desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="b087a-150">User instances are not supported in common language runtime (CLR) code that is running inside of SQL Server.</span></span> <span data-ttu-id="b087a-151">Bir <xref:System.InvalidOperationException> oluşturulur `Open` üzerinde çağrılır bir <xref:System.Data.SqlClient.SqlConnection> olan `User Instance=true` bağlantı dizesindeki.</span><span class="sxs-lookup"><span data-stu-id="b087a-151">An <xref:System.InvalidOperationException> is thrown if `Open` is called on a <xref:System.Data.SqlClient.SqlConnection> that has `User Instance=true` in the connection string.</span></span>  
  
## <a name="lifetime-of-a-user-instance-connection"></a><span data-ttu-id="b087a-152">Bir kullanıcı örneği bağlantı ömrü</span><span class="sxs-lookup"><span data-stu-id="b087a-152">Lifetime of a User Instance Connection</span></span>  
 <span data-ttu-id="b087a-153">SQL Server sürümlerinden farklı olarak bir hizmet olarak çalıştırın, SQL Server Express örneklerini el ile yapmanız gerekmez, kullanmaya ve durduruldu.</span><span class="sxs-lookup"><span data-stu-id="b087a-153">Unlike versions of SQL Server that run as a service, SQL Server Express instances do not need to be manually started and stopped.</span></span> <span data-ttu-id="b087a-154">Zaten çalışmıyorsa, bir kullanıcı oturum açtığında ve bir kullanıcı örneğine bağlanan her zaman kullanıcı örneği başlatıldı.</span><span class="sxs-lookup"><span data-stu-id="b087a-154">Each time a user logs in and connects to a user instance, the user instance is started if it is not already running.</span></span> <span data-ttu-id="b087a-155">Kullanıcı örneği veritabanlarının `AutoClose` seçenek kümesi böylece veritabanı bir süre işlem yapılmadığında otomatik olarak kapatılır.</span><span class="sxs-lookup"><span data-stu-id="b087a-155">User instance databases have the `AutoClose` option set so that the database is automatically shut down after a period of inactivity.</span></span> <span data-ttu-id="b087a-156">Başlatılan sqlservr.exe işlem tutulur çalıştıran bir sınırlı bir zaman aşımı süresini örneği son bağlantı kapatıldıktan sonra zaman aşımına uğramadan önce başka bir bağlantı açıldıysa yeniden başlatılması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="b087a-156">The sqlservr.exe process that is started is kept running for a limited time-out period after the last connection to the instance is closed, so it does not need to be restarted if another connection is opened before the time-out has expired.</span></span> <span data-ttu-id="b087a-157">Bu zaman aşımı süresi sona ermeden önce yeni bağlantı açarsa, kullanıcı örneği otomatik olarak kapanır.</span><span class="sxs-lookup"><span data-stu-id="b087a-157">The user instance automatically shuts down if no new connection opens before that time-out period has expired.</span></span> <span data-ttu-id="b087a-158">Üst örneğinde Sistem Yöneticisi kullanarak bir kullanıcı örneği için zaman aşımı süresini süresini ayarlayabilirsiniz **sp_configure** değiştirmek için **kullanıcı örneği zaman aşımı** seçeneği.</span><span class="sxs-lookup"><span data-stu-id="b087a-158">A system administrator on the parent instance can set the duration of the time-out period for a user instance by using **sp_configure** to change the **user instance timeout** option.</span></span> <span data-ttu-id="b087a-159">Varsayılan değer 60 dakikadır.</span><span class="sxs-lookup"><span data-stu-id="b087a-159">The default is 60 minutes.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b087a-160">Varsa `Min Pool Size` kullanılan bağlantı dizesinde, sıfırdan büyük bir değere sahip birkaç açık bağlantıları her zaman bağlantı havuzlayıcı korur ve kullanıcı örneği otomatik olarak kapatılacak değil.</span><span class="sxs-lookup"><span data-stu-id="b087a-160">If `Min Pool Size` is used in the connection string with a value greater than zero, the connection pooler will always maintain a few opened connections, and the user instance will not automatically shut down.</span></span>  
  
## <a name="how-user-instances-work"></a><span data-ttu-id="b087a-161">Kullanıcı iş nasıl örnekleri</span><span class="sxs-lookup"><span data-stu-id="b087a-161">How User Instances Work</span></span>  
 <span data-ttu-id="b087a-162">Bir kullanıcı örneği her bir kullanıcı için oluşturulan ilk kez **ana** ve **msdb** sistem veritabanları kopyalanır şablon veri klasöründen kullanıcının yerel uygulama veri deposu altındaki yol kullanıcı örneği tarafından kullanılacak dizin.</span><span class="sxs-lookup"><span data-stu-id="b087a-162">The first time a user instance is generated for each user, the **master** and **msdb** system databases are copied from the Template Data folder to a path under the user's local application data repository directory for exclusive use by the user instance.</span></span> <span data-ttu-id="b087a-163">Bu yol genellikle `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`.</span><span class="sxs-lookup"><span data-stu-id="b087a-163">This path is typically `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`.</span></span> <span data-ttu-id="b087a-164">Bir kullanıcı örneği başlatıldığında **tempdb**, günlük ve izleme dosyaları da bu dizine yazılır.</span><span class="sxs-lookup"><span data-stu-id="b087a-164">When a user instance starts up, the **tempdb**, log, and trace files are also written to this directory.</span></span> <span data-ttu-id="b087a-165">Örneğin, her kullanıcı için benzersiz olması garanti bir ad oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="b087a-165">A name is generated for the instance, which is guaranteed to be unique for each user.</span></span>  
  
 <span data-ttu-id="b087a-166">Varsayılan olarak Windows BUILTIN\USERS grubunun tüm üyeleri üzerinde yerel bağlanın yanı sıra okuma ve Yürütme izinleri SQL Server ikili dosyalarını izinleri verilir.</span><span class="sxs-lookup"><span data-stu-id="b087a-166">By default all members of the Windows Builtin\Users group are granted permissions to connect on the local instance as well as read and execute permissions on the SQL Server binaries.</span></span> <span data-ttu-id="b087a-167">Kullanıcı örneği barındıran çağıran kullanıcının kimlik bilgileri doğruladıktan sonra o kullanıcı olur `sysadmin` örneğine.</span><span class="sxs-lookup"><span data-stu-id="b087a-167">Once the credentials of the calling user hosting the user instance have been verified, that user becomes the `sysadmin` on that instance.</span></span> <span data-ttu-id="b087a-168">Yalnızca paylaşılan bellek, yalnızca yerel makine üzerinde işlemler mümkün olmadığı anlamına gelir, kullanıcı örnekleri için etkinleştirilir.</span><span class="sxs-lookup"><span data-stu-id="b087a-168">Only shared memory is enabled for user instances, which means that only operations on the local machine are possible.</span></span>  
  
 <span data-ttu-id="b087a-169">Kullanıcılar hem okuma hem bağlantı dizesinde belirtilen .mdf ve .ldf dosyalarda izinleri verilmelidir.</span><span class="sxs-lookup"><span data-stu-id="b087a-169">Users must be granted both read and write permissions on the .mdf and .ldf files specified in the connection string.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b087a-170">.Mdf ve .ldf dosyaları veritabanı ve günlük dosyalarının sırasıyla temsil eder.</span><span class="sxs-lookup"><span data-stu-id="b087a-170">The .mdf and .ldf files represent the database and log files, respectively.</span></span> <span data-ttu-id="b087a-171">Bu iki dosyayı özen yedekleme sırasında düşünülmesi gereken ve geri yükleme işlemleri eşlenmiş bir küme olduğundan.</span><span class="sxs-lookup"><span data-stu-id="b087a-171">These two files are a matched set, so care must be taken during backup and restore operations.</span></span> <span data-ttu-id="b087a-172">Veritabanı dosyası günlük dosyasının tam sürümünü ilgili bilgiler içerir ve yanlış günlük dosyası ile sıkı bağlı, veritabanı açılır değil.</span><span class="sxs-lookup"><span data-stu-id="b087a-172">The database file contains information about the exact version of the log file, and the database will not open if it is coupled with the wrong log file.</span></span>  
  
 <span data-ttu-id="b087a-173">Veri bozulmasını önlemek için kullanıcı örneğinde bir veritabanı ile özel erişim açılır.</span><span class="sxs-lookup"><span data-stu-id="b087a-173">To avoid data corruption, a database in the user instance is opened with exclusive access.</span></span> <span data-ttu-id="b087a-174">İki farklı bir kullanıcı örneği aynı bilgisayarda aynı veritabanını paylaşıyorsanız, ikinci bir örneğinde açılmadan önce ilk örnek kullanıcı veritabanı kapatmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="b087a-174">If two different user instances share the same database on the same computer, the user on the first instance must close the database before it can be opened in a second instance.</span></span>  
  
## <a name="user-instance-scenarios"></a><span data-ttu-id="b087a-175">Kullanıcı örneği senaryoları</span><span class="sxs-lookup"><span data-stu-id="b087a-175">User Instance Scenarios</span></span>  
 <span data-ttu-id="b087a-176">Kullanıcı örnekleri, veritabanı uygulamalarının geliştiriciler, geliştirme bilgisayarlarını üzerindeki yönetim hesaplarına sahip bağlı olmayan bir SQL Server veri deposu ile geliştiriciler sağlar.</span><span class="sxs-lookup"><span data-stu-id="b087a-176">User instances provide developers of database applications with a SQL Server data store that does not depend on developers having administrative accounts on their development computers.</span></span> <span data-ttu-id="b087a-177">Kullanıcı örnekleri burada veritabanı uygulaması yalnızca bir dosyaya bağlar ve otomatik olarak tam izinleri tüm veritabanı nesnelerinin vermek için bir sistem yöneticisinin bir müdahalesi olmadan kullanıcının erişim/Jet modeline dayanır izinler.</span><span class="sxs-lookup"><span data-stu-id="b087a-177">User instances are based on the Access/Jet model, where the database application simply connects to a file, and the user automatically has full permissions on all of the database objects without needing the intervention of a system administrator to grant permissions.</span></span> <span data-ttu-id="b087a-178">Burada kullanıcı (LUA) en az ayrıcalıklı kullanıcı hesabı altında çalıştığından ve sunucu veya yerel makine üzerinde yönetimsel yetkilere sahip değil, ancak veritabanı nesneleri ve uygulamaları oluşturmak için gereken durumlarda çalışacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="b087a-178">It is intended to work in situations where the user is running under a least-privilege user account (LUA) and does not have administrative privileges on the server or local machine, yet needs to create database objects and applications.</span></span> <span data-ttu-id="b087a-179">Kullanıcı örnekleri, kullanıcının kendi güvenlik bağlamı altında ve değil daha ayrıcalıklı sistem hizmeti güvenlik bağlamında çalışan çalışma zamanında oluşumlarının izin ver.</span><span class="sxs-lookup"><span data-stu-id="b087a-179">User instances allow users to create instances at run time that run under the user's own security context, and not in the security context of a more privileged system service.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="b087a-180">Kullanıcı örnekleri yalnızca onu kullanan tüm uygulamaları tam güvenilir olduğu senaryolarda kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="b087a-180">User instances should only be used in scenarios where all the applications using it are fully trusted.</span></span>  
  
 <span data-ttu-id="b087a-181">Kullanıcı örneği senaryoları şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="b087a-181">User instance scenarios include:</span></span>  
  
- <span data-ttu-id="b087a-182">Herhangi bir tek kullanıcı uygulama burada veri paylaşımı gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="b087a-182">Any single-user application where sharing data is not required.</span></span>  
  
- <span data-ttu-id="b087a-183">ClickOnce dağıtımı.</span><span class="sxs-lookup"><span data-stu-id="b087a-183">ClickOnce deployment.</span></span> <span data-ttu-id="b087a-184">.NET Framework 2.0 (veya üzeri) ve SQL Server Express hedef bilgisayarda zaten yüklüyse, bir ClickOnce eylem sonucu olarak karşıdan yükleme paketini yüklenebilir ve yönetici olmayan kullanıcılar tarafından kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="b087a-184">If the .NET Framework 2.0 (or later) and SQL Server Express are already installed on the target computer, the installation package downloaded as a result of a ClickOnce action can be installed and used by non-administrator users.</span></span> <span data-ttu-id="b087a-185">Bu kurulumun bir parçası olduğu yönetici SQL Server Express yüklemeniz gerektiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="b087a-185">Note that an administrator must install SQL Server Express if that is part of the setup.</span></span> <span data-ttu-id="b087a-186">Daha fazla bilgi için [Windows Forms için ClickOnce dağıtımı](../../../winforms/clickonce-deployment-for-windows-forms.md).</span><span class="sxs-lookup"><span data-stu-id="b087a-186">For more information, see [ClickOnce Deployment for Windows Forms](../../../winforms/clickonce-deployment-for-windows-forms.md).</span></span>
  
- <span data-ttu-id="b087a-187">Özel ASP.NET, Windows kimlik doğrulaması kullanarak barındırma.</span><span class="sxs-lookup"><span data-stu-id="b087a-187">Dedicated ASP.NET hosting using Windows Authentication.</span></span> <span data-ttu-id="b087a-188">Tek bir SQL Server Express örneği intranet üzerinde barındırılabilir.</span><span class="sxs-lookup"><span data-stu-id="b087a-188">A single SQL Server Express instance can be hosted on an intranet.</span></span> <span data-ttu-id="b087a-189">Uygulamayı, kimliğe bürünme kullanılmadığında ASPNET Windows hesabı kullanarak bağlanır.</span><span class="sxs-lookup"><span data-stu-id="b087a-189">The application connects using the ASPNET Windows account, not by using impersonation.</span></span> <span data-ttu-id="b087a-190">Kullanıcı örnekleri, üçüncü taraf veya paylaşılan barındırma burada tüm uygulamalar aynı kullanıcı örneği paylaşımında yapabileceği ve artık birbirinden yalıtılmış kalır senaryoları için kullanılmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="b087a-190">User instances should not be used for third-party or shared hosting scenarios where all applications would share the same user instance and would no longer remain isolated from each other.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b087a-191">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="b087a-191">See also</span></span>

- [<span data-ttu-id="b087a-192">SQL Server ve ADO.NET</span><span class="sxs-lookup"><span data-stu-id="b087a-192">SQL Server and ADO.NET</span></span>](../../../../../docs/framework/data/adonet/sql/index.md)
- [<span data-ttu-id="b087a-193">Bağlantı Dizeleri</span><span class="sxs-lookup"><span data-stu-id="b087a-193">Connection Strings</span></span>](../../../../../docs/framework/data/adonet/connection-strings.md)
- [<span data-ttu-id="b087a-194">Veri Kaynağına Bağlanma</span><span class="sxs-lookup"><span data-stu-id="b087a-194">Connecting to a Data Source</span></span>](../../../../../docs/framework/data/adonet/connecting-to-a-data-source.md)
- [<span data-ttu-id="b087a-195">ADO.NET yönetilen sağlayıcıları ve DataSet Geliştirici Merkezi</span><span class="sxs-lookup"><span data-stu-id="b087a-195">ADO.NET Managed Providers and DataSet Developer Center</span></span>](https://go.microsoft.com/fwlink/?LinkId=217917)
