---
title: (WCF Veri Hizmetleri) veri hizmeti bağlamını yönetme
ms.date: 03/30/2017
ms.assetid: 15b19d09-7de7-4638-9556-6ef396cc45ec
ms.openlocfilehash: 329e3ee222b8375d82e6d1234dd89b4fa2c6c7c0
ms.sourcegitcommit: c7a7e1468bf0fa7f7065de951d60dfc8d5ba89f5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/14/2019
ms.locfileid: "65582665"
---
# <a name="managing-the-data-service-context-wcf-data-services"></a>(WCF Veri Hizmetleri) veri hizmeti bağlamını yönetme
<xref:System.Data.Services.Client.DataServiceContext> Sınıfı belirtilen veri hizmeti karşı desteklenen işlemler kapsüller. Ancak [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Hizmetleri durum bilgisiz, içeriği değil. Bu nedenle, kullanabileceğiniz <xref:System.Data.Services.Client.DataServiceContext> değişiklik yönetimi gibi özellikleri desteklemek için veri hizmeti ile etkileşim arasında istemci durumunu korumak üzere sınıfı. Bu sınıf ayrıca kimlikleri yöneten ve değişiklikleri izler.  
  
## <a name="merge-options-and-identity-resolution"></a>Birleştirme seçeneklerini ve kimlik çözümlemesi  
 Olduğunda bir <xref:System.Data.Services.Client.DataServiceQuery%601> olan yürütüldü, akış yanıt varlıkları nesnelerini gerçekleştirilmiş. Daha fazla bilgi için [nesne gerçekleştirme](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md). Bir yanıt iletisi girişleri nesnelerini gerçekleştirilmiş yolu altında sorgu çalıştırılmış olsaydı birleştirme seçeneğe bağlıdır ve kimlik çözünürlüğüne göre gerçekleştirilir. Birden çok sorgu veya yükleme tek bir kapsamda yürütülür istediğinde <xref:System.Data.Services.Client.DataServiceContext>, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] istemci, yalnızca belirli bir anahtar değere sahip bir nesne tek bir örneğini izler. Kimlik çözümlemesi için kullanılan bu anahtarı bir varlığı benzersiz olarak tanımlar.  
  
 Varsayılan olarak, istemci yalnızca bir giriş zaten tarafından izlenmiyor varlıklar için bir nesneye akışı yanıt gerçekleştiren <xref:System.Data.Services.Client.DataServiceContext>. Bu önbellek zaten içindeki nesnelerde yapılan değişiklikler geçersiz kılınmamasını anlamına gelir. Belirterek bu davranışı denetlenen bir <xref:System.Data.Services.Client.MergeOption> değer sorguları ve işlemlerinin. Bu seçeneği ayarlanarak belirtilir <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> özellikte <xref:System.Data.Services.Client.DataServiceContext>. Varsayılan birleştirme seçeneği değer <xref:System.Data.Services.Client.MergeOption.AppendOnly>. Bu yalnızca zaten izlenmiyor, varlıklar için nesneleri varolan nesneleri geçersiz kılınmamasını yani gerçekleştiren. Veri hizmetinden güncelleştirmeleri tarafından üzerine istemcide nesnelere değişiklikleri önlemek için başka bir yol belirtmektir <xref:System.Data.Services.Client.MergeOption.PreserveChanges>. Belirttiğinizde <xref:System.Data.Services.Client.MergeOption.OverwriteChanges>, istemci üzerinde nesne değerleri değiştirilir yanıt akışı içindeki en son değerlerle bile bu nesneler için değişiklikler zaten yapılmıştır. Olduğunda bir <xref:System.Data.Services.Client.MergeOption.NoTracking> birleştirme seçeneği kullanıldığında, <xref:System.Data.Services.Client.DataServiceContext> istemci nesneler üzerinde veri hizmetine yapılan değişiklikleri gönderemez. Bu seçenek belirtilmişse, değişiklikler her zaman veri hizmetinden alınan değerlerle üzerine yazılır.  
  
## <a name="managing-concurrency"></a>Eşzamanlılığı yönetme  
 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Güncelleştirme çakışmalarını algılamak veri hizmeti sağlayan iyimser eşzamanlılık destekler. Veri hizmeti sağlayıcısı, veri hizmeti varlıklarda yapılan değişiklikler için eşzamanlılık belirteci kullanarak denetlemesini şekilde yapılandırılabilir. Bu belirteci bir varlık türü bir kaynak değişip değişmediğini belirlemek için veri hizmeti tarafından doğrulanır bir veya daha fazla özelliklerini içerir. ETag başlığını isteklerini ve yanıtlarını data Service'ten bulunan eşzamanlılık belirteçleri için sizin tarafınızdan yönetilen [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] istemci. Daha fazla bilgi için [veri hizmetini güncelleştirme](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).  
  
 <xref:System.Data.Services.Client.DataServiceContext> El ile kullanarak bildirilmiştir nesnelere yapılan değişiklikleri izler ve <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A>, ve <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A>, ya da bir <xref:System.Data.Services.Client.DataServiceCollection%601>. Zaman <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> yöntemi çağrıldığında, istemci değişiklikleri veri hizmetine gönderir. <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> İstemci veri değişikliklerini veri hizmetindeki değişiklikler ile çakıştığında başarısız olabilir. Bu durumda, varlık kaynağı güncelleştirme verilerini yeniden almaya sorgulaması gerekir. Sorgu kullanarak veri hizmeti değişiklikleri üzerine yazmak için yürütme <xref:System.Data.Services.Client.MergeOption.PreserveChanges> birleştirme seçeneği. Çağırdığınızda <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> diğer zaten veri hizmeti kaynakta yapılan değişiklikler değil sürece yeniden istemcide korunur değişiklikleri veri hizmetine kalıcı.  
  
## <a name="saving-changes"></a>Değişiklikler kaydediliyor  
 Değişiklikleri izlenir <xref:System.Data.Services.Client.DataServiceContext> örnek ancak sunucuya hemen gönderilmez. Belirtilen bir etkinlik için gerekli değişiklikleri tamamladıktan sonra çağrı <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> veri hizmetine yapılan tüm değişiklikler göndermek için. A <xref:System.Data.Services.Client.DataServiceResponse> sonra döndürülen nesne <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> işlemi tamamlanmıştır. <xref:System.Data.Services.Client.DataServiceResponse> Nesne içeren bir dizi <xref:System.Data.Services.Client.OperationResponse> , sırayla bir dizi içeren nesneleri <xref:System.Data.Services.Client.EntityDescriptor> veya <xref:System.Data.Services.Client.LinkDescriptor> değişiklikleri temsil örneklerinin kalıcı veya çalıştı. Bir varlık oluşturulduğunda veya veri hizmeti, değiştirilen <xref:System.Data.Services.Client.EntityDescriptor> oluşturulan gibi herhangi bir sunucu tarafından oluşturulan özellik değerleri dahil olmak üzere güncelleştirilen varlığı için başvuru içerir `ProductID` önceki örnekte değeri. İstemci Kitaplığı, bu yeni değerleri için .NET Framework nesne otomatik olarak güncelleştirir.  
  
 Başarılı bir ekleme ve güncelleştirme işlemleri, durumu özelliği <xref:System.Data.Services.Client.EntityDescriptor> veya <xref:System.Data.Services.Client.LinkDescriptor> işlemle ilişkili nesne ayarlandığında <xref:System.Data.Services.Client.EntityStates.Unchanged> ve yeni değerleri kullanarak birleştirilir <xref:System.Data.Services.Client.MergeOption.OverwriteChanges>. Ne zaman bir INSERT, update veya veri hizmetini silme işlemi başarısız olursa, varlık durumu aynı kalır önce olduğu gibi <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> çağrıldı ve <xref:System.Data.Services.Client.OperationResponse.Error%2A> özelliği <xref:System.Data.Services.Client.OperationResponse> ayarlanmış bir <xref:System.Data.Services.Client.DataServiceRequestException> hakkında bilgi içeren bir hata oluştu. Daha fazla bilgi için [veri hizmetini güncelleştirme](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).  
  
### <a name="setting-the-http-method-for-updates"></a>HTTP yöntemi güncelleştirmeleri için ayarlama  
 Varsayılan olarak, .NET Framework istemci Kitaplığı güncelleştirmeleri var olan varlıkları için birleştirme isteği gönderir. Seçili varlık özelliklerini birleştirme isteği güncelleştirmeleri; ancak istemci birleştirme isteği, değiştirilmemiş olduğunda bile özellikleri her zaman tüm özellikleri içerir. [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Protokolü varlıkları güncelleştirmek için PUT isteklerini gönderme da destekler. PUT isteğinde, var olan bir varlığa temelde özellik değerlerini istemciden varlıkla yeni bir örneğini ile değiştirilir. PUT isteklerini kullanmak için ayarlanmış <xref:System.Data.Services.Client.SaveChangesOptions.ReplaceOnUpdate> üzerinde bayrak <xref:System.Data.Services.Client.SaveChangesOptions> çağırırken numaralandırma <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.  
  
> [!NOTE]
>  İstemci varlığın tüm özellikleri hakkında bilgi sahibi değildir, bir PUT İsteği bir birleştirme isteği farklı davranır. Bir varlık türüne yeni bir tür istemcide yansıtılırken bu durum ortaya çıkabilir. Yeni özellikler hizmeti veri modelini varlığı ekledikten sonra da oluşabilir ve <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> özelliği <xref:System.Data.Services.Client.DataServiceContext> ayarlanır `true` gibi istemci eşleme hataları yoksayılabilir. Bu durumlarda, bir PUT İsteği varsayılan değerlerine istemciye bilinmeyen herhangi bir özelliği sıfırlar.  
  
### <a name="post-tunneling"></a>POST tünel  
 Varsayılan olarak, istemci kitaplığı gönderir oluşturma, okuma, güncelleştirme ve silme istekleri için bir [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] hizmet POST, GET, PUT/Birleştir/düzeltme eki karşılık gelen HTTP yöntemleri kullanılarak ve SİLİN. Temel ilkeler, temsili durum aktarımı (REST) olarak bunu anlayışına. Ancak, her Web sunucusu uygulaması HTTP yöntemleri kümesini destekler. Bazı durumlarda, desteklenen yöntemlerden yalnızca almak ve sonrası için kısıtlı olabilir. Bir güvenlik duvarı gibi bir aracı belirli yöntemlerle istekleri engellediğinde bu durum oluşabilir. GET ve POST yöntemleri genellikle desteklenmediğinden [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] desteklenmeyen HTTP yöntemleri bir POST isteği kullanarak yürütmek için bir yol kullanır. Olarak bilinen *Tünelleme* veya *POST tünel*, böylece özel belirtilen gerçek yöntemi ile bir POST isteği göndermek bir istemci `X-HTTP-Method` başlığı. POST istekleri için tüneli etkinleştirmek için ayarlayın <xref:System.Data.Services.Client.DataServiceContext.UsePostTunneling%2A> özelliği <xref:System.Data.Services.Client.DataServiceContext> için örnek `true`.  
  
## <a name="see-also"></a>Ayrıca bkz.

- [WCF Veri Hizmetleri İstemci Kitaplığı](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
- [Veri Hizmetini Güncelleştirme](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md)
- [Zaman Uyumsuz İşlemler](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)
- [Toplu İşlemler](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md)
