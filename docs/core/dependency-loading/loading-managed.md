---
title: Yönetilen derleme yükleme algoritması-.NET Core
description: .NET Core 'da yönetilen derleme yükleme algoritması ayrıntılarının açıklaması
ms.date: 08/09/2019
author: sdmaclea
ms.author: stmaclea
ms.openlocfilehash: bf95cbd0eebed064f0198ae9b0f7a4288a938f8a
ms.sourcegitcommit: 6f28b709592503d27077b16fff2e2eacca569992
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/28/2019
ms.locfileid: "70105367"
---
# <a name="managed-assembly-loading-algorithm"></a><span data-ttu-id="472e2-103">Yönetilen derleme yükleme algoritması</span><span class="sxs-lookup"><span data-stu-id="472e2-103">Managed assembly loading algorithm</span></span>

<span data-ttu-id="472e2-104">Yönetilen derlemeler, çeşitli aşamalar içeren bir algoritmayla bulunur ve yüklenir.</span><span class="sxs-lookup"><span data-stu-id="472e2-104">Managed assemblies are located and loaded with an algorithm involving various stages.</span></span>

<span data-ttu-id="472e2-105">Uydu derlemeleri ve `WinRT` derlemeler hariç tüm yönetilen derlemeler aynı algoritmayı kullanır.</span><span class="sxs-lookup"><span data-stu-id="472e2-105">All managed assemblies except satellite assemblies and `WinRT` assemblies use the same algorithm.</span></span>

## <a name="when-are-managed-assemblies-loaded"></a><span data-ttu-id="472e2-106">Yönetilen derlemeler ne zaman yüklenir?</span><span class="sxs-lookup"><span data-stu-id="472e2-106">When are managed assemblies loaded?</span></span>

<span data-ttu-id="472e2-107">Yönetilen bir derleme yükünü tetiklemek için en yaygın mekanizma statik bir derleme başvurusudur.</span><span class="sxs-lookup"><span data-stu-id="472e2-107">The most common mechanism to trigger a managed assembly load is a static assembly reference.</span></span> <span data-ttu-id="472e2-108">Bu başvurular, kod başka bir derlemede tanımlı bir tür kullandığında derleyici tarafından eklenir.</span><span class="sxs-lookup"><span data-stu-id="472e2-108">These references are inserted by the compiler whenever code uses a type defined in another assembly.</span></span> <span data-ttu-id="472e2-109">Bu derlemeler çalışma zamanının gerektirdiği`load-by-name`şekilde yüklenir ().</span><span class="sxs-lookup"><span data-stu-id="472e2-109">These assemblies are loaded (`load-by-name`) as needed by the runtime.</span></span>

<span data-ttu-id="472e2-110">Belirli API 'lerin doğrudan kullanımı da yükleri tetikleyecektir:</span><span class="sxs-lookup"><span data-stu-id="472e2-110">The direct use of specific APIs will also trigger loads:</span></span>

|<span data-ttu-id="472e2-111">API</span><span class="sxs-lookup"><span data-stu-id="472e2-111">API</span></span>  |<span data-ttu-id="472e2-112">Açıklama</span><span class="sxs-lookup"><span data-stu-id="472e2-112">Description</span></span>  |<span data-ttu-id="472e2-113">`Active`<xref:System.Runtime.Loader.AssemblyLoadContext></span><span class="sxs-lookup"><span data-stu-id="472e2-113">`Active` <xref:System.Runtime.Loader.AssemblyLoadContext></span></span> |
|---------|---------|---------|
|<xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromAssemblyName%2A?displayProperty=nameWithType>|`Load-by-name`|<span data-ttu-id="472e2-114">[Bu](../../csharp/language-reference/keywords/this.md) örnek.</span><span class="sxs-lookup"><span data-stu-id="472e2-114">The [this](../../csharp/language-reference/keywords/this.md) instance.</span></span>|
|<xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromAssemblyPath%2A?displayProperty=nameWithType><p><xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromNativeImagePath%2A?displayProperty=nameWithType>|<span data-ttu-id="472e2-115">Yoldan yükle.</span><span class="sxs-lookup"><span data-stu-id="472e2-115">Load from path.</span></span>|<span data-ttu-id="472e2-116">[Bu](../../csharp/language-reference/keywords/this.md) örnek.</span><span class="sxs-lookup"><span data-stu-id="472e2-116">The [this](../../csharp/language-reference/keywords/this.md) instance.</span></span>|
<xref:System.Runtime.Loader.AssemblyLoadContext.LoadFromStream%2A?displayProperty=nameWithType>|<span data-ttu-id="472e2-117">Nesnesinden yükle.</span><span class="sxs-lookup"><span data-stu-id="472e2-117">Load from object.</span></span>|<span data-ttu-id="472e2-118">[Bu](../../csharp/language-reference/keywords/this.md) örnek.</span><span class="sxs-lookup"><span data-stu-id="472e2-118">The [this](../../csharp/language-reference/keywords/this.md) instance.</span></span>|
|<xref:System.Reflection.Assembly.LoadFile%2A?displayProperty=nameWithType>|<span data-ttu-id="472e2-119">Yeni <xref:System.Runtime.Loader.AssemblyLoadContext> bir örnekteki yoldan yükleme</span><span class="sxs-lookup"><span data-stu-id="472e2-119">Load from path in a new <xref:System.Runtime.Loader.AssemblyLoadContext> instance</span></span>|<span data-ttu-id="472e2-120">Yeni <xref:System.Runtime.Loader.AssemblyLoadContext> örnek.</span><span class="sxs-lookup"><span data-stu-id="472e2-120">The new <xref:System.Runtime.Loader.AssemblyLoadContext> instance.</span></span>|
<xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>|<span data-ttu-id="472e2-121"><xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> Örnekteki yoldan yükleyin.</span><span class="sxs-lookup"><span data-stu-id="472e2-121">Load from path in the <xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> instance.</span></span><p><span data-ttu-id="472e2-122"><xref:System.Runtime.Loader.AssemblyLoadContext.Resolving> Öğesine<xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType>bir işleyici ekler.</span><span class="sxs-lookup"><span data-stu-id="472e2-122">Adds a <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving> handler to <xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="472e2-123">İşleyici, derlemenin bağımlılıklarını dizinden yükleyecek.</span><span class="sxs-lookup"><span data-stu-id="472e2-123">The handler will load the assembly's dependencies from its directory.</span></span>|<span data-ttu-id="472e2-124"><xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> Örnek.</span><span class="sxs-lookup"><span data-stu-id="472e2-124">The <xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> instance.</span></span>|
|<xref:System.Reflection.Assembly.Load(System.Reflection.AssemblyName)?displayProperty=nameWithType><p><xref:System.Reflection.Assembly.Load(System.String)?displayProperty=nameWithType><p><xref:System.Reflection.Assembly.LoadWithPartialName%2A?displayProperty=nameWithType>|<span data-ttu-id="472e2-125">`Load-by-name`.</span><span class="sxs-lookup"><span data-stu-id="472e2-125">`Load-by-name`.</span></span>|<span data-ttu-id="472e2-126">Çağırandan çıkarsandı.</span><span class="sxs-lookup"><span data-stu-id="472e2-126">Inferred from caller.</span></span><p><span data-ttu-id="472e2-127">Yöntemleri <xref:System.Runtime.Loader.AssemblyLoadContext> tercih edin.</span><span class="sxs-lookup"><span data-stu-id="472e2-127">Prefer <xref:System.Runtime.Loader.AssemblyLoadContext> methods.</span></span>|
|<xref:System.Reflection.Assembly.Load(System.Byte[])?displayProperty=nameWithType><p><xref:System.Reflection.Assembly.Load(System.Byte[],System.Byte[])?displayProperty=nameWithType>|<span data-ttu-id="472e2-128">Nesnesinden yükle.</span><span class="sxs-lookup"><span data-stu-id="472e2-128">Load from object.</span></span>|<span data-ttu-id="472e2-129">Çağırandan çıkarsandı.</span><span class="sxs-lookup"><span data-stu-id="472e2-129">Inferred from caller.</span></span><p><span data-ttu-id="472e2-130">Yöntemleri <xref:System.Runtime.Loader.AssemblyLoadContext> tercih edin.</span><span class="sxs-lookup"><span data-stu-id="472e2-130">Prefer <xref:System.Runtime.Loader.AssemblyLoadContext> methods.</span></span>|
<xref:System.Type.GetType(System.String)?displayProperty=nameWithType><p><xref:System.Type.GetType(System.String,System.Boolean)?displayProperty=nameWithType><p><xref:System.Type.GetType(System.String,System.Boolean,System.Boolean)?displayProperty=nameWithType>|<span data-ttu-id="472e2-131">`Load-by-name`.</span><span class="sxs-lookup"><span data-stu-id="472e2-131">`Load-by-name`.</span></span>|<span data-ttu-id="472e2-132">Çağırandan çıkarsandı.</span><span class="sxs-lookup"><span data-stu-id="472e2-132">Inferred from caller.</span></span><p><span data-ttu-id="472e2-133">Bağımsız`assemblyResolver` değişken içeren yöntemleri tercih <xref:System.Type.GetType%2A?displayProperty=nameWithType> edin.</span><span class="sxs-lookup"><span data-stu-id="472e2-133">Prefer <xref:System.Type.GetType%2A?displayProperty=nameWithType> methods with an `assemblyResolver` argument.</span></span>|
<xref:System.Reflection.Assembly.GetType%2A?displayProperty=nameWithType>|<span data-ttu-id="472e2-134">Tür `name` , derleme nitelikli genel tür tanımlıyor, a `Load-by-name`tetikleyicisi.</span><span class="sxs-lookup"><span data-stu-id="472e2-134">If type `name` describes an assembly qualified generic type, trigger a `Load-by-name`.</span></span>|<span data-ttu-id="472e2-135">Çağırandan çıkarsandı.</span><span class="sxs-lookup"><span data-stu-id="472e2-135">Inferred from caller.</span></span><p><span data-ttu-id="472e2-136">Derleme <xref:System.Type.GetType%2A?displayProperty=nameWithType> nitelikli tür adları kullanırken tercih edilir.</span><span class="sxs-lookup"><span data-stu-id="472e2-136">Prefer <xref:System.Type.GetType%2A?displayProperty=nameWithType> when using assembly qualified type names.</span></span>|
<xref:System.Activator.CreateInstance(System.String,System.String)?displayProperty=nameWithType><p><xref:System.Activator.CreateInstance(System.String,System.String,System.Object[])?displayProperty=nameWithType><p><xref:System.Activator.CreateInstance(System.String,System.String,System.Boolean,System.Reflection.BindingFlags,System.Reflection.Binder,System.Object[],System.Globalization.CultureInfo,System.Object[])?displayProperty=nameWithType>|<span data-ttu-id="472e2-137">`Load-by-name`.</span><span class="sxs-lookup"><span data-stu-id="472e2-137">`Load-by-name`.</span></span>|<span data-ttu-id="472e2-138">Çağırandan çıkarsandı.</span><span class="sxs-lookup"><span data-stu-id="472e2-138">Inferred from caller.</span></span><p><span data-ttu-id="472e2-139">Bağımsız<xref:System.Type> değişken alan yöntemler tercih <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType> edin.</span><span class="sxs-lookup"><span data-stu-id="472e2-139">Prefer <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType> methods taking a <xref:System.Type> argument.</span></span>|

## <a name="algorithm"></a><span data-ttu-id="472e2-140">Algoritmalar</span><span class="sxs-lookup"><span data-stu-id="472e2-140">Algorithm</span></span>

<span data-ttu-id="472e2-141">Aşağıdaki algoritma, çalışma zamanının yönetilen bir derlemeyi nasıl yüklediğini açıklar.</span><span class="sxs-lookup"><span data-stu-id="472e2-141">The following algorithm describes how the runtime loads a managed assembly.</span></span>

1. <span data-ttu-id="472e2-142">`active` Öğesini<xref:System.Runtime.Loader.AssemblyLoadContext>saptayın.</span><span class="sxs-lookup"><span data-stu-id="472e2-142">Determine the `active` <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span>

    - <span data-ttu-id="472e2-143">Statik derleme başvurusu `active` <xref:System.Runtime.Loader.AssemblyLoadContext> için, başvuran derlemeyi yükleyen örnek olur.</span><span class="sxs-lookup"><span data-stu-id="472e2-143">For a static assembly reference, the `active` <xref:System.Runtime.Loader.AssemblyLoadContext> is the instance that loaded the referring assembly.</span></span>
    - <span data-ttu-id="472e2-144">Tercih edilen API 'ler `active` <xref:System.Runtime.Loader.AssemblyLoadContext> açık hale getirir.</span><span class="sxs-lookup"><span data-stu-id="472e2-144">Preferred APIs make the `active` <xref:System.Runtime.Loader.AssemblyLoadContext> explicit.</span></span>
    - <span data-ttu-id="472e2-145">Diğer API 'Ler `active`. <xref:System.Runtime.Loader.AssemblyLoadContext></span><span class="sxs-lookup"><span data-stu-id="472e2-145">Other APIs infer the `active` <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span> <span data-ttu-id="472e2-146">Bu API 'ler için, <xref:System.Runtime.Loader.AssemblyLoadContext.CurrentContextualReflectionContext?displayProperty=nameWithType> özelliği kullanılır.</span><span class="sxs-lookup"><span data-stu-id="472e2-146">For these APIs, the <xref:System.Runtime.Loader.AssemblyLoadContext.CurrentContextualReflectionContext?displayProperty=nameWithType> property is used.</span></span> <span data-ttu-id="472e2-147">Değeri ise `null`, çıkartılan <xref:System.Runtime.Loader.AssemblyLoadContext> örnek kullanılır.</span><span class="sxs-lookup"><span data-stu-id="472e2-147">If its value is `null`, then the inferred <xref:System.Runtime.Loader.AssemblyLoadContext> instance is used.</span></span>
    - <span data-ttu-id="472e2-148">Yukarıdaki tabloya bakın.</span><span class="sxs-lookup"><span data-stu-id="472e2-148">See table above.</span></span>

2. <span data-ttu-id="472e2-149">Yöntemler için, etkin <xref:System.Runtime.Loader.AssemblyLoadContext> derlemeyi yükler. `Load-by-name`</span><span class="sxs-lookup"><span data-stu-id="472e2-149">For the `Load-by-name` methods, the active <xref:System.Runtime.Loader.AssemblyLoadContext> loads the assembly.</span></span> <span data-ttu-id="472e2-150">Öncelik sırasına göre:</span><span class="sxs-lookup"><span data-stu-id="472e2-150">In priority order by:</span></span>
    - <span data-ttu-id="472e2-151">`cache-by-name`Denetleniyor.</span><span class="sxs-lookup"><span data-stu-id="472e2-151">Checking its `cache-by-name`.</span></span>

    - <span data-ttu-id="472e2-152"><xref:System.Runtime.Loader.AssemblyLoadContext.Load%2A?displayProperty=nameWithType> İşlevi çağrılıyor.</span><span class="sxs-lookup"><span data-stu-id="472e2-152">Calling the <xref:System.Runtime.Loader.AssemblyLoadContext.Load%2A?displayProperty=nameWithType> function.</span></span>

    - <span data-ttu-id="472e2-153">Örneklerin önbelleği denetleniyor ve [yönetilen derleme varsayılan araştırma](default-probing.md#managed-assembly-default-probing) mantığı çalıştırılıyor. <xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="472e2-153">Checking the <xref:System.Runtime.Loader.AssemblyLoadContext.Default%2A?displayProperty=nameWithType> instances' cache and running [managed assembly default probing](default-probing.md#managed-assembly-default-probing) logic.</span></span>

    - <span data-ttu-id="472e2-154">Etkin assemblyloadcontext için olay oluşturma. <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="472e2-154">Raising the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event for the active AssemblyLoadContext.</span></span>

    - <span data-ttu-id="472e2-155"><xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> Olayı oluşturma.</span><span class="sxs-lookup"><span data-stu-id="472e2-155">Raising the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

3. <span data-ttu-id="472e2-156">Diğer yük `active` <xref:System.Runtime.Loader.AssemblyLoadContext> türleri için, derlemeyi yükler.</span><span class="sxs-lookup"><span data-stu-id="472e2-156">For the other types of loads, the `active` <xref:System.Runtime.Loader.AssemblyLoadContext> loads the assembly.</span></span> <span data-ttu-id="472e2-157">Öncelik sırasına göre:</span><span class="sxs-lookup"><span data-stu-id="472e2-157">In priority order by:</span></span>
    - <span data-ttu-id="472e2-158">`cache-by-name`Denetleniyor.</span><span class="sxs-lookup"><span data-stu-id="472e2-158">Checking its `cache-by-name`.</span></span>

    - <span data-ttu-id="472e2-159">Belirtilen yoldan veya ham derleme nesnesinden yükleniyor.</span><span class="sxs-lookup"><span data-stu-id="472e2-159">Loading from the specified path or raw assembly object.</span></span>

4. <span data-ttu-id="472e2-160">Her iki durumda da, bir derleme yeni yüklenmişse:</span><span class="sxs-lookup"><span data-stu-id="472e2-160">In either case, if an assembly is newly loaded, then:</span></span>
   - <span data-ttu-id="472e2-161"><xref:System.AppDomain.AssemblyLoad?displayProperty=nameWithType> Olay tetiklenir.</span><span class="sxs-lookup"><span data-stu-id="472e2-161">The <xref:System.AppDomain.AssemblyLoad?displayProperty=nameWithType> event is raised.</span></span>
   - <span data-ttu-id="472e2-162"><xref:System.Runtime.Loader.AssemblyLoadContext> Derlemenin`cache-by-name`örneğine bir başvuru eklenir.</span><span class="sxs-lookup"><span data-stu-id="472e2-162">A reference is added to the assembly's <xref:System.Runtime.Loader.AssemblyLoadContext> instance's `cache-by-name`.</span></span>

5. <span data-ttu-id="472e2-163">Derleme bulunursa, `active` <xref:System.Runtime.Loader.AssemblyLoadContext> örnek `cache-by-name`için gerektiğinde bir başvuru eklenir.</span><span class="sxs-lookup"><span data-stu-id="472e2-163">If the assembly is found, a reference is added as needed to the `active` <xref:System.Runtime.Loader.AssemblyLoadContext> instance's `cache-by-name`.</span></span>
